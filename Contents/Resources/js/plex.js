/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 * jQuery JavaScript Library v1.8.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Aug 09 2012 16:24:48 GMT-0400 (Eastern Daylight Time)
 */

/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2012 jQuery Foundation and other contributors
 *  Released under the MIT license
 *  http://sizzlejs.com/
 */

//     Underscore.js 1.4.2
//     http://underscorejs.org
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore may be freely distributed under the MIT license.

//     (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

// moment.js
// version : 1.7.0
// author : Tim Wood
// license : MIT
// momentjs.com

/*
 ### jQuery XML to JSON Plugin v1.1 - 2008-07-01 ###
 * http://www.fyneworks.com/ - diego@fyneworks.com
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 ###
 Website: http://www.fyneworks.com/jquery/xml-to-json/
*/

/*
 *  jssha256 version 0.1  -  Copyright 2006 B. Poettering
 *
 *  This program is free software; you can redistribute it and/or
 *  modify it under the terms of the GNU General Public License as
 *  published by the Free Software Foundation; either version 2 of the
 *  License, or (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *  General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program; if not, write to the Free Software
 *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
 *  02111-1307 USA
 */

/*

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/

/**
 * @license RequireJS text 2.0.5 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20120318
 */

/**
 * Copyright 2013 Craig Campbell
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Mousetrap is a simple keyboard shortcut library for Javascript with
 * no external dependencies
 *
 * @version 1.3.2
 * @url craig.is/killing/mice
 */

/**
 * Copyright (c) 2011 Felix Gnass [fgnass at neteye dot de]
 * Licensed under the MIT license
 */

/* ===================================================
 * bootstrap-transition.js v2.2.0
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ============================================================
 * bootstrap-button.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#buttons
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* ============================================================
 * bootstrap-dropdown.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* =========================================================
 * bootstrap-modal.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

/* ===========================================================
 * bootstrap-tooltip.js v2.0.4
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2013 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.8.4
 *
 */

/*
 * HTML5 Sortable jQuery Plugin
 * http://farhadi.ir/projects/html5sortable
 * 
 * Copyright 2012, Ali Farhadi
 * Released under the MIT license.
 */

/*
Copyright 2012 Igor Vaynberg

Version: @@ver@@ Timestamp: @@timestamp@@

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/

/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 0.4.6
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */

function encode64(e){var t,n,i,a,s,r="",l="",o="",c=0;do t=e.charCodeAt(c++),n=e.charCodeAt(c++),l=e.charCodeAt(c++),i=t>>2,a=(3&t)<<4|n>>4,s=(15&n)<<2|l>>6,o=63&l,isNaN(n)?s=o=64:isNaN(l)&&(o=64),r=r+b64array.charAt(i)+b64array.charAt(a)+b64array.charAt(s)+b64array.charAt(o),t=n=l="",i=a=s=o="";while(e.length>c);return r}function decode64(e){var t,n,i,a,s,r="",l="",o="",c=0,d=/[^A-Za-z0-9\+\/\=]/g;d.exec(e)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");
do i=b64array.indexOf(e.charAt(c++)),a=b64array.indexOf(e.charAt(c++)),s=b64array.indexOf(e.charAt(c++)),o=b64array.indexOf(e.charAt(c++)),t=i<<2|a>>4,n=(15&a)<<4|s>>2,l=(3&s)<<6|o,r+=String.fromCharCode(t),64!=s&&(r+=String.fromCharCode(n)),64!=o&&(r+=String.fromCharCode(l)),t=n=l="",i=a=s=o="";while(e.length>c);return unescape(r)}function string_to_array(e){for(var t=e.length,n=Array(t),i=0;t>i;i++)n[i]=e.charCodeAt(i);return n}function array_to_hex_string(e){for(var t="",n=0;e.length>n;n++)t+=SHA256_hexchars[e[n]>>4]+SHA256_hexchars[15&e[n]];
return t}function array_to_string(e){for(var t="",n=0;e.length>n;n++)t+=String.fromCharCode(e[n]);return t}function SHA256_init(){SHA256_H=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],SHA256_buf=[],SHA256_len=0}function SHA256_write(e){SHA256_buf="string"==typeof e?SHA256_buf.concat(string_to_array(e)):SHA256_buf.concat(e);for(var t=0;SHA256_buf.length>=t+64;t+=64)SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf.slice(t,t+64));SHA256_buf=SHA256_buf.slice(t),SHA256_len+=e.length
}function SHA256_finalize(){if(SHA256_buf[SHA256_buf.length]=128,SHA256_buf.length>56){for(var e=SHA256_buf.length;64>e;e++)SHA256_buf[e]=0;SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf),SHA256_buf.length=0}for(var e=SHA256_buf.length;59>e;e++)SHA256_buf[e]=0;SHA256_buf[59]=255&SHA256_len>>>29,SHA256_buf[60]=255&SHA256_len>>>21,SHA256_buf[61]=255&SHA256_len>>>13,SHA256_buf[62]=255&SHA256_len>>>5,SHA256_buf[63]=255&SHA256_len<<3,SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf);for(var t=Array(32),e=0;8>e;e++)t[4*e+0]=SHA256_H[e]>>>24,t[4*e+1]=255&SHA256_H[e]>>16,t[4*e+2]=255&SHA256_H[e]>>8,t[4*e+3]=255&SHA256_H[e];
return delete SHA256_H,delete SHA256_buf,delete SHA256_len,t}function SHA256_hash(e){var t;return SHA256_init(),SHA256_write(e),t=SHA256_finalize(),array_to_hex_string(t)}function HMAC_SHA256_init(e){HMAC_SHA256_key="string"==typeof e?string_to_array(e):[].concat(e),HMAC_SHA256_key.length>64&&(SHA256_init(),SHA256_write(HMAC_SHA256_key),HMAC_SHA256_key=SHA256_finalize());for(var t=HMAC_SHA256_key.length;64>t;t++)HMAC_SHA256_key[t]=0;for(var t=0;64>t;t++)HMAC_SHA256_key[t]^=54;SHA256_init(),SHA256_write(HMAC_SHA256_key)
}function HMAC_SHA256_write(e){SHA256_write(e)}function HMAC_SHA256_finalize(){for(var e=SHA256_finalize(),t=0;64>t;t++)HMAC_SHA256_key[t]^=106;SHA256_init(),SHA256_write(HMAC_SHA256_key),SHA256_write(e);for(var t=0;64>t;t++)HMAC_SHA256_key[t]=0;return delete HMAC_SHA256_key,SHA256_finalize()}function HMAC_SHA256_MAC(e,t){var n;return HMAC_SHA256_init(e),HMAC_SHA256_write(t),n=HMAC_SHA256_finalize(),array_to_hex_string(n)}function SHA256_sigma0(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function SHA256_sigma1(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10
}function SHA256_Sigma0(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function SHA256_Sigma1(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function SHA256_Ch(e,t,n){return n^e&(t^n)}function SHA256_Maj(e,t,n){return e&t^n&(e^t)}function SHA256_Hash_Word_Block(e,t){for(var n=16;64>n;n++)t[n]=4294967295&SHA256_sigma1(t[n-2])+t[n-7]+SHA256_sigma0(t[n-15])+t[n-16];for(var i=[].concat(e),n=0;64>n;n++){var a=i[7]+SHA256_Sigma1(i[4])+SHA256_Ch(i[4],i[5],i[6])+SHA256_K[n]+t[n],s=SHA256_Sigma0(i[0])+SHA256_Maj(i[0],i[1],i[2]);
i.pop(),i.unshift(4294967295&a+s),i[4]=4294967295&i[4]+a}for(var n=0;8>n;n++)e[n]=4294967295&e[n]+i[n]}function SHA256_Hash_Byte_Block(e,t){for(var n=Array(16),i=0;16>i;i++)n[i]=t[4*i+0]<<24|t[4*i+1]<<16|t[4*i+2]<<8|t[4*i+3];SHA256_Hash_Word_Block(e,n)}function FastClick(e){var t,n=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");
this.onClick=function(){FastClick.prototype.onClick.apply(n,arguments)},this.onTouchStart=function(){FastClick.prototype.onTouchStart.apply(n,arguments)},this.onTouchMove=function(){FastClick.prototype.onTouchMove.apply(n,arguments)},this.onTouchEnd=function(){FastClick.prototype.onTouchEnd.apply(n,arguments)},this.onTouchCancel=function(){FastClick.prototype.onTouchCancel.apply(n,arguments)},void 0!==window.ontouchstart&&(e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,i){var a=Node.prototype.removeEventListener;
"click"===t?a.call(e,t,n.hijacked||n,i):a.call(e,t,n,i)},e.addEventListener=function(t,n,i){var a=Node.prototype.addEventListener;"click"===t?a.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):a.call(e,t,n,i)}),"function"==typeof e.onclick&&(t=e.onclick,e.addEventListener("click",function(e){t(e)},!1),e.onclick=null))}var requirejs,require,define;(function(e){function t(e,t){return g.call(e,t)}function n(e,t){var n,i,a,s,r,l,o,c,d,h,u=t&&t.split("/"),p=f.map,m=p&&p["*"]||{};
if(e&&"."===e.charAt(0))if(t){for(u=u.slice(0,u.length-1),e=u.concat(e.split("/")),c=0;e.length>c;c+=1)if(h=e[c],"."===h)e.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((u||m)&&p){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),u)for(d=u.length;d>0;d-=1)if(a=p[u.slice(0,d).join("/")],a&&(a=a[i])){s=a,r=c;break}if(s)break;!l&&m&&m[i]&&(l=m[i],o=c)}!s&&l&&(s=l,r=o),s&&(n.splice(0,r,s),e=n.join("/"))
}return e}function i(t,n){return function(){return d.apply(e,y.call(arguments,0).concat([t,n]))}}function a(e){return function(t){return n(t,e)}}function s(e){return function(t){p[e]=t}}function r(n){if(t(m,n)){var i=m[n];delete m[n],v[n]=!0,c.apply(e,i)}if(!t(p,n)&&!t(v,n))throw Error("No "+n);return p[n]}function l(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e){return function(){return f&&f.config&&f.config[e]||{}}}var c,d,h,u,p={},m={},f={},v={},g=Object.prototype.hasOwnProperty,y=[].slice;
h=function(e,t){var i,s=l(e),o=s[0];return e=s[1],o&&(o=n(o,t),i=r(o)),o?e=i&&i.normalize?i.normalize(e,a(t)):n(e,t):(e=n(e,t),s=l(e),o=s[0],e=s[1],o&&(i=r(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:i}},u={require:function(e){return i(e)},exports:function(e){var t=p[e];return t!==void 0?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:o(e)}}},c=function(n,a,l,o){var c,d,f,g,y,b,w=[];if(o=o||n,"function"==typeof l){for(a=!a.length&&l.length?["require","exports","module"]:a,y=0;a.length>y;y+=1)if(g=h(a[y],o),d=g.f,"require"===d)w[y]=u.require(n);
else if("exports"===d)w[y]=u.exports(n),b=!0;else if("module"===d)c=w[y]=u.module(n);else if(t(p,d)||t(m,d)||t(v,d))w[y]=r(d);else{if(!g.p)throw Error(n+" missing "+d);g.p.load(g.n,i(o,!0),s(d),{}),w[y]=p[d]}f=l.apply(p[n],w),n&&(c&&c.exports!==e&&c.exports!==p[n]?p[n]=c.exports:f===e&&b||(p[n]=f))}else n&&(p[n]=l)},requirejs=require=d=function(t,n,i,a,s){return"string"==typeof t?u[t]?u[t](n):r(h(t,n).f):(t.splice||(f=t,n.splice?(t=n,n=i,i=null):t=e),n=n||function(){},"function"==typeof i&&(i=a,a=s),a?c(e,t,n,i):setTimeout(function(){c(e,t,n,i)
},4),d)},d.config=function(e){return f=e,f.deps&&d(f.deps,f.callback),d},define=function(e,n,i){n.splice||(i=n,n=[]),t(p,e)||t(m,e)||(m[e]=[e,n,i])},define.amd={jQuery:!0}})(),define("libs/require/almond-0.2.5",function(){}),function(e,t){function n(e){var t=mt[e]={};return X.each(e.split(tt),function(e,n){t[n]=!0}),t}function i(e,n,i){if(i===t&&1===e.nodeType){var a="data-"+n.replace(vt,"-$1").toLowerCase();if(i=e.getAttribute(a),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:ft.test(i)?X.parseJSON(i):i
}catch(s){}X.data(e,n,i)}else i=t}return i}function a(e){var t;for(t in e)if(("data"!==t||!X.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function s(){return!1}function r(){return!0}function l(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function o(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function c(e,t,n){if(t=t||0,X.isFunction(t))return X.grep(e,function(e,i){var a=!!t.call(e,i,e);return a===n});if(t.nodeType)return X.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=X.grep(e,function(e){return 1===e.nodeType
});if(Rt.test(t))return X.filter(t,i,!n);t=X.filter(t,i)}return X.grep(e,function(e){return X.inArray(e,t)>=0===n})}function d(e){var t=jt.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function h(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function u(e,t){if(1===t.nodeType&&X.hasData(e)){var n,i,a,s=X._data(e),r=X._data(t,s),l=s.events;if(l){delete r.handle,r.events={};for(n in l)for(i=0,a=l[n].length;a>i;i++)X.event.add(t,n,l[n][i])
}r.data&&(r.data=X.extend({},r.data))}}function p(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),X.support.html5Clone&&e.innerHTML&&!X.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Jt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(X.expando))
}function m(e){return e.getElementsByTagName!==t?e.getElementsByTagName("*"):e.querySelectorAll!==t?e.querySelectorAll("*"):[]}function f(e){Jt.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,a=gn.length;a--;)if(t=gn[a]+n,t in e)return t;return i}function g(e,t){return e=t||e,"none"===X.css(e,"display")||!X.contains(e.ownerDocument,e)}function y(e,t){for(var n,i,a=[],s=0,r=e.length;r>s;s++)n=e[s],n.style&&(a[s]=X._data(n,"olddisplay"),t?(a[s]||"none"!==n.style.display||(n.style.display=""),""===n.style.display&&g(n)&&(a[s]=X._data(n,"olddisplay",k(n.nodeName)))):(i=nn(n,"display"),a[s]||"none"===i||X._data(n,"olddisplay",i)));
for(s=0;r>s;s++)n=e[s],n.style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?a[s]||"":"none"));return e}function b(e,t,n){var i=dn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function w(e,t,n,i){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>a;a+=2)"margin"===n&&(s+=X.css(e,n+vn[a],!0)),i?("content"===n&&(s-=parseFloat(nn(e,"padding"+vn[a]))||0),"margin"!==n&&(s-=parseFloat(nn(e,"border"+vn[a]+"Width"))||0)):(s+=parseFloat(nn(e,"padding"+vn[a]))||0,"padding"!==n&&(s+=parseFloat(nn(e,"border"+vn[a]+"Width"))||0));
return s}function x(e,t,n){var i="width"===t?e.offsetWidth:e.offsetHeight,a=!0,s=X.support.boxSizing&&"border-box"===X.css(e,"boxSizing");if(0>=i){if(i=nn(e,t),(0>i||null==i)&&(i=e.style[t]),hn.test(i))return i;a=s&&(X.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+w(e,t,n||(s?"border":"content"),a)+"px"}function k(e){if(pn[e])return pn[e];var t=X("<"+e+">").appendTo(q.body),n=t.css("display");return t.remove(),("none"===n||""===n)&&(an=q.body.appendChild(an||X.extend(q.createElement("iframe"),{frameBorder:0,width:0,height:0})),sn&&an.createElement||(sn=(an.contentWindow||an.contentDocument).document,sn.write("<!doctype html><html><body>"),sn.close()),t=sn.body.appendChild(sn.createElement(e)),n=nn(t,"display"),q.body.removeChild(an)),pn[e]=n,n
}function S(e,t,n,i){var a;if(X.isArray(t))X.each(t,function(t,a){n||wn.test(e)?i(e,a):S(e+"["+("object"==typeof a?t:"")+"]",a,n,i)});else if(n||"object"!==X.type(t))i(e,t);else for(a in t)S(e+"["+a+"]",t[a],n,i)}function C(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,a,s,r=t.toLowerCase().split(tt),l=0,o=r.length;if(X.isFunction(n))for(;o>l;l++)i=r[l],s=/^\+/.test(i),s&&(i=i.substr(1)||"*"),a=e[i]=e[i]||[],a[s?"unshift":"push"](n)}}function A(e,n,i,a,s,r){s=s||n.dataTypes[0],r=r||{},r[s]=!0;
for(var l,o=e[s],c=0,d=o?o.length:0,h=e===Rn;d>c&&(h||!l);c++)l=o[c](n,i,a),"string"==typeof l&&(!h||r[l]?l=t:(n.dataTypes.unshift(l),l=A(e,n,i,a,l,r)));return!h&&l||r["*"]||(l=A(e,n,i,a,"*",r)),l}function I(e,n){var i,a,s=X.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:a||(a={}))[i]=n[i]);a&&X.extend(!0,e,a)}function P(e,n,i){var a,s,r,l,o=e.contents,c=e.dataTypes,d=e.responseFields;for(s in d)s in i&&(n[d[s]]=i[s]);for(;"*"===c[0];)c.shift(),a===t&&(a=e.mimeType||n.getResponseHeader("content-type"));
if(a)for(s in o)if(o[s]&&o[s].test(a)){c.unshift(s);break}if(c[0]in i)r=c[0];else{for(s in i){if(!c[0]||e.converters[s+" "+c[0]]){r=s;break}l||(l=s)}r=r||l}return r?(r!==c[0]&&c.unshift(r),i[r]):t}function _(e,t){var n,i,a,s,r=e.dataTypes.slice(),l=r[0],o={},c=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),r[1])for(n in e.converters)o[n.toLowerCase()]=e.converters[n];for(;a=r[++c];)if("*"!==a){if("*"!==l&&l!==a){if(n=o[l+" "+a]||o["* "+a],!n)for(i in o)if(s=i.split(" "),s[1]===a&&(n=o[l+" "+s[0]]||o["* "+s[0]])){n===!0?n=o[i]:o[i]!==!0&&(a=s[0],r.splice(c--,0,a));
break}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(d){return{state:"parsererror",error:n?d:"No conversion from "+l+" to "+a}}}l=a}return{state:"success",data:t}}function T(){try{return new e.XMLHttpRequest}catch(t){}}function M(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function D(){return setTimeout(function(){Yn=t},0),Yn=X.now()}function L(e,t){X.each(t,function(t,n){for(var i=(Zn[t]||[]).concat(Zn["*"]),a=0,s=i.length;s>a;a++)if(i[a].call(e,t,n))return})}function E(e,t,n){var i,a=0,s=Xn.length,r=X.Deferred().always(function(){delete l.elem
}),l=function(){for(var t=Yn||D(),n=Math.max(0,o.startTime+o.duration-t),i=1-(n/o.duration||0),a=0,s=o.tweens.length;s>a;a++)o.tweens[a].run(i);return r.notifyWith(e,[o,i,n]),1>i&&s?n:(r.resolveWith(e,[o]),!1)},o=r.promise({elem:e,props:X.extend({},t),opts:X.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Yn||D(),duration:n.duration,tweens:[],createTween:function(t,n){var i=X.Tween(e,o.opts,t,n,o.opts.specialEasing[t]||o.opts.easing);return o.tweens.push(i),i},stop:function(t){for(var n=0,i=t?o.tweens.length:0;i>n;n++)o.tweens[n].run(1);
return t?r.resolveWith(e,[o,t]):r.rejectWith(e,[o,t]),this}}),c=o.props;for(N(c,o.opts.specialEasing);s>a;a++)if(i=Xn[a].call(o,e,c,o.opts))return i;return L(o,c),X.isFunction(o.opts.start)&&o.opts.start.call(e,o),X.fx.timer(X.extend(l,{anim:o,queue:o.opts.queue,elem:e})),o.progress(o.opts.progress).done(o.opts.done,o.opts.complete).fail(o.opts.fail).always(o.opts.always)}function N(e,t){var n,i,a,s,r;for(n in e)if(i=X.camelCase(n),a=t[i],s=e[n],X.isArray(s)&&(a=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),r=X.cssHooks[i],r&&"expand"in r){s=r.expand(s),delete e[i];
for(n in s)n in e||(e[n]=s[n],t[n]=a)}else t[i]=a}function O(e,t,n){var i,a,s,r,l,o,c,d,h=this,u=e.style,p={},m=[],f=e.nodeType&&g(e);n.queue||(c=X._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,d=c.empty.fire,c.empty.fire=function(){c.unqueued||d()}),c.unqueued++,h.always(function(){h.always(function(){c.unqueued--,X.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===X.css(e,"display")&&"none"===X.css(e,"float")&&(X.support.inlineBlockNeedsLayout&&"inline"!==k(e.nodeName)?u.zoom=1:u.display="inline-block")),n.overflow&&(u.overflow="hidden",X.support.shrinkWrapBlocks||h.done(function(){u.overflow=n.overflow[0],u.overflowX=n.overflow[1],u.overflowY=n.overflow[2]
}));for(i in t)if(s=t[i],Jn.exec(s)){if(delete t[i],s===(f?"hide":"show"))continue;m.push(i)}if(r=m.length)for(l=X._data(e,"fxshow")||X._data(e,"fxshow",{}),f?X(e).show():h.done(function(){X(e).hide()}),h.done(function(){var t;X.removeData(e,"fxshow",!0);for(t in p)X.style(e,t,p[t])}),i=0;r>i;i++)a=m[i],o=h.createTween(a,f?l[a]:0),p[a]=l[a]||X.style(e,a),a in l||(l[a]=o.start,f&&(o.end=o.start,o.start="width"===a||"height"===a?1:0))}function R(e,t,n,i,a){return new R.prototype.init(e,t,n,i,a)}function $(e,t){for(var n,i={height:e},a=0;4>a;a+=2-t)n=vn[a],i["margin"+n]=i["padding"+n]=e;
return t&&(i.opacity=i.width=e),i}function B(e){return X.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var j,V,q=e.document,F=e.location,U=e.navigator,H=e.jQuery,z=e.$,W=Array.prototype.push,Y=Array.prototype.slice,K=Array.prototype.indexOf,J=Object.prototype.toString,G=Object.prototype.hasOwnProperty,Q=String.prototype.trim,X=function(e,t){return new X.fn.init(e,t,j)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,et=/\S/,tt=/\s+/,nt=et.test(" ")?/^[\s\xA0]+|[\s\xA0]+$/g:/^\s+|\s+$/g,it=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,at=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^[\],:{}\s]*$/,rt=/(?:^|:|,)(?:\s*\[)+/g,lt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ot=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ct=/^-ms-/,dt=/-([\da-z])/gi,ht=function(e,t){return(t+"").toUpperCase()
},ut=function(){q.addEventListener?(q.removeEventListener("DOMContentLoaded",ut,!1),X.ready()):"complete"===q.readyState&&(q.detachEvent("onreadystatechange",ut),X.ready())},pt={};X.fn=X.prototype={constructor:X,init:function(e,n,i){var a,s,r;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(a="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:it.exec(e),!a||!a[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);
if(a[1])return n=n instanceof X?n[0]:n,r=n&&n.nodeType?n.ownerDocument||n:q,e=X.parseHTML(a[1],r,!0),at.test(a[1])&&X.isPlainObject(n)&&this.attr.call(e,n,!0),X.merge(this,e);if(s=q.getElementById(a[2]),s&&s.parentNode){if(s.id!==a[2])return i.find(e);this.length=1,this[0]=s}return this.context=q,this.selector=e,this}return X.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),X.makeArray(e,this))},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length
},toArray:function(){return Y.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=X.merge(this.constructor(),e);return i.prevObject=this,i.context=this.context,"find"===t?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return X.each(this,e,t)},ready:function(e){return X.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)
},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(Y.apply(this,arguments),"slice",Y.call(arguments).join(","))},map:function(e){return this.pushStack(X.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:[].sort,splice:[].splice},X.fn.init.prototype=X.fn,X.extend=X.fn.extend=function(){var e,n,i,a,s,r,l=arguments[0]||{},o=1,c=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[1]||{},o=2),"object"==typeof l||X.isFunction(l)||(l={}),c===o&&(l=this,--o);c>o;o++)if(null!=(e=arguments[o]))for(n in e)i=l[n],a=e[n],l!==a&&(d&&a&&(X.isPlainObject(a)||(s=X.isArray(a)))?(s?(s=!1,r=i&&X.isArray(i)?i:[]):r=i&&X.isPlainObject(i)?i:{},l[n]=X.extend(d,r,a)):a!==t&&(l[n]=a));
return l},X.extend({noConflict:function(t){return e.$===X&&(e.$=z),t&&e.jQuery===X&&(e.jQuery=H),X},isReady:!1,readyWait:1,holdReady:function(e){e?X.readyWait++:X.ready(!0)},ready:function(e){if(e===!0?!--X.readyWait:!X.isReady){if(!q.body)return setTimeout(X.ready,1);X.isReady=!0,e!==!0&&--X.readyWait>0||(V.resolveWith(q,[X]),X.fn.trigger&&X(q).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===X.type(e)},isArray:Array.isArray||function(e){return"array"===X.type(e)},isWindow:function(e){return null!=e&&e==e.window
},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":pt[J.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==X.type(e)||e.nodeType||X.isWindow(e))return!1;try{if(e.constructor&&!G.call(e,"constructor")&&!G.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||G.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){var i;
return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||q,(i=at.exec(e))?[t.createElement(i[1])]:(i=X.buildFragment([e],t,n?null:[]),X.merge([],(i.cacheable?X.clone(i.fragment):i.fragment).childNodes))):null},parseJSON:function(n){return n&&"string"==typeof n?(n=X.trim(n),e.JSON&&e.JSON.parse?e.JSON.parse(n):st.test(n.replace(lt,"@").replace(ot,"]").replace(rt,""))?Function("return "+n)():(X.error("Invalid JSON: "+n),t)):null},parseXML:function(n){var i,a;if(!n||"string"!=typeof n)return null;
try{e.DOMParser?(a=new DOMParser,i=a.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(s){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||X.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&et.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ct,"ms-").replace(dt,ht)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()
},each:function(e,n,i){var a,s=0,r=e.length,l=r===t||X.isFunction(e);if(i)if(l){for(a in e)if(n.apply(e[a],i)===!1)break}else for(;r>s&&n.apply(e[s++],i)!==!1;);else if(l){for(a in e)if(n.call(e[a],a,e[a])===!1)break}else for(;r>s&&n.call(e[s],s,e[s++])!==!1;);return e},trim:Q?function(e){return null==e?"":Q.call(e)}:function(e){return null==e?"":(""+e).replace(nt,"")},makeArray:function(e,t){var n,i=t||[];return null!=e&&(n=X.type(e),null==e.length||"string"===n||"function"===n||"regexp"===n||X.isWindow(e)?W.call(i,e):X.merge(i,e)),i
},inArray:function(e,t,n){var i;if(t){if(K)return K.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,a=e.length,s=0;if("number"==typeof i)for(;i>s;s++)e[a++]=n[s];else for(;n[s]!==t;)e[a++]=n[s++];return e.length=a,e},grep:function(e,t,n){var i,a=[],s=0,r=e.length;for(n=!!n;r>s;s++)i=!!t(e[s],s),n!==i&&a.push(e[s]);return a},map:function(e,n,i){var a,s,r=[],l=0,o=e.length,c=e instanceof X||o!==t&&"number"==typeof o&&(o>0&&e[0]&&e[o-1]||0===o||X.isArray(e));
if(c)for(;o>l;l++)a=n(e[l],l,i),null!=a&&(r[r.length]=a);else for(s in e)a=n(e[s],s,i),null!=a&&(r[r.length]=a);return r.concat.apply([],r)},guid:1,proxy:function(e,n){var i,a,s;return"string"==typeof n&&(i=e[n],n=e,e=i),X.isFunction(e)?(a=Y.call(arguments,2),s=function(){return e.apply(n,a.concat(Y.call(arguments)))},s.guid=e.guid=e.guid||s.guid||X.guid++,s):t},access:function(e,n,i,a,s,r,l){var o,c=null==i,d=0,h=e.length;if(i&&"object"==typeof i){for(d in i)X.access(e,n,d,i[d],1,r,a);s=1}else if(a!==t){if(o=l===t&&X.isFunction(a),c&&(o?(o=n,n=function(e,t,n){return o.call(X(e),n)
}):(n.call(e,a),n=null)),n)for(;h>d;d++)n(e[d],i,o?a.call(e[d],d,n(e[d],i)):a,l);s=1}return s?e:c?n.call(e):h?n(e[0],i):r},now:function(){return(new Date).getTime()}}),X.ready.promise=function(t){if(!V)if(V=X.Deferred(),"complete"===q.readyState||"loading"!==q.readyState&&q.addEventListener)setTimeout(X.ready,1);else if(q.addEventListener)q.addEventListener("DOMContentLoaded",ut,!1),e.addEventListener("load",X.ready,!1);else{q.attachEvent("onreadystatechange",ut),e.attachEvent("onload",X.ready);var n=!1;
try{n=null==e.frameElement&&q.documentElement}catch(i){}n&&n.doScroll&&function a(){if(!X.isReady){try{n.doScroll("left")}catch(e){return setTimeout(a,50)}X.ready()}}()}return V.promise(t)},X.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){pt["[object "+t+"]"]=t.toLowerCase()}),j=X(q);var mt={};X.Callbacks=function(e){e="string"==typeof e?mt[e]||n(e):X.extend({},e);var i,a,s,r,l,o,c=[],d=!e.once&&[],h=function(t){for(i=e.memory&&t,a=!0,o=r||0,r=0,l=c.length,s=!0;c&&l>o;o++)if(c[o].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;
break}s=!1,c&&(d?d.length&&h(d.shift()):i?c=[]:u.disable())},u={add:function(){if(c){var t=c.length;(function n(t){X.each(t,function(t,i){!X.isFunction(i)||e.unique&&u.has(i)?i&&i.length&&n(i):c.push(i)})})(arguments),s?l=c.length:i&&(r=t,h(i))}return this},remove:function(){return c&&X.each(arguments,function(e,t){for(var n;(n=X.inArray(t,c,n))>-1;)c.splice(n,1),s&&(l>=n&&l--,o>=n&&o--)}),this},has:function(e){return X.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=d=i=t,this
},disabled:function(){return!c},lock:function(){return d=t,i||u.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||a&&!d||(s?d.push(t):h(t)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!a}};return u},X.extend({Deferred:function(e){var t=[["resolve","done",X.Callbacks("once memory"),"resolved"],["reject","fail",X.Callbacks("once memory"),"rejected"],["notify","progress",X.Callbacks("memory")]],n="pending",i={state:function(){return n
},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return X.Deferred(function(n){X.each(t,function(t,i){var s=i[0],r=e[t];a[i[1]](X.isFunction(r)?function(){var e=r.apply(this,arguments);e&&X.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===a?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return"object"==typeof e?X.extend(e,i):i}},a={};return i.pipe=i.then,X.each(t,function(e,s){var r=s[2],l=s[3];
i[s[1]]=r.add,l&&r.add(function(){n=l},t[1^e][2].disable,t[2][2].lock),a[s[0]]=r.fire,a[s[0]+"With"]=r.fireWith}),i.promise(a),e&&e.call(a,a),a},when:function(e){var t,n,i,a=0,s=Y.call(arguments),r=s.length,l=1!==r||e&&X.isFunction(e.promise)?r:0,o=1===l?e:X.Deferred(),c=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?Y.call(arguments):a,i===t?o.notifyWith(n,i):--l||o.resolveWith(n,i)}};if(r>1)for(t=Array(r),n=Array(r),i=Array(r);r>a;a++)s[a]&&X.isFunction(s[a].promise)?s[a].promise().done(c(a,i,s)).fail(o.reject).progress(c(a,n,t)):--l;
return l||o.resolveWith(i,s),o.promise()}}),X.support=function(){var n,i,a,s,r,l,o,c,d,h,u,p=q.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=p.getElementsByTagName("*"),a=p.getElementsByTagName("a")[0],a.style.cssText="top:1px;float:left;opacity:.5",!i||!i.length||!a)return{};s=q.createElement("select"),r=s.appendChild(q.createElement("option")),l=p.getElementsByTagName("input")[0],n={leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:"/a"===a.getAttribute("href"),opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:"on"===l.value,optSelected:r.selected,getSetAttribute:"t"!==p.className,enctype:!!q.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==q.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===q.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},l.checked=!0,n.noCloneChecked=l.cloneNode(!0).checked,s.disabled=!0,n.optDisabled=!r.disabled;
try{delete p.test}catch(m){n.deleteExpando=!1}if(!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",u=function(){n.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",u)),l=q.createElement("input"),l.value="t",l.setAttribute("type","radio"),n.radioValue="t"===l.value,l.setAttribute("checked","checked"),l.setAttribute("name","t"),p.appendChild(l),o=q.createDocumentFragment(),o.appendChild(p.lastChild),n.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,n.appendChecked=l.checked,o.removeChild(l),o.appendChild(p),p.attachEvent)for(d in{submit:!0,change:!0,focusin:!0})c="on"+d,h=c in p,h||(p.setAttribute(c,"return;"),h="function"==typeof p[c]),n[d+"Bubbles"]=h;
return X(function(){var i,a,s,r,l="padding:0;margin:0;border:0;display:block;overflow:hidden;",o=q.getElementsByTagName("body")[0];o&&(i=q.createElement("div"),i.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",o.insertBefore(i,o.firstChild),a=q.createElement("div"),i.appendChild(a),a.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=a.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",h=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",n.reliableHiddenOffsets=h&&0===s[0].offsetHeight,a.innerHTML="",a.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",n.boxSizing=4===a.offsetWidth,n.doesNotIncludeMarginInBodyOffset=1!==o.offsetTop,e.getComputedStyle&&(n.pixelPosition="1%"!==(e.getComputedStyle(a,null)||{}).top,n.boxSizingReliable="4px"===(e.getComputedStyle(a,null)||{width:"4px"}).width,r=q.createElement("div"),r.style.cssText=a.style.cssText=l,r.style.marginRight=r.style.width="0",a.style.width="1px",a.appendChild(r),n.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),a.style.zoom!==t&&(a.innerHTML="",a.style.cssText=l+"width:1px;padding:1px;display:inline;zoom:1",n.inlineBlockNeedsLayout=3===a.offsetWidth,a.style.display="block",a.style.overflow="visible",a.innerHTML="<div></div>",a.firstChild.style.width="5px",n.shrinkWrapBlocks=3!==a.offsetWidth,i.style.zoom=1),o.removeChild(i),i=a=s=r=null)
}),o.removeChild(p),i=a=s=r=l=o=p=null,n}();var ft=/^(?:\{.*\}|\[.*\])$/,vt=/([A-Z])/g;X.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(X.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?X.cache[e[X.expando]]:e[X.expando],!!e&&!a(e)},data:function(e,n,i,a){if(X.acceptData(e)){var s,r,l=X.expando,o="string"==typeof n,c=e.nodeType,d=c?X.cache:e,h=c?e[l]:e[l]&&l;if(h&&d[h]&&(a||d[h].data)||!o||i!==t)return h||(c?e[l]=h=X.deletedIds.pop()||++X.uuid:h=l),d[h]||(d[h]={},c||(d[h].toJSON=X.noop)),("object"==typeof n||"function"==typeof n)&&(a?d[h]=X.extend(d[h],n):d[h].data=X.extend(d[h].data,n)),s=d[h],a||(s.data||(s.data={}),s=s.data),i!==t&&(s[X.camelCase(n)]=i),o?(r=s[n],null==r&&(r=s[X.camelCase(n)])):r=s,r
}},removeData:function(e,t,n){if(X.acceptData(e)){var i,s,r,l=e.nodeType,o=l?X.cache:e,c=l?e[X.expando]:X.expando;if(o[c]){if(t&&(i=n?o[c]:o[c].data)){X.isArray(t)||(t in i?t=[t]:(t=X.camelCase(t),t=t in i?[t]:t.split(" ")));for(s=0,r=t.length;r>s;s++)delete i[t[s]];if(!(n?a:X.isEmptyObject)(i))return}(n||(delete o[c].data,a(o[c])))&&(l?X.cleanData([e],!0):X.support.deleteExpando||o!=o.window?delete o[c]:o[c]=null)}}},_data:function(e,t,n){return X.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&X.noData[e.nodeName.toLowerCase()];
return!t||t!==!0&&e.getAttribute("classid")===t}}),X.fn.extend({data:function(e,n){var a,s,r,l,o,c=this[0],d=0,h=null;if(e===t){if(this.length&&(h=X.data(c),1===c.nodeType&&!X._data(c,"parsedAttrs"))){for(r=c.attributes,o=r.length;o>d;d++)l=r[d].name,0===l.indexOf("data-")&&(l=X.camelCase(l.substring(5)),i(c,l,h[l]));X._data(c,"parsedAttrs",!0)}return h}return"object"==typeof e?this.each(function(){X.data(this,e)}):(a=e.split(".",2),a[1]=a[1]?"."+a[1]:"",s=a[1]+"!",X.access(this,function(n){return n===t?(h=this.triggerHandler("getData"+s,[a[0]]),h===t&&c&&(h=X.data(c,e),h=i(c,e,h)),h===t&&a[1]?this.data(a[0]):h):(a[1]=n,this.each(function(){var t=X(this);
t.triggerHandler("setData"+s,a),X.data(this,e,n),t.triggerHandler("changeData"+s,a)}),t)},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){X.removeData(this,e)})}}),X.extend({queue:function(e,n,i){var a;return e?(n=(n||"fx")+"queue",a=X._data(e,n),i&&(!a||X.isArray(i)?a=X._data(e,n,X.makeArray(i)):a.push(i)),a||[]):t},dequeue:function(e,t){t=t||"fx";var n=X.queue(e,t),i=n.shift(),a=X._queueHooks(e,t),s=function(){X.dequeue(e,t)};"inprogress"===i&&(i=n.shift()),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,s,a)),!n.length&&a&&a.empty.fire()
},_queueHooks:function(e,t){var n=t+"queueHooks";return X._data(e,n)||X._data(e,n,{empty:X.Callbacks("once memory").add(function(){X.removeData(e,t+"queue",!0),X.removeData(e,n,!0)})})}}),X.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),i>arguments.length?X.queue(this[0],e):n===t?this:this.each(function(){var t=X.queue(this,e,n);X._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&X.dequeue(this,e)})},dequeue:function(e){return this.each(function(){X.dequeue(this,e)
})},delay:function(e,t){return e=X.fx?X.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,a=1,s=X.Deferred(),r=this,l=this.length,o=function(){--a||s.resolveWith(r,[r])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";l--;)(i=X._data(r[l],e+"queueHooks"))&&i.empty&&(a++,i.empty.add(o));return o(),s.promise(n)}});var gt,yt,bt,wt=/[\t\r\n]/g,xt=/\r/g,kt=/^(?:button|input)$/i,St=/^(?:button|input|object|select|textarea)$/i,Ct=/^a(?:rea|)$/i,At=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,It=X.support.getSetAttribute;
X.fn.extend({attr:function(e,t){return X.access(this,X.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){X.removeAttr(this,e)})},prop:function(e,t){return X.access(this,X.prop,e,t,arguments.length>1)},removeProp:function(e){return e=X.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,a,s,r,l;if(X.isFunction(e))return this.each(function(t){X(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(tt),n=0,i=this.length;i>n;n++)if(a=this[n],1===a.nodeType)if(a.className||1!==t.length){for(s=" "+a.className+" ",r=0,l=t.length;l>r;r++)~s.indexOf(" "+t[r]+" ")||(s+=t[r]+" ");
a.className=X.trim(s)}else a.className=e;return this},removeClass:function(e){var n,i,a,s,r,l,o;if(X.isFunction(e))return this.each(function(t){X(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(tt),l=0,o=this.length;o>l;l++)if(a=this[l],1===a.nodeType&&a.className){for(i=(" "+a.className+" ").replace(wt," "),s=0,r=n.length;r>s;s++)for(;i.indexOf(" "+n[s]+" ")>-1;)i=i.replace(" "+n[s]+" "," ");a.className=e?X.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;
return X.isFunction(e)?this.each(function(n){X(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var a,s=0,r=X(this),l=t,o=e.split(tt);a=o[s++];)l=i?l:!r.hasClass(a),r[l?"addClass":"removeClass"](a);else("undefined"===n||"boolean"===n)&&(this.className&&X._data(this,"__className__",this.className),this.className=this.className||e===!1?"":X._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(wt," ").indexOf(t)>-1)return!0;
return!1},val:function(e){var n,i,a,s=this[0];{if(arguments.length)return a=X.isFunction(e),this.each(function(i){var s,r=X(this);1===this.nodeType&&(s=a?e.call(this,i,r.val()):e,null==s?s="":"number"==typeof s?s+="":X.isArray(s)&&(s=X.map(s,function(e){return null==e?"":e+""})),n=X.valHooks[this.type]||X.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,s,"value")!==t||(this.value=s))});if(s)return n=X.valHooks[s.type]||X.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(s,"value"))!==t?i:(i=s.value,"string"==typeof i?i.replace(xt,""):null==i?"":i)
}}}),X.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,i,a,s=e.selectedIndex,r=[],l=e.options,o="select-one"===e.type;if(0>s)return null;for(n=o?s:0,i=o?s+1:l.length;i>n;n++)if(a=l[n],!(!a.selected||(X.support.optDisabled?a.disabled:null!==a.getAttribute("disabled"))||a.parentNode.disabled&&X.nodeName(a.parentNode,"optgroup"))){if(t=X(a).val(),o)return t;r.push(t)}return o&&!r.length&&l.length?X(l[s]).val():r
},set:function(e,t){var n=X.makeArray(t);return X(e).find("option").each(function(){this.selected=X.inArray(X(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,i,a){var s,r,l,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return a&&X.isFunction(X.fn[n])?X(e)[n](i):e.getAttribute===t?X.prop(e,n,i):(l=1!==o||!X.isXMLDoc(e),l&&(n=n.toLowerCase(),r=X.attrHooks[n]||(At.test(n)?yt:gt)),i!==t?null===i?(X.removeAttr(e,n),t):r&&"set"in r&&l&&(s=r.set(e,i,n))!==t?s:(e.setAttribute(n,""+i),i):r&&"get"in r&&l&&null!==(s=r.get(e,n))?s:(s=e.getAttribute(n),null===s?t:s))
},removeAttr:function(e,t){var n,i,a,s,r=0;if(t&&1===e.nodeType)for(i=t.split(tt);i.length>r;r++)a=i[r],a&&(n=X.propFix[a]||a,s=At.test(a),s||X.attr(e,a,""),e.removeAttribute(It?a:n),s&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(kt.test(e.nodeName)&&e.parentNode)X.error("type property can't be changed");else if(!X.support.radioValue&&"radio"===t&&X.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return gt&&X.nodeName(e,"button")?gt.get(e,t):t in e?e.value:null
},set:function(e,n,i){return gt&&X.nodeName(e,"button")?gt.set(e,n,i):(e.value=n,t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var a,s,r,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return r=1!==l||!X.isXMLDoc(e),r&&(n=X.propFix[n]||n,s=X.propHooks[n]),i!==t?s&&"set"in s&&(a=s.set(e,i,n))!==t?a:e[n]=i:s&&"get"in s&&null!==(a=s.get(e,n))?a:e[n]
},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):St.test(e.nodeName)||Ct.test(e.nodeName)&&e.href?0:t}}}}),yt={get:function(e,n){var i,a=X.prop(e,n);return a===!0||"boolean"!=typeof a&&(i=e.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var i;return t===!1?X.removeAttr(e,n):(i=X.propFix[n]||n,i in e&&(e[i]=!0),e.setAttribute(n,n.toLowerCase())),n}},It||(bt={name:!0,id:!0,coords:!0},gt=X.valHooks.button={get:function(e,n){var i;
return i=e.getAttributeNode(n),i&&(bt[n]?""!==i.value:i.specified)?i.value:t},set:function(e,t,n){var i=e.getAttributeNode(n);return i||(i=q.createAttribute(n),e.setAttributeNode(i)),i.value=t+""}},X.each(["width","height"],function(e,n){X.attrHooks[n]=X.extend(X.attrHooks[n],{set:function(e,i){return""===i?(e.setAttribute(n,"auto"),i):t}})}),X.attrHooks.contenteditable={get:gt.get,set:function(e,t,n){""===t&&(t="false"),gt.set(e,t,n)}}),X.support.hrefNormalized||X.each(["href","src","width","height"],function(e,n){X.attrHooks[n]=X.extend(X.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);
return null===i?t:i}})}),X.support.style||(X.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),X.support.optSelected||(X.propHooks.selected=X.extend(X.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),X.support.enctype||(X.propFix.enctype="encoding"),X.support.checkOn||X.each(["radio","checkbox"],function(){X.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value
}}}),X.each(["radio","checkbox"],function(){X.valHooks[this]=X.extend(X.valHooks[this],{set:function(e,n){return X.isArray(n)?e.checked=X.inArray(X(e).val(),n)>=0:t}})});var Pt=/^(?:textarea|input|select)$/i,_t=/^([^\.]*|)(?:\.(.+)|)$/,Tt=/(?:^|\s)hover(\.\S+|)\b/,Mt=/^key/,Dt=/^(?:mouse|contextmenu)|click/,Lt=/^(?:focusinfocus|focusoutblur)$/,Et=function(e){return X.event.special.hover?e:e.replace(Tt,"mouseenter$1 mouseleave$1")};X.event={add:function(e,n,i,a,s){var r,l,o,c,d,h,u,p,m,f,v;if(3!==e.nodeType&&8!==e.nodeType&&n&&i&&(r=X._data(e))){for(i.handler&&(m=i,i=m.handler,s=m.selector),i.guid||(i.guid=X.guid++),o=r.events,o||(r.events=o={}),l=r.handle,l||(r.handle=l=function(e){return X===t||e&&X.event.triggered===e.type?t:X.event.dispatch.apply(l.elem,arguments)
},l.elem=e),n=X.trim(Et(n)).split(" "),c=0;n.length>c;c++)d=_t.exec(n[c])||[],h=d[1],u=(d[2]||"").split(".").sort(),v=X.event.special[h]||{},h=(s?v.delegateType:v.bindType)||h,v=X.event.special[h]||{},p=X.extend({type:h,origType:d[1],data:a,handler:i,guid:i.guid,selector:s,namespace:u.join(".")},m),f=o[h],f||(f=o[h]=[],f.delegateCount=0,v.setup&&v.setup.call(e,a,u,l)!==!1||(e.addEventListener?e.addEventListener(h,l,!1):e.attachEvent&&e.attachEvent("on"+h,l))),v.add&&(v.add.call(e,p),p.handler.guid||(p.handler.guid=i.guid)),s?f.splice(f.delegateCount++,0,p):f.push(p),X.event.global[h]=!0;
e=null}},global:{},remove:function(e,t,n,i,a){var s,r,l,o,c,d,h,u,p,m,f,v=X.hasData(e)&&X._data(e);if(v&&(u=v.events)){for(t=X.trim(Et(t||"")).split(" "),s=0;t.length>s;s++)if(r=_t.exec(t[s])||[],l=o=r[1],c=r[2],l){for(p=X.event.special[l]||{},l=(i?p.delegateType:p.bindType)||l,m=u[l]||[],d=m.length,c=c?RegExp("(^|\\.)"+c.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=0;m.length>h;h++)f=m[h],!a&&o!==f.origType||n&&n.guid!==f.guid||c&&!c.test(f.namespace)||i&&i!==f.selector&&("**"!==i||!f.selector)||(m.splice(h--,1),f.selector&&m.delegateCount--,p.remove&&p.remove.call(e,f));
0===m.length&&d!==m.length&&(p.teardown&&p.teardown.call(e,c,v.handle)!==!1||X.removeEvent(e,l,v.handle),delete u[l])}else for(l in u)X.event.remove(e,l+t[s],n,i,!0);X.isEmptyObject(u)&&(delete v.handle,X.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,a,s){if(!a||3!==a.nodeType&&8!==a.nodeType){var r,l,o,c,d,h,u,p,m,f,v=n.type||n,g=[];if(!Lt.test(v+X.event.triggered)&&(v.indexOf("!")>=0&&(v=v.slice(0,-1),l=!0),v.indexOf(".")>=0&&(g=v.split("."),v=g.shift(),g.sort()),a&&!X.event.customEvent[v]||X.event.global[v]))if(n="object"==typeof n?n[X.expando]?n:new X.Event(v,n):new X.Event(v),n.type=v,n.isTrigger=!0,n.exclusive=l,n.namespace=g.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=0>v.indexOf(":")?"on"+v:"",a){if(n.result=t,n.target||(n.target=a),i=null!=i?X.makeArray(i):[],i.unshift(n),u=X.event.special[v]||{},!u.trigger||u.trigger.apply(a,i)!==!1){if(m=[[a,u.bindType||v]],!s&&!u.noBubble&&!X.isWindow(a)){for(f=u.delegateType||v,c=Lt.test(f+v)?a:a.parentNode,d=a;c;c=c.parentNode)m.push([c,f]),d=c;
d===(a.ownerDocument||q)&&m.push([d.defaultView||d.parentWindow||e,f])}for(o=0;m.length>o&&!n.isPropagationStopped();o++)c=m[o][0],n.type=m[o][1],p=(X._data(c,"events")||{})[n.type]&&X._data(c,"handle"),p&&p.apply(c,i),p=h&&c[h],p&&X.acceptData(c)&&p.apply(c,i)===!1&&n.preventDefault();return n.type=v,s||n.isDefaultPrevented()||u._default&&u._default.apply(a.ownerDocument,i)!==!1||"click"===v&&X.nodeName(a,"a")||!X.acceptData(a)||h&&a[v]&&("focus"!==v&&"blur"!==v||0!==n.target.offsetWidth)&&!X.isWindow(a)&&(d=a[h],d&&(a[h]=null),X.event.triggered=v,a[v](),X.event.triggered=t,d&&(a[h]=d)),n.result
}}else{r=X.cache;for(o in r)r[o].events&&r[o].events[v]&&X.event.trigger(n,i,r[o].handle.elem,!0)}}},dispatch:function(n){n=X.event.fix(n||e.event);var i,a,s,r,l,o,c,d,h,u,p=(X._data(this,"events")||{})[n.type]||[],m=p.delegateCount,f=[].slice.call(arguments),v=!n.exclusive&&!n.namespace,g=X.event.special[n.type]||{},y=[];if(f[0]=n,n.delegateTarget=this,!g.preDispatch||g.preDispatch.call(this,n)!==!1){if(m&&(!n.button||"click"!==n.type))for(r=X(this),r.context=this,s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||"click"!==n.type){for(o={},d=[],r[0]=s,i=0;m>i;i++)h=p[i],u=h.selector,o[u]===t&&(o[u]=r.is(u)),o[u]&&d.push(h);
d.length&&y.push({elem:s,matches:d})}for(p.length>m&&y.push({elem:this,matches:p.slice(m)}),i=0;y.length>i&&!n.isPropagationStopped();i++)for(c=y[i],n.currentTarget=c.elem,a=0;c.matches.length>a&&!n.isImmediatePropagationStopped();a++)h=c.matches[a],(v||!n.namespace&&!h.namespace||n.namespace_re&&n.namespace_re.test(h.namespace))&&(n.data=h.data,n.handleObj=h,l=((X.event.special[h.origType]||{}).handle||h.handler).apply(c.elem,f),l!==t&&(n.result=l,l===!1&&(n.preventDefault(),n.stopPropagation())));
return g.postDispatch&&g.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,a,s,r=n.button,l=n.fromElement;
return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||q,a=i.documentElement,s=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&l&&(e.relatedTarget=l===e.target?n.toElement:l),e.which||r===t||(e.which=1&r?1:2&r?3:4&r?2:0),e}},fix:function(e){if(e[X.expando])return e;var t,n,i=e,a=X.event.fixHooks[e.type]||{},s=a.props?this.props.concat(a.props):this.props;
for(e=X.Event(i),t=s.length;t;)n=s[--t],e[n]=i[n];return e.target||(e.target=i.srcElement||q),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,i):e},special:{ready:{setup:X.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){X.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,i){var a=X.extend(new X.Event,n,{type:e,isSimulated:!0,originalEvent:{}});
i?X.event.trigger(a,null,t):X.event.dispatch.call(t,a),a.isDefaultPrevented()&&n.preventDefault()}},X.event.handle=X.event.dispatch,X.removeEvent=q.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,n,i){var a="on"+n;e.detachEvent&&(e[a]===t&&(e[a]=null),e.detachEvent(a,i))},X.Event=function(e,n){return this instanceof X.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?r:s):this.type=e,n&&X.extend(this,n),this.timeStamp=e&&e.timeStamp||X.now(),this[X.expando]=!0,t):new X.Event(e,n)
},X.Event.prototype={preventDefault:function(){this.isDefaultPrevented=r;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=r;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},X.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){X.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,a=e.relatedTarget,s=e.handleObj;
return s.selector,(!a||a!==i&&!X.contains(i,a))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),X.support.submitBubbles||(X.event.special.submit={setup:function(){return X.nodeName(this,"form")?!1:(X.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=X.nodeName(n,"input")||X.nodeName(n,"button")?n.form:t;i&&!X._data(i,"_submit_attached")&&(X.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),X._data(i,"_submit_attached",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&X.event.simulate("submit",this.parentNode,e,!0))
},teardown:function(){return X.nodeName(this,"form")?!1:(X.event.remove(this,"._submit"),t)}}),X.support.changeBubbles||(X.event.special.change={setup:function(){return Pt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(X.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),X.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),X.event.simulate("change",this,e,!0)
})),!1):(X.event.add(this,"beforeactivate._change",function(e){var t=e.target;Pt.test(t.nodeName)&&!X._data(t,"_change_attached")&&(X.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||X.event.simulate("change",this.parentNode,e,!0)}),X._data(t,"_change_attached",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return X.event.remove(this,"._change"),Pt.test(this.nodeName)
}}),X.support.focusinBubbles||X.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){X.event.simulate(t,e.target,X.event.fix(e),!0)};X.event.special[t]={setup:function(){0===n++&&q.addEventListener(e,i,!0)},teardown:function(){0===--n&&q.removeEventListener(e,i,!0)}}}),X.fn.extend({on:function(e,n,i,a,r){var l,o;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(o in e)this.on(o,n,i,e[o],r);return this}if(null==i&&null==a?(a=n,i=n=t):null==a&&("string"==typeof n?(a=i,i=t):(a=i,i=n,n=t)),a===!1)a=s;
else if(!a)return this;return 1===r&&(l=a,a=function(e){return X().off(e),l.apply(this,arguments)},a.guid=l.guid||(l.guid=X.guid++)),this.each(function(){X.event.add(this,e,a,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var a,r;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,X(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"==typeof e){for(r in e)this.off(r,n,e[r]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=s),this.each(function(){X.event.remove(this,e,i,n)
})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return X(this.context).on(e,this.selector,t,n),this},die:function(e,t){return X(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1==arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){X.event.trigger(e,t,this)})},triggerHandler:function(e,n){return this[0]?X.event.trigger(e,n,this[0],!0):t
},toggle:function(e){var t=arguments,n=e.guid||X.guid++,i=0,a=function(n){var a=(X._data(this,"lastToggle"+e.guid)||0)%i;return X._data(this,"lastToggle"+e.guid,a+1),n.preventDefault(),t[a].apply(this,arguments)||!1};for(a.guid=n;t.length>i;)t[i++].guid=n;return this.click(a)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),X.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){X.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)
},Mt.test(t)&&(X.event.fixHooks[t]=X.event.keyHooks),Dt.test(t)&&(X.event.fixHooks[t]=X.event.mouseHooks)}),function(e,t){function n(e,t,n,i){for(var a=0,s=t.length;s>a;a++)st(e,t[a],n,i)}function i(e,t,i,a,s,r){var l,o=rt.setFilters[t.toLowerCase()];return o||st.error(t),(e||!(l=s))&&n(e||"*",a,l=[],s),l.length>0?o(l,i,r):[]}function a(e,a,s,r,l){for(var o,c,d,h,u,p,m,f,v=0,g=l.length,y=H.POS,b=RegExp("^"+y.source+"(?!"+C+")","i"),w=function(){for(var e=1,n=arguments.length-2;n>e;e++)arguments[e]===t&&(o[e]=t)
};g>v;v++){for(y.exec(""),e=l[v],h=[],d=0,u=r;o=y.exec(e);)f=y.lastIndex=o.index+o[0].length,f>d&&(m=e.slice(d,o.index),d=f,p=[a],N.test(m)&&(u&&(p=u),u=r),(c=V.test(m))&&(m=m.slice(0,-5).replace(N,"$&*")),o.length>1&&o[0].replace(b,w),u=i(m,o[1],o[2],p,u,c));u?(h=h.concat(u),(m=e.slice(d))&&")"!==m?N.test(m)?n(m,h,s,r):st(m,a,s,r?r.concat(u):u):k.apply(s,h)):st(e,a,s,r)}return 1===g?s:st.uniqueSort(s)}function s(e,t,n){for(var i,a,s,r=[],l=0,o=R.exec(e),c=!o.pop()&&!o.pop(),d=c&&e.match(O)||[""],h=rt.preFilter,u=rt.filter,p=!n&&t!==f;null!=(a=d[l])&&c;l++)for(r.push(i=[]),p&&(a=" "+a);a;){c=!1,(o=N.exec(a))&&(a=a.slice(o[0].length),c=i.push({part:o.pop().replace(E," "),captures:o}));
for(s in u)!(o=H[s].exec(a))||h[s]&&!(o=h[s](o,t,n))||(a=a.slice(o.shift().length),c=i.push({part:s,captures:o}));if(!c)break}return c||st.error(e),r}function r(e,t,n){var i=t.dir,a=w++;return e||(e=function(e){return e===n}),t.first?function(t,n){for(;t=t[i];)if(1===t.nodeType)return e(t,n)&&t}:function(t,n){for(var s,r=a+"."+h,l=r+"."+d;t=t[i];)if(1===t.nodeType){if((s=t[S])===l)return t.sizset;if("string"==typeof s&&0===s.indexOf(r)){if(t.sizset)return t}else{if(t[S]=l,e(t,n))return t.sizset=!0,t;
t.sizset=!1}}}}function l(e,t){return e?function(n,i){var a=t(n,i);return a&&e(a===!0?n:a,i)}:t}function o(e,t,n){for(var i,a,s=0;i=e[s];s++)rt.relative[i.part]?a=r(a,rt.relative[i.part],t):(i.captures.push(t,n),a=l(a,rt.filter[i.part].apply(null,i.captures)));return a}function c(e){return function(t,n){for(var i,a=0;i=e[a];a++)if(i(t,n))return!0;return!1}}var d,h,u,p,m,f=e.document,v=f.documentElement,g="undefined",y=!1,b=!0,w=0,x=[].slice,k=[].push,S=("sizcache"+Math.random()).replace(".",""),C="[\\x20\\t\\r\\n\\f]",A="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",I=A.replace("w","w#"),P="([*^$|!~]?=)",_="\\["+C+"*("+A+")"+C+"*(?:"+P+C+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+I+")|)|)"+C+"*\\]",T=":("+A+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",M=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",D=C+"*([\\x20\\t\\r\\n\\f>+~])"+C+"*",L="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+_+"|"+T.replace(2,7)+"|[^\\\\(),])+",E=RegExp("^"+C+"+|((?:^|[^\\\\])(?:\\\\.)*)"+C+"+$","g"),N=RegExp("^"+D),O=RegExp(L+"?(?="+C+"*,|$)","g"),R=RegExp("^(?:(?!,)(?:(?:^|,)"+C+"*"+L+")*?|"+C+"*(.*?))(\\)|$)"),$=RegExp(L.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+D,"g"),B=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,j=/[\x20\t\r\n\f]*[+~]/,V=/:not\($/,q=/h\d/i,F=/input|select|textarea|button/i,U=/\\(?!\\)/g,H={ID:RegExp("^#("+A+")"),CLASS:RegExp("^\\.("+A+")"),NAME:RegExp("^\\[name=['\"]?("+A+")['\"]?\\]"),TAG:RegExp("^("+A.replace("[-","[-\\*")+")"),ATTR:RegExp("^"+_),PSEUDO:RegExp("^"+T),CHILD:RegExp("^:(only|nth|last|first)-child(?:\\("+C+"*(even|odd|(([+-]|)(\\d*)n|)"+C+"*(?:([+-]|)"+C+"*(\\d+)|))"+C+"*\\)|)","i"),POS:RegExp(M,"ig"),needsContext:RegExp("^"+C+"*[>+~]|"+M,"i")},z={},W=[],Y={},K=[],J=function(e){return e.sizzleFilter=!0,e
},G=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}},Q=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}},Z=function(e){var t=!1,n=f.createElement("div");try{t=e(n)}catch(i){}return n=null,t},et=Z(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),tt=Z(function(e){e.id=S+0,e.innerHTML="<a name='"+S+"'></a><div name='"+S+"'></div>",v.insertBefore(e,v.firstChild);
var t=f.getElementsByName&&f.getElementsByName(S).length===2+f.getElementsByName(S+0).length;return m=!f.getElementById(S),v.removeChild(e),t}),nt=Z(function(e){return e.appendChild(f.createComment("")),0===e.getElementsByTagName("*").length}),it=Z(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==g&&"#"===e.firstChild.getAttribute("href")}),at=Z(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length?(e.lastChild.className="e",1!==e.getElementsByClassName("e").length):!1
}),st=function(e,t,n,i){n=n||[],t=t||f;var a,s,r,l,o=t.nodeType;if(1!==o&&9!==o)return[];if(!e||"string"!=typeof e)return n;if(r=ot(t),!r&&!i&&(a=B.exec(e)))if(l=a[1]){if(9===o){if(s=t.getElementById(l),!s||!s.parentNode)return n;if(s.id===l)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(l))&&ct(t,s)&&s.id===l)return n.push(s),n}else{if(a[2])return k.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((l=a[3])&&at&&t.getElementsByClassName)return k.apply(n,x.call(t.getElementsByClassName(l),0)),n
}return ut(e,t,n,i,r)},rt=st.selectors={cacheLength:50,match:H,order:["ID","TAG"],attrHandle:{},createPseudo:J,find:{ID:m?function(e,t,n){if(typeof t.getElementById!==g&&!n){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}}:function(e,n,i){if(typeof n.getElementById!==g&&!i){var a=n.getElementById(e);return a?a.id===e||typeof a.getAttributeNode!==g&&a.getAttributeNode("id").value===e?[a]:t:[]}},TAG:nt?function(e,n){return typeof n.getElementsByTagName!==g?n.getElementsByTagName(e):t}:function(e,t){var n=t.getElementsByTagName(e);
if("*"===e){for(var i,a=[],s=0;i=n[s];s++)1===i.nodeType&&a.push(i);return a}return n}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(U,""),e[3]=(e[4]||e[5]||"").replace(U,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||st.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&st.error(e[0]),e
},PSEUDO:function(e){var t,n=e[4];return H.CHILD.test(e[0])?null:(n&&(t=R.exec(n))&&t.pop()&&(e[0]=e[0].slice(0,t[0].length-n.length-1),n=t[0].slice(0,-1)),e.splice(2,3,n||e[3]),e)}},filter:{ID:m?function(e){return e=e.replace(U,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(U,""),function(t){var n=typeof t.getAttributeNode!==g&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(U,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e
})},CLASS:function(e){var t=z[e];return t||(t=z[e]=RegExp("(^|"+C+")"+e+"("+C+"|$)"),W.push(e),W.length>rt.cacheLength&&delete z[W.shift()]),function(e){return t.test(e.className||typeof e.getAttribute!==g&&e.getAttribute("class")||"")}},ATTR:function(e,t,n){return t?function(i){var a=st.attr(i,e),s=a+"";if(null==a)return"!="===t;switch(t){case"=":return s===n;case"!=":return s!==n;case"^=":return n&&0===s.indexOf(n);case"*=":return n&&s.indexOf(n)>-1;case"$=":return n&&s.substr(s.length-n.length)===n;
case"~=":return(" "+s+" ").indexOf(n)>-1;case"|=":return s===n||s.substr(0,n.length+1)===n+"-"}}:function(t){return null!=st.attr(t,e)}},CHILD:function(e,t,n,i){if("nth"===e){var a=w++;return function(e){var t,s,r=0,l=e;if(1===n&&0===i)return!0;if(t=e.parentNode,t&&(t[S]!==a||!e.sizset)){for(l=t.firstChild;l&&(1!==l.nodeType||(l.sizset=++r,l!==e));l=l.nextSibling);t[S]=a}return s=e.sizset-i,0===n?0===s:0===s%n&&s/n>=0}}return function(t){var n=t;switch(e){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;
if("first"===e)return!0;n=t;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(e,t,n,i){var a=rt.pseudos[e]||rt.pseudos[e.toLowerCase()];return a||st.error("unsupported pseudo: "+e),a.sizzleFilter?a(t,n,i):a}},pseudos:{not:J(function(e,t,n){var i=ht(e.replace(E,"$1"),t,n);return function(e){return!i(e)}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected
},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!rt.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},contains:J(function(e){return function(t){return(t.textContent||t.innerText||dt(t)).indexOf(e)>-1}}),has:J(function(e){return function(t){return st(e,t).length>0}}),header:function(e){return q.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)
},radio:G("radio"),checkbox:G("checkbox"),file:G("file"),password:G("password"),image:G("image"),submit:Q("submit"),reset:Q("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return F.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return!(e!==t.activeElement||t.hasFocus&&!t.hasFocus()||!e.type&&!e.href)},active:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t,n){return n?e.slice(1):[e[0]]
},last:function(e,t,n){var i=e.pop();return n?e:[i]},even:function(e,t,n){for(var i=[],a=n?1:0,s=e.length;s>a;a+=2)i.push(e[a]);return i},odd:function(e,t,n){for(var i=[],a=n?0:1,s=e.length;s>a;a+=2)i.push(e[a]);return i},lt:function(e,t,n){return n?e.slice(+t):e.slice(0,+t)},gt:function(e,t,n){return n?e.slice(0,+t+1):e.slice(+t+1)},eq:function(e,t,n){var i=e.splice(+t,1);return n?e:i}}};rt.setFilters.nth=rt.setFilters.eq,rt.filters=rt.pseudos,it||(rt.attrHandle={href:function(e){return e.getAttribute("href",2)
},type:function(e){return e.getAttribute("type")}}),tt&&(rt.order.push("NAME"),rt.find.NAME=function(e,n){return typeof n.getElementsByName!==g?n.getElementsByName(e):t}),at&&(rt.order.splice(1,0,"CLASS"),rt.find.CLASS=function(e,n,i){return typeof n.getElementsByClassName===g||i?t:n.getElementsByClassName(e)});try{x.call(v.childNodes,0)[0].nodeType}catch(lt){x=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}var ot=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1
},ct=st.contains=v.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:v.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t.parentNode;return e===i||!!(i&&1===i.nodeType&&n.contains&&n.contains(i))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},dt=st.getText=function(e){var t,n="",i=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=dt(e)}else if(3===a||4===a)return e.nodeValue
}else for(;t=e[i];i++)n+=dt(t);return n};st.attr=function(e,t){var n,i=ot(e);return i||(t=t.toLowerCase()),rt.attrHandle[t]?rt.attrHandle[t](e):et||i?e.getAttribute(t):(n=e.getAttributeNode(t),n?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null)},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},[0,0].sort(function(){return b=0}),v.compareDocumentPosition?u=function(e,t){return e===t?(y=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1
}:(u=function(e,t){if(e===t)return y=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,a=[],s=[],r=e.parentNode,l=t.parentNode,o=r;if(r===l)return p(e,t);if(!r)return-1;if(!l)return 1;for(;o;)a.unshift(o),o=o.parentNode;for(o=l;o;)s.unshift(o),o=o.parentNode;n=a.length,i=s.length;for(var c=0;n>c&&i>c;c++)if(a[c]!==s[c])return p(a[c],s[c]);return c===n?p(e,s[c],-1):p(a[c],t,1)},p=function(e,t,n){if(e===t)return n;for(var i=e.nextSibling;i;){if(i===t)return-1;i=i.nextSibling
}return 1}),st.uniqueSort=function(e){var t,n=1;if(u&&(y=b,e.sort(u),y))for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e};var ht=st.compile=function(e,t,n){var i,a,r,l=Y[e];if(l&&l.context===t)return l;for(a=s(e,t,n),r=0;i=a[r];r++)a[r]=o(i,t,n);return l=Y[e]=c(a),l.context=t,l.runs=l.dirruns=0,K.push(e),K.length>rt.cacheLength&&delete Y[K.shift()],l};st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){return st(t,null,null,[e]).length>0};var ut=function(e,t,n,i,s){e=e.replace(E,"$1");
var r,l,o,c,u,p,m,f,v,g=e.match(O),y=e.match($),b=t.nodeType;if(H.POS.test(e))return a(e,t,n,i,g);if(i)r=x.call(i,0);else if(g&&1===g.length){if(y.length>1&&9===b&&!s&&(g=H.ID.exec(y[0]))){if(t=rt.find.ID(g[1],t,s)[0],!t)return n;e=e.slice(y.shift().length)}for(f=(g=j.exec(y[0]))&&!g.index&&t.parentNode||t,v=y.pop(),p=v.split(":not")[0],o=0,c=rt.order.length;c>o;o++)if(m=rt.order[o],g=H[m].exec(p)){if(r=rt.find[m]((g[1]||"").replace(U,""),f,s),null==r)continue;p===v&&(e=e.slice(0,e.length-v.length)+p.replace(H[m],""),e||k.apply(n,x.call(r,0)));
break}}if(e)for(l=ht(e,t,s),h=l.dirruns++,null==r&&(r=rt.find.TAG("*",j.test(e)&&t.parentNode||t)),o=0;u=r[o];o++)d=l.runs++,l(u,t)&&n.push(u);return n};f.querySelectorAll&&function(){var e,t=ut,n=/'|\\/g,i=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,a=[],s=[":active"],r=v.matchesSelector||v.mozMatchesSelector||v.webkitMatchesSelector||v.oMatchesSelector||v.msMatchesSelector;Z(function(e){e.innerHTML="<select><option selected></option></select>",e.querySelectorAll("[selected]").length||a.push("\\["+C+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||a.push(":checked")
}),Z(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&a.push("[*^$]="+C+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'>",e.querySelectorAll(":enabled").length||a.push(":enabled",":disabled")}),a=a.length&&RegExp(a.join("|")),ut=function(e,i,s,r,l){if(!(r||l||a&&a.test(e)))if(9===i.nodeType)try{return k.apply(s,x.call(i.querySelectorAll(e),0)),s}catch(o){}else if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){var c=i.getAttribute("id"),d=c||S,h=j.test(e)&&i.parentNode||i;
c?d=d.replace(n,"\\$&"):i.setAttribute("id",d);try{return k.apply(s,x.call(h.querySelectorAll(e.replace(O,"[id='"+d+"'] $&")),0)),s}catch(o){}finally{c||i.removeAttribute("id")}}return t(e,i,s,r,l)},r&&(Z(function(t){e=r.call(t,"div");try{r.call(t,"[test!='']:sizzle"),s.push(rt.match.PSEUDO)}catch(n){}}),s=RegExp(s.join("|")),st.matchesSelector=function(t,n){if(n=n.replace(i,"='$1']"),!(ot(t)||s.test(n)||a&&a.test(n)))try{var l=r.call(t,n);if(l||e||t.document&&11!==t.document.nodeType)return l}catch(o){}return st(n,null,null,[t]).length>0
})}(),st.attr=X.attr,X.find=st,X.expr=st.selectors,X.expr[":"]=X.expr.pseudos,X.unique=st.uniqueSort,X.text=st.getText,X.isXMLDoc=st.isXML,X.contains=st.contains}(e);var Nt=/Until$/,Ot=/^(?:parents|prev(?:Until|All))/,Rt=/^.[^:#\[\.,]*$/,$t=X.expr.match.needsContext,Bt={children:!0,contents:!0,next:!0,prev:!0};X.fn.extend({find:function(e){var t,n,i,a,s,r,l=this;if("string"!=typeof e)return X(e).filter(function(){for(t=0,n=l.length;n>t;t++)if(X.contains(l[t],this))return!0});for(r=this.pushStack("","find",e),t=0,n=this.length;n>t;t++)if(i=r.length,X.find(e,this[t],r),t>0)for(a=i;r.length>a;a++)for(s=0;i>s;s++)if(r[s]===r[a]){r.splice(a--,1);
break}return r},has:function(e){var t,n=X(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(X.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(c(this,e,!1),"not",e)},filter:function(e){return this.pushStack(c(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?$t.test(e)?X(e,this.context).index(this[0])>=0:X.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,i=0,a=this.length,s=[],r=$t.test(e)||"string"!=typeof e?X(e,t||this.context):0;a>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(r?r.index(n)>-1:X.find.matchesSelector(n,e)){s.push(n);
break}n=n.parentNode}return s=s.length>1?X.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?"string"==typeof e?X.inArray(this[0],X(e)):X.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?X(e,t):X.makeArray(e&&e.nodeType?[e]:e),i=X.merge(this.get(),n);return this.pushStack(l(n[0])||l(i[0])?i:X.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),X.fn.andSelf=X.fn.addBack,X.each({parent:function(e){var t=e.parentNode;
return t&&11!==t.nodeType?t:null},parents:function(e){return X.dir(e,"parentNode")},parentsUntil:function(e,t,n){return X.dir(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return X.dir(e,"nextSibling")},prevAll:function(e){return X.dir(e,"previousSibling")},nextUntil:function(e,t,n){return X.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return X.dir(e,"previousSibling",n)},siblings:function(e){return X.sibling((e.parentNode||{}).firstChild,e)
},children:function(e){return X.sibling(e.firstChild)},contents:function(e){return X.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:X.merge([],e.childNodes)}},function(e,t){X.fn[e]=function(n,i){var a=X.map(this,t,n);return Nt.test(e)||(i=n),i&&"string"==typeof i&&(a=X.filter(i,a)),a=this.length>1&&!Bt[e]?X.unique(a):a,this.length>1&&Ot.test(e)&&(a=a.reverse()),this.pushStack(a,e,Y.call(arguments).join(","))}}),X.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?X.find.matchesSelector(t[0],e)?[t[0]]:[]:X.find.matches(e,t)
},dir:function(e,n,i){for(var a=[],s=e[n];s&&9!==s.nodeType&&(i===t||1!==s.nodeType||!X(s).is(i));)1===s.nodeType&&a.push(s),s=s[n];return a},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var jt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Vt=/ jQuery\d+="(?:null|\d+)"/g,qt=/^\s+/,Ft=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ut=/<([\w:]+)/,Ht=/<tbody/i,zt=/<|&#?\w+;/,Wt=/<(?:script|style|link)/i,Yt=/<(?:script|object|embed|option|style)/i,Kt=RegExp("<(?:"+jt+")[\\s/>]","i"),Jt=/^(?:checkbox|radio)$/,Gt=/checked\s*(?:[^=]|=\s*.checked.)/i,Qt=/\/(java|ecma)script/i,Xt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Zt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},en=d(q),tn=en.appendChild(q.createElement("div"));
Zt.optgroup=Zt.option,Zt.tbody=Zt.tfoot=Zt.colgroup=Zt.caption=Zt.thead,Zt.th=Zt.td,X.support.htmlSerialize||(Zt._default=[1,"X<div>","</div>"]),X.fn.extend({text:function(e){return X.access(this,function(e){return e===t?X.text(this):this.empty().append((this[0]&&this[0].ownerDocument||q).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(X.isFunction(e))return this.each(function(t){X(this).wrapAll(e.call(this,t))});if(this[0]){var t=X(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;
return e}).append(this)}return this},wrapInner:function(e){return X.isFunction(e)?this.each(function(t){X(this).wrapInner(e.call(this,t))}):this.each(function(){var t=X(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=X.isFunction(e);return this.each(function(n){X(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){X.nodeName(this,"body")||X(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)
})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!l(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=X.clean(arguments);return this.pushStack(X.merge(e,this),"before",this.selector)}},after:function(){if(!l(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)
});if(arguments.length){var e=X.clean(arguments);return this.pushStack(X.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||X.filter(e,[n]).length)&&(t||1!==n.nodeType||(X.cleanData(n.getElementsByTagName("*")),X.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&X.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this
},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return X.clone(this,e,t)})},html:function(e){return X.access(this,function(e){var n=this[0]||{},i=0,a=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Vt,""):t;if(!("string"!=typeof e||Wt.test(e)||!X.support.htmlSerialize&&Kt.test(e)||!X.support.leadingWhitespace&&qt.test(e)||Zt[(Ut.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Ft,"<$1></$2>");try{for(;a>i;i++)n=this[i]||{},1===n.nodeType&&(X.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);
n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return l(this[0])?this.length?this.pushStack(X(X.isFunction(e)?e():e),"replaceWith",e):this:X.isFunction(e)?this.each(function(t){var n=X(this),i=n.html();n.replaceWith(e.call(this,t,i))}):("string"!=typeof e&&(e=X(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;X(this).remove(),t?X(t).before(e):X(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){e=[].concat.apply([],e);
var a,s,r,l,o=0,c=e[0],d=[],u=this.length;if(!X.support.checkClone&&u>1&&"string"==typeof c&&Gt.test(c))return this.each(function(){X(this).domManip(e,n,i)});if(X.isFunction(c))return this.each(function(a){var s=X(this);e[0]=c.call(this,a,n?s.html():t),s.domManip(e,n,i)});if(this[0]){if(a=X.buildFragment(e,this,d),r=a.fragment,s=r.firstChild,1===r.childNodes.length&&(r=s),s)for(n=n&&X.nodeName(s,"tr"),l=a.cacheable||u-1;u>o;o++)i.call(n&&X.nodeName(this[o],"table")?h(this[o],"tbody"):this[o],o===l?r:X.clone(r,!0,!0));
r=s=null,d.length&&X.each(d,function(e,t){t.src?X.ajax?X.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):X.error("no ajax"):X.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Xt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),X.buildFragment=function(e,n,i){var a,s,r,l=e[0];return n=n||q,n=(n[0]||n).ownerDocument||n[0]||n,n.createDocumentFragment===t&&(n=q),!(1===e.length&&"string"==typeof l&&512>l.length&&n===q&&"<"===l.charAt(0))||Yt.test(l)||!X.support.checkClone&&Gt.test(l)||!X.support.html5Clone&&Kt.test(l)||(s=!0,a=X.fragments[l],r=a!==t),a||(a=n.createDocumentFragment(),X.clean(e,n,a,i),s&&(X.fragments[l]=r&&a)),{fragment:a,cacheable:s}
},X.fragments={},X.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){X.fn[e]=function(n){var i,a=0,s=[],r=X(n),l=r.length,o=1===this.length&&this[0].parentNode;if((null==o||o&&11===o.nodeType&&1===o.childNodes.length)&&1===l)return r[t](this[0]),this;for(;l>a;a++)i=(a>0?this.clone(!0):this).get(),X(r[a])[t](i),s=s.concat(i);return this.pushStack(s,e,r.selector)}}),X.extend({clone:function(e,t,n){var i,a,s,r;if(X.support.html5Clone||X.isXMLDoc(e)||!Kt.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(tn.innerHTML=e.outerHTML,tn.removeChild(r=tn.firstChild)),!(X.support.noCloneEvent&&X.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||X.isXMLDoc(e)))for(p(e,r),i=m(e),a=m(r),s=0;i[s];++s)a[s]&&p(i[s],a[s]);
if(t&&(u(e,r),n))for(i=m(e),a=m(r),s=0;i[s];++s)u(i[s],a[s]);return i=a=null,r},clean:function(e,n,i,a){var s,r,l,o,c,h,u,p,m,v,g,y=0,b=[];for(n&&n.createDocumentFragment!==t||(n=q),r=n===q&&en;null!=(l=e[y]);y++)if("number"==typeof l&&(l+=""),l){if("string"==typeof l)if(zt.test(l)){for(r=r||d(n),u=u||r.appendChild(n.createElement("div")),l=l.replace(Ft,"<$1></$2>"),o=(Ut.exec(l)||["",""])[1].toLowerCase(),c=Zt[o]||Zt._default,h=c[0],u.innerHTML=c[1]+l+c[2];h--;)u=u.lastChild;if(!X.support.tbody)for(p=Ht.test(l),m="table"!==o||p?"<table>"!==c[1]||p?[]:u.childNodes:u.firstChild&&u.firstChild.childNodes,s=m.length-1;s>=0;--s)X.nodeName(m[s],"tbody")&&!m[s].childNodes.length&&m[s].parentNode.removeChild(m[s]);
!X.support.leadingWhitespace&&qt.test(l)&&u.insertBefore(n.createTextNode(qt.exec(l)[0]),u.firstChild),l=u.childNodes,u=r.lastChild}else l=n.createTextNode(l);l.nodeType?b.push(l):b=X.merge(b,l)}if(u&&(r.removeChild(u),l=u=r=null),!X.support.appendChecked)for(y=0;null!=(l=b[y]);y++)X.nodeName(l,"input")?f(l):l.getElementsByTagName!==t&&X.grep(l.getElementsByTagName("input"),f);if(i)for(v=function(e){return!e.type||Qt.test(e.type)?a?a.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):t
},y=0;null!=(l=b[y]);y++)X.nodeName(l,"script")&&v(l)||(i.appendChild(l),l.getElementsByTagName!==t&&(g=X.grep(X.merge([],l.getElementsByTagName("script")),v),b.splice.apply(b,[y+1,0].concat(g)),y+=g.length));return b},cleanData:function(e,t){for(var n,i,a,s,r=0,l=X.expando,o=X.cache,c=X.support.deleteExpando,d=X.event.special;null!=(a=e[r]);r++)if((t||X.acceptData(a))&&(i=a[l],n=i&&o[i])){if(n.events)for(s in n.events)d[s]?X.event.remove(a,s):X.removeEvent(a,s,n.handle);o[i]&&(delete o[i],c?delete a[l]:a.removeAttribute?a.removeAttribute(l):a[l]=null,X.deletedIds.push(i))
}}}),function(){var e,t;X.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=X.uaMatch(U.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.webkit&&(t.safari=!0),X.browser=t,X.sub=function(){function e(t,n){return new e.fn.init(t,n)}X.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof X&&!(i instanceof e)&&(i=e(i)),X.fn.init.call(this,n,i,t)
},e.fn.init.prototype=e.fn;var t=e(q);return e}}();var nn,an,sn,rn=/alpha\([^)]*\)/i,ln=/opacity=([^)]*)/,on=/^(top|right|bottom|left)$/,cn=/^margin/,dn=RegExp("^("+Z+")(.*)$","i"),hn=RegExp("^("+Z+")(?!px)[a-z%]+$","i"),un=RegExp("^([-+])=("+Z+")","i"),pn={},mn={position:"absolute",visibility:"hidden",display:"block"},fn={letterSpacing:0,fontWeight:400,lineHeight:1},vn=["Top","Right","Bottom","Left"],gn=["Webkit","O","Moz","ms"],yn=X.fn.toggle;X.fn.extend({css:function(e,n){return X.access(this,function(e,n,i){return i!==t?X.style(e,n,i):X.css(e,n)
},e,n,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(e,t){var n="boolean"==typeof e;return X.isFunction(e)&&X.isFunction(t)?yn.apply(this,arguments):this.each(function(){(n?e:g(this))?X(this).show():X(this).hide()})}}),X.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=nn(e,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":X.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var s,r,l,o=X.camelCase(n),c=e.style;
if(n=X.cssProps[o]||(X.cssProps[o]=v(c,o)),l=X.cssHooks[n]||X.cssHooks[o],i===t)return l&&"get"in l&&(s=l.get(e,!1,a))!==t?s:c[n];if(r=typeof i,"string"===r&&(s=un.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(X.css(e,n)),r="number"),!(null==i||"number"===r&&isNaN(i)||("number"!==r||X.cssNumber[o]||(i+="px"),l&&"set"in l&&(i=l.set(e,i,a))===t)))try{c[n]=i}catch(d){}}},css:function(e,n,i,a){var s,r,l,o=X.camelCase(n);return n=X.cssProps[o]||(X.cssProps[o]=v(e.style,o)),l=X.cssHooks[n]||X.cssHooks[o],l&&"get"in l&&(s=l.get(e,!0,a)),s===t&&(s=nn(e,n)),"normal"===s&&n in fn&&(s=fn[n]),i||a!==t?(r=parseFloat(s),i||X.isNumeric(r)?r||0:s):s
},swap:function(e,t,n){var i,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];i=n.call(e);for(a in t)e.style[a]=s[a];return i}}),e.getComputedStyle?nn=function(e,t){var n,i,a,s,r=getComputedStyle(e,null),l=e.style;return r&&(n=r[t],""!==n||X.contains(e.ownerDocument.documentElement,e)||(n=X.style(e,t)),hn.test(n)&&cn.test(t)&&(i=l.width,a=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=n,n=r.width,l.width=i,l.minWidth=a,l.maxWidth=s)),n}:q.documentElement.currentStyle&&(nn=function(e,t){var n,i,a=e.currentStyle&&e.currentStyle[t],s=e.style;
return null==a&&s&&s[t]&&(a=s[t]),hn.test(a)&&!on.test(t)&&(n=s.left,i=e.runtimeStyle&&e.runtimeStyle.left,i&&(e.runtimeStyle.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=n,i&&(e.runtimeStyle.left=i)),""===a?"auto":a}),X.each(["height","width"],function(e,n){X.cssHooks[n]={get:function(e,i,a){return i?0!==e.offsetWidth||"none"!==nn(e,"display")?x(e,n,a):X.swap(e,mn,function(){return x(e,n,a)}):t},set:function(e,t,i){return b(e,t,i?w(e,n,i,X.support.boxSizing&&"border-box"===X.css(e,"boxSizing")):0)
}}}),X.support.opacity||(X.cssHooks.opacity={get:function(e,t){return ln.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,a=X.isNumeric(t)?"alpha(opacity="+100*t+")":"",s=i&&i.filter||n.filter||"";n.zoom=1,t>=1&&""===X.trim(s.replace(rn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=rn.test(s)?s.replace(rn,a):s+" "+a)}}),X(function(){X.support.reliableMarginRight||(X.cssHooks.marginRight={get:function(e,n){return X.swap(e,{display:"inline-block"},function(){return n?nn(e,"marginRight"):t
})}}),!X.support.pixelPosition&&X.fn.position&&X.each(["top","left"],function(e,t){X.cssHooks[t]={get:function(e,n){if(n){var i=nn(e,t);return hn.test(i)?X(e).position()[t]+"px":i}}}})}),X.expr&&X.expr.filters&&(X.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!X.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||nn(e,"display"))},X.expr.filters.visible=function(e){return!X.expr.filters.hidden(e)}),X.each({margin:"",padding:"",border:"Width"},function(e,t){X.cssHooks[e+t]={expand:function(n){var i,a="string"==typeof n?n.split(" "):[n],s={};
for(i=0;4>i;i++)s[e+vn[i]+t]=a[i]||a[i-2]||a[0];return s}},cn.test(e)||(X.cssHooks[e+t].set=b)});var bn=/%20/g,wn=/\[\]$/,xn=/\r?\n/g,kn=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Sn=/^(?:select|textarea)/i;X.fn.extend({serialize:function(){return X.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?X.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Sn.test(this.nodeName)||kn.test(this.type))
}).map(function(e,t){var n=X(this).val();return null==n?null:X.isArray(n)?X.map(n,function(e){return{name:t.name,value:e.replace(xn,"\r\n")}}):{name:t.name,value:n.replace(xn,"\r\n")}}).get()}}),X.param=function(e,n){var i,a=[],s=function(e,t){t=X.isFunction(t)?t():null==t?"":t,a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=X.ajaxSettings&&X.ajaxSettings.traditional),X.isArray(e)||e.jquery&&!X.isPlainObject(e))X.each(e,function(){s(this.name,this.value)});else for(i in e)S(i,e[i],n,s);
return a.join("&").replace(bn,"+")};var Cn,An,In=/#.*$/,Pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,_n=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Mn=/^\/\//,Dn=/\?/,Ln=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,En=/([?&])_=[^&]*/,Nn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,On=X.fn.load,Rn={},$n={},Bn=["*/"]+["*"];try{Cn=F.href}catch(jn){Cn=q.createElement("a"),Cn.href="",Cn=Cn.href}An=Nn.exec(Cn.toLowerCase())||[],X.fn.load=function(e,n,i){if("string"!=typeof e&&On)return On.apply(this,arguments);
if(!this.length)return this;var a,s,r,l=this,o=e.indexOf(" ");return o>=0&&(a=e.slice(o,e.length),e=e.slice(0,o)),X.isFunction(n)?(i=n,n=t):"object"==typeof n&&(s="POST"),X.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){i&&l.each(i,r||[e.responseText,t,e])}}).done(function(e){r=arguments,l.html(a?X("<div>").append(e.replace(Ln,"")).find(a):e)}),this},X.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){X.fn[t]=function(e){return this.on(t,e)
}}),X.each(["get","post"],function(e,n){X[n]=function(e,i,a,s){return X.isFunction(i)&&(s=s||a,a=i,i=t),X.ajax({type:n,url:e,data:i,success:a,dataType:s})}}),X.extend({getScript:function(e,n){return X.get(e,t,n,"script")},getJSON:function(e,t,n){return X.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?I(e,X.ajaxSettings):(t=e,e=X.ajaxSettings),I(e,t),e},ajaxSettings:{url:Cn,isLocal:_n.test(An[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Bn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":X.parseJSON,"text xml":X.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:C(Rn),ajaxTransport:C($n),ajax:function(e,n){function i(e,n,i,r){var c,h,y,b,x,S=n;
2!==w&&(w=2,o&&clearTimeout(o),l=t,s=r||"",k.readyState=e>0?4:0,i&&(b=P(u,k,i)),e>=200&&300>e||304===e?(u.ifModified&&(x=k.getResponseHeader("Last-Modified"),x&&(X.lastModified[a]=x),x=k.getResponseHeader("Etag"),x&&(X.etag[a]=x)),304===e?(S="notmodified",c=!0):(c=_(u,b),S=c.state,h=c.data,y=c.error,c=!y)):(y=S,(!S||e)&&(S="error",0>e&&(e=0))),k.status=e,k.statusText=""+(n||S),c?f.resolveWith(p,[h,S,k]):f.rejectWith(p,[k,S,y]),k.statusCode(g),g=t,d&&m.trigger("ajax"+(c?"Success":"Error"),[k,u,c?h:y]),v.fireWith(p,[k,S]),d&&(m.trigger("ajaxComplete",[k,u]),--X.active||X.event.trigger("ajaxStop")))
}"object"==typeof e&&(n=e,e=t),n=n||{};var a,s,r,l,o,c,d,h,u=X.ajaxSetup({},n),p=u.context||u,m=p!==u&&(p.nodeType||p instanceof X)?X(p):X.event,f=X.Deferred(),v=X.Callbacks("once memory"),g=u.statusCode||{},y={},b={},w=0,x="canceled",k={readyState:0,setRequestHeader:function(e,t){if(!w){var n=e.toLowerCase();e=b[n]=b[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===w?s:null},getResponseHeader:function(e){var n;if(2===w){if(!r)for(r={};n=Pn.exec(s);)r[n[1].toLowerCase()]=n[2];
n=r[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return w||(u.mimeType=e),this},abort:function(e){return e=e||x,l&&l.abort(e),i(0,e),this}};if(f.promise(k),k.success=k.done,k.error=k.fail,k.complete=v.add,k.statusCode=function(e){if(e){var t;if(2>w)for(t in e)g[t]=[g[t],e[t]];else t=e[k.status],k.always(t)}return this},u.url=((e||u.url)+"").replace(In,"").replace(Mn,An[1]+"//"),u.dataTypes=X.trim(u.dataType||"*").toLowerCase().split(tt),null==u.crossDomain&&(c=Nn.exec(u.url.toLowerCase()),u.crossDomain=!(!c||c[1]==An[1]&&c[2]==An[2]&&(c[3]||("http:"===c[1]?80:443))==(An[3]||("http:"===An[1]?80:443)))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=X.param(u.data,u.traditional)),A(Rn,u,n,k),2===w)return k;
if(d=u.global,u.type=u.type.toUpperCase(),u.hasContent=!Tn.test(u.type),d&&0===X.active++&&X.event.trigger("ajaxStart"),!u.hasContent&&(u.data&&(u.url+=(Dn.test(u.url)?"&":"?")+u.data,delete u.data),a=u.url,u.cache===!1)){var S=X.now(),C=u.url.replace(En,"$1_="+S);u.url=C+(C===u.url?(Dn.test(u.url)?"&":"?")+"_="+S:"")}(u.data&&u.hasContent&&u.contentType!==!1||n.contentType)&&k.setRequestHeader("Content-Type",u.contentType),u.ifModified&&(a=a||u.url,X.lastModified[a]&&k.setRequestHeader("If-Modified-Since",X.lastModified[a]),X.etag[a]&&k.setRequestHeader("If-None-Match",X.etag[a])),k.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Bn+"; q=0.01":""):u.accepts["*"]);
for(h in u.headers)k.setRequestHeader(h,u.headers[h]);if(u.beforeSend&&(u.beforeSend.call(p,k,u)===!1||2===w))return k.abort();x="abort";for(h in{success:1,error:1,complete:1})k[h](u[h]);if(l=A($n,u,n,k)){k.readyState=1,d&&m.trigger("ajaxSend",[k,u]),u.async&&u.timeout>0&&(o=setTimeout(function(){k.abort("timeout")},u.timeout));try{w=1,l.send(y,i)}catch(I){if(!(2>w))throw I;i(-1,I)}}else i(-1,"No Transport");return k},active:0,lastModified:{},etag:{}});var Vn=[],qn=/\?/,Fn=/(=)\?(?=&|$)|\?\?/,Un=X.now();
X.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vn.pop()||X.expando+"_"+Un++;return this[e]=!0,e}}),X.ajaxPrefilter("json jsonp",function(n,i,a){var s,r,l,o=n.data,c=n.url,d=n.jsonp!==!1,h=d&&Fn.test(c),u=d&&!h&&"string"==typeof o&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(o);return"jsonp"===n.dataTypes[0]||h||u?(s=n.jsonpCallback=X.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,r=e[s],h?n.url=c.replace(Fn,"$1"+s):u?n.data=o.replace(Fn,"$1"+s):d&&(n.url+=(qn.test(c)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return l||X.error(s+" was not called"),l[0]
},n.dataTypes[0]="json",e[s]=function(){l=arguments},a.always(function(){e[s]=r,n[s]&&(n.jsonpCallback=i.jsonpCallback,Vn.push(s)),l&&X.isFunction(r)&&r(l[0]),l=r=t}),"script"):t}),X.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return X.globalEval(e),e}}}),X.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)
}),X.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=q.head||q.getElementsByTagName("head")[0]||q.documentElement;return{send:function(a,s){n=q.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,a){(a||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=t,a||s(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)
}}}});var Hn,zn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,Wn=0;X.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&T()||M()}:T,function(e){X.extend(X.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(X.ajaxSettings.xhr()),X.support.ajax&&X.ajaxTransport(function(n){if(!n.crossDomain||X.support.cors){var i;return{send:function(a,s){var r,l,o=n.xhr();if(n.username?o.open(n.type,n.url,n.async,n.username,n.password):o.open(n.type,n.url,n.async),n.xhrFields)for(l in n.xhrFields)o[l]=n.xhrFields[l];
n.mimeType&&o.overrideMimeType&&o.overrideMimeType(n.mimeType),n.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");try{for(l in a)o.setRequestHeader(l,a[l])}catch(c){}o.send(n.hasContent&&n.data||null),i=function(e,a){var l,c,d,h,u;try{if(i&&(a||4===o.readyState))if(i=t,r&&(o.onreadystatechange=X.noop,zn&&delete Hn[r]),a)4!==o.readyState&&o.abort();else{l=o.status,d=o.getAllResponseHeaders(),h={},u=o.responseXML,u&&u.documentElement&&(h.xml=u);try{h.text=o.responseText}catch(e){}try{c=o.statusText
}catch(p){c=""}l||!n.isLocal||n.crossDomain?1223===l&&(l=204):l=h.text?200:404}}catch(m){a||s(-1,m)}h&&s(l,c,h,d)},n.async?4===o.readyState?setTimeout(i,0):(r=++Wn,zn&&(Hn||(Hn={},X(e).unload(zn)),Hn[r]=i),o.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var Yn,Kn,Jn=/^(?:toggle|show|hide)$/,Gn=RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Qn=/queueHooks$/,Xn=[O],Zn={"*":[function(e,t){var n,i,a,s=this.createTween(e,t),r=Gn.exec(t),l=s.cur(),o=+l||0,c=1;if(r){if(n=+r[2],i=r[3]||(X.cssNumber[e]?"":"px"),"px"!==i&&o){o=X.css(s.elem,e,!0)||n||1;
do a=c=c||".5",o/=c,X.style(s.elem,e,o+i),c=s.cur()/l;while(1!==c&&c!==a)}s.unit=i,s.start=o,s.end=r[1]?o+(r[1]+1)*n:n}return s}]};X.Animation=X.extend(E,{tweener:function(e,t){X.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,a=e.length;a>i;i++)n=e[i],Zn[n]=Zn[n]||[],Zn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),X.Tween=R,R.prototype={constructor:R,init:function(e,t,n,i,a,s){this.elem=e,this.prop=n,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(X.cssNumber[n]?"":"px")
},cur:function(){var e=R.propHooks[this.prop];return e&&e.get?e.get(this):R.propHooks._default.get(this)},run:function(e){var t,n=R.propHooks[this.prop];return this.pos=t=X.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration),this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=X.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]
},set:function(e){X.fx.step[e.prop]?X.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[X.cssProps[e.prop]]||X.cssHooks[e.prop])?X.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},X.each(["toggle","show","hide"],function(e,t){var n=X.fn[t];X.fn[t]=function(i,a,s){return null==i||"boolean"==typeof i||!e&&X.isFunction(i)&&X.isFunction(a)?n.apply(this,arguments):this.animate($(t,!0),i,a,s)
}}),X.fn.extend({fadeTo:function(e,t,n,i){return this.filter(g).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var a=X.isEmptyObject(e),s=X.speed(t,n,i),r=function(){var t=E(this,X.extend({},e),s);a&&t.stop(!0)};return a||s.queue===!1?this.each(r):this.queue(s.queue,r)},stop:function(e,n,i){var a=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",s=X.timers,r=X._data(this);
if(n)r[n]&&r[n].stop&&a(r[n]);else for(n in r)r[n]&&r[n].stop&&Qn.test(n)&&a(r[n]);for(n=s.length;n--;)s[n].elem!==this||null!=e&&s[n].queue!==e||(s[n].anim.stop(i),t=!1,s.splice(n,1));(t||!i)&&X.dequeue(this,e)})}}),X.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){X.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),X.speed=function(e,t,n){var i=e&&"object"==typeof e?X.extend({},e):{complete:n||!n&&t||X.isFunction(e)&&e,duration:e,easing:n&&t||t&&!X.isFunction(t)&&t};
return i.duration=X.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in X.fx.speeds?X.fx.speeds[i.duration]:X.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){X.isFunction(i.old)&&i.old.call(this),i.queue&&X.dequeue(this,i.queue)},i},X.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},X.timers=[],X.fx=R.prototype.init,X.fx.tick=function(){for(var e,t=X.timers,n=0;t.length>n;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);
t.length||X.fx.stop()},X.fx.timer=function(e){e()&&X.timers.push(e)&&!Kn&&(Kn=setInterval(X.fx.tick,X.fx.interval))},X.fx.interval=13,X.fx.stop=function(){clearInterval(Kn),Kn=null},X.fx.speeds={slow:600,fast:200,_default:400},X.fx.step={},X.expr&&X.expr.filters&&(X.expr.filters.animated=function(e){return X.grep(X.timers,function(t){return e===t.elem}).length});var ei=/^(?:body|html)$/i;X.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){X.offset.setOffset(this,e,t)
});var n,i,a,s,r,l,o,c,d,h,u=this[0],p=u&&u.ownerDocument;if(p)return(a=p.body)===u?X.offset.bodyOffset(u):(i=p.documentElement,X.contains(i,u)?(n=u.getBoundingClientRect(),s=B(p),r=i.clientTop||a.clientTop||0,l=i.clientLeft||a.clientLeft||0,o=s.pageYOffset||i.scrollTop,c=s.pageXOffset||i.scrollLeft,d=n.top+o-r,h=n.left+c-l,{top:d,left:h}):{top:0,left:0})},X.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return X.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(X.css(e,"marginTop"))||0,n+=parseFloat(X.css(e,"marginLeft"))||0),{top:t,left:n}
},setOffset:function(e,t,n){var i=X.css(e,"position");"static"===i&&(e.style.position="relative");var a,s,r=X(e),l=r.offset(),o=X.css(e,"top"),c=X.css(e,"left"),d=("absolute"===i||"fixed"===i)&&X.inArray("auto",[o,c])>-1,h={},u={};d?(u=r.position(),a=u.top,s=u.left):(a=parseFloat(o)||0,s=parseFloat(c)||0),X.isFunction(t)&&(t=t.call(e,n,l)),null!=t.top&&(h.top=t.top-l.top+a),null!=t.left&&(h.left=t.left-l.left+s),"using"in t?t.using.call(e,h):r.css(h)}},X.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),n=this.offset(),i=ei.test(t[0].nodeName)?{top:0,left:0}:t.offset();
return n.top-=parseFloat(X.css(e,"marginTop"))||0,n.left-=parseFloat(X.css(e,"marginLeft"))||0,i.top+=parseFloat(X.css(t[0],"borderTopWidth"))||0,i.left+=parseFloat(X.css(t[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||q.body;e&&!ei.test(e.nodeName)&&"static"===X.css(e,"position");)e=e.offsetParent;return e||q.body})}}),X.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);
X.fn[e]=function(a){return X.access(this,function(e,a,s){var r=B(e);return s===t?r?n in r?r[n]:r.document.documentElement[a]:e[a]:(r?r.scrollTo(i?X(r).scrollLeft():s,i?s:X(r).scrollTop()):e[a]=s,t)},e,a,arguments.length,null)}}),X.each({Height:"height",Width:"width"},function(e,n){X.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,a){X.fn[a]=function(a,s){var r=arguments.length&&(i||"boolean"!=typeof a),l=i||(a===!0||s===!0?"margin":"border");return X.access(this,function(n,i,a){var s;return X.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):a===t?X.css(n,i,a,l):X.style(n,i,a,l)
},n,r?a:t,r)}})}),e.jQuery=e.$=X,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return X})}(window),function(){var e=this,t=e._,n={},i=Array.prototype,a=Object.prototype,s=Function.prototype,r=i.push,l=i.slice,o=i.concat,c=(i.unshift,a.toString),d=a.hasOwnProperty,h=i.forEach,u=i.map,p=i.reduce,m=i.reduceRight,f=i.filter,v=i.every,g=i.some,y=i.indexOf,b=i.lastIndexOf,w=Array.isArray,x=Object.keys,k=s.bind,S=function(e){return e instanceof S?e:this instanceof S?(this._wrapped=e,void 0):new S(e)
};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.4.2";var C=S.each=S.forEach=function(e,t,i){if(null!=e)if(h&&e.forEach===h)e.forEach(t,i);else if(e.length===+e.length){for(var a=0,s=e.length;s>a;a++)if(t.call(i,e[a],a,e)===n)return}else for(var r in e)if(S.has(e,r)&&t.call(i,e[r],r,e)===n)return};S.map=S.collect=function(e,t,n){var i=[];return null==e?i:u&&e.map===u?e.map(t,n):(C(e,function(e,a,s){i[i.length]=t.call(n,e,a,s)
}),i)},S.reduce=S.foldl=S.inject=function(e,t,n,i){var a=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=S.bind(t,i)),a?e.reduce(t,n):e.reduce(t);if(C(e,function(e,s,r){a?n=t.call(i,n,e,s,r):(n=e,a=!0)}),!a)throw new TypeError("Reduce of empty array with no initial value");return n},S.reduceRight=S.foldr=function(e,t,n,i){var a=arguments.length>2;if(null==e&&(e=[]),m&&e.reduceRight===m)return i&&(t=S.bind(t,i)),arguments.length>2?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;
if(s!==+s){var r=S.keys(e);s=r.length}if(C(e,function(l,o,c){o=r?r[--s]:--s,a?n=t.call(i,n,e[o],o,c):(n=e[o],a=!0)}),!a)throw new TypeError("Reduce of empty array with no initial value");return n},S.find=S.detect=function(e,t,n){var i;return A(e,function(e,a,s){return t.call(n,e,a,s)?(i=e,!0):void 0}),i},S.filter=S.select=function(e,t,n){var i=[];return null==e?i:f&&e.filter===f?e.filter(t,n):(C(e,function(e,a,s){t.call(n,e,a,s)&&(i[i.length]=e)}),i)},S.reject=function(e,t,n){var i=[];return null==e?i:(C(e,function(e,a,s){t.call(n,e,a,s)||(i[i.length]=e)
}),i)},S.every=S.all=function(e,t,i){t||(t=S.identity);var a=!0;return null==e?a:v&&e.every===v?e.every(t,i):(C(e,function(e,s,r){return(a=a&&t.call(i,e,s,r))?void 0:n}),!!a)};var A=S.some=S.any=function(e,t,i){t||(t=S.identity);var a=!1;return null==e?a:g&&e.some===g?e.some(t,i):(C(e,function(e,s,r){return a||(a=t.call(i,e,s,r))?n:void 0}),!!a)};S.contains=S.include=function(e,t){var n=!1;return null==e?n:y&&e.indexOf===y?-1!=e.indexOf(t):n=A(e,function(e){return e===t})},S.invoke=function(e,t){var n=l.call(arguments,2);
return S.map(e,function(e){return(S.isFunction(t)?t:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.where=function(e,t){return S.isEmpty(t)?[]:S.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-1/0;var i={computed:-1/0};return C(e,function(e,a,s){var r=t?t.call(n,e,a,s):e;r>=i.computed&&(i={value:e,computed:r})
}),i.value},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&65535>e.length)return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return 1/0;var i={computed:1/0};return C(e,function(e,a,s){var r=t?t.call(n,e,a,s):e;i.computed>r&&(i={value:e,computed:r})}),i.value},S.shuffle=function(e){var t,n=0,i=[];return C(e,function(e){t=S.random(n++),i[n-1]=i[t],i[t]=e}),i};var I=function(e){return S.isFunction(e)?e:function(t){return t[e]}};S.sortBy=function(e,t,n){var i=I(t);return S.pluck(S.map(e,function(e,t,a){return{value:e,index:t,criteria:i.call(n,e,t,a)}
}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index<t.index?-1:1}),"value")};var P=function(e,t,n,i){var a={},s=I(t);return C(e,function(t,r){var l=s.call(n,t,r,e);i(a,l,t)}),a};S.groupBy=function(e,t,n){return P(e,t,n,function(e,t,n){(S.has(e,t)?e[t]:e[t]=[]).push(n)})},S.countBy=function(e,t,n){return P(e,t,n,function(e,t){S.has(e,t)||(e[t]=0),e[t]++})},S.sortedIndex=function(e,t,n,i){n=null==n?S.identity:I(n);for(var a=n.call(i,t),s=0,r=e.length;r>s;){var l=s+r>>>1;
a>n.call(i,e[l])?s=l+1:r=l}return s},S.toArray=function(e){return e?e.length===+e.length?l.call(e):S.values(e):[]},S.size=function(e){return e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return null==t||n?e[0]:l.call(e,0,t)},S.initial=function(e,t,n){return l.call(e,0,e.length-(null==t||n?1:t))},S.last=function(e,t,n){return null==t||n?e[e.length-1]:l.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,function(e){return!!e
})};var _=function(e,t,n){return C(e,function(e){S.isArray(e)?t?r.apply(n,e):_(e,t,n):n.push(e)}),n};S.flatten=function(e,t){return _(e,t,[])},S.without=function(e){return S.difference(e,l.call(arguments,1))},S.uniq=S.unique=function(e,t,n,i){var a=n?S.map(e,n,i):e,s=[],r=[];return C(a,function(n,i){(t?i&&r[r.length-1]===n:S.contains(r,n))||(r.push(n),s.push(e[i]))}),s},S.union=function(){return S.uniq(o.apply(i,arguments))},S.intersection=function(e){var t=l.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0
})})},S.difference=function(e){var t=o.apply(i,l.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=l.call(arguments),t=S.max(S.pluck(e,"length")),n=Array(t),i=0;t>i;i++)n[i]=S.pluck(e,""+i);return n},S.object=function(e,t){for(var n={},i=0,a=e.length;a>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},S.indexOf=function(e,t,n){if(null==e)return-1;var i=0,a=e.length;if(n){if("number"!=typeof n)return i=S.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,a+n):n
}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;a>i;i++)if(e[i]===t)return i;return-1},S.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(b&&e.lastIndexOf===b)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var a=i?n:e.length;a--;)if(e[a]===t)return a;return-1},S.range=function(e,t,n){1>=arguments.length&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),a=0,s=Array(i);i>a;)s[a++]=e,e+=n;return s};var T=function(){};S.bind=function(e,t){var n,i;if(e.bind===k&&k)return k.apply(e,l.call(arguments,1));
if(!S.isFunction(e))throw new TypeError;return i=l.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(l.call(arguments)));T.prototype=e.prototype;var a=new T,s=e.apply(a,i.concat(l.call(arguments)));return Object(s)===s?s:a}},S.bindAll=function(e){var t=l.call(arguments,1);return 0==t.length&&(t=S.functions(e)),C(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var i=t.apply(this,arguments);return S.has(n,i)?n[i]:n[i]=e.apply(this,arguments)
}},S.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(l.call(arguments,1)))},S.throttle=function(e,t){var n,i,a,s,r,l,o=S.debounce(function(){r=s=!1},t);return function(){n=this,i=arguments;var c=function(){a=null,r&&(l=e.apply(n,i)),o()};return a||(a=setTimeout(c,t)),s?r=!0:(s=!0,l=e.apply(n,i)),o(),l}},S.debounce=function(e,t,n){var i,a;return function(){var s=this,r=arguments,l=function(){i=null,n||(a=e.apply(s,r))
},o=n&&!i;return clearTimeout(i),i=setTimeout(l,t),o&&(a=e.apply(s,r)),a}},S.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return function(){var n=[e];return r.apply(n,arguments),t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return 0>=e?t():function(){return 1>--e?t.apply(this,arguments):void 0}},S.keys=x||function(e){if(e!==Object(e))throw new TypeError("Invalid object");
var t=[];for(var n in e)S.has(e,n)&&(t[t.length]=n);return t},S.values=function(e){var t=[];for(var n in e)S.has(e,n)&&t.push(e[n]);return t},S.pairs=function(e){var t=[];for(var n in e)S.has(e,n)&&t.push([n,e[n]]);return t},S.invert=function(e){var t={};for(var n in e)S.has(e,n)&&(t[e[n]]=n);return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return C(l.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={},n=o.apply(i,l.call(arguments,1));
return C(n,function(n){n in e&&(t[n]=e[n])}),t},S.omit=function(e){var t={},n=o.apply(i,l.call(arguments,1));for(var a in e)S.contains(n,a)||(t[a]=e[a]);return t},S.defaults=function(e){return C(l.call(arguments,1),function(t){for(var n in t)null==e[n]&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var M=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);
var a=c.call(e);if(a!=c.call(t))return!1;switch(a){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return i[s]==t;n.push(e),i.push(t);var r=0,l=!0;if("[object Array]"==a){if(r=e.length,l=r==t.length)for(;r--&&(l=M(e[r],t[r],n,i)););}else{var o=e.constructor,d=t.constructor;
if(o!==d&&!(S.isFunction(o)&&o instanceof o&&S.isFunction(d)&&d instanceof d))return!1;for(var h in e)if(S.has(e,h)&&(r++,!(l=S.has(t,h)&&M(e[h],t[h],n,i))))break;if(l){for(h in t)if(S.has(t,h)&&!r--)break;l=!r}}return n.pop(),i.pop(),l};S.isEqual=function(e,t){return M(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=w||function(e){return"[object Array]"==c.call(e)
},S.isObject=function(e){return e===Object(e)},C(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),S.isFunction=function(e){return"function"==typeof e},S.isFinite=function(e){return S.isNumber(e)&&isFinite(e)},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)
},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return d.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var i=0;e>i;i++)t.call(n,i)},S.random=function(e,t){return null==t&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};D.unescape=S.invert(D.escape);var L={escape:RegExp("["+S.keys(D.escape).join("")+"]","g"),unescape:RegExp("("+S.keys(D.unescape).join("|")+")","g")};
S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace(L[e],function(t){return D[e][t]})}}),S.result=function(e,t){if(null==e)return null;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){C(S.functions(e),function(t){var n=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return r.apply(e,arguments),$.call(this,n.apply(S,e))}})};var E=0;S.uniqueId=function(e){var t=E++;return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};
var N=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,n){n=S.defaults({},n,S.templateSettings);var i=RegExp([(n.escape||N).source,(n.interpolate||N).source,(n.evaluate||N).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(i,function(t,n,i,r,l){s+=e.slice(a,l).replace(R,function(e){return"\\"+O[e]}),s+=n?"'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?"'+\n((__t=("+i+"))==null?'':__t)+\n'":r?"';\n"+r+"\n__p+='":"",a=l+t.length
}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var r=Function(n.variable||"obj","_",s)}catch(l){throw l.source=s,l}if(t)return r(t,S);var o=function(e){return r.call(this,e,S)};return o.source="function("+(n.variable||"obj")+"){\n"+s+"}",o},S.chain=function(e){return S(e).chain()};var $=function(e){return this._chain?S(e).chain():e};S.mixin(S),C(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];
S.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],$.call(this,n)}}),C(["concat","join","slice"],function(e){var t=i[e];S.prototype[e]=function(){return $.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(){}),function(){var e,t=this,n=t.Backbone,i=Array.prototype.slice,a=Array.prototype.splice;
e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="0.9.2";var s=t._;s||void 0===require||(s=require("underscore"));var r=t.jQuery||t.Zepto||t.ender;e.setDomLibrary=function(e){r=e},e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var l=/\s+/,o=e.Events={on:function(e,t,n){var i,a,s,r,o;if(!t)return this;for(e=e.split(l),i=this._callbacks||(this._callbacks={});a=e.shift();)o=i[a],s=o?o.tail:{},s.next=r={},s.context=n,s.callback=t,i[a]={tail:r,next:o?o.next:s};
return this},off:function(e,t,n){var i,a,r,o,c,d;if(a=this._callbacks){if(!(e||t||n))return delete this._callbacks,this;for(e=e?e.split(l):s.keys(a);i=e.shift();)if(r=a[i],delete a[i],r&&(t||n))for(o=r.tail;(r=r.next)!==o;)c=r.callback,d=r.context,(t&&c!==t||n&&d!==n)&&this.on(i,c,d);return this}},trigger:function(e){var t,n,a,s,r,o,c;if(!(a=this._callbacks))return this;for(o=a.all,e=e.split(l),c=i.call(arguments,1);t=e.shift();){if(n=a[t])for(s=n.tail;(n=n.next)!==s;)n.callback.apply(n.context||this,c);
if(n=o)for(s=n.tail,r=[t].concat(c);(n=n.next)!==s;)n.callback.apply(n.context||this,r)}return this}};o.bind=o.on,o.unbind=o.off;var c=e.Model=function(e,t){var n;e||(e={}),t&&t.parse&&(e=this.parse(e)),(n=I(this,"defaults"))&&(e=s.extend({},n,e)),t&&t.collection&&(this.collection=t.collection),this.attributes={},this._escapedAttributes={},this.cid=s.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(e,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=s.clone(this.attributes),this.initialize.apply(this,arguments)
};s.extend(c.prototype,o,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return s.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;if(t=this._escapedAttributes[e])return t;var n=this.get(e);return this._escapedAttributes[e]=s.escape(null==n?"":""+n)},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,a,r;if(s.isObject(e)||null==e?(i=e,n=t):(i={},i[e]=t),n||(n={}),!i)return this;if(i instanceof c&&(i=i.attributes),n.unset)for(a in i)i[a]=void 0;
if(!this._validate(i,n))return!1;this.idAttribute in i&&(this.id=i[this.idAttribute]);var l=n.changes={},o=this.attributes,d=this._escapedAttributes,h=this._previousAttributes||{};for(a in i)r=i[a],(!s.isEqual(o[a],r)||n.unset&&s.has(o,a))&&(delete d[a],(n.silent?this._silent:l)[a]=!0),n.unset?delete o[a]:o[a]=r,s.isEqual(h[a],r)&&s.has(o,a)==s.has(h,a)?(delete this.changed[a],delete this._pending[a]):(this.changed[a]=r,n.silent||(this._pending[a]=!0));return n.silent||this.change(n),this},unset:function(e,t){return(t||(t={})).unset=!0,this.set(e,null,t)
},clear:function(e){return(e||(e={})).unset=!0,this.set(s.clone(this.attributes),e)},fetch:function(t){t=t?s.clone(t):{};var n=this,i=t.success;return t.success=function(e,a,s){return n.set(n.parse(e,s),t)?(i&&i(n,e),void 0):!1},t.error=e.wrapError(t.error,n,t),(this.sync||e.sync).call(this,"read",this,t)},save:function(t,n,i){var a,r;if(s.isObject(t)||null==t?(a=t,i=n):(a={},a[t]=n),i=i?s.clone(i):{},i.wait){if(!this._validate(a,i))return!1;r=s.clone(this.attributes)}var l=s.extend({},i,{silent:!0});
if(a&&!this.set(a,i.wait?l:i))return!1;var o=this,c=i.success;i.success=function(e,t,n){var r=o.parse(e,n);return i.wait&&(delete i.wait,r=s.extend(a||{},r)),o.set(r,i)?(c?c(o,e):o.trigger("sync",o,e,i),void 0):!1},i.error=e.wrapError(i.error,o,i);var d=this.isNew()?"create":"update",h=(this.sync||e.sync).call(this,d,this,i);return i.wait&&this.set(r,l),h},destroy:function(t){t=t?s.clone(t):{};var n=this,i=t.success,a=function(){n.trigger("destroy",n,n.collection,t)};if(this.isNew())return a(),!1;
t.success=function(e){t.wait&&a(),i?i(n,e):n.trigger("sync",n,e,t)},t.error=e.wrapError(t.error,n,t);var r=(this.sync||e.sync).call(this,"delete",this,t);return t.wait||a(),r},url:function(){var e=I(this,"urlRoot")||I(this.collection,"url")||P();return this.isNew()?e:e+("/"==e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(e){e||(e={});var t=this._changing;
this._changing=!0;for(var n in this._silent)this._pending[n]=!0;var i=s.extend({},e.changes,this._silent);this._silent={};for(var n in i)this.trigger("change:"+n,this,this.get(n),e);if(t)return this;for(;!s.isEmpty(this._pending);){this._pending={},this.trigger("change",this,e);for(var n in this.changed)this._pending[n]||this._silent[n]||delete this.changed[n];this._previousAttributes=s.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(e){return arguments.length?s.has(this.changed,e):!s.isEmpty(this.changed)
},changedAttributes:function(e){if(!e)return this.hasChanged()?s.clone(this.changed):!1;var t,n=!1,i=this._previousAttributes;for(var a in e)s.isEqual(i[a],t=e[a])||((n||(n={}))[a]=t);return n},previous:function(e){return arguments.length&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(e,t){if(t.silent||!this.validate)return!0;e=s.extend({},this.attributes,e);
var n=this.validate(e,t);return n?(t&&t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}});var d=e.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,{silent:!0,parse:t.parse})};s.extend(d.prototype,o,{model:c,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},add:function(e,t){var n,i,r,l,o,c,d={},h={},u=[];for(t||(t={}),e=s.isArray(e)?e.slice():[e],n=0,r=e.length;r>n;n++){if(!(l=e[n]=this._prepareModel(e[n],t)))throw Error("Can't add an invalid model to a collection");
o=l.cid,c=l.id,d[o]||this._byCid[o]||null!=c&&(h[c]||this._byId[c])?u.push(n):d[o]=h[c]=l}for(n=u.length;n--;)e.splice(u[n],1);for(n=0,r=e.length;r>n;n++)(l=e[n]).on("all",this._onModelEvent,this),this._byCid[l.cid]=l,null!=l.id&&(this._byId[l.id]=l);if(this.length+=r,i=null!=t.at?t.at:this.models.length,a.apply(this.models,[i,0].concat(e)),this.comparator&&this.sort({silent:!0}),t.silent)return this;for(n=0,r=this.models.length;r>n;n++)d[(l=this.models[n]).cid]&&(t.index=n,l.trigger("add",l,this,t));
return this},remove:function(e,t){var n,i,a,r;for(t||(t={}),e=s.isArray(e)?e.slice():[e],n=0,i=e.length;i>n;n++)r=this.getByCid(e[n])||this.get(e[n]),r&&(delete this._byId[r.id],delete this._byCid[r.cid],a=this.indexOf(r),this.models.splice(a,1),this.length--,t.silent||(t.index=a,r.trigger("remove",r,this,t)),this._removeReference(r));return this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,t),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,s.extend({at:0},t)),e
},shift:function(e){var t=this.at(0);return this.remove(t,e),t},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},where:function(e){return s.isEmpty(e)?[]:this.filter(function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},sort:function(e){if(e||(e={}),!this.comparator)throw Error("Cannot sort a set without a comparator");var t=s.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("reset",this,e),this
},pluck:function(e){return s.map(this.models,function(t){return t.get(e)})},reset:function(e,t){e||(e=[]),t||(t={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return this._reset(),this.add(e,s.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},fetch:function(t){t=t?s.clone(t):{},void 0===t.parse&&(t.parse=!0);var n=this,i=t.success;return t.success=function(e,a,s){n[t.add?"add":"reset"](n.parse(e,s),t),i&&i(n,e)},t.error=e.wrapError(t.error,n,t),(this.sync||e.sync).call(this,"read",this,t)
},create:function(e,t){var n=this;if(t=t?s.clone(t):{},e=this._prepareModel(e,t),!e)return!1;t.wait||n.add(e,t);var i=t.success;return t.success=function(a,s){t.wait&&n.add(a,t),i?i(a,s):a.trigger("sync",e,s,t)},e.save(null,t),e},parse:function(e){return e},chain:function(){return s(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(t||(t={}),e instanceof c)e.collection||(e.collection=this);else{var n=e;t.collection=this,e=new this.model(n,t),e._validate(e.attributes,t)||(e=!1)
}return e},_removeReference:function(e){this==e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!=e&&"remove"!=e||n==this)&&("destroy"==e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments))}});var h=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];
s.each(h,function(e){d.prototype[e]=function(){return s[e].apply(s,[this.models].concat(s.toArray(arguments)))}});var u=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},p=/:\w+/g,m=/\*\w+/g,f=/[-[\]{}()+?.,\\^$|#\s]/g;s.extend(u.prototype,o,{initialize:function(){},route:function(t,n,i){return e.history||(e.history=new v),s.isRegExp(t)||(t=this._routeToRegExp(t)),i||(i=this[n]),e.history.route(t,s.bind(function(a){var s=this._extractParameters(t,a);
i&&i.apply(this,s),this.trigger.apply(this,["route:"+n].concat(s)),e.history.trigger("route",this,n,s)},this)),this},navigate:function(t,n){e.history.navigate(t,n)},_bindRoutes:function(){if(this.routes){var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,i=e.length;i>n;n++)this.route(e[n][0],e[n][1],this[e[n][1]])}},_routeToRegExp:function(e){return e=e.replace(f,"\\$&").replace(p,"([^/]+)").replace(m,"(.*?)"),RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)
}});var v=e.History=function(){this.handlers=[],s.bindAll(this,"checkUrl")},g=/^[#\/]/,y=/msie [\w.]+/;v.started=!1,s.extend(v.prototype,o,{interval:50,getHash:function(e){var t=e?e.location:window.location,n=t.href.match(/#(.*)$/);return n?n[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n)}else e=this.getHash();return e.indexOf(this.options.root)||(e=e.substr(this.options.root.length)),e.replace(g,"")},start:function(e){if(v.started)throw Error("Backbone.history has already been started");
v.started=!0,this.options=s.extend({},{root:"/"},this.options,e),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var t=this.getFragment(),n=document.documentMode,i=y.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);i&&(this.iframe=r('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(t)),this._hasPushState?r(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?r(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=t;
var a=window.location,l=a.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!l?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&l&&a.hash&&(this.fragment=this.getHash().replace(g,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){r(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),v.started=!1
},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e==this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e==this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=s.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!v.started)return!1;
t&&t!==!0||(t={trigger:t});var n=(e||"").replace(g,"");this.fragment!=n&&(this._hasPushState?(0!=n.indexOf(this.options.root)&&(n=this.options.root+n),this.fragment=n,window.history[t.replace?"replaceState":"pushState"]({},document.title,n)):this._wantsHashChange?(this.fragment=n,this._updateHash(window.location,n,t.replace),this.iframe&&n!=this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,n,t.replace))):window.location.assign(this.options.root+e),t.trigger&&this.loadUrl(e))
},_updateHash:function(e,t,n){n?e.replace((""+e).replace(/(javascript:|#).*$/,"")+"#"+t):e.hash=t}});var b=e.View=function(e){this.cid=s.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName"];s.extend(b.prototype,o,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this
},make:function(e,t,n){var i=document.createElement(e);return t&&r(i).attr(t),n&&r(i).html(n),i},setElement:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=e instanceof r?e:r(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(e||(e=I(this,"events"))){this.undelegateEvents();for(var t in e){var n=e[t];if(s.isFunction(n)||(n=this[e[t]]),!n)throw Error('Method "'+e[t]+'" does not exist');var i=t.match(w),a=i[1],r=i[2];n=s.bind(n,this),a+=".delegateEvents"+this.cid,""===r?this.$el.bind(a,n):this.$el.delegate(r,a,n)
}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(e){this.options&&(e=s.extend({},this.options,e));for(var t=0,n=x.length;n>t;t++){var i=x[t];e[i]&&(this[i]=e[i])}this.options=e},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var e=I(this,"attributes")||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.setElement(this.make(this.tagName,e),!1)}}});var k=function(e,t){var n=A(this,e,t);return n.extend=this.extend,n
};c.extend=d.extend=u.extend=b.extend=k;var S={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};e.sync=function(t,n,i){var a=S[t];i||(i={});var l={type:a,dataType:"json"};return i.url||(l.url=I(n,"url")||P()),void 0!==i.data||!n||"create"!=t&&"update"!=t||(l.contentType="application/json",l.data=JSON.stringify(n.toJSON())),e.emulateJSON&&(l.contentType="application/x-www-form-urlencoded",l.data=l.data?{model:l.data}:{}),e.emulateHTTP&&("PUT"===a||"DELETE"===a)&&(e.emulateJSON&&(l.data._method=a),l.type="POST",l.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",a)
}),"GET"===l.type||e.emulateJSON||(l.processData=!1),r.ajax(s.extend(l,i))},e.wrapError=function(e,t,n){return function(i,a){a=i===t?a:i,e?e(t,a,n):t.trigger("error",t,a,n)}};var C=function(){},A=function(e,t,n){var i;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},s.extend(i,e),C.prototype=e.prototype,i.prototype=new C,t&&s.extend(i.prototype,t),n&&s.extend(i,n),i.prototype.constructor=i,i.__super__=e.prototype,i},I=function(e,t){return e&&e[t]?s.isFunction(e[t])?e[t]():e[t]:null
},P=function(){throw Error('A "url" property or function must be specified')}}.call(this),define("backbone",function(){}),define("plex/control/Dispatcher",["backbone"],function(){return _.clone(Backbone.Events)}),define("plex/control/utils/BrowserDetect",[],function(){var e={init:function(){this.browser=this.searchString(this.dataBrowser)||"Unknown Browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown Version",this.OS=this.searchString(this.dataOS)||"Unknown OS"
},searchString:function(e){for(var t=0;e.length>t;t++){var n=e[t].string,i=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(-1!=n.indexOf(e[t].subString))return e[t].identity}else if(i)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"Internet Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"WiiU",identity:"Wii U"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};
return e.init(),e}),define("plex/model/LocalStorageModel",["jquery","backbone"],function(e){var t=Backbone.Model.extend({populated:!1,storage:window.localStorage,save:function(e,t,n){var i,a=_.isFunction(this.storageKey)?this.storageKey():this.storageKey;_.isObject(e)||null===e?(i=e,n=t):(i={},i[e]=t),n=n?_.clone(n):{},n.error=Backbone.wrapError(n.error,this,n),this.set(i,n);try{var s=JSON.stringify(this.toJSON());this.storage.setItem(a,s),n.success&&n.success(this,!0)}catch(r){n.error(this,"Failed to save model to localStorage.")
}return this},populate:function(e){return this.populated?this:this.fetch(e)},fetch:function(e){var t=_.isFunction(this.storageKey)?this.storageKey():this.storageKey;e=e?_.clone(e):{},e.error=Backbone.wrapError(e.error,this,e);try{var n=this.storage.getItem(t);this.populated=!0,this.set(this.parse(n),e),e.success&&e.success(this,n)}catch(i){e.error(this,"Failed to get model from localStorage.")}return this},parse:function(t){return e.parseJSON(t)},destroy:function(e){var t=_.isFunction(this.storageKey)?this.storageKey():this.storageKey;
e=e?_.clone(e):{},e.error=Backbone.wrapError(e.error,this,e);try{this.storage.removeItem(t),this.trigger("destroy",this,this.collection,e),e.success&&e.success(this)}catch(n){e.error(this,"Failed to remove model from localStorage.")}return this}});return t}),define("plex/model/SettingsModel",["plex/control/utils/BrowserDetect","plex/model/LocalStorageModel"],function(e,t){var n=navigator.language||navigator.userLanguage||"en";n=n.split("-")[0];var i=t.extend({storageKey:"settings",plexPassSettings:["dashboardMyLibraryEnabled","dashboardOnDeckEnabled","dashboardRecentlyAddedEnabled","dashboardChannelsEnabled","dashboardSharedLibrariesEnabled","dashboardAnnouncementsEnabled","dashboardNowPlayingEnabled","dashboardQueueEnabled","dashboardRecommendationsEnabled","dashboardMyLibraryPriority","dashboardOnDeckPriority","dashboardRecentlyAddedPriority","dashboardChannelsPriority","dashboardSharedLibrariesPriority","dashboardAnnouncementsPriority","dashboardNowPlayingPriority","dashboardQueuePriority","dashboardRecommendationsPriority","dashboardOnDeckDynamicPriority","dashboardOnDeckWideThumbnails","dashboardRecentlyAddedDynamicPriority","dashboardRecentlyAddedWideThumbnails","dashboardChannelsLimit","dashboardChannelsDynamicPriority","dashboardChannelsLargeThumbnail","dashboardAnnouncementsHideUnread","dashboardAnnouncementsLastRead","dashboardQueueLimit","dashboardQueueDynamicPriority","dashboardRecommendationsLimit","dashboardRecommendationsDynamicPriority","syncVideoQuality","syncAudioQuality","syncPictureQuality"],defaults:{language:n,playThemeMusic:!1,keyboardShortcuts:!0,debugLevel:1,dashboardFluidWidth:!0,dashboardMyLibraryEnabled:!0,dashboardOnDeckEnabled:!0,dashboardRecentlyAddedEnabled:!0,dashboardChannelsEnabled:!0,dashboardSharedLibrariesEnabled:!0,dashboardNowPlayingEnabled:!0,dashboardAnnouncementsEnabled:!0,dashboardQueueEnabled:!0,dashboardRecommendationsEnabled:!0,dashboardMyLibraryPriority:1,dashboardOnDeckPriority:2,dashboardRecentlyAddedPriority:3,dashboardChannelsPriority:4,dashboardSharedLibrariesPriority:5,dashboardAnnouncementsPriority:1,dashboardNowPlayingPriority:2,dashboardQueuePriority:3,dashboardRecommendationsPriority:4,dashboardOnDeckDynamicPriority:!1,dashboardOnDeckWideThumbnails:"first",dashboardRecentlyAddedDynamicPriority:!1,dashboardRecentlyAddedWideThumbnails:"first",dashboardChannelsLimit:!0,dashboardChannelsDynamicPriority:!1,dashboardChannelsLargeThumbnail:!0,dashboardAnnouncementsHideUnread:!0,dashboardAnnouncementsLastRead:0,dashboardQueueLimit:!0,dashboardQueueDynamicPriority:!1,dashboardRecommendationsLimit:!0,dashboardRecommendationsDynamicPriority:!1,remoteSearch:!0,channelSearch:!0,quality:7,remoteQuality:5,directPlay:!0,directStream:!0,highestResolution:!1,preferAAC:"Wii U"===e.browser,directPlayAC3:!1,subtitleSize:100,audioBoost:100,syncVideoQuality:"medium",syncAudioQuality:"medium",syncPictureQuality:"medium",listType:"media-tile-list",episodeListType:"episode-tile-list",sidebarOpen:!1,dashboardSidebarOpen:!1,plexWebSettingsOpen:!1,videoVolume:1,musicVolume:1},initialize:function(){this.populate()
}});return new i}),define("plex/control/utils/LocalizationUtil",["plex/control/Dispatcher","plex/model/SettingsModel","jquery","underscore"],function(e,t,n){var i={en:"en.json","en-GB":"en-GB.json",af:"af.json",ca:"ca.json",cs:"cs.json",sr:"sr.json",da:"da.json",de:"de.json",et:"et.json",es:"es.json","es-419":"es-419.json",el:"el.json",fr:"fr.json",hr:"hr.json",is:"is.json",it:"it.json",lt:"lt.json",hu:"hu.json",nl:"nl.json",no:"no.json",pl:"pl.json",pt:"pt.json","pt-BR":"pt-BR.json",ru:"ru.json",ro:"ro.json",sk:"sk.json",sl:"sl.json",fi:"fi.json",sv:"sv.json",tr:"tr.json",uk:"uk.json",bg:"bg.json",zh:"zh.json","zh-TW":"zh-TW.json",ja:"ja.json",th:"th.json",fa:"fa.json",he:"he.json"},a=function(e){var n=e||{};
this.languages=i,this.translations={},this.defaultLanguage=t.get("language"),this.basePath=n.basePath||"localizations/",this.setLanguage(),t.on("change:language",_.bind(function(e,t){this.load(t)},this))};return a.prototype.setLanguage=function(t){return t=t||this.defaultLanguage,_.has(i,t)?(this.language=t,t):(this.language=this.defaultLanguage,e.trigger("change:language",this.language),!1)},a.prototype.load=function(){var t=this.language||this.defaultLanguage;return this.setLanguage.apply(this,arguments)?_.has(this.translations,this.language)?(e.trigger("change:language",this.language),n.Deferred().resolve()):n.ajax({dataType:"json",url:this.basePath+i[this.language]}).done(_.bind(function(t){this.translations[this.language]=t,e.trigger("change:language",this.language)
},this)).fail(_.bind(function(){this.setLanguage(t)},this)):n.Deferred().reject()},a.prototype.t=function(){var e=this.translations[this.language],t=arguments[0];if(t===void 0)return"";var n=t,i=1;if(e&&_.has(e,t)){var a=e[t];a&&(n=a)}for(;arguments.length>i;)n=n.replace("{"+i+"}",arguments[i]),i++;return n},new a}),define("plex/control/init/jQueryInit",["jquery"],function(e){e.event.special.destroy={remove:function(e){e.handler&&e.handler()}},(!e.support.cors||"undefined"!=typeof PLEXWEB&&PLEXWEB.cors===!1)&&e.ajaxPrefilter(function(e){if(e.crossDomain&&e.async){var t=e.type.toUpperCase();
!e.data||"GET"!=t&&"HEAD"!=t||(e.url+="?"+e.data,delete e.data),e.headers||(e.headers={});var n="X-Plex-",i=_.filter(_.keys(e.headers),function(e){return 0===e.lastIndexOf(n,0)});if(_.each(i,function(t){e.headers["X-Plex-Proxy-"+t.slice(n.length)]=e.headers[t],delete e.headers[t]}),e.headers["X-Plex-Url"]=e.url,e.url="/system/proxy",e.crossDomain=!1,window.appModel){var a=window.appModel.get("primaryServer").get("accessToken");a&&(e.headers["X-Plex-Token"]=a)}}});var t=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma","Location"],n=e.ajaxSettings.xhr;
e.ajaxSettings.xhr=function(){var e=n(),i=e.getAllResponseHeaders;return e.getAllResponseHeaders=function(){var n=i.apply(e);if(n)return n;var a=[];return _.each(t,function(t){var n=e.getResponseHeader(t);n&&a.push(t+": "+n)}),a.join("\n")},e},e.ajaxPrefilter(function(e){return e.crossDomain&&!e.skipCorsWithRedirect?"cors_with_redirect":void 0}),e.ajaxTransport("cors_with_redirect",function(t,n,i){t.dataTypes.shift();var a,s=_.extend({},n,{skipCorsWithRedirect:!0,complete:null,error:null,success:null});
return{send:function(t,n){s.error=function(e,t,a){_.extend(i,e),n(e.status,t,{alreadyConverted:a},e.getAllResponseHeaders())},s.success=function(t,r,l){_.extend(i,l);var o=l.getResponseHeader("Location");200==l.status&&o?(s.url=o,a=e.ajax(s)):n(l.status,r,{alreadyConverted:t},l.getAllResponseHeaders())},a=e.ajax(s)},abort:function(){a&&a.abort()}}})}),define("plex/control/init/BackboneInit",["plex/control/Dispatcher","backbone"],function(e){var t=Backbone.sync;Backbone.sync=function(n,i,a){var s=a.server||i.server||i.get("server");
!a.url&&i.url&&(a.url=_.isFunction(i.url)?i.url():i.url),!a.dataType&&i.dataType&&(a.dataType=i.dataType),_.defaults(a,{url:"",dataType:"text",processData:!1,timeout:2e4}),s&&(s.get("disconnected")&&e.trigger("connect:websocket",s),a.url=s.resolveUrl(a.url),"myPlex"===s.id&&i.section&&i.section.get("limited")&&(a.url+=a.url.indexOf("?")>0?"&":"?",a.url+="redirect=0"),a.headers||(a.headers={}),_.extend(a.headers,s.getHeaders()));var r=t(n,i,a);return a.hideLoadingAlert||(e.trigger("command:ShowLoading",!0),r.always(function(){e.trigger("command:ShowLoading",!1)
})),r}}),define("plex/control/utils/StringUtil",[],function(){return{truncate:function(e,t){if(!e)return"";if(e.length>t){for(var n=e.substring(0,t-3);/\S/.test(n.charAt(n.length-1))===!1&&n.length>1;)n=n.slice(0,-1);return n+"..."}return e},truncateMiddle:function(e,t,n){if(e.length>t){n=n||Math.floor((t-3)/2);var i=t-3-n;return e.substr(0,n)+"..."+e.substr(e.length-i)}return e},toUtf8:function(e){for(var t="",n=0,i=0;e.length>i;i++){var a=e.charCodeAt(i);128>a||(2048>a?(i>n&&(t+=e.substring(n,i)),n=i+1,t+=String.fromCharCode(192|a>>>6),t+=String.fromCharCode(128|63&a)):(i>n&&(t+=e.substring(n,i)),n=i+1,t+=String.fromCharCode(224|a>>>12),t+=String.fromCharCode(128|63&a>>>6),t+=String.fromCharCode(128|63&a)))
}return n>0&&e.length>n&&(t+=e.substring(n)),0===n?e:t}}}),define("plex/control/utils/NumberUtil",[],function(){return{formatBytes:function(e,t){var n=["B","KB","MB","GB","TB"],i=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return(e/Math.pow(1024,i)).toFixed(t)+" "+n[i]},formatBitrate:function(e,t){var n=["bps","kbps","Mbps","Gbps","Tbps"],i=parseInt(Math.floor(Math.log(e)/Math.log(1024)),10);return(e/Math.pow(1024,i)).toFixed(t)+" "+n[i+1]},formatMinutesRemaining:function(e){if(!e)return"";
if(60>e)return 1===e?e+" second left":e+" seconds left";var t=Math.ceil(e/60);return 1===t?t+" minute left":t+" minutes left"},leadingZero:function(e){return e=parseInt(e,10),10>e?"0"+e:e}}}),function(e,t){function n(e,t,n){this._d=e,this._isUTC=!!t,this._a=e._a||null,e._a=null,this._lang=n||!1}function i(e){var t=this._data={},n=e.years||e.y||0,i=e.months||e.M||0,s=e.weeks||e.w||0,r=e.days||e.d||0,l=e.hours||e.h||0,o=e.minutes||e.m||0,c=e.seconds||e.s||0,d=e.milliseconds||e.ms||0;this._milliseconds=d+1e3*c+6e4*o+36e5*l,this._days=r+7*s,this._months=i+12*n,t.milliseconds=d%1e3,c+=a(d/1e3),t.seconds=c%60,o+=a(c/60),t.minutes=o%60,l+=a(o/60),t.hours=l%24,r+=a(l/24),r+=7*s,t.days=r%30,i+=a(r/30),t.months=i%12,n+=a(i/12),t.years=n,this._lang=!1
}function a(e){return 0>e?Math.ceil(e):Math.floor(e)}function s(e,t){for(var n=e+"";t>n.length;)n="0"+n;return n}function r(e,t,n){var i,a=t._milliseconds,s=t._days,r=t._months;a&&e._d.setTime(+e+a*n),s&&e.date(e.date()+s*n),r&&(i=e.date(),e.date(1).month(e.month()+r*n).date(Math.min(i,e.daysInMonth())))}function l(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e,t){var n,i=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),s=0;for(n=0;i>n;n++)~~e[n]!==~~t[n]&&s++;
return s+a}function c(t,n){var i,a;for(i=1;7>i;i++)t[i]=null==t[i]?2===i?1:0:t[i];return t[7]=n,a=new e(0),n?(a.setUTCFullYear(t[0],t[1],t[2]),a.setUTCHours(t[3],t[4],t[5],t[6])):(a.setFullYear(t[0],t[1],t[2]),a.setHours(t[3],t[4],t[5],t[6])),a._a=t,a}function d(e,t){var n,i,a=[];for(!t&&L&&(t=require("./lang/"+e)),n=0;E.length>n;n++)t[E[n]]=t[E[n]]||M.en[E[n]];for(n=0;12>n;n++)i=I([2e3,n]),a[n]=RegExp("^"+(t.months[n]||t.months(i,""))+"|^"+(t.monthsShort[n]||t.monthsShort(i,"")).replace(".",""),"i");
return t.monthsParse=t.monthsParse||a,M[e]=t,t}function h(e){var t="string"==typeof e&&e||e&&e._lang||null;return t?M[t]||d(t):I}function u(e){return Z[e]?"'+("+Z[e]+")+'":e.replace($,"").replace(/\\?'/g,"\\'")}function p(e){return h().longDateFormat[e]||e}function m(e){var t="var a,b;return '"+e.replace(O,u)+"';",n=Function;return new n("t","v","o","p","m",t)}function f(e,t){function n(n,a){return i[n].call?i[n](e,t):i[n][a]}for(var i=h(e);R.test(t);)t=t.replace(R,p);return X[t]||(X[t]=m(t)),X[t](e,n,i.ordinal,s,i.meridiem)
}function v(e){switch(e){case"DDDD":return q;case"YYYY":return F;case"S":case"SS":case"SSS":case"DDD":return V;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":case"a":case"A":return U;case"Z":case"ZZ":return H;case"T":return z;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return j;default:return RegExp(e.replace("\\",""))}}function g(e,t,n,i){var a;switch(e){case"M":case"MM":n[1]=null==t?0:~~t-1;break;case"MMM":case"MMMM":for(a=0;12>a;a++)if(h().monthsParse[a].test(t)){n[1]=a;
break}break;case"D":case"DD":case"DDD":case"DDDD":null!=t&&(n[2]=~~t);break;case"YY":t=~~t,n[0]=t+(t>70?1900:2e3);break;case"YYYY":n[0]=~~Math.abs(t);break;case"a":case"A":i.isPm="pm"===(t+"").toLowerCase();break;case"H":case"HH":case"h":case"hh":n[3]=~~t;break;case"m":case"mm":n[4]=~~t;break;case"s":case"ss":n[5]=~~t;break;case"S":case"SS":case"SSS":n[6]=~~(1e3*("0."+t));break;case"Z":case"ZZ":i.isUTC=!0,a=(t+"").match(J),a&&a[1]&&(i.tzh=~~a[1]),a&&a[2]&&(i.tzm=~~a[2]),a&&"+"===a[0]&&(i.tzh=-i.tzh,i.tzm=-i.tzm)
}}function y(e,t){var n,i,a=[0,0,1,0,0,0,0],s={tzh:0,tzm:0},r=t.match(O);for(n=0;r.length>n;n++)i=(v(r[n]).exec(e)||[])[0],e=e.replace(v(r[n]),""),g(r[n],i,a,s);return s.isPm&&12>a[3]&&(a[3]+=12),s.isPm===!1&&12===a[3]&&(a[3]=0),a[3]+=s.tzh,a[4]+=s.tzm,c(a,s.isUTC)}function b(e,t){var i,a,s,r,l,c=e.match(B)||[],d=99;for(s=0;t.length>s;s++)r=y(e,t[s]),a=f(new n(r),t[s]).match(B)||[],l=o(c,a),d>l&&(d=l,i=r);return i}function w(t){var n,i="YYYY-MM-DDT";if(W.exec(t)){for(n=0;4>n;n++)if(K[n][1].exec(t)){i+=K[n][0];
break}return H.exec(t)?y(t,i+" Z"):y(t,i)}return new e(t)}function x(e,t,n,i,a){var s=a.relativeTime[e];return"function"==typeof s?s(t||1,!!n,e,i):s.replace(/%d/i,t||1)}function k(e,t,n){var i=T(Math.abs(e)/1e3),a=T(i/60),s=T(a/60),r=T(s/24),l=T(r/365),o=45>i&&["s",i]||1===a&&["m"]||45>a&&["mm",a]||1===s&&["h"]||22>s&&["hh",s]||1===r&&["d"]||25>=r&&["dd",r]||45>=r&&["M"]||345>r&&["MM",T(r/30)]||1===l&&["y"]||["yy",l];return o[2]=t,o[3]=e>0,o[4]=n,x.apply({},o)}function S(e,t){I.fn[e]=function(e){var n=this._isUTC?"UTC":"";
return null!=e?(this._d["set"+n+t](e),this):this._d["get"+n+t]()}}function C(e){I.duration.fn[e]=function(){return this._data[e]}}function A(e,t){I.duration.fn["as"+e]=function(){return+this/t}}for(var I,P,_="1.7.0",T=Math.round,M={},D="en",L="undefined"!=typeof module&&module.exports,E="months|monthsShort|weekdays|weekdaysShort|weekdaysMin|longDateFormat|calendar|relativeTime|ordinal|meridiem".split("|"),N=/^\/?Date\((\-?\d+)/i,O=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|YYYY|YY|a|A|hh?|HH?|mm?|ss?|SS?S?|zz?|ZZ?)/g,R=/(LT|LL?L?L?)/g,$=/(^\[)|(\\)|\]$/g,B=/([0-9a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)/gi,j=/\d\d?/,V=/\d{1,3}/,q=/\d{3}/,F=/\d{1,4}/,U=/[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/i,H=/Z|[\+\-]\d\d:?\d\d/i,z=/T/i,W=/^\s*\d{4}-\d\d-\d\d(T(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,Y="YYYY-MM-DDTHH:mm:ssZ",K=[["HH:mm:ss.S",/T\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/T\d\d:\d\d:\d\d/],["HH:mm",/T\d\d:\d\d/],["HH",/T\d\d/]],J=/([\+\-]|\d\d)/gi,G="Month|Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Q={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},X={},Z={M:"(a=t.month()+1)",MMM:'v("monthsShort",t.month())',MMMM:'v("months",t.month())',D:"(a=t.date())",DDD:"(a=new Date(t.year(),t.month(),t.date()),b=new Date(t.year(),0,1),a=~~(((a-b)/864e5)+1.5))",d:"(a=t.day())",dd:'v("weekdaysMin",t.day())',ddd:'v("weekdaysShort",t.day())',dddd:'v("weekdays",t.day())',w:"(a=new Date(t.year(),t.month(),t.date()-t.day()+5),b=new Date(a.getFullYear(),0,4),a=~~((a-b)/864e5/7+1.5))",YY:"p(t.year()%100,2)",YYYY:"p(t.year(),4)",a:"m(t.hours(),t.minutes(),!0)",A:"m(t.hours(),t.minutes(),!1)",H:"t.hours()",h:"t.hours()%12||12",m:"t.minutes()",s:"t.seconds()",S:"~~(t.milliseconds()/100)",SS:"p(~~(t.milliseconds()/10),2)",SSS:"p(t.milliseconds(),3)",Z:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(a/60),2)+":"+p(~~a%60,2)',ZZ:'((a=-t.zone())<0?((a=-a),"-"):"+")+p(~~(10*a/6),4)'},et="DDD w M D d".split(" "),tt="M D H h m s w".split(" ");et.length;)P=et.pop(),Z[P+"o"]=Z[P]+"+o(a)";
for(;tt.length;)P=tt.pop(),Z[P+P]="p("+Z[P]+",2)";for(Z.DDDD="p("+Z.DDD+",3)",I=function(i,a){if(null===i||""===i)return null;var s,r;return I.isMoment(i)?new n(new e(+i._d),i._isUTC,i._lang):(a?s=l(a)?b(i,a):y(i,a):(r=N.exec(i),s=i===t?new e:r?new e(+r[1]):i instanceof e?i:l(i)?c(i):"string"==typeof i?w(i):new e(i)),new n(s))},I.utc=function(e,t){return l(e)?new n(c(e,!0),!0):("string"!=typeof e||H.exec(e)||(e+=" +0000",t&&(t+=" Z")),I(e,t).utc())},I.unix=function(e){return I(1e3*e)},I.duration=function(e,t){var n,a=I.isDuration(e),s="number"==typeof e,r=a?e._data:s?{}:e;
return s&&(t?r[t]=e:r.milliseconds=e),n=new i(r),a&&(n._lang=e._lang),n},I.humanizeDuration=function(e,t,n){return I.duration(e,t===!0?null:t).humanize(t===!0?!0:n)},I.version=_,I.defaultFormat=Y,I.lang=function(e,t){var n;if(!e)return D;if((t||!M[e])&&d(e,t),M[e]){for(n=0;E.length>n;n++)I[E[n]]=M[e][E[n]];I.monthsParse=M[e].monthsParse,D=e}},I.langData=h,I.isMoment=function(e){return e instanceof n},I.isDuration=function(e){return e instanceof i},I.lang("en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"
},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"}}),I.fn=n.prototype={clone:function(){return I(this)
},valueOf:function(){return+this._d},unix:function(){return Math.floor(+this._d/1e3)},toString:function(){return""+this._d},toDate:function(){return this._d},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds(),!!this._isUTC]},isValid:function(){return this._a?!o(this._a,(this._a[7]?I.utc(this):this).toArray()):!isNaN(this._d.getTime())},utc:function(){return this._isUTC=!0,this},local:function(){return this._isUTC=!1,this},format:function(e){return f(this,e?e:I.defaultFormat)
},add:function(e,t){var n=t?I.duration(+t,e):I.duration(e);return r(this,n,1),this},subtract:function(e,t){var n=t?I.duration(+t,e):I.duration(e);return r(this,n,-1),this},diff:function(e,t,n){var i,a=this._isUTC?I(e).utc():I(e).local(),s=6e4*(this.zone()-a.zone()),r=this._d-a._d-s,l=this.year()-a.year(),o=this.month()-a.month(),c=this.date()-a.date();return i="months"===t?12*l+o+c/30:"years"===t?l+(o+c/30)/12:"seconds"===t?r/1e3:"minutes"===t?r/6e4:"hours"===t?r/36e5:"days"===t?r/864e5:"weeks"===t?r/6048e5:r,n?i:T(i)
},from:function(e,t){return I.duration(this.diff(e)).lang(this._lang).humanize(!t)},fromNow:function(e){return this.from(I(),e)},calendar:function(){var e=this.diff(I().sod(),"days",!0),t=this.lang().calendar,n=t.sameElse,i=-6>e?n:-1>e?t.lastWeek:0>e?t.lastDay:1>e?t.sameDay:2>e?t.nextDay:7>e?t.nextWeek:n;return this.format("function"==typeof i?i.apply(this):i)},isLeapYear:function(){var e=this.year();return 0===e%4&&0!==e%100||0===e%400},isDST:function(){return this.zone()<I([this.year()]).zone()||this.zone()<I([this.year(),5]).zone()
},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null==e?t:this.add({d:e-t})},startOf:function(e){switch(e.replace(/s$/,"")){case"year":this.month(0);case"month":this.date(1);case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return this},endOf:function(e){return this.startOf(e).add(e.replace(/s?$/,"s"),1).subtract("ms",1)},sod:function(){return this.clone().startOf("day")},eod:function(){return this.clone().endOf("day")
},zone:function(){return this._isUTC?0:this._d.getTimezoneOffset()},daysInMonth:function(){return I.utc([this.year(),this.month()+1,0]).date()},lang:function(e){return e===t?h(this):(this._lang=e,this)}},P=0;G.length>P;P++)S(G[P].toLowerCase(),G[P]);S("year","FullYear"),I.duration.fn=i.prototype={weeks:function(){return a(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*this._months},humanize:function(e){var t=+this,n=this.lang().relativeTime,i=k(t,!e,this.lang());
return e&&(i=(0>=t?n.past:n.future).replace(/%s/i,i)),i},lang:I.fn.lang};for(P in Q)Q.hasOwnProperty(P)&&(A(P,Q[P]),C(P.toLowerCase()));A("Weeks",6048e5),L&&(module.exports=I),"undefined"==typeof ender&&(this.moment=I),"function"==typeof define&&define.amd&&define("moment",[],function(){return I})}.call(this,Date),define("plex/control/utils/MediaUtil",["plex/control/utils/NumberUtil","moment"],function(e){var t=function(){this.capabilities="protocols=http-live-streaming,http-mp4-streaming,http-streaming-video,http-streaming-video-720p,http-mp4-video,http-mp4-video-720p;videoDecoders=h264{profile:high&resolution:1080&level:51};audioDecoders=mp3,aac{bitrate:160000}",this.resolutions=["220x180","220x128","284x160","420x240","576x320","720x480","1024x768","1280x720","1280x720","1920x1080","1920x1080","1920x1080","1920x1080"],this.qualities=["10","20","30","30","40","60","60","75","100","60","75","90","100"],this.bitrates=["64","96","208","320","720","1500","2000","3000","4000","8000","10000","12000","20000"],this.getRelativeOffset=function(e,t,n){var i=n;
if(e.Part.length>1)for(var a=0,s=e.Part.length;s>a;a++){var r=e.Part[a];if(!r.duration)break;if(t.key===r.key)break;i-=r.duration}return i},this.getAbsoluteOffset=function(e,t,n){var i=n;if(e.Part.length>1)for(var a=0,s=e.Part.length;s>a;a++){var r=e.Part[a];if(!r.duration)break;if(t.key===r.key)break;i+=r.duration}return i},this.getPartByAbsoluteOffset=function(e,t){var n;if(e.Part.length>1)for(var i=0,a=0,s=e.Part.length;s>a&&(n=e.Part[a],n.duration)&&(i+=n.duration,!(i>t));a++);else n=_.first(e.Part);
return n},this.getIndex=function(e,t){if(e.indexes){var n=e.indexes.split(",");if(n.length)return _.indexOf(n,t)>-1?t:n[0]}},this.getThumb=function(e,t,n){var i;return e.Part.length>1?(i=this.getPartByAbsoluteOffset(e,t),n=this.getIndex(i,n)):(i=_.first(e.Part),n=this.getIndex(i,n)),n?(t=this.getRelativeOffset(e,i,t),i.key.replace(/[^\/]*$/,"")+"indexes/"+n+"/"+t):void 0},this.getSeasonIndex=function(t){return 1e3>t?"S"+e.leadingZero(t):t},this.getSeasonEpisodeIndex=function(t,n,i){return n>0&&1e3>t?"S"+e.leadingZero(t)+"E"+e.leadingZero(n):i?moment(i).format("M/D/YY"):t
},this.getEpisodeIndex=function(t,n){return t>0?"E"+e.leadingZero(t):n?moment(n).format("M/D/YY"):"Unknown"}};return new t}),define("plex/model/DebugInfoModel",["jquery","backbone"],function(e){var t=function(e){return e?"True":"False"},n=Backbone.Model.extend({initialize:function(){var t=e("body script")[0].src,n=t.match(/rev\=([\d\.]+)/),i=n&&n.length>1?n[1]:t;this.set("host",window.location.host),this.set("userAgent",navigator.userAgent),this.set("clientVersion",i)},setAppModel:function(e){this.appModel=e
},toJSON:function(){if(this.appModel){var n=this.appModel.get("primaryServer"),i=this.appModel.get("myPlex");this.set("isAuthorized",t(this.appModel.get("isAuthorized"))),this.set("isAvailable",t(!this.appModel.get("isUnavailable"))),this.set("primaryServerUrl",n.url()),this.set("primaryServerAuthToken",t(n.get("accessToken"))),this.set("primaryServerVersion",n.get("versionFull")),this.set("myPlexUrl",i.url()),this.set("myPlexFeatures",_.keys(i.get("features")).join(", ")),this.set("myPlexUsername",i.get("username")),this.set("myPlexAuthToken",t(i.get("authToken"))),this.set("browser",JSON.stringify(e.browser))
}return Backbone.Model.prototype.toJSON.apply(this,arguments)}});return new n}),window.jQuery&&function(e){e.extend({xml2json:function(t,n){function i(t,r){if(!t)return null;var l="",o=null,c=null;t.nodeType,a(t.localName||t.nodeName),t.text||t.nodeValue||"",t.childNodes&&t.childNodes.length>0&&e.each(t.childNodes,function(e,t){var n=t.nodeType,r=a(t.localName||t.nodeName),c=t.text||t.nodeValue||"";if(8!=n)if(3!=n&&4!=n&&r)o=o||{},o[r]?(o[r].length||(o[r]=s(o[r])),o[r]=s(o[r]),o[r][o[r].length]=i(t,!0),o[r].length=o[r].length):o[r]=i(t);
else{if(c.match(/^\s+$/))return;l+=c.replace(/^\s+/,"").replace(/\s+$/,"")}}),t.attributes&&t.attributes.length>0&&(c={},o=o||{},e.each(t.attributes,function(e,t){var n=a(t.name),i=t.value;o[n]?c[n]&&(o[n]=s(o[n]),o[n][o[n].length]=i):(o[n]=i,c[n]=i)})),o&&(o=e.extend(""!=l?new String(l):{},o||{}),l=o.text?("object"==typeof o.text?o.text:[o.text||""]).concat([l]):l,l&&(o.text=l),l="");var d=o||l;return n&&(l&&(d={}),l=d.text||l||"",l&&(d.text=l),r||(d=s(d))),d}if(!t)return{};var a=function(e){return((e||"")+"").replace(/-/g,"_")
},s=function(t){return e.isArray(t)||(t=[t]),t.length=t.length,t};if("string"==typeof t&&(t=e.text2xml(t)),t.nodeType){if(3==t.nodeType||4==t.nodeType)return t.nodeValue;var r=9==t.nodeType?t.documentElement:t,l=i(r,!0);return t=null,r=null,l}},text2xml:function(t){var n;try{var i=e.browser.msie?new ActiveXObject("Microsoft.XMLDOM"):new DOMParser;i.async=!1}catch(a){throw Error("XML Parser could not be instantiated")}try{n=e.browser.msie?i.loadXML(t)?i:!1:i.parseFromString(t,"text/xml")}catch(a){throw Error("Error parsing XML string")
}return n}})}(jQuery),define("xml2json",function(){}),define("plex/model/collections/BaseCollection",["jquery","plex/control/init/BackboneInit","backbone","xml2json"],function(e){var t=Backbone.Collection.extend({populate:function(e){return this.populatePromise||(this.populatePromise=this.fetch(e)),this.populatePromise},fetch:function(){var t=Backbone.Collection.prototype.fetch.apply(this,arguments),n=e.Deferred();return t.done(_.bind(function(e){n.resolveWith(this,[this,e])},this)),t.fail(_.bind(function(e){n.rejectWith(this,[this,e])
},this)),this.populatePromise=n.promise(),this.populatePromise},convert:function(t,n){var i=_.isObject(t)?t:e.xml2json(t);if(!n)return i;var a=i[n];return a?(_.isArray(a)||(a=[a]),a):[]},release:function(){this.each(function(e){e.release()}),this.populatePromise=null,this.reset()}});return t}),define("plex/model/LogEntryModel",["plex/model/LocalStorageModel"],function(e){var t=e.extend({storage:window.sessionStorage,storageKey:function(){return"LogEntry!"+this.cid},initialize:function(){this.time||this.set("time",new Date)
}});return t}),define("plex/model/collections/LogEntryCollection",["plex/model/SettingsModel","plex/model/DebugInfoModel","plex/model/collections/BaseCollection","plex/model/LogEntryModel","jquery","backbone"],function(e,t,n,i,a){var s=/(auth_token=|accessToken=|X-Plex-Token=)(\"?\w+\"?)/g,r=/(email=)(\"?[^&]+\"?)/g,l=/(password=)([^&]+)/,o=/(address=|host=)(\"?[^&]+\"?)/g,c=function(e){return e=e.replace(s,"$1TOKEN"),e.replace(l,"$1PASSWORD")},d=function(e){return e&&e.hasOwnProperty("X-Plex-Token")&&(e["X-Plex-Token"]="TOKEN"),e&&e.hasOwnProperty("Authorization")&&(e.Authorization="BASIC AUTHORIZATION"),e
},h=function(e){return e?(e=e.replace(s,'$1"TOKEN"'),e=e.replace(r,'$1"EMAIL"'),e=e.replace(o,'$1"IP ADRRESS"')):void 0},u=n.extend({model:i,onAjaxComplete:function(t,n,i){var a={type:"ajax",url:c(i.url),status:n.status};_.isEmpty(i.headers)||(a.headers=d(i.headers)),_.isEmpty(i.data)||(a.params=i.data),200===n.status?2===e.get("debugLevel")?a.response=h(n.responseText):a.responseLength=n.responseText.length:(a.statusText=n.statusText,a.response=h(n.responseText)),this.add(a)},onRoute:function(e,t,n){var i={type:"navigation",route:t,args:n,fragment:window.location.hash};
this.add(i)},initialize:function(){e.on("change:debugLevel",function(e,t){0===t?this.disableListeners():this.enableListeners()},this),_.bindAll(this,"onAjaxComplete","onRoute"),Backbone.history||(Backbone.history=new Backbone.History),0!==e.get("debugLevel")&&this.enableListeners()},enableListeners:function(){this.enabled||(a("body").on("ajaxComplete",null,null,this.onAjaxComplete),Backbone.history.on("route",this.onRoute),this.enabled=!0)},disableListeners:function(){a("body").off("ajaxComplete",null,this.onAjaxComplete),Backbone.history.off("route",this.onRoute),this.enabled=!1,this.reset([])
},add:function(){this.length>200&&this.shift(),n.prototype.add.apply(this,arguments)},toJSON:function(){var e=n.prototype.toJSON.apply(this,arguments);return e.push(_.extend({type:"info"},t.toJSON())),e}});return u}),define("plex/control/utils/LogUtil",["plex/model/SettingsModel","plex/model/collections/LogEntryCollection"],function(e,t){var n=!(!window.console||!window.console.log),i=new t;return{log:function(t){i.add({type:"message",message:t}),n&&e.get("debugLevel")>=1&&console.log(t)},getLogsAsJSON:function(e){return e?JSON.stringify(i,null,2):JSON.stringify(i)
}}}),define("plex/model/BaseModel",["jquery","plex/control/init/BackboneInit","backbone","xml2json"],function(e){var t=Backbone.Model.extend({_cache:{},_cacheReferences:0,constructor:function(e,t){if(e=_.extend({},e),t=_.extend({},t),this.app=t.app||t.collection&&t.collection.app,this.server=t.server||t.collection&&t.collection.server,this.section=t.section||t.collection&&t.collection.section,this.channel=t.channel||t.collection&&t.collection.channel,this.media=t.media||t.collection&&t.collection.media,this.mediaServer=t.mediaServer||t.collection&&t.collection.mediaServer,this.device=t.device||t.collection&&t.collection.device,t.skipCache||t.collection&&t.collection.skipCache)return Backbone.Model.prototype.constructor.apply(this,arguments),void 0;
var n=this.cacheKey?this.cacheKey(e):null;if(n&&this._cache[n]){t.parse&&(e=this.parse(e));var i=this._cache[n];return i.set(e),i.app=this.app||i.app,i.server=this.server||i.server,i.section=this.section||i.section,i.channel=this.channel||i.channel,i.media=this.media||i.media,i.mediaServer=this.mediaServer||i.mediaServer,i.device=this.device||i.device,i._cacheReferences++,i}return t.onlyIfCached?{}:(Backbone.Model.prototype.constructor.apply(this,arguments),this.cache(n),void 0)},cache:function(e){this._cacheKey=e,this._cacheKey&&(this._cacheReferences||(this._cacheReferences=1),this._cache[this._cacheKey]=this)
},release:function(){this._cacheReferences--,this._cacheKey&&this._cache[this._cacheKey]&&1>this._cacheReferences&&delete this._cache[this._cacheKey]},refreshCacheKey:function(){this._cacheKey&&this._cache[this._cacheKey]&&delete this._cache[this._cacheKey];var e=this.toJSON(),t=this.cacheKey?this.cacheKey(e):null;this.cache(t)},populate:function(e){return this.populatePromise||(this.populatePromise=this.fetch(e)),this.populatePromise},fetch:function(){var t=Backbone.Model.prototype.fetch.apply(this,arguments),n=e.Deferred();
return t.done(_.bind(function(e){n.resolveWith(this,[this,e])},this)),t.fail(_.bind(function(e){n.rejectWith(this,[this,e])},this)),this.populatePromise=n.promise(),this.populatePromise},save:function(t,n,i){var a,s;if(_.isObject(t)||t===void 0||null===t?(a=t,i=n):(a={},a[t]=n),i=i?_.clone(i):{},i.wait){if(!this._validate(a,i))return!1;s=_.clone(this.attributes)}var r=this.getSaveParams(a,i);if(_.extend(r,i.data),_.isEmpty(r))return i.success&&i.success(this),e.Deferred().resolve(this);var l=_.extend({},i,{silent:!0});
if(a&&!this.set(a,i.wait?l:i))return!1;var o=this,c=i.success;i.success=function(e,t,n){var s={};if(e){s=o.parse(e,n);var r=o.cacheKey?o.cacheKey(s):null;o.cache(r)}return i.wait&&(delete i.wait,!o.set(_.extend({},a,s),i))?!1:(c&&c(o,e),void 0)};var d=_.isFunction(this.url)?this.url():this.url;i.url=d+"?"+e.param(r,!0),i.data="",i.error=Backbone.wrapError(i.error,o,i);var h=this.isNew()?"create":"update",u=(this.sync||Backbone.sync).call(this,h,this,i);return i.wait&&this.set(s,l),u},getSaveParams:function(e){return this.isNew()?e||this.toJSON():this.changedAttributes(e)||{}
}});return t.extend=function(){var e=Backbone.Model.extend.apply(this,arguments);return e.prototype._cache={},e},t}),define("plex/control/utils/ParseUtil",[],function(){var e=function(e,t){_.isArray(t)?_.each(t,e):e(t)};return{parseEncodedString:function(t,n){if(t){var i=function(e){if(e in t){var n=t[e];t[e]=n===void 0||null===n?"":decodeURIComponent(n)}};e(i,n)}},parseInteger:function(t,n){if(t){var i=function(e){if(e in t){var n=t[e];t[e]=n===void 0||null===n?0:parseInt(n,10)}};e(i,n)}},parseBoolean:function(t,n){if(t){var i=function(e){if(e in t){var n=t[e];
t[e]=n===!0||"true"==n||"1"==n}};e(i,n)}},parseArray:function(t,n){if(t){var i=function(e){if(e in t){var n=t[e];_.isArray(n)||(t[e]=[n])}else t[e]=[]};e(i,n)}}}}),define("plex/model/FriendModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","jquery"],function(e,t,n){var i=t.extend({whitelistedAttrs:["id","title","username","email","thumb","recommendationsPlaylistId"],urlRoot:"/pms/friends",convert:function(t){var i=_.isObject(t)?t:n.xml2json(t);return e.parseInteger(i,"id"),i},parse:function(e){var t=this.convert(e);
return t=_.pick(t,this.whitelistedAttrs)}});return i}),define("plex/model/collections/FriendCollection",["plex/model/collections/BaseCollection","plex/model/FriendModel","jquery"],function(e,t){var n=e.extend({model:t,url:function(){return"/pms/friends/"+this.type},initialize:function(e,t){this.server=t.server,this.type=t.type||"all"},parse:function(e){return this.convert(e,"User")}});return n}),define("plex/model/SocialNetworkModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","jquery"],function(e,t,n){var i=t.extend({idAttribute:"key",whitelistedAttrs:["key","title","linked","maxLength"],convert:function(t){var i=_.isObject(t)?t:n.xml2json(t);
return e.parseBoolean(i,["linked","maxLength"]),i},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs)}});return i}),define("plex/model/collections/SocialNetworkCollection",["plex/model/collections/BaseCollection","plex/model/SocialNetworkModel","jquery"],function(e,t){var n=e.extend({model:t,url:"/pms/social/networks",initialize:function(e,t){this.server=t.server},parse:function(e){return this.convert(e,"Directory")}});return n}),define("plex/model/SyncItemModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","jquery"],function(e,t,n){var i=t.extend({whitelistedAttrs:["id","version","rootTitle","title","metadataType","clientIdentifier","Server","Status","MediaSettings","Policy","Location"],convert:function(t){var i=_.isObject(t)?t:n.xml2json(t);
return e.parseInteger(i,["id","version"]),e.parseEncodedString(i.Location,"uri"),i},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs),t.Location&&t.Location.uri&&(t.directory=/library\:\/\/(\w+)\/directory\//.test(t.Location.uri)),t}});return i}),define("plex/model/collections/SyncItemCollection",["plex/model/collections/BaseCollection","plex/model/SyncItemModel","jquery"],function(e,t){var n=e.extend({model:t,url:function(){return this.device?"/devices/"+this.device.id+"/sync_items":"/servers/"+this.mediaServer.id+"/sync_lists"
},initialize:function(e,t){this.server=t.server,this.mediaServer=t.mediaServer,this.device=t.device},parse:function(e){var t=this.convert(e),n=[],i=function(e,t){t&&(_.isArray(t)||(t=[t]),_.each(t,function(t){t.clientIdentifier=e,n.push(t)}))};return t.SyncList&&!_.isArray(t.SyncList)&&(t.SyncList=[t.SyncList]),_.each(t.SyncList,function(e){i(e.clientIdentifier,e.SyncItems.SyncItem)}),t.SyncItems&&i(t.clientIdentifier,t.SyncItems.SyncItem),n},getByServer:function(e){return this.filter(function(t){var n=t.get("Server");
return n&&n.machineIdentifier===e})}});return n}),define("plex/model/DeviceModel",["plex/model/BaseModel","plex/model/collections/SyncItemCollection","jquery"],function(e,t,n){var i=e.extend({idAttribute:"clientIdentifier",whitelistedAttrs:["clientIdentifier","name","product","productVersion","platform","platformVersion","device","model","provides","screenResolution","screenDensity"],initialize:function(e,n){n.server&&(this.server=n.server),this.set("syncItems",new t([],{server:this.server,device:this}))
},convert:function(e){var t=_.isObject(e)?e:n.xml2json(e);return t},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs),t.provides=t.provides?t.provides.split(","):[],t},supports:function(e){var t=this.get("provides");return-1!==_.indexOf(t,e)}});return i}),define("plex/model/collections/DeviceCollection",["plex/model/collections/BaseCollection","plex/model/DeviceModel","jquery"],function(e,t){var n=e.extend({model:t,url:function(){return"/devices.xml"},initialize:function(e,t){this.server=t.server
},parse:function(e){return this.convert(e,"Device")},getSyncDevices:function(){var e=this.filter(function(e){return e.supports("sync-target")});return _.sortBy(e,function(e){return"CloudSync"!==e.get("product")})}});return n}),define("plex/model/media/MediaModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","jquery"],function(e,t,n){var i=t.extend({idAttribute:"ratingKey",defaults:{title:"",titleSort:"",tagline:"",rating:"",summary:"",year:"",studio:"",contentRating:"",originallyAvailableAt:"",originalTitle:"",thumb:"",art:"",allowSync:!1},subcollections:["Media","Genre","Collection","Field","Writer","Director","Role","Country","Location"],url:function(){return"/library/metadata/"+this.id
},cacheKey:function(e){var t=e.ratingKey?e.ratingKey:e.key,n=this.section?this.section.id+"!":"";return this.server.id+"!"+n+t},initialize:function(e,t){t.server&&(this.server=t.server),t.section&&(this.section=t.section),t.media&&(this.media=t.media),this.on("timeline",_.bind(function(e){5==e.state?this.fetch({hideLoadingAlert:!0}):9===e.state&&this.destroy()},this))},convert:function(t){var i=_.isObject(t)?t:n.xml2json(t);if(!i.ratingKey&&!i.key&&!i.id){var a=i.Directory||i.Video||i.Track||i.Photo||i;
a.identifier=i.identifier,a.mediaTagPrefix=i.mediaTagPrefix,a.mediaTagVersion=i.mediaTagVersion,a.allowSync=i.allowSync,a.librarySectionID=i.librarySectionID,a.librarySectionUUID=i.librarySectionUUID,i=a}e.parseBoolean(i,"allowSync"),e.parseInteger(i,["librarySectionID","index","parentIndex","duration","viewOffset","viewCount","leafCount","viewedLeafCount","lastViewedAt","addedAt","updatedAt"]),e.parseArray(i,this.subcollections);var s=i.Media;return _.each(s,function(t){e.parseBoolean(t,["indirect","optimizedForStreaming"]),e.parseInteger(t,["id","duration","width","height","bitrate"]),e.parseArray(t,"Part");
var n=t.Part;_.each(n,function(t){e.parseBoolean(t,"optimizedForStreaming"),e.parseInteger(t,["id","duration","size"]),e.parseArray(t,"Stream"),t.exists="0"!==t.exists,t.accessible="0"!==t.accessible;var n=t.Stream;_.each(n,function(t){e.parseBoolean(t,"selected"),e.parseInteger(t,["id","index","streamType","duration","width","height","bitrate","samplingRate"])})})}),i},parse:function(e){var t=this.convert(e);return"ratingKey"!==this.idAttribute||t.ratingKey||(this.idAttribute="key"),t.viewedLeafCount!==void 0&&(t.unviewedLeafCount=t.leafCount-t.viewedLeafCount),t.key&&(_.each(_.keys(this.defaults),_.bind(function(e){e in t||(t[e]=this.defaults[e])
},this)),/^(photo|photoalbum)$/.test(t.type)&&/\/children$/.test(t.key)&&(t.type="photoAlbum"),t.folder=/\/folder\?parent\=/.test(t.key)),t},mergeIndirectResponse:function(e,t,i){var a=n.xml2json(e);if(!a.Video||!a.Video.Media||!a.Video.Media.Part)return!1;var s=this.parse(a.Video),r=_.first(s.Media),l=_.first(r.Part);if(r.Part.length>1){var o=_.indexOf(t.Part,i);r.Part.length>o&&(l=r.Part[o])}if(!r||!l)return!1;if(_.extend(t,_.omit(r,"Part")),_.extend(i,l),a.httpHeaders){for(var c,d=RegExp("([^=]+)=([^&]+)&?","g"),h={};c=d.exec(a.httpHeaders);)c[1]in h?(_.isArray(h[c[1]])||(h[c[1]]=[h[c[1]]]),h[c[1]].push(c[2])):h[c[1]]=c[2];
this.set("indirectHttpHeaders",h,{silent:!0})}return!0},batchSave:function(e,t,n){var i=this.url;this.url="/library/metadata/"+_.pluck(e,"id").join(",");var a=this.save(t,n);return this.url=i,a},batchAdd:function(e,t,i){var a="/library/metadata/"+_.pluck(e,"id").join(",")+"/"+t+"/add?tag="+encodeURIComponent(i),s=_.extend({type:"PUT"},this.server.getAjaxOptions(a));return n.ajax(s)},getSaveParams:function(e){return _.each(e.Field,function(t){e[t.name+".locked"]=t.locked}),delete e.Field,_.each(["Collection","Director","Writer","Genre","Country"],function(t){t in e&&(_.isEmpty(e[t])?e[t.toLowerCase()+"[]"]="":_.each(e[t],function(n,i){e[t.toLowerCase()+"["+i+"].tag.tag"]=n.tag
}),delete e[t])}),e},getDownloadUrl:function(){var e=_.first(this.get("Media"));if(e){var t=_.first(e.Part);if(t){var n=t.key;return this.server.get("accessToken")&&(n+="?X-Plex-Token="+this.server.get("accessToken")),this.server.resolveUrl(n)}}return""},getMediaLocation:function(){var e=_.first(this.get("Media"));if(e){var t=_.first(e.Part);if(t)return t.file}return null},getMediaKey:function(){var e=_.first(this.get("Media")),t=this.get("key");if(e){var n=_.first(e.Part);if(n)return n.key}else if(t)return t;
return null},getStreams:function(e,t){var n=_.first(this.get("Media")),i=[];if(n){var a=_.first(n.Part);if(a&&a.Stream){var s={streamType:e};t&&(s.selected="1"),i.push.apply(i,_.where(a.Stream,s))}}return i},getMissingParts:function(){var e=this.get("Media"),t=[];return _.each(e,function(e){var n=e.Part;n&&_.each(n,function(e){(e.exists===!1||e.accessible===!1)&&t.push(e)})}),t},resolveIndirect:function(e,t){var i=n.Deferred(),a=_.bind(function(){i.resolve(this)},this),s=_.bind(function(){i.reject(this)
},this);if(e&&e.indirect)if(t)if(t.postURL){var r=this.server.getAjaxOptions(t.postURL);r.headers=r.headers||{},r.headers["X-Plex-Url"]=r.url,r.url="/system/proxy",r.crossDomain=!1,n.ajax(r).done(_.bind(function(i,l,o){var c=o.getAllResponseHeaders()+"\r\n"+i;r=this.server.getAjaxOptions(t.key+"&postURL="+encodeURIComponent(t.postURL)),r.type="POST",r.headers=r.headers||{},r.headers["X-Plex-Url"]=r.url,r.url="/system/proxy",r.crossDomain=!1,r.data=c,n.ajax(r).done(_.bind(function(n){this.mergeIndirectResponse(n,e,t)?a():s()
},this)).fail(s)},this)).fail(s)}else{var l=this.server.getAjaxOptions(t.key);n.ajax(l).done(_.bind(function(n){this.mergeIndirectResponse(n,e,t)?a():s()},this)).fail(s)}else s();else a();return i}});return i.extend=function(){var e=t.extend.apply(this,arguments);return delete e.prototype._cache,e},i}),define("plex/model/media/ClipModel",["plex/control/utils/ParseUtil","plex/model/media/MediaModel","jquery"],function(e,t,n){var i=t.extend({idAttribute:"key",url:function(){return this.id},convert:function(e){var i=_.isObject(e)?e:n.xml2json(e),a=i.Video||i;
return i.Video&&(a.identifier=i.identifier,a.mediaTagPrefix=i.mediaTagPrefix,a.mediaTagVersion=i.mediaTagVersion,a.allowSync=i.allowSync),a=t.prototype.convert.call(this,a)},parse:function(){var e=t.prototype.parse.apply(this,arguments);return e._origType=e.type,e.type="clip",e}});return i}),define("plex/model/media/PlaylistItemModel",["plex/control/utils/ParseUtil","plex/model/media/ClipModel","jquery"],function(e,t){var n=t.extend({idAttribute:"id",url:function(){return"/pms/playlists/"+this.get("playlistName")+"/items/"+this.id
},cacheKey:function(e){return this.server.id+"!"+e[this.idAttribute]},initialize:function(e,t){this.set("playlistName",t.playlistName||this.collection.playlistName)},convert:function(){var n=t.prototype.convert.apply(this,arguments);return e.parseInteger(n,["id","viewCount"]),n},parse:function(){var n=t.prototype.parse.apply(this,arguments);if(n.type="playlistItem",n.ratingKey=n.url,n.thumb){var i=/\?(\d+)$/.exec(n.thumb);i&&(n.addedAt=i[1],e.parseInteger(n,"addedAt"))}return n}});return n}),define("plex/model/media/collections/PlaylistItemCollection",["plex/control/utils/ParseUtil","plex/model/collections/BaseCollection","plex/model/media/PlaylistItemModel","jquery"],function(e,t,n){var i=t.extend({model:n,url:function(){return"/pms/playlists/"+this.playlistName+"/all"
},initialize:function(e,t){this.server=t.server,this.playlistName=t.name,this.playlistLabel=t.label},parse:function(t){var n=this.convert(t);return e.parseArray(n,"Video"),_.each(n.Video,function(e){e.identifier=n.identifier}),n.Video},all:function(){return this.models},watched:function(){return this.filter(function(e){return e.get("viewCount")})},unwatched:function(){return this.filter(function(e){return!e.get("viewCount")})}});return i});var b64array="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
define("base64",function(){}),define("plex/model/MyPlexModel",["plex/model/BaseModel","plex/control/utils/LogUtil","plex/control/utils/BrowserDetect","plex/control/utils/StringUtil","plex/model/collections/FriendCollection","plex/model/collections/SocialNetworkCollection","plex/model/collections/DeviceCollection","plex/model/media/collections/PlaylistItemCollection","jquery","xml2json","base64"],function(e,t,n,i,a,s,r,l,o){var c=e.extend({idAttribute:"machineIdentifier",defaults:{address:"my.plexapp.com",host:"my.plexapp.com",port:"443",friendlyName:"myPlex",name:"myPlex",machineIdentifier:"myPlex",isUnavailable:!1,signedIn:!1,owned:!1,features:{},transcoderVideo:!1},url:function(){return this.get("url")||"https://my.plexapp.com/"
},initialize:function(e,t){this.app=t.app,this.pms=t.server;var n;window.localStorage&&(n=window.localStorage.getItem("myPlexBaseUrl")),this.set("url",n||"https://my.plexapp.com/");var i;window.sessionStorage&&window.localStorage&&(i=window.sessionStorage.getItem("myPlexAuthToken")||window.localStorage.getItem("myPlexAuthToken")),i&&this.set("authToken",i),this.set("friends",new a([],{server:this})),this.set("friendRequests",new a([],{server:this,type:"requests"})),this.set("socialNetworks",new s([],{server:this})),this.set("devices",new r([],{server:this}));
var o={};o.queue=new l([],{server:this,name:"queue",label:"Queue"}),o.recommendations=new l([],{server:this,name:"recommendations",label:"Recommendations"}),this.set("playlists",o)},parseMyPlexAccountInfo:function(e){var n=o.xml2json(e);if(n.authenticationToken&&this.set("authToken",n.authenticationToken),this.set({signedIn:!0,accountId:n.id,email:n.email,username:n.username,queueEmail:n.queueEmail,queueUid:n.queueUid}),n.subscription){this.set("subscription",n.subscription.active),t.log("myPlex subscriptions: "+JSON.stringify(n.subscription.feature));
var i=_.isArray(n.subscription.feature)?n.subscription.feature:_.isEmpty(n.subscription.feature)?[]:[n.subscription.feature];this.set("features",_.reduce(i,function(e,t){return e[t.id]=!0,e},{}))}else this.set("features",{});"object"==typeof _errs&&(_errs.meta={username:n.username})},signIn:function(e,t,n){var a={type:"POST",dataType:"text",url:this.resolveUrl("/users/sign_in.xml"),headers:this.getHeaders(),success:_.bind(function(e){this.parseMyPlexAccountInfo(e),window.localStorage&&window.sessionStorage&&window[n?"localStorage":"sessionStorage"].setItem("myPlexAuthToken",this.get("authToken"))
},this)};return a.headers.Authorization="Basic "+encode64(i.toUtf8(e+":"+t)),o.ajax(a)},fetch:function(e){return e||(e={}),this.get("authToken")?o.ajax(_.extend({},e,{type:"GET",dataType:"text",url:this.resolveUrl("/users/account"),headers:this.getHeaders(),success:_.bind(function(t){this.parseMyPlexAccountInfo(t),e.success&&e.success(this,t)},this)})):o.ajax(_.extend({},e,{type:"GET",dataType:"text",url:this.resolveUrl("/pms/:/ip"),headers:this.getHeaders()}))},resolveUrl:function(e){if(/^\w+:\/\//.test(e))return e;
0===e.lastIndexOf("/:/",0)&&(e="/pms"+e);var t=this.url()+("/"==e[0]?e.substr(1):e);return this.get("authToken")&&(t+=t.indexOf("?")>0?"&":"?",t+="auth_token="+this.get("authToken")),t},getHeaders:function(){var e={};return e["X-Plex-Client-Identifier"]=this.app.get("clientID"),e["X-Plex-Product"]="Web Client",e["X-Plex-Device"]=n.OS,e["X-Plex-Platform"]=n.browser,e["X-Plex-Platform-Version"]=n.version,e["X-Plex-Version"]=this.app.get("version"),this.get("signedIn")&&(e["X-Plex-Account"]=this.get("accountId"),e["X-Plex-Username"]=this.get("username")),e
},getAjaxOptions:function(e){var t={};return t.url=this.resolveUrl(e),t.dataType="text",0===t.url.lastIndexOf(this.url(),0)&&(t.headers=this.getHeaders()),t},hasPlexPass:function(){return"pass"in this.get("features")},hasSync:function(){return"sync"in this.get("features")}});return c}),define("plex/model/MyPlexAccountModel",["plex/model/BaseModel","jquery"],function(e,t){var n=e.extend({url:"/myplex/account",signedIn:!1,whitelistedAttrs:["username","mappingState","mappingError","mappingErrorMessage","signInState","publicAddress","publicPort","privateAddress","privatePort","subscriptionActive","subscriptionState"],isNew:function(){return!this.signedIn
},convert:function(e){var n=_.isObject(e)?e:t.xml2json(e);return n},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs),"ok"===t.signInState?this.signedIn=!0:(this.signedIn=!1,t.username="",t.password=""),t}});return n}),define("plex/model/AlphanumericModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","jquery"],function(e,t,n){var i=t.extend({idAttribute:"key",whitelistedAttrs:["key","title","size"],url:function(){return"library/sections/"+this.section.id+"/firstCharacter/"+this.id
},convert:function(t){var i=_.isObject(t)?t:n.xml2json(t);return e.parseEncodedString(i,"key"),e.parseInteger(i,"size"),i},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs)}});return i}),define("plex/model/collections/AlphanumericCollection",["plex/model/collections/BaseCollection","plex/model/AlphanumericModel","jquery"],function(e,t){var n=e.extend({model:t,url:function(){var e="library/sections/"+this.section.id+"/firstCharacter?",t={},n=[];this.mediaType&&13!==this.mediaType&&(t.type=this.mediaType),_.each(this.filters,function(e){e.values.length&&(t[e.key]=e.values.join(","))
});for(var i in t)"unviewedLeafCount"===i?n.push(i+">="+t[i]):n.push(i+"="+t[i]);return e+=n.join("&")},initialize:function(e,t){this.server=t.server,this.section=t.section},parse:function(e){return this.convert(e,"Directory")}});return n}),define("plex/model/FilterOptionModel",["plex/model/BaseModel","jquery"],function(e,t){var n=e.extend({idAttribute:"key",whitelistedAttrs:["key","type","title"],convert:function(e){var n=_.isObject(e)?e:t.xml2json(e);return n},parse:function(e){var t=this.convert(e);
return t=_.pick(t,this.whitelistedAttrs)}});return n}),define("plex/model/collections/FilterOptionCollection",["plex/model/collections/BaseCollection","plex/model/FilterOptionModel","jquery"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.server=t.server,this.section=t.section,this.parentFilter=t.parentFilter,this.activeFilters=[]},url:function(){var e="library/sections/"+this.section.id+"/"+this.parentFilter.id,t={},n=[];this.parentFilter.mediaType&&(t.type=this.parentFilter.mediaType),_.each(this.activeFilters,_.bind(function(e){var n=e.values.length,i=e.key!==this.parentFilter.id,a="viewCount"===e.key||"unviewedLeafCount"===e.key;
n&&i&&!a&&(t[e.key]=e.values.join(","))},this));for(var i in t)"unviewedLeafCount"===i?n.push(i+">="+t[i]):n.push(i+"="+t[i]);var a=n.join("&");return a.length&&(e+="?"+a),e},parse:function(e){return this.convert(e,"Directory")},search:function(e){var t=this.filter(function(t){return t.get("title").toLowerCase().indexOf(e.toLowerCase())>-1}),i=new n(t,{server:this.server,section:this.section,parentFilter:this.parentFilter});return i}});return n}),define("plex/model/LinearFilterModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","plex/model/collections/FilterOptionCollection","jquery"],function(e,t,n,i){var a=t.extend({idAttribute:"key",whitelistedAttrs:["secondary","key","title"],defaults:{linear:!0},initialize:function(){this.set("options",new n([],{server:this.server,section:this.section,parentFilter:this}))
},convert:function(t){var n=_.isObject(t)?t:i.xml2json(t);return e.parseBoolean(n,"secondary"),n},parse:function(e){var t=this.convert(e);t=_.pick(t,this.whitelistedAttrs);var n=t.key;return t.primary=!t.secondary&&/^(all|recentlyAdded|onDeck|newest)/.test(n),"all"===n&&(t.title="All"),t}});return a}),define("plex/model/collections/LinearFilterCollection",["plex/model/collections/BaseCollection","plex/model/LinearFilterModel","jquery"],function(e,t){var n=e.extend({model:t,url:function(){var e=(""+this.section.id).match(/^(\S+)\/library\//);
return e&&e.length>1?this.section.id:"/library/sections/"+this.section.id},initialize:function(e,t){this.server=t.server,this.section=t.section},parse:function(e){return this.convert(e,"Directory")}});return n}),define("plex/model/FilterModel",["plex/model/BaseModel","plex/model/collections/FilterOptionCollection","jquery"],function(e,t,n){var i=e.extend({idAttribute:"filter",whitelistedAttrs:["filter","filterType","key","title"],url:function(){return"library/sections/"+this.section.id+"/"+this.id
},initialize:function(){this.collection&&this.collection.mediaType&&(this.mediaType=this.collection.mediaType),this.set("options",new t([],{server:this.server,section:this.section,parentFilter:this}))},convert:function(e){var t=_.isObject(e)?e:n.xml2json(e);return t},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs)}});return i}),define("plex/model/collections/FilterCollection",["plex/model/collections/BaseCollection","plex/model/FilterModel","jquery"],function(e,t){var n=e.extend({model:t,url:function(){return"library/sections/"+this.section.id+"/filters?type="+this.mediaType
},initialize:function(e,t){this.server=t.server,this.section=t.section},parse:function(e){return this.convert(e,"Directory")}});return n}),define("plex/model/SortModel",["plex/model/BaseModel","plex/model/collections/FilterOptionCollection","jquery"],function(e,t,n){var i=e.extend({idAttribute:"key",whitelistedAttrs:["key","title","default"],convert:function(e){var t=_.isObject(e)?e:n.xml2json(e);return t},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs)}});return i
}),define("plex/model/collections/SortCollection",["plex/model/collections/BaseCollection","plex/model/SortModel","jquery"],function(e,t){var n=e.extend({model:t,url:function(){return"library/sections/"+this.section.id+"/sorts?type="+this.mediaType},initialize:function(e,t){this.server=t.server,this.section=t.section},parse:function(e){return this.convert(e,"Directory")}});return n}),define("plex/model/media/collections/MediaCollection",["plex/control/utils/ParseUtil","plex/model/collections/BaseCollection","plex/model/media/MediaModel","jquery"],function(e,t,n,i){var a=t.extend({model:n,size:0,start:0,totalSize:null,pending:!1,allowSync:!1,search:"",scrollPosition:0,initialize:function(e,t){this.server=t.server,this.section=t.section,this.subset=t.subset||"all",this.mediaType=t.mediaType,this.firstCharacter=t.firstCharacter||null,this.start=t.start||0,this.size=t.size||50,this.scrollPosition=t.scrollPosition||0,this.linearFilter=t.linearFilter||{},this.filters=t.filters||[],this.sort=t.sort||{},t.url&&(this.url=t.url),this.section&&t.listen&&(this.mergeThrottle=_.throttle(this.merge,5e3),this.section.on("timeline",function(e){0===e.state&&(e.subset===void 0||this.mediaType===e.subset)&&this.mergeThrottle()
},this))},url:function(){if(this.section.get("limited"))return this.getLimitedUrl();var e="/library/sections/",t=this.mediaType,n={},i=[];if(this.firstCharacter)e+=this.section.id+"/firstCharacter/"+encodeURIComponent(this.firstCharacter)+"?";else{var a=this.subset;("recentlyAdded"===this.subset||"newest"===this.subset)&&(a="all",this.sort.direction="desc",2===t?t=4:8===t&&(t=9),this.sort.key="recentlyAdded"===this.subset?"addedAt":"originallyAvailableAt"),e+=this.section.id+"/"+a+"?"}this.section.get("refreshing")&&this.server.supports("timelineState")&&(n.timelineState=1),t&&13!==t&&(n.type=t),_.each(this.filters,function(e){e.values.length&&(n[e.key]=e.values.join(","))
}),this.sort.key&&(n.sort=this.sort.key+":"+this.sort.direction),n["X-Plex-Container-Start"]=this.start,n["X-Plex-Container-Size"]=this.size;for(var s in n)"unviewedLeafCount"===s?i.push(s+">="+n[s]):i.push(s+"="+n[s]);return e+=i.join("&")},getLimitedUrl:function(){var e=this.subset.match(/^(\S+)\/library\//);if(e&&e.length>1)return this.subset;var t=(""+this.section.id).match(/^(\S+)\/library\//);return t&&t.length>1?this.section.id+"/"+this.subset:"/library/sections/"+this.section.id+"/"+this.subset
},parse:function(t){_.isString(t)&&(t=t.replace(/<(Directory|Video|Track|Photo)/g,"<MediaItem"),t=t.replace(/<\/(Directory|Video|Track|Photo)\>/g,"</MediaItem>"));var n=this.convert(t);return e.parseInteger(n,"totalSize"),e.parseBoolean(n,"allowSync"),e.parseArray(n,"MediaItem"),this.viewGroup=n.viewGroup,this.totalSize=n.totalSize,this.allowSync=n.allowSync,n.identifier&&_.each(n.MediaItem,function(e){e.identifier=n.identifier}),n.MediaItem},next:function(e){if(!this.pending&&this.totalSize>this.start+this.size){this.start+=this.size,this.pending=!0,e&&(this.size=e);
var t=this.fetch({add:!0}).always(_.bind(function(){this.pending=!1},this));return t}return i.Deferred().resolve()},merge:function(){var e=new a([],{server:this.server,section:this.section,subset:this.subset,mediaType:this.mediaType,filters:this.filters,sort:this.sort,size:this.start+this.size});e.fetch({hideLoadingAlert:!0}).done(_.bind(function(){this.totalSize=e.totalSize,e.each(function(t,n){e.size>n&&!this.get(t.id)&&(this.add(t,{at:n}),this.length>e.size&&this.pop())},this),this.trigger("merge",this)
},this))},updateSubset:function(e){return this.subset?(this.subset&&e&&this.subset!==e&&(this.subset=e,this.populatePromise=null,this.firstCharacter=null,this.start=0,this.size=50,this.scrollPosition=0,this.linearFilter={},this.filters=[],this.sort={},this.reset()),void 0):(this.subset=e||"all",void 0)},getSubsetTitle:function(){switch(this.subset){case"onDeck":return"On Deck";case"recentlyAdded":return"Recently Added";case"folder":return"By Folder";case"newest":return 2===this.mediaType||4===this.mediaType?"Recently Aired":"Recently Released"
}return this.section.get("title")},movies:function(){return this.filter(function(e){return"movie"===e.get("type")})},shows:function(){return this.filter(function(e){return"show"===e.get("type")})},episodes:function(){return this.filter(function(e){return"episode"===e.get("type")})},artists:function(){return this.filter(function(e){return"artist"===e.get("type")})},albums:function(){return this.filter(function(e){return"album"===e.get("type")})},tracks:function(){return this.filter(function(e){return"track"===e.get("type")
})},clips:function(){return this.filter(function(e){return"clip"===e.get("type")})}});return a}),define("plex/model/SectionModel",["plex/control/utils/ParseUtil","plex/control/utils/LocalizationUtil","plex/model/BaseModel","plex/model/collections/AlphanumericCollection","plex/model/collections/LinearFilterCollection","plex/model/collections/FilterCollection","plex/model/collections/SortCollection","plex/model/media/collections/MediaCollection","jquery"],function(e,t,n,i,a,s,r,l,o){var c=n.extend({idAttribute:"key",urlRoot:"/library/sections",defaults:{limited:!0},whitelistedAttrs:["key","uuid","type","limited","title","art","thumb","agent","scanner","language","location","refreshing","updatedAt","createdAt"],cacheKey:function(e){return e.key?this.server.id+"!"+e.key:null
},initialize:function(){this.set("alphanumeric",new i([],{server:this.server,section:this})),this.set("linearFilters",new a([],{server:this.server,section:this})),this.set("filters",new s([],{server:this.server,section:this})),this.set("sorts",new r([],{server:this.server,section:this})),this.set("media",new l([],{server:this.server,section:this,subset:"all",listen:!0}))},convert:function(t){var n=_.isObject(t)?t:o.xml2json(t);return e.parseBoolean(n,"refreshing"),e.parseInteger(n,["createdAt","updatedAt"]),n
},parse:function(e,t){var n=this.convert(e);if(t&&201==t.status&&(n.Directory&&(n=n.Directory),!n.key)){var i=t.getResponseHeader("Location");i&&(n.key=i.substring(i.lastIndexOf("/")+1))}return _.isArray(n.Location)?n.location=_.pluck(n.Location,"path"):n.Location&&(n.location=[n.Location.path]),this.server&&(n.limited="secondary"===this.server.get("serverClass")),n=_.pick(n,this.whitelistedAttrs)},generateFilteredTitle:function(e){var n=this.get("title"),i=this.get("media"),a=i.filters,s=!0;if(e){var r=[];
return _.each(e,function(e){r.push(e.get("title"))}),n+=": "+r.join(", ")}return"all"!==i.subset?n+": "+t.t(i.getSubsetTitle()):a&&a.length?(n+=": ",_.each(a,function(e){var t=e.titles;_.each(t,function(e){s||(n+=", "),n+=e,s=!1})}),n):n},getSaveParams:function(){var e=n.prototype.getSaveParams.apply(this,arguments);return e=_.pick(e,["name","title","type","agent","scanner","language","location"]),"title"in e&&(e.name=e.title,delete e.title),e}});return c}),define("plex/model/collections/SectionCollection",["plex/model/collections/BaseCollection","plex/model/SectionModel","jquery"],function(e,t){var n=e.extend({model:t,url:"library/sections",initialize:function(e,t){this.server=t.server
},parse:function(e){return this.convert(e,"Directory")}});return n}),define("plex/model/ChannelActionModel",["plex/model/BaseModel"],function(e){var t=e.extend({idAttribute:"key"});return t}),define("plex/model/collections/ChannelActionCollection",["plex/model/collections/BaseCollection","plex/model/ChannelActionModel","jquery"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.server=t.server,t.url&&(this.url=t.url)},parse:function(e){return this.convert(e,"Directory")}});return n
}),define("plex/model/media/collections/ClipCollection",["plex/control/utils/ParseUtil","plex/model/collections/BaseCollection","plex/model/media/ClipModel","jquery"],function(e,t,n){var i=t.extend({model:n,allowSync:!1,url:function(){return this.media.get("key")},initialize:function(e,t){this.server=t.server,this.media=t.media,t.url&&(this.url=t.url)},parse:function(t){var n=this.convert(t);return e.parseBoolean(n,"allowSync"),this.allowSync=n.allowSync,n.Video}});return i}),define("plex/model/media/TrackModel",["plex/model/media/MediaModel"],function(e){var t=e.extend();
return t}),define("plex/model/media/collections/TrackCollection",["plex/control/utils/ParseUtil","plex/model/collections/BaseCollection","plex/model/media/TrackModel","jquery"],function(e,t,n){var i=t.extend({model:n,allowSync:!1,url:function(){return this.media.get("key")},initialize:function(e,t){this.server=t.server,this.section=t.section,this.media=t.media},parse:function(t){var n=this.convert(t);return e.parseBoolean(n,"allowSync"),e.parseArray(n,"Track"),this.allowSync=n.allowSync,n.identifier&&_.each(n.Track,function(e){e.identifier=n.identifier
}),n.Track}});return i}),define("plex/model/media/PhotoModel",["plex/model/media/MediaModel"],function(e){var t=e.extend();return t}),define("plex/model/media/collections/PhotoCollection",["plex/control/utils/ParseUtil","plex/model/collections/BaseCollection","plex/model/media/PhotoModel","jquery"],function(e,t,n){var i=t.extend({model:n,allowSync:!1,url:function(){return this.media.get("key")},initialize:function(e,t){this.server=t.server,this.section=t.section,this.media=t.media},parse:function(t){var n=this.convert(t),i=[];
return e.parseBoolean(n,"allowSync"),this.allowSync=n.allowSync,_.compact(i.concat(n.Directory,n.Photo))}});return i}),define("plex/model/ChannelModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","plex/model/collections/ChannelActionCollection","plex/model/media/collections/ClipCollection","plex/model/media/collections/TrackCollection","plex/model/media/collections/PhotoCollection","jquery"],function(e,t,n,i,a,s,r){var l=t.extend({idAttribute:"key",subcollections:["Directory","Video","Track","Photo","Artist","Album","Playlist","Genre"],url:function(){return this.id?this.id:"/:/plugins/"+this.get("identifier")+"/root"
},cacheKey:function(e){var t;return e.key?t="none"===e.key?null:this.server.id+"!"+e.key:e.identifier&&(t=this.server.id+"!"+e.identifier),t},initialize:function(){this.set("actions",new n([],{server:this.server})),this.set("clips",new i([],{server:this.server,media:this})),this.set("tracks",new a([],{server:this.server,media:this})),this.set("photos",new s([],{server:this.server,media:this}))},convert:function(t){var n=_.isObject(t)?t:r.xml2json(t);return e.parseBoolean(n,["installed","noCache","allowSync"]),e.parseInteger(n,["size","lastAccessedAt"]),n
},parse:function(e){var t=this.convert(e),n=this.toJSON();if(n&&(n.key&&(t.key=n.key),n.identifier&&(t.identifier=n.identifier)),"none"===t.key&&delete t.key,_.each(this.subcollections,function(e){if(e in t){_.isArray(t[e])||(t[e]=[t[e]]);for(var n=t[e].length-1;n>=0;n--){var i=t[e][n];if(i.settings)t.settings=i.key,t[e].splice(n,1);else if(i.search)t.search=i.key,t[e].splice(n,1);else{var a=i.key.split("/");1===a.length&&(i.key=t.key+"/"+i.key),i.key&&!i.ratingKey&&(i.ratingKey=i.key),i.mediaType&&!i.type&&(i.type=i.mediaType),i.label?i.title=i.label:i.track?i.title=i.track:i.album?i.title=i.album:i.artist&&(i.title=i.artist),i.totalTime&&(i.duration=i.totalTime)
}}}}),_.each(["Artist","Album","Playlist","Genre"],function(e){t[e]&&t[e].length&&(t.Directory&&t.Directory.length&&(t[e]=t[e].concat(t.Directory)),t.Directory=t[e],t[e]=null)}),t.Video&&t.Video.length&&(this.get("clips").add(t.Video,{parse:!0}),delete t.Video),t.Track&&t.Track.length&&(this.get("tracks").add(t.Track,{parse:!0}),delete t.Track),t.Photo&&t.Photo.length&&(this.get("photos").add(t.Photo,{parse:!0}),delete t.Photo),t.title2?t.title=t.title2:t.title1&&(t.title=t.title1),t.key){var i=t.key.split("/");
if(i&&i.length>1){var a=t.key.split("/")[1];t.type=a.charAt(0).toUpperCase()+a.slice(1)}}return t}});return l}),define("plex/model/collections/ChannelCollection",["plex/model/collections/BaseCollection","plex/model/ChannelModel","jquery"],function(e,t){var n=e.extend({model:t,recent:!1,url:function(){return this.recent?"channels/recentlyViewed?X-Plex-Container-Start=0&X-Plex-Container-Size=25":"channels/all"},initialize:function(e,t){this.server=t.server,this.recent=t.recent,t.url&&(this.url=t.url),(this.recent||t.url)&&(this.comparator=null)
},parse:function(e){var t=this.convert(e),n=[];return this.viewGroup=t.viewGroup,_.compact(n.concat(t.Directory,t.Video,t.Track,t.Photo))},comparator:function(e){return e.get("title").toLowerCase()},all:function(){return this.models},videos:function(){return this.filter(function(e){return"Video"===e.get("type")})},music:function(){return this.filter(function(e){return"Music"===e.get("type")})},photos:function(){return this.filter(function(e){return"Photos"===e.get("type")})}});return n}),define("plex/model/PreferenceModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","jquery"],function(e,t,n){var i=t.extend({idAttribute:"id",defaults:{type:"string",summary:"",label:"",group:""},whitelistedAttrs:["id","label","default","summary","value","type","group","advanced","option","hidden","enumValues","values"],url:"/:/prefs",convert:function(t){var i=_.isObject(t)?t:n.xml2json(t);
return"bool"===i.type?e.parseBoolean(i,"value"):"int"===i.type&&e.parseInteger(i,"value"),e.parseBoolean(i,["advanced","hidden"]),i},parse:function(e){var t=this.convert(e);if(t=_.pick(t,this.whitelistedAttrs),t.enumValues&&!_.isArray(t.enumValues)&&(t.enumValues=_.map(t.enumValues.split("|"),function(e){var t=e.indexOf(":");return t>0?{label:e.slice(t+1),value:e.slice(0,t)}:{label:e,value:e}})),t.values&&!_.isArray(t.values)){var n=0;t.values=_.map(t.values.split("|"),function(e){return{label:e,value:n++}
})}return t},getSaveParams:function(e){if(_.has(e,"FriendlyName")&&this.server.set("friendlyName",e.FriendlyName),_.isEmpty(e)){var t={};return t[this.get("id")]=this.get("value"),t}return"value"in e&&(e[this.get("id")]=e.value,delete e.value),e}});return i}),define("plex/model/collections/PreferenceCollection",["plex/model/collections/BaseCollection","plex/model/PreferenceModel","jquery"],function(e,t){var n=e.extend({model:t,url:function(){return"/:/prefs"},initialize:function(e,t){this.server=t.server,t.url&&(this.url=t.url),this.server.on("preference:change",function(e){var t=this.get(e.id);
t&&t.set("value",e.value)},this)},parse:function(e){var t=this.convert(e,"Setting");return _.filter(t,function(e){return e.id})}});return n}),define("plex/model/collections/PaginatedCollection",["plex/model/collections/BaseCollection"],function(e){var t=e.extend({pages:function(){return Math.ceil(this.length/this.pageSize)},page:function(e,t){var n,i=0;return n=t?this.length-e*this.pageSize:e*this.pageSize-this.pageSize,0>n&&(i=n,n=0),this.models.slice(n,n+this.pageSize+i)}});return t}),define("plex/model/ServerEventModel",["plex/model/BaseModel"],function(e){var t=0,n=e.extend({idAttribute:"id",parse:function(e){var n=e;
return n.time=new Date,n.id="evt"+t++,"preference"==n._type&&(n.value=""+n.value),n}});return n}),define("plex/model/collections/ServerEventCollection",["plex/model/collections/PaginatedCollection","plex/model/ServerEventModel"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.server=t.server,this.pageSize=20,this.limit=1e3,this.startTime=new Date,this.server.on("preference:change",function(e){this.add(_.extend({_type:"preference"},e),{parse:!0})},this),this.server.on("timeline",function(e){this.add(_.extend({_type:"timeline"},e),{parse:!0})
},this),this.server.on("status",function(e){"ProgressNotification"!==e._elementType&&this.add(_.extend({_type:"status"},e),{parse:!0})},this),this.server.on("websocket",function(e){this.add(_.extend({_type:"websocket"},e),{parse:!0})},this),this.server.on("playing",function(e){this.add(_.extend({_type:"playing"},e),{parse:!0})},this)},add:function(){this.length+1>this.limit&&this.remove(this.at(0)),e.prototype.add.apply(this,arguments)}});return n}),define("plex/model/TranscodeJobModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","jquery"],function(e,t,n){var i=t.extend({idAttribute:"syncItemId",whitelistedAttrs:["key","type","progress","speed","remaining","size","title","thumb","syncItemId","syncItemTitle"],convert:function(t){var i=_.isObject(t)?t:n.xml2json(t);
return e.parseInteger(i,["syncItemId","speed"]),i},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs)}});return i}),define("plex/model/collections/TranscodeJobCollection",["plex/model/collections/BaseCollection","plex/model/TranscodeJobModel","jquery"],function(e,t){var n=e.extend({model:t,url:function(){return"sync/transcodeQueue"},initialize:function(e,t){this.server=t.server},parse:function(e){return this.convert(e,"TranscodeJob")}});return n}),define("plex/model/SessionModel",["plex/model/media/MediaModel"],function(e){var t=e.extend({idAttribute:"sessionKey",cacheKey:function(e){return this.server.id+"!"+e[this.idAttribute]
}});return t}),define("plex/model/collections/SessionCollection",["plex/model/collections/BaseCollection","plex/model/SessionModel","jquery"],function(e,t){var n=e.extend({model:t,url:"/status/sessions",initialize:function(e,t){this.server=t.server},parse:function(e){return this.convert(e,"Video")}});return n}),define("plex/model/ServerModel",["plex/control/utils/ParseUtil","plex/control/utils/BrowserDetect","plex/model/BaseModel","plex/model/MyPlexAccountModel","plex/model/collections/SectionCollection","plex/model/collections/ChannelCollection","plex/model/collections/PreferenceCollection","plex/model/collections/ServerEventCollection","plex/model/collections/TranscodeJobCollection","plex/model/collections/SessionCollection","plex/model/media/collections/MediaCollection","jquery"],function(e,t,n,i,a,s,r,l,o,c,d,h){var u=n.extend({idAttribute:"machineIdentifier",defaults:{name:"Unknown",disconnected:!1,remote:!1,shared:!1,isAvailable:!1,transcoderVideo:!0},features:{splitApart:"0.9.7.0",merge:"0.9.7.0",batchEdit:"0.9.7.0",search:"0.9.7.0",cleanBundles:"0.9.7.0",timelineState:"0.9.7.2",firstRunPref:"0.9.7.3",artworkUpload:"0.9.7.9",sync:"0.9.7.10",universalTranscoder:"0.9.7.17",syncNotifications:"0.9.7.23",sharedPreferences:"0.9.7.23"},whitelistedAttrs:["machineIdentifier","name","friendlyName","accessToken","shared","sourceTitle","remote","host","address","remoteAddress","port","remotePort","version","serverClass","platform","startState","flashInstalled","silverlightInstalled","soundflowerInstalled","transcoderAudio","transcoderVideo","transcoderVideoBitrates","transcoderVideoQualities","transcoderVideoResolutions","webkit","allowMediaDeletion","multiuser"],url:function(e){if(this.serverUrl)return this.serverUrl;
var t=e&&e.address?e.address:this.get("address"),n=e&&e.port?e.port:this.get("port");if(!t&&!n)return window.location.protocol+"//"+window.location.host+"/";n=n||window.location.port;var i=443==n?"https://":"http://",a=i+(t||window.location.hostname);return n&&(a+=":"+n),a+"/"},cacheKey:function(e){return e[this.idAttribute]},initialize:function(){this.server=this,this.set("myPlexAccount",new i({},{server:this})),this.set("onDeck",new d([],{server:this,url:"/library/onDeck"})),this.set("recentlyAdded",new d([],{server:this,url:"/library/recentlyAdded"})),this.set("sections",new a([],{server:this})),this.set("channels",new s([],{server:this})),this.set("preferences",new r([],{server:this})),this.set("timeline",new l([],{server:this})),this.set("transcodeJobs",new o([],{server:this})),this.set("sessions",new c([],{server:this})),this.get("preferences").on("reset",function(e){var t=e.get("FriendlyName"),n=e.get("allowMediaDeletion");
t!==void 0&&t.on("change:value",function(e,t){t&&this.set("name",t)},this),n!==void 0&&n.on("change:value",function(e,t){this.set("allowMediaDeletion","1"==t)},this)},this),this.on("change:machineIdentifier",this.refreshCacheKey,this),this.get("port")||"/web/index.html"===window.location.pathname||this.set("port","32400")},convert:function(t){var n=_.isObject(t)?t:h.xml2json(t);return n.sourceTitle&&(n.shared=!0),e.parseBoolean(n,["flashInstalled","silverlightInstalled","soundflowerInstalled","transcoderAudio","transcoderVideo","webkit","allowMediaDeletion","multiuser"]),n.startState===void 0&&(n.startState=null),n
},parse:function(e,t){var n=this.convert(e);if(!n||!n.machineIdentifier)return{};n=_.pick(n,this.whitelistedAttrs),n.versionFull=n.version;var i=/(\d+\.){2,3}\d+/.exec(n.version);return i&&(n.version=i[0]),t&&200==t.status&&(_.defer(_.bind(function(){this.set("isAvailable",!0)},this)),this.serverUrl=this.url()),n},resolveUrl:function(e,t,n){if(/^\w+:\/\//.test(e))return e;var i,a=t?"http://127.0.0.1:32400/":this.url();i=e?a+("/"==e[0]?e.substr(1):e):a;var s=this.get("accessToken");return n&&s?(i+=i.indexOf("?")>0?"&":"?",i+="X-Plex-Token="+s):i
},resolveExternalUrl:function(e){if(0===e.lastIndexOf("http",0))return e;var t="http://"+this.get("address")+":"+this.get("port")+"/";return t+("/"==e[0]?e.substr(1):e)},getHeaders:function(){var e={},n=this.get("accessToken");n&&(e["X-Plex-Token"]=n),e["X-Plex-Client-Identifier"]=this.app.get("clientID"),e["X-Plex-Product"]="Web Client",e["X-Plex-Device"]=t.OS,e["X-Plex-Platform"]=t.browser,e["X-Plex-Platform-Version"]=t.version,e["X-Plex-Version"]=this.app.get("version"),e["X-Plex-Device-Name"]="Plex/Web ("+t.browser+")";
var i=this.app.get("myPlex");return i.get("signedIn")&&(e["X-Plex-Account"]=i.get("accountId"),e["X-Plex-Username"]=i.get("username")),e},getAjaxOptions:function(e){var t={};return t.url=this.resolveUrl(e),t.dataType="text",0===t.url.lastIndexOf(this.url(),0)&&(t.headers=this.getHeaders()),t},supports:function(e){var t=this.features[e],n=this.get("version");if(t&&n){t=t.split("."),n=n.split(".");for(var i=0,a=t.length;a>i;i++)if(n.length>i){var s=parseInt(t[i],10),r=parseInt(n[i],10);if(r>s)return!0;
if(s>r)return!1}return!0}return!0}});return u}),define("plex/model/collections/ServerCollection",["plex/model/collections/BaseCollection","plex/model/ServerModel","jquery"],function(e,t){var n=e.extend({model:t,url:"/servers",remote:!1,initialize:function(e,t){t||(t={}),this.app=t.app,this.server=t.server,t.url&&(this.url=t.url),t.remote&&(this.remote=!0)},parse:function(e){var t=this.convert(e,"Server");return _.each(t,_.bind(function(e){e.remote=this.remote,this.remote&&(e.remoteAddress=e.address,e.remotePort=e.port)
},this)),t}});return n}),define("plex/model/AnnouncementModel",["plex/model/BaseModel"],function(e){var t=e.extend({whitelistedAttrs:["promo","timestamp","link","thumb","title","description"],parse:function(e){return _.pick(e,this.whitelistedAttrs)}});return t}),define("plex/model/collections/AnnouncementCollection",["plex/model/collections/BaseCollection","plex/model/AnnouncementModel"],function(e,t){var n=e.extend({model:t,url:"http://plex.r.worldssl.net/announcements/announcements.json?v=25",parse:function(e){return JSON.parse(e)
}});return n}),define("plex/model/AppModel",["plex/control/Dispatcher","plex/model/DebugInfoModel","plex/model/MyPlexModel","plex/model/ServerModel","plex/model/collections/ServerCollection","plex/model/collections/AnnouncementCollection","jquery","backbone","xml2json"],function(e,t,n,i,a,s,r){var l=Backbone.Model.extend({defaults:{clientID:null,loading:!1,alert:null,view:null,modal:null,initialized:!1,isAuthorized:!1,isUnavailable:!1,isUnsupported:!1,multiServer:!1,updateStatus:"none",version:"dev"},initialize:function(){t.setAppModel(this);
var l=r("#plex-script");if(l.length){var o=/version=([\.\w]+)$/.exec(l[0].src);o&&this.set("version",o[1])}this.on("change:initialized",function(){this.get("primaryServer").get("isAvailable")&&e.trigger("command:CheckForUpdates",!1),setInterval(function(){e.trigger("command:CheckForUpdates",!1)},36e5)});var c;try{c=window.localStorage.getItem("clientID"),null===c&&(c=Math.random().toString(36).substr(2),window.localStorage.setItem("clientID",c))}catch(d){c=Math.random().toString(36).substr(2)}this.set("clientID",c),this.set("primaryServer",new i({},{app:this})),this.set("servers",new a([],{app:this,server:this.get("primaryServer")})),this.set("clients",new a([],{url:"/clients",server:this.get("primaryServer")})),this.set("myPlex",new n({},{app:this,server:this.get("primaryServer")})),this.set("announcements",new s),e.on("ready",function(){e.trigger("command:StartInit")
})}});return window.appModel=new l,window.appModel}),define("plex/model/HeaderModel",["backbone"],function(){var e=Backbone.Model.extend({defaults:{show:!1,showBack:!1,activeView:null,activeSearch:null,activeServer:null,activeSection:null,activeMedia:null,activeChannel:null,activeChannelMedia:null},reset:function(e){this.set({activeView:e,activeSearch:"",activeServer:null,activeSection:null,activeMedia:null,activeChannel:null,activeChannelMedia:null})}});return new e}),SHA256_hexchars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],SHA256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],define("sha256",function(){}),define("plex/control/utils/TranscodeUtil",["plex/control/utils/MediaUtil","plex/control/utils/LogUtil","plex/model/AppModel","plex/model/SettingsModel","plex/model/HeaderModel","jquery","base64","sha256"],function(e,t,n,i,a,s){var r="KQMIY6GATPC63AIMC4R2",l=decode64("k3U6GLkZOoNIoSgjDshPErvqMIFdE0xMTx8kgsrhnC0=");
return{image:function(e,t,i,a){if(!t)return"";e&&"myPlex"!==e.id||(e=n.get("primaryServer"));var r={url:e.resolveUrl(t,!0),width:parseInt(i,10),height:parseInt(a,10)};e.get("accessToken")&&(r["X-Plex-Token"]=e.get("accessToken"));var l="/photo/:/transcode?"+s.param(r,!0);return e.resolveUrl(l)},music:function(e,t){var n=_.first(t.get("Media"));if(n){var i=_.first(n.Part);if(i){var a=i.key,r={identifier:t.get("identifier"),url:e.resolveUrl(a,!0),format:"mp3",audioCodec:"libmp3lame",audioBitrate:320,audioSamples:44100};
r=_.extend(r,e.getHeaders());var l="/music/:/transcode/generic.mp3?"+s.param(r,!0);return e.resolveUrl(l)}}},video:function(e,t,n,i,a,r){if(e.supports("universalTranscoder")){var l=e.resolveUrl(this.getUniversalTranscoderUrl(e,t,n,i));return a(l),void 0}var o=this.getTranscoderUrl(e,t,i),c=e.getAjaxOptions(o);s.ajax(c).done(function(t){var n=t.replace(/[\s\S]+(session.+?\.m3u8)[\s\S]+/,"$1"),i=e.resolveUrl("video/:/transcode/segmented/")+n;a(i)}).fail(function(){r()})},getTranscoderUrl:function(a,o,c){var d=a.get("remote")?i.get("remoteQuality"):i.get("quality"),h=Math.round((new Date).getTime()/1e3),u={identifier:o.get("identifier"),key:a.resolveUrl(o.get("key"),!0),url:a.resolveUrl(c.key,!0),session:n.get("clientID"),offset:0,quality:d,subtitleSize:i.get("subtitleSize"),audioBoost:i.get("audioBoost"),"3g":0},p=o.get("indirectHttpHeaders");
p&&(u.httpCookies=p.Cookie,u.userAgent=p["User-Agent"]);var m="/video/:/transcode/segmented/start.m3u8?"+s.param(u,!0);HMAC_SHA256_init(l),HMAC_SHA256_write(m+"@"+h);var f=HMAC_SHA256_finalize(),v=encode64(array_to_string(f)),g=e.capabilities;i.get("preferAAC")&&(g=e.capabilities.replace("audioDecoders=mp3,aac","audioDecoders=aac")),i.get("directStream")||(g=e.capabilities.replace(/videoDecoders=[^;]+;audioDecoders=[^;]+/,""));var y=_.extend(a.getHeaders(),{"X-Plex-Access-Key":r,"X-Plex-Access-Code":v,"X-Plex-Access-Time":h,"X-Plex-Client-Capabilities":g});
return t.log("transcoding with old transcoder"),t.log("capabilities: "+g),t.log("quality: "+u.quality),t.log("subtitleSize: "+u.subtitleSize),t.log("audioBoost: "+u.audioBoost),m+"&"+s.param(y)},getUniversalTranscoderUrl:function(a,r,l,o){var c=a.get("remote")?i.get("remoteQuality"):i.get("quality"),d=_.indexOf(r.get("Media"),l),h=_.indexOf(l.Part,o),u={path:a.resolveUrl(r.get("key"),!0),mediaIndex:d,partIndex:h,session:n.get("clientID"),protocol:"hls",offset:0,fastSeek:1,directPlay:0,directStream:i.get("directStream")?1:0,videoQuality:e.qualities[c],videoResolution:e.resolutions[c],maxVideoBitrate:e.bitrates[c],subtitleSize:i.get("subtitleSize"),audioBoost:i.get("audioBoost")},p=r.get("indirectHttpHeaders");
return p&&(u.httpCookies=p.Cookie,u.userAgent=p["User-Agent"]),u=_.extend(u,a.getHeaders()),i.get("preferAAC")&&(u["X-Plex-Client-Profile-Extra"]="add-transcode-target-audio-codec(type=videoProfile&context=streaming&protocol=hls&audioCodec=aac)"),t.log("transcoding with universal transcoder"),t.log("mediaIndex: "+u.mediaIndex),t.log("partIndex: "+u.partIndex),t.log("directStream: "+u.directStream),t.log("videoQuality: "+u.videoQuality),t.log("videoResolution: "+u.videoResolution),t.log("maxVideoBitrate: "+u.maxVideoBitrate),t.log("subtitleSize: "+u.subtitleSize),t.log("audioBoost: "+u.audioBoost),u["X-Plex-Client-Profile-Extra"]&&t.log("profileExtra: "+u["X-Plex-Client-Profile-Extra"]),"/video/:/transcode/universal/start.m3u8?"+s.param(u,!0)
}}});var Handlebars={};(function(e,t){e.VERSION="1.0.0-rc.3",e.COMPILER_REVISION=3,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:">= 1.0.0-rc.4"},e.helpers={},e.partials={};var n=Object.prototype.toString,i="[object Function]",a="[object Object]";e.registerHelper=function(t,i,s){if(n.call(t)===a){if(s||i)throw new e.Exception("Arg not supported with multiple helpers");e.Utils.extend(this.helpers,t)}else s&&(i.not=s),this.helpers[t]=i},e.registerPartial=function(t,i){n.call(t)===a?e.Utils.extend(this.partials,t):this.partials[t]=i
},e.registerHelper("helperMissing",function(e){if(2===arguments.length)return t;throw Error("Could not find property '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,a){var s=a.inverse||function(){},r=a.fn,l=n.call(t);return l===i&&(t=t.call(this)),t===!0?r(this):t===!1||null==t?s(this):"[object Array]"===l?t.length>0?e.helpers.each(t,a):s(this):r(t)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(t,n){if(t>=e.logger.level){var i=e.logger.methodMap[t];
"undefined"!=typeof console&&console[i]&&console[i].call(console,n)}}},e.log=function(t,n){e.logger.log(t,n)},e.registerHelper("each",function(t,n){var i,a=n.fn,s=n.inverse,r=0,l="";if(n.data&&(i=e.createFrame(n.data)),t&&"object"==typeof t)if(t instanceof Array)for(var o=t.length;o>r;r++)i&&(i.index=r),l+=a(t[r],{data:i});else for(var c in t)t.hasOwnProperty(c)&&(i&&(i.key=c),l+=a(t[c],{data:i}),r++);return 0===r&&(l=s(this)),l}),e.registerHelper("if",function(t,a){var s=n.call(t);return s===i&&(t=t.call(this)),!t||e.Utils.isEmpty(t)?a.inverse(this):a.fn(this)
}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn})}),e.registerHelper("with",function(n,i){return e.Utils.isEmpty(n)?t:i.fn(n)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)});var s=function(){function e(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(e,t,n,i,a,s){var r=s.length-1;
switch(a){case 1:return s[r-1];case 2:this.$=new i.ProgramNode([],s[r]);break;case 3:this.$=new i.ProgramNode(s[r-2],s[r]);break;case 4:this.$=new i.ProgramNode(s[r-1],[]);break;case 5:this.$=new i.ProgramNode(s[r]);break;case 6:this.$=new i.ProgramNode([],[]);break;case 7:this.$=new i.ProgramNode([]);break;case 8:this.$=[s[r]];break;case 9:s[r-1].push(s[r]),this.$=s[r-1];break;case 10:this.$=new i.BlockNode(s[r-2],s[r-1].inverse,s[r-1],s[r]);break;case 11:this.$=new i.BlockNode(s[r-2],s[r-1],s[r-1].inverse,s[r]);
break;case 12:this.$=s[r];break;case 13:this.$=s[r];break;case 14:this.$=new i.ContentNode(s[r]);break;case 15:this.$=new i.CommentNode(s[r]);break;case 16:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1]);break;case 17:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1]);break;case 18:this.$=s[r-1];break;case 19:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1]);break;case 20:this.$=new i.MustacheNode(s[r-1][0],s[r-1][1],!0);break;case 21:this.$=new i.PartialNode(s[r-1]);break;case 22:this.$=new i.PartialNode(s[r-2],s[r-1]);
break;case 23:break;case 24:this.$=[[s[r-2]].concat(s[r-1]),s[r]];break;case 25:this.$=[[s[r-1]].concat(s[r]),null];break;case 26:this.$=[[s[r-1]],s[r]];break;case 27:this.$=[[s[r]],null];break;case 28:this.$=[[new i.DataNode(s[r])],null];break;case 29:s[r-1].push(s[r]),this.$=s[r-1];break;case 30:this.$=[s[r]];break;case 31:this.$=s[r];break;case 32:this.$=new i.StringNode(s[r]);break;case 33:this.$=new i.IntegerNode(s[r]);break;case 34:this.$=new i.BooleanNode(s[r]);break;case 35:this.$=new i.DataNode(s[r]);
break;case 36:this.$=new i.HashNode(s[r]);break;case 37:s[r-1].push(s[r]),this.$=s[r-1];break;case 38:this.$=[s[r]];break;case 39:this.$=[s[r-2],s[r]];break;case 40:this.$=[s[r-2],new i.StringNode(s[r])];break;case 41:this.$=[s[r-2],new i.IntegerNode(s[r])];break;case 42:this.$=[s[r-2],new i.BooleanNode(s[r])];break;case 43:this.$=[s[r-2],new i.DataNode(s[r])];break;case 44:this.$=new i.PartialNameNode(s[r]);break;case 45:this.$=new i.IdNode(s[r]);break;case 46:s[r-2].push(s[r]),this.$=s[r-2];break;
case 47:this.$=[s[r]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(e){throw Error(e)
},parse:function(e){function n(){var e;return e=i.lexer.lex()||1,"number"!=typeof e&&(e=i.symbols_[e]||e),e}var i=this,a=[0],s=[null],r=[],l=this.table,o="",c=0,d=0,h=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,this.lexer.yylloc===t&&(this.lexer.yylloc={});var u=this.lexer.yylloc;r.push(u);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var m,f,v,g,y,b,w,x,k,S={};;){if(v=a[a.length-1],this.defaultActions[v]?g=this.defaultActions[v]:((null===m||m===t)&&(m=n()),g=l[v]&&l[v][m]),g===t||!g.length||!g[0]){var C="";
if(!h){k=[];for(b in l[v])this.terminals_[b]&&b>2&&k.push("'"+this.terminals_[b]+"'");C=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:u,expected:k})}}if(g[0]instanceof Array&&g.length>1)throw Error("Parse Error: multiple actions possible at state: "+v+", token: "+m);
switch(g[0]){case 1:a.push(m),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),a.push(g[1]),m=null,f?(m=f,f=null):(d=this.lexer.yyleng,o=this.lexer.yytext,c=this.lexer.yylineno,u=this.lexer.yylloc,h>0&&h--);break;case 2:if(w=this.productions_[g[1]][1],S.$=s[s.length-w],S._$={first_line:r[r.length-(w||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(w||1)].first_column,last_column:r[r.length-1].last_column},p&&(S._$.range=[r[r.length-(w||1)].range[0],r[r.length-1].range[1]]),y=this.performAction.call(S,o,d,c,this.yy,g[1],s,r),y!==t)return y;
w&&(a=a.slice(0,2*-1*w),s=s.slice(0,-1*w),r=r.slice(0,-1*w)),a.push(this.productions_[g[1]][0]),s.push(S.$),r.push(S._$),x=l[a[a.length-2]][a[a.length-1]],a.push(x);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this
},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);
this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this
},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return 20>e.length&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;
this._input||(this.done=!0);var e,n,i,a,s;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),l=0;r.length>l&&(i=this._input.match(this.rules[r[l]]),!i||n&&!(i[0].length>n[0].length)||(n=i,a=l,this.options.flex));l++);return n?(s=n[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+n[0].length},this.yytext+=n[0],this.match+=n[0],this.matches=n,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(n[0].length),this.matched+=n[0],e=this.performAction.call(this,this.yy,this,r[a],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:t):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})
},lex:function(){var e=this.next();return e!==t?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,i){switch(n){case 0:return t.yytext="\\",14;case 1:if("\\"!==t.yytext.slice(-1)&&this.begin("mu"),"\\"===t.yytext.slice(-1)&&(t.yytext=t.yytext.substr(0,t.yyleng-1),this.begin("emu")),t.yytext)return 14;
break;case 2:return 14;case 3:return"\\"!==t.yytext.slice(-1)&&this.popState(),"\\"===t.yytext.slice(-1)&&(t.yytext=t.yytext.substr(0,t.yyleng-1)),14;case 4:return t.yytext=t.yytext.substr(0,t.yyleng-4),this.popState(),15;case 5:return this.begin("par"),24;case 6:return 16;case 7:return 20;case 8:return 19;case 9:return 19;case 10:return 23;case 11:return 23;case 12:this.popState(),this.begin("com");break;case 13:return t.yytext=t.yytext.substr(3,t.yyleng-5),this.popState(),15;case 14:return 22;case 15:return 36;
case 16:return 35;case 17:return 35;case 18:return 39;case 19:break;case 20:return this.popState(),18;case 21:return this.popState(),18;case 22:return t.yytext=t.yytext.substr(1,t.yyleng-2).replace(/\\"/g,'"'),30;case 23:return t.yytext=t.yytext.substr(1,t.yyleng-2).replace(/\\'/g,"'"),30;case 24:return t.yytext=t.yytext.substr(1),28;case 25:return 32;case 26:return 32;case 27:return 31;case 28:return 35;case 29:return t.yytext=t.yytext.substr(1,t.yyleng-2),35;case 30:return"INVALID";case 31:break;
case 32:return this.popState(),37;case 33:return 5}},e.rules=[/^(?:\\\\(?=(\{\{)))/,/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[}/ ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:-?[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$:-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-\/]+)/,/^(?:$)/],e.conditions={mu:{rules:[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,33],inclusive:!1},emu:{rules:[3],inclusive:!1},com:{rules:[4],inclusive:!1},par:{rules:[31,32],inclusive:!1},INITIAL:{rules:[0,1,2,33],inclusive:!0}},e
}();return n.lexer=i,e.prototype=n,n.Parser=e,new e}();e.Parser=s,e.parse=function(t){return t.constructor===e.AST.ProgramNode?t:(e.Parser.yy=e.AST,e.Parser.parse(t))},e.AST={},e.AST.ProgramNode=function(t,n){this.type="program",this.statements=t,n&&(this.inverse=new e.AST.ProgramNode(n))},e.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var i=this.id=e[0],a=this.params=e.slice(1),s=this.eligibleHelper=i.isSimple;this.isHelper=s&&(a.length||t)},e.AST.PartialNode=function(e,t){this.type="partial",this.partialName=e,this.context=t
},e.AST.BlockNode=function(t,n,i,a){var s=function(t,n){if(t.original!==n.original)throw new e.Exception(t.original+" doesn't match "+n.original)};s(t.id,a),this.type="block",this.mustache=t,this.program=n,this.inverse=i,this.inverse&&!this.program&&(this.isInverse=!0)},e.AST.ContentNode=function(e){this.type="content",this.string=e},e.AST.HashNode=function(e){this.type="hash",this.pairs=e},e.AST.IdNode=function(t){this.type="ID",this.original=t.join(".");for(var n=[],i=0,a=0,s=t.length;s>a;a++){var r=t[a];
if(".."===r||"."===r||"this"===r){if(n.length>0)throw new e.Exception("Invalid path: "+this.original);".."===r?i++:this.isScoped=!0}else n.push(r)}this.parts=n,this.string=n.join("."),this.depth=i,this.isSimple=1===t.length&&!this.isScoped&&0===i,this.stringModeValue=this.string},e.AST.PartialNameNode=function(e){this.type="PARTIAL_NAME",this.name=e},e.AST.DataNode=function(e){this.type="DATA",this.id=e},e.AST.StringNode=function(e){this.type="STRING",this.string=e,this.stringModeValue=e},e.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e,this.stringModeValue=Number(e)
},e.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},e.AST.CommentNode=function(e){this.type="comment",this.comment=e};var r=["description","fileName","lineNumber","message","name","number","stack"];e.Exception=function(){for(var e=Error.prototype.constructor.apply(this,arguments),t=0;r.length>t;t++)this[r[t]]=e[r[t]]},e.Exception.prototype=Error(),e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return""+this.string};var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},o=/[&<>"'`]/g,c=/[&<>"'`]/,d=function(e){return l[e]||"&amp;"
};e.Utils={extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},escapeExpression:function(t){return t instanceof e.SafeString?""+t:null==t||t===!1?"":(t=""+t,c.test(t)?t.replace(o,d):t)},isEmpty:function(e){return e||0===e?"[object Array]"===n.call(e)&&0===e.length?!0:!1:!0}};var h=e.Compiler=function(){},u=e.JavaScriptCompiler=function(){};h.prototype={compiler:h,disassemble:function(){for(var e,t,n,i=this.opcodes,a=[],s=0,r=i.length;r>s;s++)if(e=i[s],"DECLARE"===e.opcode)a.push("DECLARE "+e.name+"="+e.value);
else{t=[];for(var l=0;e.args.length>l;l++)n=e.args[l],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);a.push(e.opcode+" "+t.join(" "))}return a.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var i=this.opcodes[n],a=e.opcodes[n];if(i.opcode!==a.opcode||i.args.length!==a.args.length)return!1;for(var s=0;i.args.length>s;s++)if(i.args[s]!==a.args[s])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;
return!0},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t,n=e.statements;this.opcodes=[];for(var i=0,a=n.length;a>i;i++)t=n[i],this[t.type](t);return this.isSimple=1===a,this.depths.list=this.depths.list.sort(function(e,t){return e-t
}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var a=0,s=n.depths.list.length;s>a;a++)t=n.depths.list[a],2>t||this.addDepth(t-1);return i},block:function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var a=this.classifyMustache(t);"helper"===a?this.helperMustache(t,n,i):"simple"===a?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")
},hash:function(e){var t,n,i=e.pairs;this.opcode("pushHash");for(var a=0,s=i.length;s>a;a++)t=i[a],n=t[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type)):this.accept(n),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")
},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);"simple"===n?this.simpleMustache(e):"helper"===n?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var i=e.id,a=i.parts[0],s=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",a,s)
},simpleMustache:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),a=e.id.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",i.length,a);else{if(this.options.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+a);this.opcode("invokeHelper",i.length,a)
}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,i=e.parts.length;i>n;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})
},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw Error("EWOT");0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;if(n&&!t){var a=e.id.parts[0];i.knownHelpers[a]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type)):this[t.type](t)
},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("emptyHash"),t},setupFullMustacheParams:function(e,t,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}};var p=function(e){this.value=e};u.prototype={nameLookup:function(e,t){return/^[0-9]+$/.test(t)?e+"["+t+"]":u.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"
}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,n,i,a){this.environment=t,this.options=n||{},e.log(e.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.inlineStack=[],this.compileChildren(t,n);var s,r=t.opcodes;for(this.i=0,g=r.length;g>this.i;this.i++)s=r[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args);
return this.createFunctionContext(a)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e
},createFunctionContext:function(t){var n=this.stackVars.concat(this.registers.list);if(n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", ")),!this.isChild)for(var i in this.context.aliases)this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var a=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,r=this.environment.depths.list.length;r>s;s++)a.push("depth"+this.environment.depths.list[s]);
var l=this.mergeSource();if(!this.isChild){var o=e.COMPILER_REVISION,c=e.REVISION_CHANGES[o];l="this.compilerInfo = ["+o+",'"+c+"'];\n"+l}if(t)return a.push(l),Function.apply(this,a);var d="function "+(this.name||"")+"("+a.join(",")+") {\n  "+l+"}";return e.log(e.logger.DEBUG,d+"\n\n"),d},mergeSource:function(){for(var e,n="",i=0,a=this.source.length;a>i;i++){var s=this.source[i];s.appendToBuffer?e=e?e+"\n    + "+s.content:s.content:(e&&(n+="buffer += "+e+";\n  ",e=t),n+=s+"\n  ")}return n},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";
var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),e[e.length-1]="options",this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))
},append:function(){this.flushInline();var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))
},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.push(this.nameLookup("data",e,"data"))},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"string"==typeof e?this.pushString(e):this.pushStackLiteral(e)
},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.register("hashTypes","{}"),this.register("hashContexts","{}"))},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=t,this.options.stringParams&&(this.register("hashContexts","{"+e.contexts.join(",")+"}"),this.register("hashTypes","{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))
},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t,!0);this.push(n.name),this.replaceStack(function(e){return e+" ? "+e+".call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")"})},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);
this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),a=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if ("+s+" = "+i+") { "+s+" = "+s+".call("+n.callParams+"); }"),this.source.push("else { "+s+" = "+a+"; "+s+" = typeof "+s+" === functionType ? "+s+".apply(depth0) : "+s+"; }")
},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),t=this.popStack());var a=this.hash;t&&a.contexts.push("'"+e+"': "+t),n&&a.types.push("'"+e+"': "+n),a.values.push("'"+e+"': ("+i+")")},compiler:u,compileChildren:function(e,t){for(var n,i,a=e.children,s=0,r=a.length;r>s;s++){n=a[s],i=new this.compiler;
var l=this.matchExistingProgram(n);null==l?(this.context.programs.push(""),l=this.context.programs.length,n.index=l,n.name="program"+l,this.context.programs[l]=i.compile(n,t,this.context),this.context.environments[l]=n):(n.index=l,n.name="program"+l)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],i=n.depths.list,a=[n.index,n.name,"data"],s=0,r=i.length;r>s;s++)t=i[s],1===t?a.push("depth0"):a.push("depth"+(t-1));
return(0===i.length?"self.program(":"self.programWithDepth(")+a.join(", ")+")"},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new p(e))},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.source.push(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,n="",i=this.isInline();if(i){var a=this.popStack(!0);
if(a instanceof p)t=a.value;else{var s=this.stackSlot?this.topStackName():this.incrStack();n="("+this.push(s)+" = "+a+"),",t=this.topStack()}}else t=this.topStack();var r=e.call(this,t);return i?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+n+r+")")):(/^stack/.test(t)||(t=this.nextStack()),this.source.push(t+" = ("+n+r+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()
},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;n>t;t++){var i=e[t];i instanceof p?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();return!e&&n instanceof p?n.value:(t||this.stackSlot--,n)},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];
return!e&&n instanceof p?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var i=[];this.setupParams(e,i,n);var a=this.nameLookup("helpers",t,"helper");return{params:i,name:a,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(i).join(", ")}},setupParams:function(e,t,n){var i,a,s,r=[],l=[],o=[];
r.push("hash:"+this.popStack()),a=this.popStack(),s=this.popStack(),(s||a)&&(s||(this.context.aliases.self="this",s="self.noop"),a||(this.context.aliases.self="this",a="self.noop"),r.push("inverse:"+a),r.push("fn:"+s));for(var c=0;e>c;c++)i=this.popStack(),t.push(i),this.options.stringParams&&(o.push(this.popStack()),l.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+l.join(",")+"]"),r.push("types:["+o.join(",")+"]"),r.push("hashContexts:hashContexts"),r.push("hashTypes:hashTypes")),this.options.data&&r.push("data:data"),r="{"+r.join(",")+"}",n?(this.register("options",r),t.push("options")):t.push(r),t.join(", ")
}};for(var m="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),f=u.RESERVED_WORDS={},v=0,g=m.length;g>v;v++)f[m[v]]=!0;u.isValidJavaScriptVariableName=function(e){return!u.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1
},e.precompile=function(t,n){if(null==t||"string"!=typeof t&&t.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);n=n||{},"data"in n||(n.data=!0);var i=e.parse(t),a=(new h).compile(i,n);return(new u).compile(a,n)},e.compile=function(n,i){function a(){var a=e.parse(n),s=(new h).compile(a,i),r=(new u).compile(s,i,t,!0);return e.template(r)}if(null==n||"string"!=typeof n&&n.constructor!==e.AST.ProgramNode)throw new e.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);
i=i||{},"data"in i||(i.data=!0);var s;return function(e,t){return s||(s=a()),s.call(this,e,t)}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,i){var a=this.programs[t];return i?a=e.VM.program(t,n,i):a||(a=this.programs[t]=e.VM.program(t,n)),a},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop,compilerInfo:null};return function(i,a){a=a||{};var s=t.call(n,e,i,a.helpers,a.partials,a.data),r=n.compilerInfo||[],l=r[0]||1,o=e.COMPILER_REVISION;
if(l!==o){if(o>l){var c=e.REVISION_CHANGES[o],d=e.REVISION_CHANGES[l];throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+c+") or downgrade your runtime to an older version ("+d+")."}throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+r[1]+")."}return s}},programWithDepth:function(e,t,n){var i=Array.prototype.slice.call(arguments,3),a=function(e,a){return a=a||{},t.apply(this,[e,a.data||n].concat(i))
};return a.program=e,a.depth=i.length,a},program:function(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i},noop:function(){return""},invokePartial:function(n,i,a,s,r,l){var o={helpers:s,partials:r,data:l};if(n===t)throw new e.Exception("The partial "+i+" could not be found");if(n instanceof Function)return n(a,o);if(e.compile)return r[i]=e.compile(n,{data:l!==t}),r[i](a,o);throw new e.Exception("The partial "+i+" could not be compiled when running in runtime-only mode")
}},e.template=e.VM.template})(Handlebars),define("handlebars",function(e){return function(){var t;return t||e.Handlebars}}(this)),define("text",["module"],function(e){var t,n,i=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,r="undefined"!=typeof location&&location.href,l=r&&location.protocol&&location.protocol.replace(/\:/,""),o=r&&location.hostname,c=r&&(location.port||void 0),d=[],h=e.config&&e.config()||{};
return t={version:"2.0.5",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=i[t];
try{e=new ActiveXObject(n)}catch(a){}if(e){i=[n];break}}return e},parseName:function(e){var t,n,i,a=!1,s=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==s&&(!r||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,i=n||t,s=i.indexOf("!"),-1!==s&&(a="strip"===i.substring(s+1),i=i.substring(0,s),n?n=i:t=i),{moduleName:t,ext:n,strip:a}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,a){var s,r,l,o=t.xdRegExp.exec(e);return o?(s=o[2],r=o[3],r=r.split(":"),l=r[1],r=r[0],!(s&&s!==n||r&&r.toLowerCase()!==i.toLowerCase()||(l||r)&&l!==a)):!0
},finishLoad:function(e,n,i,a){i=n?t.strip(i):i,h.isBuild&&(d[e]=i),a(i)},load:function(e,n,i,a){if(a.isBuild&&!a.inlineText)return i(),void 0;h.isBuild=a.isBuild;var s=t.parseName(e),d=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(d),p=h.useXhr||t.useXhr;!r||p(u,l,o,c)?t.get(u,function(n){t.finishLoad(e,s.strip,n,i)},function(e){i.error&&i.error(e)}):n([d],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,i)})},write:function(e,n,i){if(d.hasOwnProperty(n)){var a=t.jsEscape(d[n]);i.asModule(e+"!"+n,"define(function () { return '"+a+"';});\n")
}},writeFile:function(e,n,i,a,s){var r=t.parseName(n),l=r.ext?"."+r.ext:"",o=r.moduleName+l,c=i.toUrl(r.moduleName+l)+".js";t.load(o,i,function(){var n=function(e){return a(c,e)};n.asModule=function(e,t){return a.asModule(e,c,t)},t.write(e,o,n,s)},s)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(n=require.nodeRequire("fs"),t.get=function(e,t){var i=n.readFileSync(e,"utf8");0===i.indexOf("﻿")&&(i=i.substring(1)),t(i)}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,i,a){var s,r=t.createXhr();
if(r.open("GET",e,!0),a)for(s in a)a.hasOwnProperty(s)&&r.setRequestHeader(s.toLowerCase(),a[s]);h.onXhr&&h.onXhr(r,e),r.onreadystatechange=function(){var t,a;4===r.readyState&&(t=r.status,t>399&&600>t?(a=Error(e+" HTTP status: "+t),a.xhr=r,i(a)):n(r.responseText))},r.send(null)}:("rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(t.get=function(e,t){var n,i,a="utf-8",s=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),l=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),a)),o="";
try{for(n=new java.lang.StringBuffer,i=l.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),n.append(i);null!==(i=l.readLine());)n.append(r),n.append(i);o=""+n+""}finally{l.close()}t(o)}),t}),define("hb",["handlebars","text"],function(e,t){var n={},i=function(i,a,s,r){var l="";if(r.isBuild&&"undefined"!=typeof process&&process.versions&&process.versions.node){var o=require.nodeRequire("fs");l=o.readFileSync(r.templatePathPrefix+i,"utf8");var c=e.precompile(l);n[i]=c,s(c)}else t.get(a.toUrl(i),function(t){var n=e.compile(t);
s(n)})},a=function(e,t,i){if(t in n){var a=n[t];i('define("'+e+"!"+t+'", ["handlebars"], function (Handlebars){'+"return Handlebars.template("+a+");"+"});\n")}};return{load:i,write:a}}),define("hb!templates/helpers/LockableTextInput.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"selected"}function r(e,t){var i,a="";return a+='\n			<textarea class="input-dark span12 lockable-field" name="',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===p?i.apply(e):i),a+=m(i)+'"',i=n["if"].call(e,e.rows,{hash:{},inverse:f.noop,fn:f.program(4,l,t),data:t}),(i||0===i)&&(a+=i),a+=">",(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===p?i.apply(e):i),a+=m(i)+"</textarea>\n		"
}function l(e,t){var i,a="";return a+=' rows="',(i=n.rows)?i=i.call(e,{hash:{},data:t}):(i=e.rows,i=typeof i===p?i.apply(e):i),a+=m(i)+'"'}function o(e,t){var i,a="";return a+='\n			<input class="input-dark span12 lockable-field" type="',(i=n.type)?i=i.call(e,{hash:{},data:t}):(i=e.type,i=typeof i===p?i.apply(e):i),a+=m(i)+'" name="',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===p?i.apply(e):i),a+=m(i)+'" value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===p?i.apply(e):i),a+=m(i)+'">\n		'
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d,h,u="",p="function",m=this.escapeExpression,f=this,v=n.helperMissing;return u+='<div class="control-group">\n	<label>',h={hash:{},data:a},u+=m((c=n.t,c?c.call(t,t.label,h):v.call(t,"t",t.label,h)))+'</label>\n	<a href="#" data-field="',(d=n.name)?d=d.call(t,{hash:{},data:a}):(d=t.name,d=typeof d===p?d.apply(t):d),u+=m(d)+'" class="badge lock-btn ',d=n["if"].call(t,t.locked,{hash:{},inverse:f.noop,fn:f.program(1,s,a),data:a}),(d||0===d)&&(u+=d),u+='"><i class="glyphicon lock"></i></a>\n\n	<div class="lockable-input">\n		',h={hash:{},inverse:f.program(6,o,a),fn:f.program(3,r,a),data:a},c=n.if_eq,d=c?c.call(t,t.type,"textarea",h):v.call(t,"if_eq",t.type,"textarea",h),(d||0===d)&&(u+=d),u+="\n	</div>\n</div>\n"
})}),define("hb!templates/helpers/LockableTagInput.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"selected"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l,o,c="",d=n.helperMissing,h=this.escapeExpression,u="function",p=this;return c+='<div class="control-group">\n	<label>',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,t.label,o):d.call(t,"t",t.label,o)))+'</label>\n	<a href="#" data-field="',(l=n.name)?l=l.call(t,{hash:{},data:a}):(l=t.name,l=typeof l===u?l.apply(t):l),c+=h(l)+'" class="badge lock-btn ',l=n["if"].call(t,t.locked,{hash:{},inverse:p.noop,fn:p.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='"><i class="glyphicon lock"></i></a>\n\n	<div class="lockable-input">\n		<input type="hidden" class="span12 lockable-field input-select2" value="',o={hash:{},data:a},c+=h((r=n.tags,r?r.call(t,t.value,o):d.call(t,"tags",t.value,o)))+'" data-name="',(l=n.name)?l=l.call(t,{hash:{},data:a}):(l=t.name,l=typeof l===u?l.apply(t):l),c+=h(l)+'">\n	</div>\n</div>\n'
})}),define("hb!templates/helpers/PreferenceEdit.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return" advanced-pref hide"}function r(e,t){var i,a,s,r="";return r+='\n		<label class="checkbox" for="input_',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===x?i.apply(e):i),r+=w(i),(i=n.idSuffix)?i=i.call(e,{hash:{},data:t}):(i=e.idSuffix,i=typeof i===x?i.apply(e):i),r+=w(i)+'">\n			<input id="input_',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===x?i.apply(e):i),r+=w(i),(i=n.idSuffix)?i=i.call(e,{hash:{},data:t}):(i=e.idSuffix,i=typeof i===x?i.apply(e):i),r+=w(i)+'" type="checkbox" value="1" class="input-dark" name="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===x?i.apply(e):i),r+=w(i)+'"',i=n["if"].call(e,e.value,{hash:{},inverse:k.noop,fn:k.program(4,l,t),data:t}),(i||0===i)&&(r+=i),r+="> &nbsp;",s={hash:{},data:t},r+=w((i=n.t,i?i.call(e,e.label,s):b.call(e,"t",e.label,s)))+"\n		</label>\n\n		",a=n["if"].call(e,e.summary,{hash:{},inverse:k.noop,fn:k.program(6,o,t),data:t}),(a||0===a)&&(r+=a),r+="\n	"
}function l(){return' checked="checked"'}function o(e,t){var i,a,s="";return s+='\n			<p class="help-block">',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,e.summary,a):b.call(e,"t",e.summary,a)))+"</p>\n		"}function c(e,t){var i,a,s,r="";return r+='\n		<label class="control-label" for="input_',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===x?i.apply(e):i),r+=w(i),(i=n.idSuffix)?i=i.call(e,{hash:{},data:t}):(i=e.idSuffix,i=typeof i===x?i.apply(e):i),r+=w(i)+'">',s={hash:{},data:t},r+=w((i=n.t,i?i.call(e,e.label,s):b.call(e,"t",e.label,s)))+'</label>\n\n		<div class="controls">\n			',a=n["if"].call(e,e.enumValues,{hash:{},inverse:k.program(13,p,t),fn:k.program(9,d,t),data:t}),(a||0===a)&&(r+=a),r+="\n\n			",a=n["if"].call(e,e.summary,{hash:{},inverse:k.noop,fn:k.program(15,m,t),data:t}),(a||0===a)&&(r+=a),r+="\n		</div>\n	"
}function d(e,t){var i,a="";return a+='\n				<select id="input_',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===x?i.apply(e):i),a+=w(i),(i=n.idSuffix)?i=i.call(e,{hash:{},data:t}):(i=e.idSuffix,i=typeof i===x?i.apply(e):i),a+=w(i)+'" class="input-dark span4" name="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===x?i.apply(e):i),a+=w(i)+'">\n					',i=n.each.call(e,e.enumValues,{hash:{},inverse:k.noop,fn:k.programWithDepth(10,h,t,e),data:t}),(i||0===i)&&(a+=i),a+="\n				</select>\n			"
}function h(e,t,i){var a,s,r,l="";return l+='\n						<option value="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===x?a.apply(e):a),l+=w(a)+'"',r={hash:{},inverse:k.noop,fn:k.program(11,u,t),data:t},a=n.if_eq,s=a?a.call(e,e.value,i.value,r):b.call(e,"if_eq",e.value,i.value,r),(s||0===s)&&(l+=s),l+=">",r={hash:{},data:t},l+=w((a=n.t,a?a.call(e,e.label,r):b.call(e,"t",e.label,r)))+"</option>\n					"}function u(){return' selected="selected"'}function p(e,t){var i,a="";return a+='\n				<input id="input_',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===x?i.apply(e):i),a+=w(i),(i=n.idSuffix)?i=i.call(e,{hash:{},data:t}):(i=e.idSuffix,i=typeof i===x?i.apply(e):i),a+=w(i)+'" type="text" class="input-dark span4" name="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===x?i.apply(e):i),a+=w(i)+'" value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===x?i.apply(e):i),a+=w(i)+'">\n			'
}function m(e,t){var i,a,s="";return s+='\n				<p class="help-block">',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,e.summary,a):b.call(e,"t",e.summary,a)))+"</p>\n			"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var f,v,g,y="",b=n.helperMissing,w=this.escapeExpression,x="function",k=this;return y+='<div class="control-group',f=n["if"].call(t,t.advanced,{hash:{},inverse:k.noop,fn:k.program(1,s,a),data:a}),(f||0===f)&&(y+=f),y+='">\n	',g={hash:{},inverse:k.program(8,c,a),fn:k.program(3,r,a),data:a},f=n.if_eq,v=f?f.call(t,t.type,"bool",g):b.call(t,"if_eq",t.type,"bool",g),(v||0===v)&&(y+=v),y+="\n</div>\n"
})}),define("hb!templates/helpers/SectionPathInput.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r="",l="function",o=this.escapeExpression;return r+='<div class="path-container">\n	<input type="text" name="path" class="span12" value="',(s=n.value)?s=s.call(t,{hash:{},data:a}):(s=t.value,s=typeof s===l?s.apply(t):s),r+=o(s)+'">\n	<div class="path-actions">\n		<a href="#" class="remove-path-btn btn btn-danger btn-icon" tabindex="0"><i class="glyphicon circle-remove"></i></a>\n	</div>\n</div>\n'
})}),define("hb!templates/helpers/AdaptiveChannelListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e){var t;return S((t=e.ratingKey,typeof t===k?t.apply(e):t))}function r(e){var t;return S((t=e.key,typeof t===k?t.apply(e):t))}function l(){return"/details"}function o(e,t){var i,a,s="";return s+="key=",a={hash:{},data:t},s+=S((i=n.encodeUrl,i?i.call(e,e.channelKey,a):C.call(e,"encodeUrl",e.channelKey,a)))}function c(e,t){var i,a="";return a+="identifier=",(i=n.channelID)?i=i.call(e,{hash:{},data:t}):(i=e.channelID,i=typeof i===k?i.apply(e):i),a+=S(i)
}function d(e,t){var i,a,s,r="";return r+='\n\n			<div class="poster-container">\n				<img class="media-poster poster" data-original="',s={hash:{},data:t},r+=S((i=n.transcodeImage,i?i.call(e,e.serverObj,e.thumb,100,150,s):C.call(e,"transcodeImage",e.serverObj,e.thumb,100,150,s)))+'" src="img/posters/poster_square.png" width="100">\n			</div>\n\n			<div class="media-details">\n				',a=n["if"].call(e,e.duration,{hash:{},inverse:A.noop,fn:A.program(12,h,t),data:t}),(a||0===a)&&(r+=a),r+="\n\n				<h3>",s={hash:{},data:t},r+=S((i=n.truncate,i?i.call(e,e.title,60,s):C.call(e,"truncate",e.title,60,s)))+"</h3>\n\n				",a=n["if"].call(e,e.summary,{hash:{},inverse:A.noop,fn:A.program(14,u,t),data:t}),(a||0===a)&&(r+=a),r+="\n			</div>\n\n		"
}function h(e,t){var i,a,s="";return s+='\n					<div class="media-details-right">',a={hash:{},data:t},s+=S((i=n.formatMinutes,i?i.call(e,e.duration,a):C.call(e,"formatMinutes",e.duration,a)))+"</div>\n				"}function u(e,t){var i,a,s="";return s+='\n					<div class="summary">',a={hash:{},data:t},s+=S((i=n.truncate,i?i.call(e,e.summary,180,a):C.call(e,"truncate",e.summary,180,a)))+"</div>\n				"}function p(e,t){var i,a,s;return s={hash:{},inverse:A.program(19,f,t),fn:A.program(17,m,t),data:t},i=n.if_eq,a=i?i.call(e,e.listType,"tile-list media-tile-list",s):C.call(e,"if_eq",e.listType,"tile-list media-tile-list",s),a||0===a?a:""
}function m(e,t){var i,a,s="";return s+='\n\n			<div class="poster-container">\n				<img class="poster" data-original="',a={hash:{},data:t},s+=S((i=n.transcodeImage,i?i.call(e,e.serverObj,e.thumb,128,128,a):C.call(e,"transcodeImage",e.serverObj,e.thumb,128,128,a)))+'" src="img/posters/poster_square.png">\n			</div>\n\n			<div class="poster-title">'+S((i=e.title,typeof i===k?i.apply(e):i))+"</div>\n\n		"}function f(e,t){var i,a,s;return s={hash:{},inverse:A.noop,fn:A.program(20,v,t),data:t},i=n.if_eq,a=i?i.call(e,e.listType,"list media-list media-compact-list",s):C.call(e,"if_eq",e.listType,"list media-list media-compact-list",s),a||0===a?a:""
}function v(e,t){var i,a="";return a+="\n\n			",i=n["if"].call(e,e.duration,{hash:{},inverse:A.noop,fn:A.program(21,g,t),data:t}),(i||0===i)&&(a+=i),a+='\n\n			<span class="media-title">'+S((i=e.title,typeof i===k?i.apply(e):i))+"</span>\n\n		"}function g(e,t){var i,a,s="";return s+='\n				<div class="sorted-by">',a={hash:{},data:t},s+=S((i=n.formatMinutes,i?i.call(e,e.duration,a):C.call(e,"formatMinutes",e.duration,a)))+"</div>\n			"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var y,b,w,x="",k="function",S=this.escapeExpression,C=n.helperMissing,A=this;
return x+='<li class="channel ',(y=n.itemType)?y=y.call(t,{hash:{},data:a}):(y=t.itemType,y=typeof y===k?y.apply(t):y),x+=S(y)+' hide-hover-overlay">\n	<a data-id="',y=n["if"].call(t,t.ratingKey,{hash:{},inverse:A.program(3,r,a),fn:A.program(1,s,a),data:a}),(y||0===y)&&(x+=y),x+='" href="#!/servers/',(y=n.serverID)?y=y.call(t,{hash:{},data:a}):(y=t.serverID,y=typeof y===k?y.apply(t):y),x+=S(y)+"/channels",w={hash:{},inverse:A.noop,fn:A.program(5,l,a),data:a},y=n.if_eq,b=y?y.call(t,t.itemType,"video",w):C.call(t,"if_eq",t.itemType,"video",w),(b||0===b)&&(x+=b),x+="?",b=n["if"].call(t,t.channelKey,{hash:{},inverse:A.program(9,c,a),fn:A.program(7,o,a),data:a}),(b||0===b)&&(x+=b),x+="&path=",w={hash:{},data:a},x+=S((y=n.encodeUrl,y?y.call(t,t.key,w):C.call(t,"encodeUrl",t.key,w)))+'" tabindex="0">\n\n		',w={hash:{},inverse:A.program(16,p,a),fn:A.program(11,d,a),data:a},y=n.if_eq,b=y?y.call(t,t.listType,"list media-list",w):C.call(t,"if_eq",t.listType,"list media-list",w),(b||0===b)&&(x+=b),x+="\n\n	</a>\n</li>\n"
})}),define("hb!templates/helpers/BreadcrumbMediaItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,c="";return c+='\n	<li class="divider"></li>\n\n	<li id="channel-breadcrumb" class="breadcrumb-item">\n		<a class="breadcrumb-placeholder breadcrumb-btn" href="#">\n			<i class="glyphicon more"></i>\n		</a>\n\n		<div class="breadcrumb-content">\n			<a class="breadcrumb-btn" href="#!/servers/'+_((i=e.server,i=null==i||i===!1?i:i.machineIdentifier,typeof i===T?i.apply(e):i))+"/channels?",a=n["if"].call(e,(i=e.channel,null==i||i===!1?i:i.key),{hash:{},inverse:M.program(4,l,t),fn:M.program(2,r,t),data:t}),(a||0===a)&&(c+=a),c+='" tabindex="0">\n				',s={hash:{},data:t},c+=_((i=n.truncate,i?i.call(e,(i=e.channel,null==i||i===!1?i:i.title),20,s):P.call(e,"truncate",(i=e.channel,null==i||i===!1?i:i.title),20,s)))+" ",a=n["if"].call(e,e.source,{hash:{},inverse:M.noop,fn:M.program(6,o,t),data:t}),(a||0===a)&&(c+=a),c+="\n			</a>\n		</div>\n	</li>\n"
}function r(e,t){var i,a,s="";return s+="key=",a={hash:{},data:t},s+=_((i=n.encodeUrl,i?i.call(e,(i=e.channel,null==i||i===!1?i:i.key),a):P.call(e,"encodeUrl",(i=e.channel,null==i||i===!1?i:i.key),a)))}function l(e){var t,n="";return n+="identifier="+_((t=e.channel,t=null==t||t===!1?t:t.identifier,typeof t===T?t.apply(e):t))}function o(e,t){var i,a,s="";return s+='<span class="source-title">(',a={hash:{},data:t},s+=_((i=n.truncate,i?i.call(e,e.source,10,a):P.call(e,"truncate",e.source,10,a)))+")</span>"
}function c(e,t){var i;return i=n["if"].call(e,e.channelMedia,{hash:{},inverse:M.program(18,v,t),fn:M.program(9,d,t),data:t}),i||0===i?i:""}function d(e,t){var i,a,s,r="";return r+='\n	<li class="divider"></li>\n\n	<li class="channel-media-breadcrumb breadcrumb-item">\n		<a class="breadcrumb-placeholder breadcrumb-btn" href="#">\n			<i class="glyphicon more"></i>\n		</a>\n\n		<div class="breadcrumb-content">\n			',s={hash:{},inverse:M.program(16,f,t),fn:M.program(10,h,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.channelMedia,null==i||i===!1?i:i.type),"clip",s):P.call(e,"if_eq",(i=e.channelMedia,null==i||i===!1?i:i.type),"clip",s),(a||0===a)&&(r+=a),r+="\n				",s={hash:{},data:t},r+=_((i=n.truncate,i?i.call(e,(i=e.channelMedia,null==i||i===!1?i:i.title),20,s):P.call(e,"truncate",(i=e.channelMedia,null==i||i===!1?i:i.title),20,s)))+"\n			</a>\n		</div>\n	</li>\n"
}function h(e,t){var i,a,s,r="";return r+='\n				<a class="breadcrumb-btn" href="#!/servers/'+_((i=e.server,i=null==i||i===!1?i:i.machineIdentifier,typeof i===T?i.apply(e):i))+"/channels/details?",a=n["if"].call(e,e.channelKey,{hash:{},inverse:M.program(13,p,t),fn:M.program(11,u,t),data:t}),(a||0===a)&&(r+=a),r+="path=",s={hash:{},data:t},r+=_((i=n.encodeUrl,i?i.call(e,(i=e.channelMedia,null==i||i===!1?i:i.key),s):P.call(e,"encodeUrl",(i=e.channelMedia,null==i||i===!1?i:i.key),s)))+'" tabindex="0">\n			'
}function u(e,t){var i,a,s="";return s+="key=",a={hash:{},data:t},s+=_((i=n.encodeUrl,i?i.call(e,e.channelKey,a):P.call(e,"encodeUrl",e.channelKey,a)))+"&"}function p(e,t){var i;return i=n["if"].call(e,e.channelID,{hash:{},inverse:M.noop,fn:M.program(14,m,t),data:t}),i||0===i?i:""}function m(e,t){var i,a="";return a+="identifier=",(i=n.channelID)?i=i.call(e,{hash:{},data:t}):(i=e.channelID,i=typeof i===T?i.apply(e):i),a+=_(i)+"&"}function f(e,t){var i,a,s,r="";return r+='\n				<a class="breadcrumb-btn" href="#!/servers/'+_((i=e.server,i=null==i||i===!1?i:i.machineIdentifier,typeof i===T?i.apply(e):i))+"/channels?",a=n["if"].call(e,e.channelKey,{hash:{},inverse:M.program(13,p,t),fn:M.program(11,u,t),data:t}),(a||0===a)&&(r+=a),r+="path=",s={hash:{},data:t},r+=_((i=n.encodeUrl,i?i.call(e,(i=e.channelMedia,null==i||i===!1?i:i.key),s):P.call(e,"encodeUrl",(i=e.channelMedia,null==i||i===!1?i:i.key),s)))+'" tabindex="0">\n			'
}function v(e,t){var i,a,s,r="";return r+="\n\n	",a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.grandparentRatingKey),{hash:{},inverse:M.noop,fn:M.program(19,g,t),data:t}),(a||0===a)&&(r+=a),r+="\n\n	",a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.parentRatingKey),{hash:{},inverse:M.noop,fn:M.program(21,y,t),data:t}),(a||0===a)&&(r+=a),r+='\n\n	<li class="divider"></li>\n\n	<li class="media-breadcrumb breadcrumb-item">\n		<a class="breadcrumb-placeholder breadcrumb-btn" href="#">\n			<i class="glyphicon more"></i>\n		</a>\n\n		<div class="breadcrumb-content">\n			<a class="breadcrumb-btn" href="#!/servers/'+_((i=e.server,i=null==i||i===!1?i:i.machineIdentifier,typeof i===T?i.apply(e):i))+"/sections/",s={hash:{},data:t},r+=_((i=n.encodeUrl,i?i.call(e,(i=e.section,null==i||i===!1?i:i.key),s):P.call(e,"encodeUrl",(i=e.section,null==i||i===!1?i:i.key),s)))+"/details/"+_((i=e.media,i=null==i||i===!1?i:i.ratingKey,typeof i===T?i.apply(e):i))+'" tabindex="0">\n				',s={hash:{},inverse:M.program(28,k,t),fn:M.program(26,x,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"season",s):P.call(e,"if_eq",(i=e.media,null==i||i===!1?i:i.type),"season",s),(a||0===a)&&(r+=a),r+="\n			</a>\n		</div>\n	</li>\n"
}function g(e,t){var i,a,s="";return s+='\n		<li class="divider"></li>\n\n		<li class="media-breadcrumb breadcrumb-item">\n			<a class="breadcrumb-placeholder breadcrumb-btn" href="#">\n				<i class="glyphicon more"></i>\n			</a>\n\n			<div class="breadcrumb-content">\n				<a class="breadcrumb-btn" href="#!/servers/'+_((i=e.server,i=null==i||i===!1?i:i.machineIdentifier,typeof i===T?i.apply(e):i))+"/sections/",a={hash:{},data:t},s+=_((i=n.encodeUrl,i?i.call(e,(i=e.section,null==i||i===!1?i:i.key),a):P.call(e,"encodeUrl",(i=e.section,null==i||i===!1?i:i.key),a)))+"/details/"+_((i=e.media,i=null==i||i===!1?i:i.grandparentRatingKey,typeof i===T?i.apply(e):i))+'" tabindex="0">\n					',a={hash:{},data:t},s+=_((i=n.truncate,i?i.call(e,(i=e.media,null==i||i===!1?i:i.grandparentTitle),20,a):P.call(e,"truncate",(i=e.media,null==i||i===!1?i:i.grandparentTitle),20,a)))+"\n				</a>\n			</div>\n		</li>\n	"
}function y(e,t){var i,a,s,r="";return r+='\n		<li class="divider"></li>\n\n		<li class="media-breadcrumb breadcrumb-item">\n			<a class="breadcrumb-placeholder breadcrumb-btn" href="#">\n				<i class="glyphicon more"></i>\n			</a>\n\n			<div class="breadcrumb-content">\n				<a class="breadcrumb-btn" href="#!/servers/'+_((i=e.server,i=null==i||i===!1?i:i.machineIdentifier,typeof i===T?i.apply(e):i))+"/sections/",s={hash:{},data:t},r+=_((i=n.encodeUrl,i?i.call(e,(i=e.section,null==i||i===!1?i:i.key),s):P.call(e,"encodeUrl",(i=e.section,null==i||i===!1?i:i.key),s)))+"/details/"+_((i=e.media,i=null==i||i===!1?i:i.parentRatingKey,typeof i===T?i.apply(e):i))+'" tabindex="0">\n					',a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.parentTitle),{hash:{},inverse:M.program(24,w,t),fn:M.program(22,b,t),data:t}),(a||0===a)&&(r+=a),r+="\n				</a>\n			</div>\n		</li>\n	"
}function b(e,t){var i,a,s="";return s+="\n						",a={hash:{},data:t},s+=_((i=n.truncate,i?i.call(e,(i=e.media,null==i||i===!1?i:i.parentTitle),20,a):P.call(e,"truncate",(i=e.media,null==i||i===!1?i:i.parentTitle),20,a)))+"\n					"}function w(e,t){var i,a,s="";return s+="\n						",a={hash:{},data:t},s+=_((i=n.t,i?i.call(e,"Season",a):P.call(e,"t","Season",a)))+" "+_((i=e.media,i=null==i||i===!1?i:i.parentIndex,typeof i===T?i.apply(e):i))+"\n					"}function x(e,t){var i,a,s="";return s+="\n					",a={hash:{},data:t},s+=_((i=n.t,i?i.call(e,"Season",a):P.call(e,"t","Season",a)))+" "+_((i=e.media,i=null==i||i===!1?i:i.index,typeof i===T?i.apply(e):i))+"\n				"
}function k(e,t){var i,a,s;return s={hash:{},inverse:M.program(31,C,t),fn:M.program(29,S,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"episode",s):P.call(e,"if_eq",(i=e.media,null==i||i===!1?i:i.type),"episode",s),a||0===a?a:""}function S(e,t){var i,a,s="";return s+="\n					",a={hash:{},data:t},s+=_((i=n.t,i?i.call(e,"Episode",a):P.call(e,"t","Episode",a)))+" "+_((i=e.media,i=null==i||i===!1?i:i.index,typeof i===T?i.apply(e):i))+"\n				"}function C(e,t){var i,a,s="";return s+="\n					",a={hash:{},data:t},s+=_((i=n.truncate,i?i.call(e,(i=e.media,null==i||i===!1?i:i.title),20,a):P.call(e,"truncate",(i=e.media,null==i||i===!1?i:i.title),20,a)))+"\n				"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var A,I="",P=n.helperMissing,_=this.escapeExpression,T="function",M=this;return A=n["if"].call(t,t.channel,{hash:{},inverse:M.program(8,c,a),fn:M.program(1,s,a),data:a}),(A||0===A)&&(I+=A),I+="\n"})}),define("hb!templates/helpers/EULA.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<h3>End User License Agreement—Plex Media Server</h3>\n\n<p>BY ACCEPTING THE TERMS OF THIS END USER LICENSE AGREEMENT BY CLICKING THE “AGREE” BUTTON, YOU  ("YOU") ARE UNCONDITIONALLY CONSENTING TO BE BOUND BY AND ARE BECOMING A PARTY TO THIS END USER LICENSE AGREEMENT ("AGREEMENT"). YOUR USE OF PLEX MEDIA SERVER (THE “SOFTWARE”) ALSO SHALL CONSTITUTE ASSENT TO THE TERMS OF THIS AGREEMENT. IF YOU DO NOT UNCONDITIONALLY AGREE TO ALL OF THE TERMS OF THIS AGREEMENT, SELECT THE "DISAGREE" BUTTON AND YOU WILL NOT HAVE ANY RIGHT TO USE THE SOFTWARE. Acceptance by and the formation of this Agreement with Plex, Inc. ("Plex") is expressly conditioned upon Your assent to all of the terms and conditions of this Agreement, to the exclusion of all other terms; if these terms are considered an offer, acceptance is expressly limited to these terms.</p>\n\n<p>The Software includes certain executable modules that Plex has licensed from third party providers (“Third Party Components”) that may be subject to different end user license terms as specified in the license agreement(s) provided with such Third Party Components.</p>\n\n<p>1. License. Subject to your full compliance with all of the terms and conditions of this Agreement, Plex grants You a personal, nontransferable, nonsublicensable, nonexclusive license to use the software that accompanies this Agreement (the "Application"), the accompanying documentation, and any additional software that may be made available by Plex from time to time for use with the Application (collectively "Software") for Your personal use only, as supplied to You by Plex.  Except as may be expressly permitted in a separate written agreement executed by You and an authorized representative of Plex, this Agreement only allows You to: (i) run the Software as received at the time of delivery; (ii) install the Software on a single machine or only for the number of users or core(s) as may be specified in a separate order form and paid for by You or Your company, employer, or principal; and (iii) use the Software in accordance with the accompanying documentation solely for legal purposes, but not for nuclear or aviation purposes, for controlling any apparatus, for any hazardous activity, or for treating the human body.</p>\n\n<p>2. Restrictions.</p>\n\n<p>A.	You shall not, nor permit anyone else to, directly or indirectly: (i) copy, modify, or distribute the Software; (ii) reverse engineer, disassemble, decompile, or otherwise attempt to discover the source code or structure, sequence, and/or organization of all or any part of the Software (except that this restriction shall not apply to the limited extent restrictions on reverse engineering are prohibited by applicable local law); (iii) rent, lease, or use the Software for timesharing or service bureau purposes; (iv) develop any improvement, modification, or derivative works of the Software, or include any portion thereof in any other product, software, work, equipment, or item (except that You may customize and/or modify the Software only as set forth in the documentation or as authorized in any license agreement of Plex’s third party licensors and applicable to Third Party Components); or (v) allow the transfer, transmission, export, or re-export of the Software or any portion thereof or any technical data associated with any Software.  For additional information about restrictions, see Section 8.</p>\n\n<p>B.	You shall not incorporate the Software or any part thereof into any other product(s) or use the Software in any manner that would cause the Software to become subject to any “open source license” that would impose obligations on Plex’s use of the Software or impair any rights of Plex or third parties thereto.  You shall maintain and shall not remove nor obscure any proprietary notices on the Software, and shall reproduce such notices exactly on all permitted copies of the Software. As between the parties and except as otherwise provided in any license agreement for Third Party Components, Plex shall own all title, ownership rights, and intellectual property rights in and to the Software, and any copies or derivative works thereof.  You understand that Plex or its licensors may modify or discontinue offering the Software at any time. This Agreement does not give You any rights not expressly and unambiguously granted herein.</p>\n\n<p>C.	You shall not make any use of data adapters or similar technologies used by or with the Software that are designed to receive and use data from Plex, its third party data providers, and its and their affiliates and third parties other than to receive and use such data in accordance with Your then-effective agreements with Plex, such third party data providers, and its and their affiliates and third parties including without limitation any data passing through the Software or otherwise effectively made available by any Software through an API, a download, a database, or the like. Data is provided by Plex or other third party data providers and may be delayed or unavailable as specified by Plex or such third party data providers.  Plex does not verify any data and disclaims any obligation to do so.  Plex, its third party data providers, and each of their affiliates and business partners: (i) expressly disclaim the availability, accuracy, adequacy, or completeness of any data or third party data provider, and (ii) shall not be liable for any errors, omissions, or other defects in, unavailability of, delays or interruptions in such data or third party data provider.</p>\n\n<p>3. Intellectual Property; Content. As a condition to Your use of the Software, You represent and  warrant that You will not use the Software: (i) to infringe the intellectual property or proprietary rights, or rights of publicity or privacy, of any third party; (ii) to violate any applicable law, statute, ordinance, or regulation; (iii) to disseminate, transfer or store information or materials in any form or format ("Content") that are harmful, threatening, abusive, harassing, tortuous, defamatory, vulgar, obscene, libelous, or otherwise objectionable, or that otherwise violate any law or right of any third party; or (iv) to disseminate any software viruses or any other computer code, files, programs, or the like that may without limitation interrupt, destroy, or limit the functionality of any computer software or hardware or telecommunications equipment, violate the security of any computer network, or the like.  You, not Plex, remain solely responsible for all Content that You import, publish, or otherwise disseminate using, or in connection with, the Software.  You acknowledge that all Content that You access through use of the Software is accessed at Your own risk, and You will be solely responsible for any damage or liability to any party resulting from such access.</p>\n\n<p>4. Support.  This Agreement does not entitle You to any support, upgrades, patches, enhancements, or fixes (collectively, "Support") for the Software. Any such Support for the Software that may be made available by Plex, in its sole discretion, shall be offered solely subject to a separate written agreement.</p>\n\n<p>5. Warranty Disclaimer.</p>\n\n<p>A.	THE SOFTWARE IS PROVIDED "AS IS".  PLEX MAKES NO WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, AND PLEX EXPRESSLY DISCLAIMS ALL WARRANTIES, INCLUDING WITHOUT LIMITATION, ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  FURTHER, PLEX DOES NOT WARRANT AGAINST ERRORS, OMISSIONS, RESULTS OF USE, OR THAT THE SOFTWARE IS BUG FREE OR ERROR FREE OR THAT ITS USE WILL BE UNINTERRUPTED.  THIS DISCLAIMER OF WARRANTY CONSTITUTES AN ESSENTIAL PART OF THIS AGREEMENT.  ALL THE FOREGOING DISCLAIMERS ALSO APPLY IN FULL WITH RESPECT TO PLEX\'S LICENSORS, SUPPLIERS, DISTRIBUTORS, CONTRACTORS, AGENTS, AND THIRD PARTY CONTRIBUTORS.  SOME STATES DO NOT ALLOW THE EXCLUSION OF IMPLIED WARRANTIES, SO THE ABOVE LIMITATIONS MAY NOT APPLY TO YOU.</p>\n\n<p>B.	“Malware” means any known, discovered, envisioned, or invented, or any yet to be known, discovered, envisioned, or invented: (i) virus, Trojan horse, or any other harmful, harassing, or malicious software; or (ii) method, use, or means by which any software, firmware, equipment, device, communications medium, person, entity, or the like directly or indirectly engages in or is used for: (a) any unauthorized access; (b) any unauthorized communication; or (c) any cracks, hacks, exploits, or other activity, method, use, or means, that may cause harassment, harm, data loss, data theft, loss of communication, loss of privacy, or the like.  You acknowledge that the Internet, dedicated lines, other forms of communication, or other means that You use to connect to the Software may not be secure and may be vulnerable to attack by third parties, and that it is possible to receive  Malware by using the Internet, dedicated lines, other forms of communication, or other means.  In order to protect the Software, You shall regularly obtain, use, and update appropriate third party software or other means to protect Yourself from Malware and to detect and remove Malware that may be downloaded using the Internet, dedicated lines, other forms of communication, or other means.  Plex does not warrant that the Software will be free of Malware that is introduced by third parties, the Internet, dedicated lines, other forms of communication, or other means.</p>\n\n<p>C.	Plex and its licensors, suppliers, distributors, contractors, agents, and third party contributors do not warrant: (i) results of the use of any of the Software; (ii) that the Software is bug free or error free; (iii) or that use of the Software will be uninterrupted. You agree that Plex and its Affiliates are not responsible for any fault, inaccuracy, error, omission, delay or any other failure of Your equipment and/or services caused by Plex’s hardware, software, cabling, network services, or the like, or arising from Plex’s use of such equipment and/or services.</p>\n\n<p>6. Limitation of Remedies and Damages. UNDER NO CIRCUMSTANCES AND UNDER NO LEGAL THEORY, INCLUDING, BUT NOT LIMITED TO, TORT, CONTRACT, NEGLIGENCE, STRICT LIABILITY, OR OTHERWISE, SHALL PLEX BE LIABLE TO YOU OR ANY OTHER PERSON OR ENTITY: (I) FOR ANY INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES OF ANY CHARACTER INCLUDING, WITHOUT LIMITATION, DAMAGES FOR LOST PROFITS, LOSS OF GOODWILL, WORK STOPPAGE, ACCURACY OF RESULTS, COMPUTER FAILURE OR MALFUNCTION, LOSS OF DATA, OR OTHER DAMAGES RESULTING FROM YOUR USE OF THE SOFTWARE; OR (II) FOR ANY MATTER BEYOND ITS REASONABLE CONTROL. PLEX\'S AGGREGATE LIABILITY FOR DAMAGES OF ANY KIND WHATSOEVER ARISING OUT OF THIS AGREEMENT SHALL BE LIMITED TO THE LESSER OF THE TOTAL FEES PAID BY YOU TO PLEX (IF ANY) FOR THE PORTION OF THE SOFTWARE THAT GAVE RISE TO SUCH DAMAGES OR $100 (U.S.), EXCEPT WHERE NOT PERMITTED BY APPLICABLE LAW, IN WHICH CASE PLEX\'S LIABILITY SHALL BE LIMITED TO THE MINIMUM AMOUNT PERMITTED BY SUCH APPLICABLE LAW.  ALL THE FOREGOING LIMITATIONS SHALL APPLY EVEN IF EITHER PARTY HAS BEEN INFORMED OF THE POSSIBILITY OF SUCH DAMAGES.  ALL THE FOREGOING LIMITATIONS ALSO APPLY WITH RESPECT TO PLEX\'S SUPPLIERS, LICENSORS, DISTRIBUTORS, CONTRACTORS, AGENTS, AND THIRD PARTY CONTRIBUTORS.  SOME STATES DO NOT ALLOW THE EXCLUSION OR LIMITATION OF INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THE ABOVE LIMITATION AND EXCLUSION MAY NOT APPLY TO YOU.</p>\n\n<p>7. Indemnity. You agree that Plex and its licensors, distributors, contractors, agents, and third party contributors shall have no liability whatsoever for any use You make of the Software. You shall indemnify and hold harmless Plex and its licensors, suppliers, distributors, contractors, agents, and third party contributors from any claims, damages, liabilities, costs and fees (including reasonable attorney fees) arising from Your use of the Software as well as from Your failure to comply with any term of this Agreement, or any losses, damages, claims, costs, and/or attorneys’ fees of You arising from any use of or reliance upon any information received in connection with the Software that comprises or is based upon data provided by Plex or any third party.</p>\n\n<p>8. Additional Information About Restrictions.</p>\n\n<p>A.	You may reverse engineer the Software solely for the purpose of debugging modifications made by You to certain Third Party Files in source code format that are licensed under the GNU Lesser General Public License (LGPL) or under the GNU General Public License version 2 (GPL2) and only provided that You have made, prior to any such reverse engineering permitted under this sentence, unsuccessful prior reasonable good faith efforts to debug such modifications using techniques other than the reverse engineering of the Software.</p>\n\n<p>B.	Certain Third Party Files may be provided to You with the Software and licensed to You under additional terms set forth in license agreements of the third party authors of the Third Party Files and are available from Plex upon request.  Certain Third Party Files modified by Plex are provided solely for use by You except for GPL2 files.  You shall not distribute or convey the Software or distribute or convey any modified or unmodified Third Party Files to any other person or entity in any manner whatsoever, and You shall not cause the Software or any modified or unmodified Third Party Files to be made available for viewing, copying, or downloading or the like with the sole exception of GPL2 files. Plex hereby offers, for a period ending three (3) years from Your first acceptance of this Agreement, to transfer to You a copy of the complete corresponding machine-readable source code files for any LGPL or GPL2 Third Party Files that Plex supplies to You.  Only GPL2 Third Party Files may be subsequently transferred by You to a third party.</p>\n\n<p>9. Termination.  This Agreement shall continue until terminated as set forth in this section.  You may terminate this Agreement at any time. Your rights under this Agreement will terminate automatically without notice from Plex if You fail to comply with any term(s) of this Agreement, including any attempt to transfer a copy of the Software to another party except as provided in this Agreement.  Upon termination, the Agreement granted hereunder shall terminate and You shall immediately discontinue all use of the Software, but the terms of this Agreement will otherwise remain in effect.</p>\n\n<p>10. Export Law Assurances.  In connection with the Software, You agree to comply with all export laws and restrictions and regulations of the Department of Commerce, the United States Department of the Treasury Office of Foreign Assets Control ("OFAC"), or other United States or foreign agency or authority, and You agree not to export, or allow the export or re-export of, the Software in violation of any such restrictions, laws or regulations. By using the Software, You agree to the foregoing and represent and warrant that You are not located in, under the control of, or a national or resident of, any restricted country.</p>\n\n<p>11. Government Users. If the user, purchaser, or licensee of any Software is an agency, department, contractor, or other entity of any government, the use, duplication, reproduction, release, modification, disclosure, and transfer of such Software, including technical data, software, and manuals, is restricted by the terms of this Agreement.  All other use is prohibited.  No rights other than those expressly provided in this Agreement are conferred.  Software was developed fully at private expense.</p>\n\n<p>12. Miscellaneous.  No agency, partnership, joint venture, or employment is created as a result of this Agreement and You do not have any authority of any kind to bind Plex in any respect whatsoever. The failure of either party to exercise in any respect any right provided for herein shall not be deemed a waiver of any further rights hereunder.  If any provision of this Agreement is found to be unenforceable or invalid, that provision shall be limited or eliminated to the minimum extent necessary so that this Agreement shall otherwise remain in full force and effect and enforceable. This Agreement is not assignable, transferable, or sublicensable by You except with Plex\'s prior written consent. Plex may transfer, assign, or delegate this Agreement and its rights and obligations without consent.  This Agreement shall be governed by and construed in accordance with the laws of the state of California, as if made within California between two residents thereof, and the parties submit to the exclusive jurisdiction of the Superior Court of Santa Clara County and the United States District Court for the Northern District of California.  Notwithstanding the foregoing sentence, but without limiting Plex\'s right to seek injunctive or other equitable relief in any court of competent jurisdiction, any disputes arising with respect to this Agreement shall be referred to an arbitrator affiliated with the Judicial Arbitration and Mediation Services, Inc. ("JAMS").  The arbitrator shall be selected by joint agreement of the parties.  In the event the parties cannot agree on an arbitrator within thirty (30) days of the initiating party providing the other party with written notice that it plans to seek arbitration, the parties shall each select an arbitrator affiliated with JAMS, which arbitrators shall jointly select a third such arbitrator to resolve the dispute.  The written decision of the arbitrator shall be final and binding on the parties.  The arbitration proceeding shall be carried on and heard in Santa Clara County, California using the English language and pursuant to the rules of (and administered by) JAMS.  In any action or proceeding to enforce rights under this Agreement, the prevailing party will be entitled to recover costs and reasonable attorneys\' fees from the other party.  A separate written license agreement or order and signed by Plex and You or Your company, employer, or principal may state other terms and conditions that apply to You, including terms relating to price, payment, delivery, confidential information, support services, and the like.  You are solely responsible to review such terms or conditions with Your company, employer or principal.  In the event of any conflict in terms, the terms of the separate license agreement shall supersede the terms of this Agreement.  Except as stated in the preceding three sentences, both parties agree that this Agreement is the complete and exclusive statement of the mutual understanding of the parties and supersedes and cancels all previous written and oral agreements, communications, and other understandings relating to the subject matter of this Agreement.  Any modifications to this Agreement must be in a writing signed by authorized representatives of both parties and specifically referencing this paragraph of this Agreement.</p>\n'
})}),define("plex/control/init/HandlebarsInit",["plex/control/utils/StringUtil","plex/control/utils/NumberUtil","plex/control/utils/TranscodeUtil","plex/control/utils/MediaUtil","plex/control/utils/LocalizationUtil","hb!templates/helpers/LockableTextInput.tpl","hb!templates/helpers/LockableTagInput.tpl","hb!templates/helpers/PreferenceEdit.tpl","hb!templates/helpers/SectionPathInput.tpl","hb!templates/helpers/AdaptiveChannelListItem.tpl","hb!templates/helpers/BreadcrumbMediaItem.tpl","hb!templates/helpers/EULA.tpl","handlebars","underscore","moment"],function(e,t,n,i,a,s,r,l,o,c,d,h){Handlebars.registerHelper("eq",function(e,t,n,i){return e===t?new Handlebars.SafeString(n):new Handlebars.SafeString(i)
}),Handlebars.registerHelper("if_eq",function(e,t,n){return e==t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("if_neq",function(e,t,n){return e!=t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("timeAgo",function(e){return moment.unix(e).fromNow()}),Handlebars.registerHelper("humanizeDuration",function(e){if(6e4>e){var t=Math.round(moment.duration(Number(e)).asMinutes());return 1===t?t+" "+a.t("second"):t+" "+a.t("seconds")}var n=Math.round(moment.duration(Number(e)).asMinutes());
return 1===n?n+" "+a.t("minute"):n+" "+a.t("minutes")}),Handlebars.registerHelper("formatDate",function(e){return e?moment(e).format("MMM D, YYYY"):"Unknown"}),Handlebars.registerHelper("formatDateCustom",function(e,t){return e?moment(e).format(t):"Unknown"}),Handlebars.registerHelper("formatTimestamp",function(e){return e?moment.unix(e).format("MMMM D, YYYY"):"Unknown"}),Handlebars.registerHelper("formatMinutes",function(e){var t=Math.round(moment.duration(Number(e)).asMinutes());if(60>t)return t+" "+a.t("min");
var n=Math.floor(t/60),i=t%60;return 0===i?n+" "+a.t("hr"):n+" "+a.t("hr")+" "+i+" "+a.t("min")}),Handlebars.registerHelper("formatDuration",function(e){var t=moment.duration(Number(e)),n=t.seconds(),i=t.minutes(),a=t.hours(),s="";return s=10>n?":0"+n:":"+n,s=10>i&&a>0?"0"+i+s:i+s,a>0&&(s=a+":"+s),s}),Handlebars.registerHelper("formatBytes",function(e){return t.formatBytes(e,2)}),Handlebars.registerHelper("formatBitrate",function(e,n){return t.formatBitrate(e,n)}),Handlebars.registerHelper("t",function(){var e=[].splice.call(arguments,0,arguments.length-1);
return new Handlebars.SafeString(a.t.apply(a,e))}),Handlebars.registerHelper("truncate",function(t,n){return e.truncate(t,n)}),Handlebars.registerHelper("truncateMiddle",function(t,n,i){return e.truncateMiddle(t,n,i)}),Handlebars.registerHelper("truncateTagList",function(t,n){var i="";if(!("object"!=typeof t||t instanceof Array))return t.tag;if(t!==void 0){var a=n.hash.maxTags||t.length;a>t.length&&(a=t.length);for(var s=0;a>s;s++){var r=t[s];r.tag!==void 0&&""!==r.tag&&(i+=r.tag,a>s+1&&(i+=", "))
}}return e.truncate(i,n.hash.maxLen)}),Handlebars.registerHelper("tags",function(e){var t="";return _.each(e,function(e){t+=e.tag+","}),t=t.slice(0,-1)}),Handlebars.registerHelper("upperCase",function(e){return e.toUpperCase()}),Handlebars.registerHelper("titleCase",function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}),Handlebars.registerHelper("encodeUrl",function(e){return encodeURIComponent(e)}),Handlebars.registerHelper("dashboardMediaCardDetails",function(e,t){var n="";
return e.sourceTitle?(e.addedAt&&(n+=moment.unix(e.addedAt).fromNow()+" &middot; "),n+=e.sourceTitle,e.recommender&&(n+=" &middot; "+e.recommender),n):"season"===e.type?1e3>e.index?a.t("Season")+" "+e.index:e.index:t||"episode"!==e.type?e.parentTitle?e.title:!t&&e.year?e.year:void 0:e.index>0&&1e3>e.parentIndex?(n+=a.t("Season")+" "+e.parentIndex,n+=", "+a.t("Episode")+" "+e.index):e.originallyAvailableAt?moment(e.originallyAvailableAt).format("M/D/YY"):e.parentIndex}),Handlebars.registerHelper("seasonEpisodeIndex",function(e,t,n){return i.getSeasonEpisodeIndex(e,t,n)
}),Handlebars.registerHelper("seasonIndex",function(e){return i.getSeasonIndex(e)}),Handlebars.registerHelper("episodeIndex",function(e,t){return i.getEpisodeIndex(e,t)}),Handlebars.registerHelper("formatResolution",function(e){if(!e)return"";var t=parseInt(e,10);return _.isNaN(t)?e.toUpperCase():e+"p"}),Handlebars.registerHelper("formatAudioCodec",function(e){return e?"dca"===e?"DTS":e.toUpperCase():""}),Handlebars.registerHelper("formatAudioChannels",function(e){return e?(e=parseInt(e,10),3>e?"Stereo":""+(e-1)+".1"):""
}),Handlebars.registerHelper("formatVideoLevel",function(e){return e=parseInt(e,10),(e/10).toFixed(1)}),Handlebars.registerHelper("formatBoolean",function(e){return e&&0!==parseInt(e,10)?"Yes":"No"}),Handlebars.registerHelper("formatLabel",function(e){for(var t="",n=0,i=e.length;i>n;n++){var a=e.charAt(n),s=a.toUpperCase();t+=0===n?s:a===s?" "+s:a}return t}),Handlebars.registerHelper("transcodeImage",function(e,t,i,a){return n.image(e,t,i,a)}),Handlebars.registerHelper("transcodeMediaFlag",function(e){var t=e.hash.prefix+e.hash.path+"/"+e.hash.flag+"?t="+e.hash.version;
return n.image(e.hash.server,t,e.hash.width,e.hash.height)}),Handlebars.registerHelper("starRating",function(e){for(var t=Math.round(e/2),n="",i=0;5>i;i++)n+=t>i?'<i class="glyphicon star"></i>':'<i class="glyphicon dislikes"></i>';return n}),Handlebars.registerHelper("lockableTextInput",function(e){return e.hash.type=e.hash.type||"text",new Handlebars.SafeString(s(e.hash))}),Handlebars.registerHelper("lockableTagInput",function(e){return new Handlebars.SafeString(r(e.hash))}),Handlebars.registerHelper("eachKeyValue",function(e,t){var n=t.fn,i=t.inverse,a="";
if(e&&!_.isEmpty(e)){var s=_.map(e,function(e,t){return n({key:t,value:e})});a=s.join("")}else a=i(this);return a}),Handlebars.registerHelper("partial",function(e,t){var n=Handlebars.partials[e],i=t.hash.context?_.extend({},t.hash.context,t.hash):_.extend({},this,t.hash);return new Handlebars.SafeString(n(i))}),Handlebars.registerPartial("preference",l),Handlebars.registerPartial("sectionPathInput",o),Handlebars.registerPartial("adaptiveChannelListItem",c),Handlebars.registerPartial("breadcrumbMediaItem",d),Handlebars.registerPartial("EULA",h)
});var SM2_DEFER=!0;define("soundmanagerdefer",function(){}),function(e){function t(t,n){function i(e){return function(t){var n=this._t;return n&&n._a?e.call(this,t):null}}this.flashVersion=8,this.debugMode=!1,this.debugFlash=!1,this.useConsole=!0,this.consoleOnly=!0,this.waitForWindowLoad=!1,this.bgColor="#ffffff",this.useHighPerformance=!1,this.flashPollingInterval=null,this.html5PollingInterval=null,this.flashLoadTimeout=1e3,this.wmode=null,this.allowScriptAccess="always",this.useFlashBlock=!1,this.useHTML5Audio=!0,this.html5Test=/^(probably|maybe)$/i,this.preferFlash=!0,this.noSWFCache=!1,this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.movieID="sm2-container",this.id=n||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20120318",this.version=null,this.movieURL=null,this.url=t||null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.hasHTML5=function(){try{return"undefined"!=typeof Audio&&(new Audio).canPlayType!==void 0
}catch(e){return!1}}(),this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var a,s,r,l,o,c,d,h,u,p,m,f,v,g,y,b,w,x,k,S,C,A,I,P,_,T,M,D,L,E,N,O,R,$,B,j,V,q,F,U,H,z,W,Y,K,J,G,Q,X,Z,et,tt,nt=this,it=null,at="soundManager",st=navigator.userAgent,rt=e,lt=""+rt.location.href,ot=document,ct=[],dt=!1,ht=!1,ut=!1,pt=!1,mt=!1,ft=8,vt=null,gt=null,yt=!1,bt=!1,wt=0,xt=null,kt=null,St=Array.prototype.slice,Ct=!1,At=st.match(/(ipad|iphone|ipod)/i),It=st.match(/firefox/i),Pt=st.match(/droid/i),_t=st.match(/msie/i),Tt=st.match(/webkit/i),Mt=st.match(/safari/i)&&!st.match(/chrome/i),Dt=st.match(/opera/i),Lt=st.match(/(mobile|pre\/|xoom)/i)||At,Et=!lt.match(/usehtml5audio/i)&&!lt.match(/sm2\-ignorebadua/i)&&Mt&&!st.match(/silk/i)&&st.match(/OS X 10_6_([3-7])/i),Nt=("undefined"!=typeof console&&console.log!==void 0,ot.hasFocus!==void 0?ot.hasFocus():null),Ot=Mt&&ot.hasFocus===void 0,Rt=!Ot,$t=/(mp3|mp4|mpa)/i,Bt="about:blank",jt=ot.location?ot.location.protocol.match(/http/i):null,Vt=jt?"":"http://",qt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,Ft=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"],Ut=RegExp("\\.("+Ft.join("|")+")(\\?.*)?$","i");
this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!jt,this._global_a=null,N={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},Lt&&(nt.useHTML5Audio=!0,nt.preferFlash=!1,At&&(nt.ignoreFlash=!0,Ct=!0)),this.ok=function(){return kt?ut&&!pt:nt.useHTML5Audio&&nt.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return s(e)||ot[e]||rt[e]
},this.createSound=function(e){function t(){return s=O(s),nt.sounds[l.id]=new a(l),nt.soundIDs.push(l.id),nt.sounds[l.id]}var n,i,s=null,r=null,l=null;return ut&&nt.ok()?(2===arguments.length&&(e={id:arguments[0],url:arguments[1]}),s=d(e),s.url=F(s.url),l=s,B(l.id,!0)?nt.sounds[l.id]:(H(l)?(r=t(),r._setup_html5(l)):(o>8&&(null===l.isMovieStar&&(l.isMovieStar=l.serverURL||(l.type?l.type.match(qt):!1)||l.url.match(Ut)),l.isMovieStar&&l.usePeakData&&(l.usePeakData=!1)),l=R(l,n),r=t(),8===o?it._createSound(l.id,l.loops||1,l.usePolicyFile):(it._createSound(l.id,l.url,l.usePeakData,l.useWaveformData,l.useEQData,l.isMovieStar,l.isMovieStar?l.bufferTime:!1,l.loops||1,l.serverURL,l.duration||null,l.autoPlay,!0,l.autoLoad,l.usePolicyFile),l.serverURL||(r.connected=!0,l.onconnect&&l.onconnect.apply(r))),l.serverURL||!l.autoLoad&&!l.autoPlay||r.load(l)),!l.serverURL&&l.autoPlay&&r.play(),r)):($(i),!1)
},this.destroySound=function(e,t){if(!B(e))return!1;var n,i=nt.sounds[e];for(i._iO={},i.stop(),i.unload(),n=0;nt.soundIDs.length>n;n++)if(nt.soundIDs[n]===e){nt.soundIDs.splice(n,1);break}return t||i.destruct(!0),i=null,delete nt.sounds[e],!0},this.load=function(e,t){return B(e)?nt.sounds[e].load(t):!1},this.unload=function(e){return B(e)?nt.sounds[e].unload():!1},this.onPosition=function(e,t,n,i){return B(e)?nt.sounds[e].onposition(t,n,i):!1},this.onposition=this.onPosition,this.clearOnPosition=function(e,t,n){return B(e)?nt.sounds[e].clearOnPosition(t,n):!1
},this.play=function(e,t){return ut&&nt.ok()?B(e)?nt.sounds[e].play(t):(t instanceof Object||(t={url:t}),t&&t.url?(t.id=e,nt.createSound(t).play()):!1):($(at+".play(): "+D(ut?"notOK":"notReady")),!1)},this.start=this.play,this.setPosition=function(e,t){return B(e)?nt.sounds[e].setPosition(t):!1},this.stop=function(e){return B(e)?nt.sounds[e].stop():!1},this.stopAll=function(){var e;for(e in nt.sounds)nt.sounds.hasOwnProperty(e)&&nt.sounds[e].stop()},this.pause=function(e){return B(e)?nt.sounds[e].pause():!1
},this.pauseAll=function(){var e;for(e=nt.soundIDs.length-1;e>=0;e--)nt.sounds[nt.soundIDs[e]].pause()},this.resume=function(e){return B(e)?nt.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=nt.soundIDs.length-1;e>=0;e--)nt.sounds[nt.soundIDs[e]].resume()},this.togglePause=function(e){return B(e)?nt.sounds[e].togglePause():!1},this.setPan=function(e,t){return B(e)?nt.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return B(e)?nt.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;
if("string"!=typeof e&&(e=null),e)return B(e)?nt.sounds[e].mute():!1;for(t=nt.soundIDs.length-1;t>=0;t--)nt.sounds[nt.soundIDs[t]].mute();return nt.muted=!0,!0},this.muteAll=function(){nt.mute()},this.unmute=function(e){var t;if("string"!=typeof e&&(e=null),e)return B(e)?nt.sounds[e].unmute():!1;for(t=nt.soundIDs.length-1;t>=0;t--)nt.sounds[nt.soundIDs[t]].unmute();return nt.muted=!1,!0},this.unmuteAll=function(){nt.unmute()},this.toggleMute=function(e){return B(e)?nt.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;
return it&&8!==o&&(e=parseInt(it._getMemoryUse(),10)),e},this.disable=function(e){var t;if(e===void 0&&(e=!1),pt)return!1;for(pt=!0,t=nt.soundIDs.length-1;t>=0;t--)_(nt.sounds[nt.soundIDs[t]]);return c(e),G.remove(rt,"load",p),!0},this.canPlayMIME=function(e){var t;return nt.hasHTML5&&(t=z({type:e})),!kt||t?t:e&&nt.ok()?!!((o>8?e.match(qt):null)||e.match(nt.mimePattern)):null},this.canPlayURL=function(e){var t;return nt.hasHTML5&&(t=z({url:e})),!kt||t?t:e&&nt.ok()?!!e.match(nt.filePattern):null},this.canPlayLink=function(e){return e.type!==void 0&&e.type&&nt.canPlayMIME(e.type)?!0:nt.canPlayURL(e.href)
},this.getSoundById=function(e){if(!e)throw Error(at+".getSoundById(): sID is null/undefined");var t=nt.sounds[e];return t},this.onready=function(e,t){var n="onready";if(e&&e instanceof Function)return t||(t=rt),h(n,e,t),u(),!0;throw D("needFunction",n)},this.ontimeout=function(e,t){var n="ontimeout";if(e&&e instanceof Function)return t||(t=rt),h(n,e,t),u({type:n}),!0;throw D("needFunction",n)},this._writeDebug=function(){return!0},this._wD=this._writeDebug,this._debug=function(){},this.reboot=function(){var e,t;
for(e=nt.soundIDs.length-1;e>=0;e--)nt.sounds[nt.soundIDs[e]].destruct();try{_t&&(gt=it.innerHTML),vt=it.parentNode.removeChild(it)}catch(n){}gt=vt=kt=null,nt.enabled=k=ut=yt=bt=dt=ht=pt=nt.swfLoaded=!1,nt.soundIDs=[],nt.sounds={},it=null;for(e in ct)if(ct.hasOwnProperty(e))for(t=ct[e].length-1;t>=0;t--)ct[e][t].fired=!1;rt.setTimeout(nt.beginDelayedInit,20)},this.getMoviePercent=function(){return it&&it.PercentLoaded!==void 0?it.PercentLoaded():null},this.beginDelayedInit=function(){mt=!0,w(),setTimeout(function(){return bt?!1:(C(),b(),bt=!0,!0)
},20),m()},this.destruct=function(){nt.disable(!0)},a=function(e){var t,n,i,a,s,r,l,c,h,u=this,p=!1,m=[],f=0,v=null;h={duration:null,time:null},this.sID=e.id,this.url=e.url,this.options=d(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,this.id3={},this._debug=function(){},this.load=function(e){var t,n=null;if(e!==void 0?(u._iO=d(e,u.options),u.instanceOptions=u._iO):(e=u.options,u._iO=e,u.instanceOptions=u._iO,v&&v!==u.url&&(u._iO.url=u.url,u.url=null)),u._iO.url||(u._iO.url=u.url),u._iO.url=F(u._iO.url),u._iO.url===u.url&&0!==u.readyState&&2!==u.readyState)return 3===u.readyState&&u._iO.onload&&u._iO.onload.apply(u,[!!u.duration]),u;
if(t=u._iO,v=u.url,u.loaded=!1,u.readyState=1,u.playState=0,H(t))n=u._setup_html5(t),n._called_load||(u._html5_canplay=!1,u._a.autobuffer="auto",u._a.preload="auto",n.load(),n._called_load=!0,t.autoPlay&&u.play());else try{u.isHTML5=!1,u._iO=R(O(t)),t=u._iO,8===o?it._load(u.sID,t.url,t.stream,t.autoPlay,t.whileloading?1:0,t.loops||1,t.usePolicyFile):it._load(u.sID,t.url,!!t.stream,!!t.autoPlay,t.loops||1,!!t.autoLoad,t.usePolicyFile)}catch(i){A({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}return u
},this.unload=function(){return 0!==u.readyState&&(u.isHTML5?(a(),u._a&&(u._a.pause(),Y(u._a))):8===o?it._unload(u.sID,Bt):it._unload(u.sID),t()),u},this.destruct=function(e){u.isHTML5?(a(),u._a&&(u._a.pause(),Y(u._a),Ct||i(),u._a._t=null,u._a=null)):(u._iO.onfailure=null,it._destroySound(u.sID)),e||nt.destroySound(u.sID,!0)},this.play=function(e,t){var n,i,a;if(t=void 0===t?!0:t,e||(e={}),u._iO=d(e,u._iO),u._iO=d(u._iO,u.options),u._iO.url=F(u._iO.url),u.instanceOptions=u._iO,u._iO.serverURL&&!u.connected)return u.getAutoPlay()||u.setAutoPlay(!0),u;
if(H(u._iO)&&(u._setup_html5(u._iO),s()),1===u.playState&&!u.paused&&(n=u._iO.multiShot,!n))return u;if(!u.loaded)if(0===u.readyState)u.isHTML5||(u._iO.autoPlay=!0),u.load(u._iO);else if(2===u.readyState)return u;if(!u.isHTML5&&9===o&&u.position>0&&u.position===u.duration&&(e.position=0),u.paused&&u.position&&u.position>0)u.resume();else{if(u._iO=d(e,u._iO),null!==u._iO.from&&null!==u._iO.to&&0===u.instanceCount&&0===u.playState&&!u._iO.serverURL){if(a=function(){u._iO=d(e,u._iO),u.play(u._iO)},u.isHTML5&&!u._html5_canplay)return u.load({_oncanplay:a}),!1;
if(!(u.isHTML5||u.loaded||u.readyState&&2===u.readyState))return u.load({onload:a}),!1;u._iO=c()}(!u.instanceCount||u._iO.multiShotEvents||!u.isHTML5&&o>8&&!u.getAutoPlay())&&u.instanceCount++,0===u.playState&&u._iO.onposition&&r(u),u.playState=1,u.paused=!1,u.position=void 0===u._iO.position||isNaN(u._iO.position)?0:u._iO.position,u.isHTML5||(u._iO=R(O(u._iO))),u._iO.onplay&&t&&(u._iO.onplay.apply(u),p=!0),u.setVolume(u._iO.volume,!0),u.setPan(u._iO.pan,!0),u.isHTML5?(s(),i=u._setup_html5(),u.setPosition(u._iO.position),i.play()):it._start(u.sID,u._iO.loops||1,9===o?u._iO.position:u._iO.position/1e3)
}return u},this.start=this.play,this.stop=function(e){var t,n=u._iO;return 1===u.playState&&(u._onbufferchange(0),u._resetOnPosition(0),u.paused=!1,u.isHTML5||(u.playState=0),l(),n.to&&u.clearOnPosition(n.to),u.isHTML5?u._a&&(t=u.position,u.setPosition(0),u.position=t,u._a.pause(),u.playState=0,u._onTimer(),a()):(it._stop(u.sID,e),n.serverURL&&u.unload()),u.instanceCount=0,u._iO={},n.onstop&&n.onstop.apply(u)),u},this.setAutoPlay=function(e){u._iO.autoPlay=e,u.isHTML5||(it._setAutoPlay(u.sID,e),e&&(u.instanceCount||1!==u.readyState||u.instanceCount++))
},this.getAutoPlay=function(){return u._iO.autoPlay},this.setPosition=function(e){void 0===e&&(e=0);var t,n,i,a=u.isHTML5?Math.max(e,0):Math.min(u.duration||u._iO.duration,Math.max(e,0));if(t=u.position,u.position=a,i=u.position/1e3,u._resetOnPosition(u.position),u._iO.position=a,u.isHTML5){if(u._a&&u._html5_canplay&&u._a.currentTime!==i)try{u._a.currentTime=i,(0===u.playState||u.paused)&&u._a.pause()}catch(s){}}else n=9===o?u.position:i,u.readyState&&2!==u.readyState&&it._setPosition(u.sID,n,u.paused||!u.playState);
return u.isHTML5&&u.paused&&u._onTimer(!0),u},this.pause=function(e){return u.paused||0===u.playState&&1!==u.readyState?u:(u.paused=!0,u.isHTML5?(u._setup_html5().pause(),a()):(e||void 0===e)&&it._pause(u.sID),u._iO.onpause&&u._iO.onpause.apply(u),u)},this.resume=function(){var e=u._iO;return u.paused?(u.paused=!1,u.playState=1,u.isHTML5?(u._setup_html5().play(),s()):(e.isMovieStar&&!e.serverURL&&u.setPosition(u.position),it._pause(u.sID)),!p&&e.onplay?(e.onplay.apply(u),p=!0):e.onresume&&e.onresume.apply(u),u):u
},this.togglePause=function(){return 0===u.playState?(u.play({position:9!==o||u.isHTML5?u.position/1e3:u.position}),u):(u.paused?u.resume():u.pause(),u)},this.setPan=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=!1),u.isHTML5||it._setPan(u.sID,e),u._iO.pan=e,t||(u.pan=e,u.options.pan=e),u},this.setVolume=function(e,t){return e===void 0&&(e=100),t===void 0&&(t=!1),u.isHTML5?u._a&&(u._a.volume=Math.max(0,Math.min(1,e/100))):it._setVolume(u.sID,nt.muted&&!u.muted||u.muted?0:e),u._iO.volume=e,t||(u.volume=e,u.options.volume=e),u
},this.mute=function(){return u.muted=!0,u.isHTML5?u._a&&(u._a.muted=!0):it._setVolume(u.sID,0),u},this.unmute=function(){u.muted=!1;var e=u._iO.volume!==void 0;return u.isHTML5?u._a&&(u._a.muted=!1):it._setVolume(u.sID,e?u._iO.volume:u.options.volume),u},this.toggleMute=function(){return u.muted?u.unmute():u.mute()},this.onPosition=function(e,t,n){return m.push({position:parseInt(e,10),method:t,scope:n!==void 0?n:u,fired:!1}),u},this.onposition=this.onPosition,this.clearOnPosition=function(e,t){var n;
if(e=parseInt(e,10),isNaN(e))return!1;for(n=0;m.length>n;n++)e===m[n].position&&(t&&t!==m[n].method||(m[n].fired&&f--,m.splice(n,1)))},this._processOnPosition=function(){var e,t,n=m.length;if(!n||!u.playState||f>=n)return!1;for(e=n-1;e>=0;e--)t=m[e],!t.fired&&u.position>=t.position&&(t.fired=!0,f++,t.method.apply(t.scope,[t.position]));return!0},this._resetOnPosition=function(e){var t,n,i=m.length;if(!i)return!1;for(t=i-1;t>=0;t--)n=m[t],n.fired&&n.position>=e&&(n.fired=!1,f--);return!0},c=function(){var e,t,n=u._iO,i=n.from,a=n.to;
return t=function(){u.clearOnPosition(a,t),u.stop()},e=function(){null===a||isNaN(a)||u.onPosition(a,t)},null===i||isNaN(i)||(n.position=i,n.multiShot=!1,e()),n},r=function(){var e,t=u._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&u.onPosition(parseInt(e,10),t[e])},l=function(){var e,t=u._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&u.clearOnPosition(parseInt(e,10))},s=function(){u.isHTML5&&j(u)},a=function(){u.isHTML5&&V(u)},t=function(){m=[],f=0,p=!1,u._hasTimer=null,u._a=null,u._html5_canplay=!1,u.bytesLoaded=null,u.bytesTotal=null,u.duration=u._iO&&u._iO.duration?u._iO.duration:null,u.durationEstimate=null,u.eqData=[],u.eqData.left=[],u.eqData.right=[],u.failures=0,u.isBuffering=!1,u.instanceOptions={},u.instanceCount=0,u.loaded=!1,u.metadata={},u.readyState=0,u.muted=!1,u.paused=!1,u.peakData={left:0,right:0},u.waveformData={left:[],right:[]},u.playState=0,u.position=null
},t(),this._onTimer=function(e){var t,n,i=!1,a={};return u._hasTimer||e?u._a&&(e||(u.playState>0||1===u.readyState)&&!u.paused)?(t=u._get_html5_duration(),t!==h.duration&&(h.duration=t,u.duration=t,i=!0),u.durationEstimate=u.duration,n=1e3*u._a.currentTime||0,n!==h.time&&(h.time=n,i=!0),(i||e)&&u._whileplaying(n,a,a,a,a),i):!1:void 0},this._get_html5_duration=function(){var e=u._iO,t=u._a?1e3*u._a.duration:e?e.duration:void 0,n=t&&!isNaN(t)&&1/0!==t?t:e?e.duration:null;return n},this._setup_html5=function(e){var i=d(u._iO,e),a=decodeURI,s=Ct?nt._global_a:u._a,r=a(i.url),l=s&&s._t?s._t.instanceOptions:null;
if(s){if(s._t){if(!Ct&&r===a(v))return s;if(Ct&&l.url===i.url&&(!v||v===l.url))return s}Ct&&s._t&&s._t.playState&&i.url!==l.url&&s._t.stop(),t(),s.src=i.url,u.url=i.url,v=i.url,s._called_load=!1}else s=new Audio(i.url),s._called_load=!1,Pt&&(s._called_load=!0),Ct&&(nt._global_a=s);return u.isHTML5=!0,u._a=s,s._t=u,n(),s.loop=i.loops>1?"loop":"",i.autoLoad||i.autoPlay?u.load():(s.autobuffer=!1,s.preload="none"),s.loop=i.loops>1?"loop":"",s},n=function(){function e(e,t,n){return u._a?u._a.addEventListener(e,t,n||!1):null
}if(u._a._added_events)return!1;var t;u._a._added_events=!0;for(t in et)et.hasOwnProperty(t)&&e(t,et[t]);return!0},i=function(){function e(e,t,n){return u._a?u._a.removeEventListener(e,t,n||!1):null}var t;u._a._added_events=!1;for(t in et)et.hasOwnProperty(t)&&e(t,et[t])},this._onload=function(e){var t=!!e;return u.loaded=t,u.readyState=t?3:2,u._onbufferchange(0),u._iO.onload&&u._iO.onload.apply(u,[t]),!0},this._onbufferchange=function(e){return 0===u.playState?!1:e&&u.isBuffering||!e&&!u.isBuffering?!1:(u.isBuffering=1===e,u._iO.onbufferchange&&u._iO.onbufferchange.apply(u),!0)
},this._onsuspend=function(){return u._iO.onsuspend&&u._iO.onsuspend.apply(u),!0},this._onfailure=function(e,t,n){u.failures++,u._iO.onfailure&&1===u.failures&&u._iO.onfailure(u,e,t,n)},this._onfinish=function(){var e=u._iO.onfinish;u._onbufferchange(0),u._resetOnPosition(0),u.instanceCount&&(u.instanceCount--,u.instanceCount||(l(),u.playState=0,u.paused=!1,u.instanceCount=0,u.instanceOptions={},u._iO={},a()),(!u.instanceCount||u._iO.multiShotEvents)&&e&&e.apply(u))},this._whileloading=function(e,t,n,i){var a=u._iO;
u.bytesLoaded=e,u.bytesTotal=t,u.duration=Math.floor(n),u.bufferLength=i,a.isMovieStar?(u.durationEstimate=u.duration,3!==u.readyState&&a.whileloading&&a.whileloading.apply(u)):(u.durationEstimate=a.duration?u.duration>a.duration?u.duration:a.duration:parseInt(u.bytesTotal/u.bytesLoaded*u.duration,10),void 0===u.durationEstimate&&(u.durationEstimate=u.duration),3!==u.readyState&&a.whileloading&&a.whileloading.apply(u))},this._whileplaying=function(e,t,n,i,a){var s,r=u._iO;return isNaN(e)||null===e?!1:(u.position=e,u._processOnPosition(),!u.isHTML5&&o>8&&(r.usePeakData&&t!==void 0&&t&&(u.peakData={left:t.leftPeak,right:t.rightPeak}),r.useWaveformData&&n!==void 0&&n&&(u.waveformData={left:n.split(","),right:i.split(",")}),r.useEQData&&a!==void 0&&a&&a.leftEQ&&(s=a.leftEQ.split(","),u.eqData=s,u.eqData.left=s,a.rightEQ!==void 0&&a.rightEQ&&(u.eqData.right=a.rightEQ.split(",")))),1===u.playState&&(u.isHTML5||8!==o||u.position||!u.isBuffering||u._onbufferchange(0),r.whileplaying&&r.whileplaying.apply(u)),!0)
},this._onmetadata=function(e,t){var n,i,a={};for(n=0,i=e.length;i>n;n++)a[e[n]]=t[n];u.metadata=a,u._iO.onmetadata&&u._iO.onmetadata.apply(u)},this._onid3=function(e,t){var n,i,a=[];for(n=0,i=e.length;i>n;n++)a[e[n]]=t[n];u.id3=d(u.id3,a),u._iO.onid3&&u._iO.onid3.apply(u)},this._onconnect=function(e){e=1===e,u.connected=e,e&&(u.failures=0,B(u.sID)&&(u.getAutoPlay()?u.play(void 0,u.getAutoPlay()):u._iO.autoLoad&&u.load()),u._iO.onconnect&&u._iO.onconnect.apply(u,[e]))},this._ondataerror=function(){u.playState>0&&u._iO.ondataerror&&u._iO.ondataerror.apply(u)
}},S=function(){return ot.body||ot._docElement||ot.getElementsByTagName("div")[0]},s=function(e){return ot.getElementById(e)},d=function(e,t){var n,i,a,s={};for(n in e)e.hasOwnProperty(n)&&(s[n]=e[n]);i=t===void 0?nt.defaultOptions:t;for(a in i)i.hasOwnProperty(a)&&s[a]===void 0&&(s[a]=i[a]);return s},G=function(){function e(e){var t=St.call(e),n=t.length;return a?(t[1]="on"+t[1],n>3&&t.pop()):3===n&&t.push(!1),t}function t(e,t){var n=e.shift(),i=[s[t]];a?n[i](e[0],e[1]):n[i].apply(n,e)}function n(){t(e(arguments),"add")
}function i(){t(e(arguments),"remove")}var a=rt.attachEvent,s={add:a?"attachEvent":"addEventListener",remove:a?"detachEvent":"removeEventListener"};return{add:n,remove:i}}(),et={abort:i(function(){}),canplay:i(function(){var e,t=this._t;if(t._html5_canplay)return!0;if(t._html5_canplay=!0,t._onbufferchange(0),e=isNaN(t.position)?null:t.position/1e3,t.position&&this.currentTime!==e)try{this.currentTime=e}catch(n){}t._iO._oncanplay&&t._iO._oncanplay()}),load:i(function(){var e=this._t;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesTotal,e.bytesTotal,e._get_html5_duration()),e._onload(!0))
}),ended:i(function(){var e=this._t;e._onfinish()}),error:i(function(){this._t._onload(!1)}),loadeddata:i(function(){var e=this._t,t=e.bytesTotal||1;e._loaded||Mt||(e.duration=e._get_html5_duration(),e._whileloading(t,t,e._get_html5_duration()),e._onload(!0))}),loadedmetadata:i(function(){}),loadstart:i(function(){this._t._onbufferchange(1)}),play:i(function(){this._t._onbufferchange(0)}),playing:i(function(){this._t._onbufferchange(0)}),progress:i(function(e){var t,n=this._t,i=0,a=("progress"===e.type,e.target.buffered),s=e.loaded||0,r=e.total||1;
if(n.loaded)return!1;if(a&&a.length){for(t=a.length-1;t>=0;t--)i=a.end(t)-a.start(t);s=i/e.target.duration}isNaN(s)||(n._onbufferchange(0),n._whileloading(s,r,n._get_html5_duration()),s&&r&&s===r&&et.load.call(this,e))}),ratechange:i(function(){}),suspend:i(function(e){var t=this._t;et.progress.call(this,e),t._onsuspend()}),stalled:i(function(){}),timeupdate:i(function(){this._t._onTimer()}),waiting:i(function(){var e=this._t;e._onbufferchange(1)})},H=function(e){return!e.serverURL&&(e.type?z({type:e.type}):z({url:e.url})||nt.html5Only)
},Y=function(e){e&&(e.src=It?"":Bt)},z=function(e){function t(e){return nt.preferFlash&&Q&&!nt.ignoreFlash&&nt.flash[e]!==void 0&&nt.flash[e]}if(!nt.useHTML5Audio||!nt.hasHTML5)return!1;var n,i,a,s,r=e.url||null,l=e.type||null,o=nt.audioFormats;if(l&&nt.html5[l]!==void 0)return nt.html5[l]&&!t(l);if(!W){W=[];for(s in o)o.hasOwnProperty(s)&&(W.push(s),o[s].related&&(W=W.concat(o[s].related)));W=RegExp("\\.("+W.join("|")+")(\\?.*)?$","i")}if(a=r?r.toLowerCase().match(W):null,a&&a.length)a=a[1];else{if(!l)return!1;
i=l.indexOf(";"),a=(-1!==i?l.substr(0,i):l).substr(6)}return a&&nt.html5[a]!==void 0?nt.html5[a]&&!t(a):(l="audio/"+a,n=nt.html5.canPlayType({type:l}),nt.html5[a]=n,n&&nt.html5[l]&&!t(l))},J=function(){function e(e){var t,n,i,s=!1;if(!a||"function"!=typeof a.canPlayType)return!1;if(e instanceof Array){for(n=0,i=e.length;i>n&&!s;n++)(nt.html5[e[n]]||a.canPlayType(e[n]).match(nt.html5Test))&&(s=!0,nt.html5[e[n]]=!0,nt.flash[e[n]]=!!(nt.preferFlash&&Q&&e[n].match($t)));return s}return t=a&&"function"==typeof a.canPlayType?a.canPlayType(e):!1,!(!t||!t.match(nt.html5Test))
}if(!nt.useHTML5Audio||"undefined"==typeof Audio)return!1;var t,n,i,a="undefined"!=typeof Audio?Dt?new Audio(null):new Audio:null,s={};n=nt.audioFormats;for(t in n)if(n.hasOwnProperty(t)&&(s[t]=e(n[t].type),s["audio/"+t]=s[t],nt.flash[t]=nt.preferFlash&&!nt.ignoreFlash&&t.match($t)?!0:!1,n[t]&&n[t].related))for(i=n[t].related.length-1;i>=0;i--)s["audio/"+n[t].related[i]]=s[t],nt.html5[n[t].related[i]]=s[t],nt.flash[n[t].related[i]]=s[t];return s.canPlayType=a?e:null,nt.html5=d(nt.html5,s),!0},y={},D=function(){},O=function(e){return 8===o&&e.loops>1&&e.stream&&(e.stream=!1),e
},R=function(e){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(e.usePolicyFile=!0),e},$=function(){},r=function(){return!1},_=function(e){var t;for(t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=r);t=null},T=function(e){e===void 0&&(e=!1),(pt||e)&&nt.disable(e)},M=function(e){var t,n=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(n=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return t=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+nt.movieURL,nt.noSWFCache&&(t+="?ts="+(new Date).getTime()),t
},v=function(){o=parseInt(nt.flashVersion,10),8!==o&&9!==o&&(nt.flashVersion=o=ft);var e=nt.debugMode||nt.debugFlash?"_debug.swf":".swf";nt.useHTML5Audio&&!nt.html5Only&&nt.audioFormats.mp4.required&&9>o&&(nt.flashVersion=o=9),nt.version=nt.versionNumber+(nt.html5Only?" (HTML5-only mode)":9===o?" (AS3/Flash 9)":" (AS2/Flash 8)"),o>8?(nt.defaultOptions=d(nt.defaultOptions,nt.flash9Options),nt.features.buffering=!0,nt.defaultOptions=d(nt.defaultOptions,nt.movieStarOptions),nt.filePatterns.flash9=RegExp("\\.(mp3|"+Ft.join("|")+")(\\?.*)?$","i"),nt.features.movieStar=!0):nt.features.movieStar=!1,nt.filePattern=nt.filePatterns[8!==o?"flash9":"flash8"],nt.movieURL=(8===o?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),nt.features.peakData=nt.features.waveformData=nt.features.eqData=o>8
},I=function(e,t){return it?(it._setPolling(e,t),void 0):!1},P=function(){nt.debugURLParam.test(lt)&&(nt.debugMode=!0)},B=this.getSoundById,E=function(){var e=[];return nt.debugMode&&e.push(N.sm2Debug),nt.debugFlash&&e.push(N.flashDebug),nt.useHighPerformance&&e.push(N.highPerf),e.join(" ")},L=function(){var e=(D("fbHandler"),nt.getMoviePercent()),t=N,n={type:"FLASHBLOCK"};return nt.html5Only?!1:(nt.ok()?nt.oMC&&(nt.oMC.className=[E(),t.swfDefault,t.swfLoaded+(nt.didFlashBlock?" "+t.swfUnblocked:"")].join(" ")):(kt&&(nt.oMC.className=E()+" "+t.swfDefault+" "+(null===e?t.swfTimedout:t.swfError)),nt.didFlashBlock=!0,u({type:"ontimeout",ignoreInit:!0,error:n}),A(n)),void 0)
},h=function(e,t,n){ct[e]===void 0&&(ct[e]=[]),ct[e].push({method:t,scope:n||null,fired:!1})},u=function(e){if(e||(e={type:"onready"}),!ut&&e&&!e.ignoreInit)return!1;if("ontimeout"===e.type&&nt.ok())return!1;var t,n,i={success:e&&e.ignoreInit?nt.ok():!pt},a=e&&e.type?ct[e.type]||[]:[],s=[],r=[i],l=kt&&nt.useFlashBlock&&!nt.ok();for(e.error&&(r[0].error=e.error),t=0,n=a.length;n>t;t++)a[t].fired!==!0&&s.push(a[t]);if(s.length)for(t=0,n=s.length;n>t;t++)s[t].scope?s[t].method.apply(s[t].scope,r):s[t].method.apply(this,r),l||(s[t].fired=!0);
return!0},p=function(){rt.setTimeout(function(){nt.useFlashBlock&&L(),u(),nt.onload instanceof Function&&nt.onload.apply(rt),nt.waitForWindowLoad&&G.add(rt,"load",p)},1)},X=function(){if(void 0!==Q)return Q;var e,t,n,i=!1,a=navigator,s=a.plugins,r=rt.ActiveXObject;if(s&&s.length)t="application/x-shockwave-flash",n=a.mimeTypes,n&&n[t]&&n[t].enabledPlugin&&n[t].enabledPlugin.description&&(i=!0);else if(r!==void 0){try{e=new r("ShockwaveFlash.ShockwaveFlash")}catch(l){}i=!!e}return Q=i,i},U=function(){var e,t,n=At&&!!st.match(/os (1|2|3_0|3_1)/i);
if(n)return nt.hasHTML5=!1,nt.html5Only=!0,nt.oMC&&(nt.oMC.style.display="none"),!1;if(!nt.useHTML5Audio)return!0;if(!nt.html5||!nt.html5.canPlayType)return nt.hasHTML5=!1,!0;if(nt.hasHTML5=!0,Et&&X())return!0;for(t in nt.audioFormats)nt.audioFormats.hasOwnProperty(t)&&(nt.audioFormats[t].required&&!nt.html5.canPlayType(nt.audioFormats[t].type)||nt.flash[t]||nt.flash[nt.audioFormats[t].type])&&(e=!0);return nt.ignoreFlash&&(e=!1),nt.html5Only=nt.hasHTML5&&nt.useHTML5Audio&&!e,!nt.html5Only},F=function(e){var t,n,i=0;
if(e instanceof Array){for(t=0,n=e.length;n>t;t++)if(e[t]instanceof Object){if(nt.canPlayMIME(e[t].type)){i=t;break}}else if(nt.canPlayURL(e[t])){i=t;break}return e[i].url&&(e[i]=e[i].url),e[i]}return e},j=function(t){t._hasTimer||(t._hasTimer=!0,!Lt&&nt.html5PollingInterval&&(null===xt&&0===wt&&(xt=e.setInterval(q,nt.html5PollingInterval)),wt++))},V=function(e){e._hasTimer&&(e._hasTimer=!1,!Lt&&nt.html5PollingInterval&&wt--)},q=function(){var t;if(null!==xt&&!wt)return e.clearInterval(xt),xt=null,!1;
for(t=nt.soundIDs.length-1;t>=0;t--)nt.sounds[nt.soundIDs[t]].isHTML5&&nt.sounds[nt.soundIDs[t]]._hasTimer&&nt.sounds[nt.soundIDs[t]]._onTimer()},A=function(e){e=e!==void 0?e:{},nt.onerror instanceof Function&&nt.onerror.apply(rt,[{type:e.type!==void 0?e.type:null}]),e.fatal!==void 0&&e.fatal&&nt.disable()},Z=function(){if(!Et||!X())return!1;var e,t,n=nt.audioFormats;for(t in n)if(n.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(nt.html5[t]=!1,n[t]&&n[t].related))for(e=n[t].related.length-1;e>=0;e--)nt.html5[n[t].related[e]]=!1
},this._setSandboxType=function(){},this._externalInterfaceOK=function(){return nt.swfLoaded?!1:((new Date).getTime(),nt.swfLoaded=!0,Ot=!1,Et&&Z(),_t?setTimeout(l,100):l(),void 0)},C=function(e,t){function n(){}function i(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(dt&&ht)return!1;if(nt.html5Only)return v(),n(),nt.oMC=s(nt.movieID),l(),dt=!0,ht=!0,!1;var a,r,o,c,d,h,u,p,m=t||nt.url,f=nt.altURL||m,g="JS/Flash audio component (SoundManager 2)",y=S(),b=E(),w=null,x=null,k=ot.getElementsByTagName("html")[0];
if(x=k&&k.dir&&k.dir.match(/rtl/i),e=e===void 0?nt.id:e,v(),nt.url=M(jt?m:f),t=nt.url,nt.wmode=!nt.wmode&&nt.useHighPerformance?"transparent":nt.wmode,null!==nt.wmode&&(st.match(/msie 8/i)||!_t&&!nt.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(nt.wmode=null),a={name:e,id:e,src:t,quality:"high",allowScriptAccess:nt.allowScriptAccess,bgcolor:nt.bgColor,pluginspage:Vt+"www.macromedia.com/go/getflashplayer",title:g,type:"application/x-shockwave-flash",wmode:nt.wmode,hasPriority:"true"},null!==w&&(a.width=w,a.height=w),nt.debugFlash&&(a.FlashVars="debug=1"),nt.wmode||delete a.wmode,_t)r=ot.createElement("div"),c=['<object id="'+e+'" data="'+t+'" type="'+a.type+'" title="'+a.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Vt+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="'+a.width+'" height="'+a.height+'">',i("movie",t),i("AllowScriptAccess",nt.allowScriptAccess),i("quality",a.quality),nt.wmode?i("wmode",nt.wmode):"",i("bgcolor",nt.bgColor),i("hasPriority","true"),nt.debugFlash?i("FlashVars",a.FlashVars):"","</object>"].join("");
else{r=ot.createElement("embed");for(o in a)a.hasOwnProperty(o)&&r.setAttribute(o,a[o])}if(P(),b=E(),y=S())if(nt.oMC=s(nt.movieID)||ot.createElement("div"),nt.oMC.id)p=nt.oMC.className,nt.oMC.className=(p?p+" ":N.swfDefault)+(b?" "+b:""),nt.oMC.appendChild(r),_t&&(d=nt.oMC.appendChild(ot.createElement("div")),d.className=N.swfBox,d.innerHTML=c),ht=!0;else{if(nt.oMC.id=nt.movieID,nt.oMC.className=N.swfDefault+" "+b,h=null,d=null,nt.useFlashBlock||(nt.useHighPerformance?h={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(h={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},x&&(h.left=Math.abs(parseInt(h.left,10))+"px"))),Tt&&(nt.oMC.style.zIndex=1e4),!nt.debugFlash)for(u in h)h.hasOwnProperty(u)&&(nt.oMC.style[u]=h[u]);
try{_t||nt.oMC.appendChild(r),y.appendChild(nt.oMC),_t&&(d=nt.oMC.appendChild(ot.createElement("div")),d.className=N.swfBox,d.innerHTML=c),ht=!0}catch(C){throw Error(D("domError")+" \n"+(""+C))}}return dt=!0,n(),!0},b=function(){return nt.html5Only?(C(),!1):it?!1:(it=nt.getMovie(nt.id),it||(vt?(_t?nt.oMC.innerHTML=gt:nt.oMC.appendChild(vt),vt=null,dt=!0):C(nt.id,nt.url),it=nt.getMovie(nt.id)),nt.oninitmovie instanceof Function&&setTimeout(nt.oninitmovie,1),!0)},m=function(){setTimeout(f,1e3)},f=function(){if(yt)return!1;
if(yt=!0,G.remove(rt,"load",m),Ot&&!Nt)return!1;var e;ut||(e=nt.getMoviePercent()),setTimeout(function(){e=nt.getMoviePercent(),!ut&&Rt&&(null===e?nt.useFlashBlock||0===nt.flashLoadTimeout?nt.useFlashBlock&&L():T(!0):0===nt.flashLoadTimeout||T(!0))},nt.flashLoadTimeout)},g=function(){function e(){G.remove(rt,"focus",g),G.remove(rt,"load",g)}return Nt||!Ot?(e(),!0):(Rt=!0,Nt=!0,Mt&&Ot&&G.remove(rt,"mousemove",g),yt=!1,e(),!0)},tt=function(){var e,t=[];if(nt.useHTML5Audio&&nt.hasHTML5)for(e in nt.audioFormats)nt.audioFormats.hasOwnProperty(e)&&t.push(e+": "+nt.html5[e]+(!nt.html5[e]&&Q&&nt.flash[e]?" (using flash)":nt.preferFlash&&nt.flash[e]&&Q?" (preferring flash)":nt.html5[e]?"":" ("+(nt.audioFormats[e].required?"required, ":"")+"and no flash support)"))
},c=function(e){if(ut)return!1;if(nt.html5Only)return ut=!0,p(),!0;var t,n=nt.useFlashBlock&&nt.flashLoadTimeout&&!nt.getMoviePercent();return n||(ut=!0,pt&&(t={type:!Q&&kt?"NO_FLASH":"INIT_TIMEOUT"})),pt||e?(nt.useFlashBlock&&nt.oMC&&(nt.oMC.className=E()+" "+(null===nt.getMoviePercent()?N.swfTimedout:N.swfError)),u({type:"ontimeout",error:t}),A(t),!1):nt.waitForWindowLoad&&!mt?(G.add(rt,"load",p),!1):(p(),!0)},l=function(){function e(){G.remove(rt,"load",nt.beginDelayedInit)}if(ut)return!1;if(nt.html5Only)return ut||(e(),nt.enabled=!0,c()),!0;
b();try{it._externalInterfaceTest(!1),I(!0,nt.flashPollingInterval||(nt.useHighPerformance?10:50)),nt.debugMode||it._disableDebug(),nt.enabled=!0,nt.html5Only||G.add(rt,"unload",r)}catch(t){return A({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),T(!0),c(),!1}return c(),e(),!0},w=function(){return k?!1:(k=!0,P(),!Q&&nt.hasHTML5&&(nt.useHTML5Audio=!0,nt.preferFlash=!1),J(),nt.html5.usingFlash=U(),kt=nt.html5.usingFlash,tt(),!Q&&kt&&(nt.flashLoadTimeout=1),ot.removeEventListener&&ot.removeEventListener("DOMContentLoaded",w,!1),b(),!0)
},K=function(){return"complete"===ot.readyState&&(w(),ot.detachEvent("onreadystatechange",K)),!0},x=function(){mt=!0,G.remove(rt,"load",x)},X(),G.add(rt,"focus",g),G.add(rt,"load",g),G.add(rt,"load",m),G.add(rt,"load",x),Mt&&Ot&&G.add(rt,"mousemove",g),ot.addEventListener?ot.addEventListener("DOMContentLoaded",w,!1):ot.attachEvent?ot.attachEvent("onreadystatechange",K):A({type:"NO_DOM2_EVENTS",fatal:!0}),"complete"===ot.readyState&&setTimeout(w,100)}var n=null;void 0!==SM2_DEFER&&SM2_DEFER||(n=new t),e.SoundManager=t,e.soundManager=n
}(window),define("soundmanager",function(){}),define("plex/control/init/SoundManagerInit",["soundmanager"],function(){soundManager=new SoundManager,soundManager.url="swf/soundmanager",soundManager.preferFlash=!0,soundManager.flashVersion=9,soundManager.flashLoadTimeout=0,soundManager.useFastPolling=!0,soundManager.useHighPerformance=!0,soundManager.beginDelayedInit()}),define("plex/control/utils/KeyboardNavigationManager",[],function(){var e=function(){this._views=[],this.currentActivationDirection=null,this.registerView=function(e){var t=_.indexOf(this._views,e);
return 0>t&&this._views.push(e),e},this.removeView=function(e){var t=_.indexOf(this._views,e);return t>-1&&this._views.splice(t,1),e},this.navigate=function(e){for(var t,n,i=0,a=this._views.length;a>i;i++){var s=this._views[i];if(s.$focusedItem&&s.focusView(e))return;e===s.keyboardActivationDirection?this.isOpposite(e)||(t=s):s.keyboardActivationDirection||(n=s)}return t&&t.focusView(e,!0)?(this.currentActivationDirection=e===t.keyboardActivationDirection?e:null,void 0):(n&&(n.focusView(e,!0),this.currentActivationDirection=null),void 0)
},this.isOpposite=function(e){return"right"===this.currentActivationDirection&&"left"===e||"left"===this.currentActivationDirection&&"right"===e||"down"===this.currentActivationDirection&&"up"===e||"up"===this.currentActivationDirection&&"down"===e?!0:!1},this.resetFocus=function(){for(var e=0,t=this._views.length;t>e;e++){var n=this._views[e];if(n.$focusedItem)return n.$focusedItem.blur(),n.resetFocus(),void 0}}};return new e}),define("hb!templates/modals/KeyboardShortcutsModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";
return s+='\n		<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">cmd <span class="keyboard-shortcut-bridge">+</span> ',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"click",a):h.call(e,"t","click",a)))+'</span></span><span class="keyboard-shortcut-label">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Select Item in Media List",a):h.call(e,"t","Select Item in Media List",a)))+"</span></p>\n	"}function r(e,t){var i,a,s="";return s+='\n		<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">ctrl <span class="keyboard-shortcut-bridge">+</span> ',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"click",a):h.call(e,"t","click",a)))+'</span></span><span class="keyboard-shortcut-label">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Select Item in Media List",a):h.call(e,"t","Select Item in Media List",a)))+"</span></p>\n	"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o,c,d="",h=n.helperMissing,u=this.escapeExpression,p=this;return d+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon keyboard-wireless"></i> ',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Keyboard Shortcuts",c):h.call(t,"t","Keyboard Shortcuts",c)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	<h3 class="keyboard-shortcut-header">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Navigation",c):h.call(t,"t","Navigation",c)))+'</h3>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">?</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Open Keyboard Shortcuts",c):h.call(t,"t","Open Keyboard Shortcuts",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">`</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Toggle Sidebar",c):h.call(t,"t","Toggle Sidebar",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">esc</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Navigate Back / Close Modal / Close Photo Viewer",c):h.call(t,"t","Navigate Back / Close Modal / Close Photo Viewer",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">g <span class="keyboard-shortcut-bridge">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"then",c):h.call(t,"t","then",c)))+'</span> h</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Navigate to Home",c):h.call(t,"t","Navigate to Home",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">g <span class="keyboard-shortcut-bridge">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"then",c):h.call(t,"t","then",c)))+'</span> s</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Navigate to Settings",c):h.call(t,"t","Navigate to Settings",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">g <span class="keyboard-shortcut-bridge">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"then",c):h.call(t,"t","then",c)))+'</span> a</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Navigate to Activity",c):h.call(t,"t","Navigate to Activity",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">g <span class="keyboard-shortcut-bridge">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"then",c):h.call(t,"t","then",c)))+'</span> d</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Navigate to Channel Directory",c):h.call(t,"t","Navigate to Channel Directory",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">g <span class="keyboard-shortcut-bridge">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"then",c):h.call(t,"t","then",c)))+'</span> c</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Navigate to My Channels",c):h.call(t,"t","Navigate to My Channels",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">g <span class="keyboard-shortcut-bridge">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"then",c):h.call(t,"t","then",c)))+'</span> f</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Navigate to Friends",c):h.call(t,"t","Navigate to Friends",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">g <span class="keyboard-shortcut-bridge">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"then",c):h.call(t,"t","then",c)))+'</span> r</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Navigate to Recommendations",c):h.call(t,"t","Navigate to Recommendations",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">g <span class="keyboard-shortcut-bridge">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"then",c):h.call(t,"t","then",c)))+'</span> q</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Navigate to Queue",c):h.call(t,"t","Navigate to Queue",c)))+'</span></p>\n\n	<h3 class="keyboard-shortcut-header">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Actions",c):h.call(t,"t","Actions",c)))+'</h3>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">p</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Play",c):h.call(t,"t","Play",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">/</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Focus Search",c):h.call(t,"t","Focus Search",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">+</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Add Section",c):h.call(t,"t","Add Section",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">e</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Edit Section / Edit Media",c):h.call(t,"t","Edit Section / Edit Media",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">shift <span class="keyboard-shortcut-bridge">+</span> s</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Save Settings / Save Media",c):h.call(t,"t","Save Settings / Save Media",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">r</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Refresh Section / Refresh Media",c):h.call(t,"t","Refresh Section / Refresh Media",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner"># <span class="keyboard-shortcut-bridge">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"or",c):h.call(t,"t","or",c)))+'</span> del</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Delete Section / Delete Media",c):h.call(t,"t","Delete Section / Delete Media",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">a</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Analyze Media",c):h.call(t,"t","Analyze Media",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">w</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Mark as Watched",c):h.call(t,"t","Mark as Watched",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">u</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Mark as Unwatched",c):h.call(t,"t","Mark as Unwatched",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">s</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Sync",c):h.call(t,"t","Sync",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">i</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Info",c):h.call(t,"t","Info",c)))+'</span></p>\n\n	<h3 class="keyboard-shortcut-header">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Player",c):h.call(t,"t","Player",c)))+'</h3>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">space</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Play / Pause",c):h.call(t,"t","Play / Pause",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">shift <span class="keyboard-shortcut-bridge">+</span> ',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"down",c):h.call(t,"t","down",c)))+'</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Decrease Volume",c):h.call(t,"t","Decrease Volume",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">shift <span class="keyboard-shortcut-bridge">+</span> ',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"up",c):h.call(t,"t","up",c)))+'</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Increase Volume",c):h.call(t,"t","Increase Volume",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">,</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Seek Backward (10 seconds)",c):h.call(t,"t","Seek Backward (10 seconds)",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">.</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Seek Forward (10 seconds)",c):h.call(t,"t","Seek Forward (10 seconds)",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">[</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Step Backward (10%)",c):h.call(t,"t","Step Backward (10%)",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">]</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Step Forward (10%)",c):h.call(t,"t","Step Forward (10%)",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">shift <span class="keyboard-shortcut-bridge">+</span> ',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"left",c):h.call(t,"t","left",c)))+'</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Skip to Previous Track / Photo",c):h.call(t,"t","Skip to Previous Track / Photo",c)))+'</span></p>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">shift <span class="keyboard-shortcut-bridge">+</span> ',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"right",c):h.call(t,"t","right",c)))+'</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Skip to Next Track / Photo",c):h.call(t,"t","Skip to Next Track / Photo",c)))+'</span></p>\n\n	<h3 class="keyboard-shortcut-header">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Clicks",c):h.call(t,"t","Clicks",c)))+'</h3>\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">alt <span class="keyboard-shortcut-bridge">+</span> ',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"click",c):h.call(t,"t","click",c)))+'</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Trigger Deep Scan of Section",c):h.call(t,"t","Trigger Deep Scan of Section",c)))+"</span></p>\n	",o=n["if"].call(t,t.mac,{hash:{},inverse:p.program(3,r,a),fn:p.program(1,s,a),data:a}),(o||0===o)&&(d+=o),d+='\n	<p><span class="keyboard-shortcut"><span class="keyboard-shortcut-inner">shift <span class="keyboard-shortcut-bridge">+</span> ',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"click",c):h.call(t,"t","click",c)))+'</span></span><span class="keyboard-shortcut-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Select Range of Items in Media List",c):h.call(t,"t","Select Range of Items in Media List",c)))+"</span></p>\n</div>\n"
})}),define("plex/view/BaseView",["plex/control/init/HandlebarsInit","backbone"],function(){var e=Backbone.View.extend({constructor:function(e){this._views=[],this._bindings=[],_.isFunction(this.postrender)&&(this.render=_.wrap(this.render,_.bind(function(e){var t=e.apply(this,_.toArray(arguments).slice(1));return _.defer(_.bind(function(){this.postrender()},this)),t},this))),_.isFunction(this.preinitialize)&&this.preinitialize(),Backbone.View.call(this,e),_.isFunction(this.postinitialize)&&this.postinitialize()
},registerView:function(t){if(t instanceof e!=!0)throw"Only views that extend BaseView can be registered.";return this._views.push(t),t},removeView:function(e){var t=_.indexOf(this._views,e);return e.destroy(),t>-1&&this._views.splice(t,1),e},removeAllViews:function(){for(var e=this._views.length-1;e>=0;e--)this.removeView(this._views[e])},addBinding:function(e,t,n){n=_.bind(n,this),e.on(t,n,this),this._bindings.push({target:e,event:t,callback:n})},removeBinding:function(e,t){for(var n=this._bindings.length;n--;){var i=this._bindings[n];
i.target===e&&i.event===t&&(e.off(t,i.callback),this._bindings.splice(n,1))}},removeAllBindings:function(){_.each(this._bindings,function(e){e.target.off(e.event,e.callback)}),this._bindings.length=0},bindView:function(){this.bindings&&_.each(_.keys(this.bindings),_.bind(function(e){var t=this.bindings[e],n=_.bind(function(n,i){var a=this.$(e);t.format&&(i=t.format.call(this,a,i),void 0===i)||(t.hideEmpty&&(i?a.removeClass("hide"):a.addClass("hide")),a.html(i))},this);n(this.model,this.model.get(t.modelAttr)),this.addBinding(this.model,"change:"+t.modelAttr,n)
},this))},refresh:function(){this.removeAllViews(),this.removeAllBindings(),this.initialize(),this.render()},destroy:function(){return this.undelegateEvents(),this.removeAllBindings(),this.removeAllViews(),this.remove(),this}});return e}),define("plex/view/KeyboardNavigationMixin",["plex/control/utils/KeyboardNavigationManager"],function(e){var t={$focusedItem:null,$restorableFocusedItem:null,defaultFocusedItem:null,keyboardBindings:null,keyboardContainer:null,keyboardActivationDirection:null,keyboardNavigationPaths:null,keyboardCancellationDirections:null,_focusableSelector:'[tabindex="0"]',preinitialize:function(){e.registerView(this),_.bindAll(this,"resetFocus")
},postinitialize:function(){var e='[tabindex="0"]';if(this.keyboardContainer&&!_.isArray(this.keyboardContainer)&&(this.keyboardContainer=[this.keyboardContainer]),this.keyboardContainer){var t=[];_.each(this.keyboardContainer,function(n){t.push(n+" "+e)}),this._focusableSelector=t.join(", ")}this.$el.on("blur",this._focusableSelector,this.resetFocus)},postrender:function(){var e="undefined"!=typeof PLEXWEB&&PLEXWEB.autoFocus===!0;e&&!this.keyboardActivationDirection&&this.focusView()},focusElement:function(e){return e.hasClass("input-focusable")&&e.addClass("keyboard-focus"),e.focus()
},focusView:function(e,t){if(e&&this.keyboardBindings){var n=_.keys(this.keyboardBindings);if(_.indexOf(n,e)>-1){var i=this.keyboardBindings[e],a=this.$(i);if(a.length)return this.$focusedItem=this.focusElement(a),this.$restorableFocusedItem=a,!0}}var s=this.getFocusableItems();if(!s.length)return!1;if(t||!this.$focusedItem)return this.$focusedItem=this.focusFirstElement(s),!0;if(this.keyboardCancellationDirections){if(e===this.keyboardCancellationDirections)return!1;if(_.isArray(this.keyboardCancellationDirections)){if(_.indexOf(this.keyboardCancellationDirections,e)>-1)return!1
}else if(_.isObject(this.keyboardCancellationDirections))for(var r=_.keys(this.keyboardCancellationDirections),l=0,o=r.length;o>l;l++){var c=r[l];if(e===c){var d=this.keyboardCancellationDirections[c];if(this.$focusedItem.is(d))return!1;break}}}if(this.keyboardNavigationPaths&&_.isObject(this.keyboardNavigationPaths))for(var h=_.keys(this.keyboardNavigationPaths),u=0,p=h.length;p>u;u++){var m=h[u];if(this.$focusedItem.is(m)){for(var f=this.keyboardNavigationPaths[m],v=_.keys(f),g=0,y=v.length;y>g;g++){var b=v[g];
if(e===b){var w=this.$(f[e]);if(w=this.focusFirstElement(w))return this.$focusedItem=w,this.$restorableFocusedItem=this.$focusedItem,!0;break}}break}}return"down"===e||"right"===e?(this.$focusedItem=this.focusNextElement(s,e),this.$focusedItem?(this.$restorableFocusedItem=this.$focusedItem,!0):!1):"up"===e||"left"===e?(this.$focusedItem=this.focusPreviousElement(s,e),this.$focusedItem?(this.$restorableFocusedItem=this.$focusedItem,!0):!1):!1},getFocusableItems:function(){var e,t=this._focusableSelector.split(", "),n=[];
return _.each(t,function(e){n.push(e+":visible")}),e=n.join(", "),this.$(e)},focusFirstElement:function(e){if(this.$restorableFocusedItem&&e.index(this.$restorableFocusedItem)>-1)return this.focusElement(this.$restorableFocusedItem);if(this.defaultFocusedItem){var t=this.$(this.defaultFocusedItem);if(t.length)return this.focusElement(t.first())}return this.focusElement(e.first())},focusNextElement:function(e,t){var n=this.getNextFocusableIndex(e,t);return n>0&&e.length>n?this.focusElement(e.eq(n)):this.modal?this.focusElement(e.first()):void 0
},getNextFocusableIndex:function(e){return e.index(this.$focusedItem)+1},focusPreviousElement:function(e,t){var n=this.getPreviousFocusableIndex(e,t);return n>-1?this.focusElement(e.eq(n)):this.modal?this.focusElement(e.last()):void 0},getPreviousFocusableIndex:function(e){return e.index(this.$focusedItem)-1},resetGlobalFocus:function(){e.resetFocus()},resetFocus:function(){this.$focusedItem=null},destroy:function(){this.$el.off("blur",this._focusableSelector,this.resetFocus)}};return t}),define("plex/view/KeyboardNavigationView",["plex/control/utils/KeyboardNavigationManager","plex/view/BaseView","plex/view/KeyboardNavigationMixin"],function(e,t,n){var i=t.extend(n),a=i.extend({destroy:function(){e.removeView(this),n.destroy.call(this),t.prototype.destroy.call(this)
}});return a}),define("plex/view/modals/BaseModal",["plex/control/Dispatcher","plex/view/KeyboardNavigationView"],function(e,t){var n=t.extend({modal:!0,defaultFocusedItem:".btn-primary",preinitialize:function(){this.addBinding(e,"shortcut:escape",function(){}),t.prototype.preinitialize.call(this)},postinitialize:function(){this.$el.on("mousedown","a",this.onLinkMouseDown),"undefined"!=typeof PLEXWEB&&PLEXWEB.animations===!1&&this.$el.removeClass("fade"),t.prototype.postinitialize.call(this)},destroy:function(){this.$el.off("mousedown","a",this.onLinkMouseDown),t.prototype.destroy.call(this)
},close:function(){e.trigger("destroy:modal",this)},onLinkMouseDown:function(e){e.preventDefault()}});return n}),define("plex/view/modals/KeyboardShortcutsModal",["hb!templates/modals/KeyboardShortcutsModal.tpl","plex/view/modals/BaseModal"],function(e,t){var n=t.extend({name:"keyboardShortcutsModal",className:"modal keyboard-shortcuts-modal fade",events:{hidden:"close"},render:function(){return this.$el.html(e({mac:navigator.appVersion.indexOf("Mac")>-1})).modal(),this}});return n}),function(){function e(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),void 0):(e.attachEvent("on"+t,n),void 0)
}function t(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return y[e.which]?y[e.which]:b[e.which]?b[e.which]:String.fromCharCode(e.which).toLowerCase()}function n(e,t){return e.sort().join(",")===t.sort().join(",")}function i(e,t){e=e||{};var n,i=!1;for(n in C)e[n]&&C[n]>t?i=!0:C[n]=0;i||(I=!1)}function a(e,t,i,a,s){var r,l,o=[],d=i.type;if(!k[e])return[];for("keyup"==d&&c(e)&&(t=[e]),r=0;k[e].length>r;++r)l=k[e][r],l.seq&&C[l.seq]!=l.level||d==l.action&&("keypress"==d&&!i.metaKey&&!i.ctrlKey||n(t,l.modifiers))&&(a&&l.combo==s&&k[e].splice(r,1),o.push(l));
return o}function s(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function r(e,t,n){_.stopCallback(t,t.target||t.srcElement,n)||e(t,n)===!1&&(t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.returnValue=!1,t.cancelBubble=!0)}function l(e,t,n){var s,l=a(e,t,n),o={},d=0,h=!1;for(s=0;l.length>s;++s)l[s].seq?(h=!0,d=Math.max(d,l[s].level),o[l[s].seq]=1,r(l[s].callback,n,l[s].combo)):h||I||r(l[s].callback,n,l[s].combo);
n.type!=I||c(e)||i(o,d)}function o(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=t(e);if(n)return"keyup"==e.type&&A==n?(A=!1,void 0):(_.handleKey(n,s(e),e),void 0)}function c(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function d(){clearTimeout(g),g=setTimeout(i,1e3)}function h(){if(!v){v={};for(var e in y)e>95&&112>e||y.hasOwnProperty(e)&&(v[y[e]]=e)}return v}function u(e,t,n){return n||(n=h()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function p(e,n,a,s){C[e]=0,s||(s=u(n[0],[]));
var l,o=function(){I=s,++C[e],d()},c=function(n){r(a,n,e),"keyup"!==s&&(A=t(n)),setTimeout(i,10)};for(l=0;n.length>l;++l)m(n[l],n.length-1>l?o:c,s,e,l)}function m(e,t,n,i,s){S[e+":"+n]=t,e=e.replace(/\s+/g," ");var r,l,o,d=e.split(" "),h=[];if(d.length>1)return p(e,d,t,n),void 0;for(o="+"===e?["+"]:e.split("+"),r=0;o.length>r;++r)l=o[r],x[l]&&(l=x[l]),n&&"keypress"!=n&&w[l]&&(l=w[l],h.push("shift")),c(l)&&h.push(l);n=u(l,h,n),k[l]||(k[l]=[]),a(l,h,{type:n},!i,e),k[l][i?"unshift":"push"]({callback:t,modifiers:h,action:n,seq:i,level:s,combo:e})
}function f(e,t,n){for(var i=0;e.length>i;++i)m(e[i],t,n)}for(var v,g,y={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},b={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},w={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},x={option:"alt",command:"meta","return":"enter",escape:"esc"},k={},S={},C={},A=!1,I=!1,P=1;20>P;++P)y[111+P]="f"+P;
for(P=0;9>=P;++P)y[P+96]=P;e(document,"keypress",o),e(document,"keydown",o),e(document,"keyup",o);var _={bind:function(e,t,n){return e=e instanceof Array?e:[e],f(e,t,n),this},unbind:function(e,t){return _.bind(e,function(){},t)},trigger:function(e,t){return S[e+":"+t]&&S[e+":"+t]({},e),this},reset:function(){return k={},S={},this},stopCallback:function(e,t){return(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.contentEditable&&"true"==t.contentEditable
},handleKey:l};window.Mousetrap=_,"function"==typeof define&&define.amd&&define("mousetrap",_)}(),define("plex/control/init/KeyboardInit",["plex/control/Dispatcher","plex/control/utils/KeyboardNavigationManager","plex/model/AppModel","plex/model/SettingsModel","plex/view/modals/KeyboardShortcutsModal","mousetrap"],function(e,t,n,i,a){var s=function(){_.each(_.keys(this.shortcuts),_.bind(function(e){var t=this.shortcuts[e];/.+,.+/.test(e)&&(e=e.split(",")),Mousetrap.bind(e,_.wrap(this[t],this.wrapper))
},this))};return s.prototype.shortcuts={"?":"help",up:"up",down:"down",left:"left",right:"right",esc:"escape","`":"sidebar","g h":"dashboard","g s":"settings","g f":"friends","g r":"recommendations","g q":"queue","g c":"channels","g d":"directory","g a":"activity","/":"search",e:"edit","shift+s":"save",r:"refresh",a:"analyze",w:"markWatched",u:"markUnwatched",s:"sync",i:"info",p:"play","+":"addSection","#,del":"deleteItem",space:"playPause","shift+down":"decreaseVolume","shift+up":"increaseVolume",",":"seekBackward",".":"seekForward","[":"stepBackward","]":"stepForward","shift+left":"skipBackward","shift+right":"skipForward"},s.prototype.wrapper=function(e){return i.get("keyboardShortcuts")?e.apply(this,_.toArray(arguments).slice(1)):void 0
},s.prototype.help=function(){n.set("modal",new a)},s.prototype.up=function(){return t.navigate("up"),!1},s.prototype.down=function(){return t.navigate("down"),!1},s.prototype.left=function(){return t.navigate("left"),!1},s.prototype.right=function(){return t.navigate("right"),!1},s.prototype.escape=function(){e._callbacks["shortcut:escape"]?e.trigger("shortcut:escape"):e.trigger("navigate:back")},s.prototype.sidebar=function(){e.trigger("shortcut:sidebar")},s.prototype.dashboard=function(){e.trigger("navigate:dashboard")
},s.prototype.settings=function(){e.trigger("navigate:settings")},s.prototype.friends=function(){e.trigger("navigate:friends")},s.prototype.recommendations=function(){e.trigger("navigate:playlist","recommendations")},s.prototype.queue=function(){e.trigger("navigate:playlist","queue")},s.prototype.channels=function(){e.trigger("navigate:myChannels")},s.prototype.directory=function(){e.trigger("navigate:directory")},s.prototype.activity=function(){e.trigger("navigate:notifications")},s.prototype.search=function(){return e.trigger("shortcut:search"),!1
},s.prototype.edit=function(){e.trigger("shortcut:edit")},s.prototype.save=function(){e.trigger("shortcut:save")},s.prototype.refresh=function(){e.trigger("shortcut:refresh")},s.prototype.analyze=function(){e.trigger("shortcut:analyze")},s.prototype.markWatched=function(){e.trigger("shortcut:markWatched")},s.prototype.markUnwatched=function(){e.trigger("shortcut:markUnwatched")},s.prototype.sync=function(){e.trigger("shortcut:sync")},s.prototype.info=function(){e.trigger("shortcut:info")},s.prototype.play=function(){e.trigger("shortcut:play")
},s.prototype.addSection=function(){e.trigger("command:AddSection",!0)},s.prototype.deleteItem=function(){e.trigger("shortcut:deleteItem")},s.prototype.playPause=function(){return e.trigger("shortcut:playPause"),!1},s.prototype.increaseVolume=function(){e.trigger("shortcut:increaseVolume")},s.prototype.decreaseVolume=function(){e.trigger("shortcut:decreaseVolume")},s.prototype.seekBackward=function(){e.trigger("shortcut:seekBackward")},s.prototype.seekForward=function(){e.trigger("shortcut:seekForward")
},s.prototype.stepBackward=function(){e.trigger("shortcut:stepBackward")},s.prototype.stepForward=function(){e.trigger("shortcut:stepForward")},s.prototype.skipBackward=function(){e.trigger("shortcut:skipBackward")},s.prototype.skipForward=function(){e.trigger("shortcut:skipForward")},new s}),define("plex/control/commands/init/StartInitCommand",["plex/control/Dispatcher","plex/model/AppModel","plex/model/collections/ServerCollection"],function(e,t,n){function i(i){function a(){e.trigger("command:FinishInit",u)
}function s(t){e.trigger("command:GetAllServers",a,t)}function r(t){e.trigger("command:GetPrimaryServer",s,t)}i=i||{};var l=i.silent,o=i.noRedirect,c=t.get("myPlex"),d=new n([],{app:t,remote:!0});d.url=c.resolveUrl("/pms/servers");var h={silent:l,requireToken:!1,remoteServers:d};if(t.set({isUnsupported:!1,isUnavailable:!1,isAuthorized:!1}),c.set("isUnavailable",!1),l||e.trigger("command:ShowLoading",!0),!window.JSON||!window.JSON.parse)return t.set("isUnsupported",!0),e.trigger("command:FinishInit"),void 0;
var u=function(){l||e.trigger("command:ShowLoading",!1),t.get("initialized")&&!o?e.trigger("navigate:dashboard"):t.set("initialized",!0),i.success&&i.success()};e.trigger("command:GetMyPlex",r,h)}e.on("command:StartInit",i)}),define("plex/control/commands/init/GetMyPlexCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function n(e,n){var i=t.get("primaryServer"),a=t.get("myPlex"),s=i.fetch({hideLoadingAlert:!0}).pipe(function(){return t.set("isAuthorized",!0),a.fetch()},function(){return n.requireToken=!0,a.fetch()
});n.myPlexDeferred=s,e(n)}e.on("command:GetMyPlex",n)}),define("plex/control/commands/init/GetPrimaryServerCommand",["plex/control/Dispatcher","plex/model/AppModel","jquery"],function(e,t,n){function i(e,i){var a=t.get("primaryServer"),s=t.get("myPlex"),r=t.get("servers"),l={hideLoadingAlert:!0},o=i.myPlexDeferred.pipe(function(){var e=s.get("authToken");if(i.requireToken){if(a.set("remote",!0),e){var o=i.remoteServers.fetch(l).pipe(function(){return n.ajax(a.getAjaxOptions("/identity"))}),c=o.pipe(function(e){var t=n.xml2json(e)||e,r=s.get("authToken"),o=i.remoteServers.get(t.machineIdentifier);
if(o){var c=o.get("accessToken");c&&(r=c)}return a.set("accessToken",r),a.fetch(l)},function(){var e=s.get("authToken"),t=i.remoteServers.where({address:window.location.hostname,port:window.location.port});if(t&&t.length){var n=t[0].get("accessToken");n&&(e=n)}return a.set("accessToken",e),a.fetch(l)});return c.pipe(function(){var e=i.remoteServers.get(a.id);return t.set("isAuthorized",!0),e&&e.get("shared")?(a.set("shared",!0),r.populatePromise=i.remoteServers.populatePromise,void 0):r.fetch(l)})
}return n.Deferred().reject()}return a.set("remote",!1),e?i.remoteServers.fetch(l).pipe(function(){return r.fetch(l)},function(){return r.fetch(l)}):r.fetch(l)},function(e){return i.requireToken?(422!==e.status&&("abort"===e.statusText?s.set("isUnavailable",!0):t.set("isUnsupported",!0)),n.Deferred().reject()):r.fetch(l)});i.primaryServerDeferred=o,e(i)}e.on("command:GetPrimaryServer",i)}),define("plex/control/commands/init/GetAllServersCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function n(n,i){t.get("primaryServer");
var a=t.get("myPlex"),s=t.get("servers");i.primaryServerDeferred.pipe(function(){var r=0;if(t.set("multiServer",!1),i.remoteServers.length){var l=i.remoteServers.reject(function(e){var t=s.get(e.id);return e.get("accessToken")||e.set("accessToken",a.get("authToken")),t});s.add(l)}s.each(function(n){if("myPlex"===n.id)n.set("serverClass","secondary");else{var i=function(e,i){e!==n.url()&&n.set("remote",!0),n.serverUrl=e,n.set(i),n.set("isAvailable",!0),n.get("shared")||(r++,r>1&&t.set("multiServer",!0))
},a=function(e){e.done(i)};e.trigger("command:TestServerConnection",n,a)}}),n(i)},function(){t.set("isUnavailable",!0),n(i)})}e.on("command:GetAllServers",n)}),define("plex/control/commands/init/TestServerConnectionCommand",["plex/control/Dispatcher","jquery"],function(e,t){function n(e,n){function i(e,t){r.resolve(e,t),o=!0,delete l[e];for(var n in l)l[n].abort()}function a(e){delete l[e],!o&&t.isEmptyObject(l)&&r.reject()}function s(n){l[n]=t.ajax({type:"GET",url:n,headers:e.getHeaders(),timeout:1e4,dataType:"text",success:function(s){var r=e.parse(s);
t.isEmptyObject(r)?a(n):i(n,r)},error:function(){a(n)}})}var r=t.Deferred(),l={},o=!1;e.get("address"),e.get("port");var c=e.get("remoteAddress"),d=e.get("remotePort"),h=[e.url()];if(c&&d){var u=e.url({address:c,port:d});-1===_.indexOf(h,u)&&h.push(u)}_.each(h,function(e){s(e)}),n(r.promise())}e.on("command:TestServerConnection",n)}),define("hb!templates/modals/AgreementModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="modal-header">\n	<h3><i class="glyphicon notes"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"End User License Agreement",r):o.call(t,"t","End User License Agreement",r)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	',r={hash:{},data:a},l+=c((s=n.partial,s?s.call(t,"EULA",r):o.call(t,"partial","EULA",r)))+'\n</div>\n\n<div class="modal-footer">\n	<button type="button" class="btn btn-primary agree-btn">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Agree",r):o.call(t,"t","Agree",r)))+"</button>\n</div>\n"
})}),define("plex/view/modals/AgreementModal",["hb!templates/modals/AgreementModal.tpl","plex/control/Dispatcher","plex/view/modals/BaseModal"],function(e,t,n){var i=n.extend({name:"agreementModal",className:"modal agreement-modal fade",events:{hidden:"close","click .agree-btn":"onAgreeClick"},render:function(){return this.$el.html(e()).modal({backdrop:"static",keyboard:!1}),this},onAgreeClick:function(e){e.preventDefault(),this.collection.first().save({AcceptedEULA:!0}),this.$el.modal("hide"),t.trigger("navigate:setup")
}});return i}),define("plex/control/commands/init/FinishInitCommand",["plex/control/Dispatcher","plex/model/AppModel","plex/view/modals/AgreementModal"],function(e,t,n){function i(e){var i=t.get("primaryServer"),a=t.get("myPlex"),s=i.get("shared"),r={hideLoadingAlert:!0};if(!s||s&&i.supports("sharedPreferences")){var l,o=i.get("preferences");l=o.populatePromise&&"resolved"===o.populatePromise.state()?o.populate(r):o.fetch(r),l.done(function(){if(!s){var e=o.get("AcceptedEULA");e!==void 0&&e.get("value")===!1&&t.set("modal",new n({collection:o}))
}var i=o.get("collectUsageData");i!==void 0&&i.get("value")===!0&&"undefined"!=typeof _galoader&&_galoader.load()})}a.get("signedIn")&&(a.get("friends").fetch(r),a.get("friendRequests").fetch(r),a.get("socialNetworks").fetch(r),a.get("devices").fetch(r)),e()}e.on("command:FinishInit",i)}),define("plex/control/commands/ShowLoadingCommand",["plex/control/Dispatcher","plex/model/AppModel"],function(e,t){function n(e){0>i&&(i=0),e===!0?(0===i&&t.set({loading:!0}),i++):(i--,0===i&&t.set({loading:!1}))
}var i=0;e.on("command:ShowLoading",n)}),define("plex/model/UpdateHistoryModel",["plex/model/BaseModel","jquery","moment"],function(e,t){var n=e.extend({whitelistedAttrs:["name","summary","time"],convert:function(e){var n=_.isObject(e)?e:t.xml2json(e);return n.time=moment(n.subtitle,"YYYY-MM-DD HH:mm:ss").toDate(),n},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs)}});return n}),define("plex/model/collections/UpdateHistoryCollection",["plex/model/collections/BaseCollection","plex/model/UpdateHistoryModel","jquery"],function(e,t){var n=e.extend({model:t,url:"/system/appstore/history",initialize:function(e,t){this.server=t.server
},parse:function(e){return this.convert(e,"Directory")}});return n}),define("plex/control/commands/CheckForUpdatesCommand",["plex/control/Dispatcher","plex/model/AppModel","plex/model/collections/UpdateHistoryCollection","jquery","xml2json"],function(e,t,n,i){function a(){var n="/system/appstore/updates",a=t.get("primaryServer");return e.trigger("command:ShowLoading",!0),i.ajax(a.getAjaxOptions(n)).always(function(){e.trigger("command:ShowLoading",!1)}).done(function(e){var n=i.xml2json(e)||e;if(n.Directory){var a=n.Directory[0].summary.split("\n");
_.indexOf(a,"WebClient")>=0?t.set("updateStatus","download"):t.set("updateStatus","latest")}else t.set("updateStatus","latest")})}function s(){var e=new n([],{server:t.get("primaryServer")}),i={"X-Plex-Container-Start":"0","X-Plex-Container-Size":l?"40":"1"};e.on("reset",function(e){if(0!==e.length)if(l){var n=e.where({name:"WebClient"});n.length>0&&n[0].get("time")>l&&t.set("updateStatus","reload")}else l=e.first().get("time")}),e.fetch({headers:i,hideLoadingAlert:!0})}function r(e){"download"!=t.get("updateStatus")&&(t.get("primaryServer").get("shared")||(e?a().done(s):s()))
}var l=null;e.on("command:CheckForUpdates",r)}),define("plex/control/commands/InstallUpdateCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery"],function(e,t,n,i){function a(){var a=n.get("primaryServer"),s="/system/appstore/apps/com.plexapp.plugins.webclient/update";e.trigger("command:ShowLoading",!0),i.ajax(a.getAjaxOptions(s)).always(function(){e.trigger("command:ShowLoading",!1)}).done(function(){window.location.reload(!0)}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem installing the update.")})
})}e.on("command:InstallUpdate",a)}),define("plex/control/commands/SignOutCommand",["plex/control/Dispatcher"],function(e){function t(){window.sessionStorage&&window.sessionStorage.clear(),window.localStorage&&window.localStorage.removeItem("myPlexAuthToken"),window.location.reload(!0)}e.on("command:SignOut",t)}),define("plex/control/commands/myplex/SignInCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery","xml2json"],function(e,t,n){function i(i){n.get("myPlex").signIn(i.username,i.password,i.rememberMe).done(function(){e.trigger("command:StartInit",i)
}).fail(function(e){var a=t.t("There was a problem signing in to myPlex.");401===e.status&&(a=t.t("The username or password is incorrect.")),n.set("alert",{status:"error",message:a}),i.error&&i.error()})}e.on("command:SignIn",i)}),define("plex/control/commands/myplex/PublishServerCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel"],function(e,t,n){function i(e){var i=e.server.get("preferences"),a=i.get("PublishServerOnPlexOnlineKey");a.save({PublishServerOnPlexOnlineKey:e.value},{hideLoadingAlert:!0}).done(function(){e.success&&e.success()
}).fail(function(){var i=t.t("There was a problem connecting your server.");e.value||(i=t.t("There was a problem disconnecting your server.")),n.set("alert",{status:"error",message:i}),e.error&&e.error()})}e.on("command:PublishServer",i)}),define("plex/control/commands/myplex/ServerSignInCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery","xml2json"],function(e,t,n,i){function a(e){var a=e.account;a.signedIn=!0,a.set({username:"",password:""}),a.save(e.attributes,{hideLoadingAlert:!0}).done(function(a){var s=i.xml2json(a)||a;
s&&"invalid"===s.signInState?n.set("alert",{status:"error",message:t.t("The username or password is incorrect.")}):e.success&&e.success()}).fail(function(i){this.signedIn=!1;var a=t.t("There was a problem signing in to myPlex.");401===i.status&&(a=t.t("The username or password is incorrect.")),n.set("alert",{status:"error",message:a}),e.error&&e.error()})}e.on("command:ServerSignIn",a)}),define("plex/control/commands/myplex/ServerSignOutCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel"],function(e,t,n){function i(e){e.account.destroy({hideLoadingAlert:!0}).done(function(){e.success&&e.success()
}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem signing out of myPlex.")}),e.error&&e.error()})}e.on("command:ServerSignOut",i)}),define("plex/control/commands/myplex/ServerSignUpCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery","xml2json"],function(e,t,n,i){function a(e){var a=e.account;a.signedIn=!1,a.set({username:"",email:"",password:""}),a.save(e.attributes,{hideLoadingAlert:!0}).done(function(a){var s=i.xml2json(a)||a;
if(s&&"invalid"===s.signInState){var r=t.t("The username or password is invalid.");s.Error&&(_.isArray(s.Error)||(s.Error=[s.Error]),r="<ul>",_.each(s.Error,function(e){r+="<li>"+e.error+"</li>"}),r+="</ul>"),n.set("alert",{status:"error",message:r}),e.error&&e.error()}else e.success&&e.success()}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem signing up for a myPlex account.")}),e.error&&e.error()})}e.on("command:ServerSignUp",a)}),define("plex/control/commands/myplex/ShareCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery"],function(e,t,n,i){function a(a,s,r,l,o){var c=n.get("myPlex"),d=a.get("url");
if(!d)return n.set("alert",{status:"error",message:t.t("This media item does not have a valid url.")}),void 0;var h=[],u={url:d,message:r};e.trigger("command:ShowLoading",!0),_.each(s,function(e){var t="/pms/social/networks/"+e+"/share?"+i.param(u),n=_.extend({type:"POST"},c.getAjaxOptions(t));h.push(i.ajax(n))}),i.when.apply(i,h).always(function(){e.trigger("command:ShowLoading",!1)}).done(l).fail(function(){o(),n.set("alert",{status:"error",message:t.t("There was a problem sharing this media item.")})
})}e.on("command:Share",a)}),define("plex/control/commands/myplex/RecommendCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery"],function(e,t,n,i){function a(a,s,r,l,o){var c=n.get("myPlex"),d=a.get("url");if(!d)return n.set("alert",{status:"error",message:t.t("This media item does not have a valid url.")}),void 0;var h=[],u={url:d,message:r};e.trigger("command:ShowLoading",!0),_.each(s,function(e){var t="/pms/playlists/"+e+"/items?"+i.param(u),n=_.extend({type:"POST"},c.getAjaxOptions(t));
h.push(i.ajax(n))}),i.when.apply(i,h).always(function(){e.trigger("command:ShowLoading",!1)}).done(l).fail(function(){o(),n.set("alert",{status:"error",message:t.t("There was a problem recommending this media item.")})})}e.on("command:Recommend",a)}),define("plex/control/commands/library/StartLibraryScanCommand",["plex/control/Dispatcher","jquery"],function(e,t){function n(e,n,i){n=n?n.id:"all",i||(i={});var a={};i.force&&(a.force=1),i.turbo&&(a.turbo=1),i.deep&&(a.deep=1);var s="/library/sections/"+n+"/refresh",r=_.extend({data:a},e.getAjaxOptions(s));
t.ajax(r)}e.on("command:StartLibraryScan",n)}),define("plex/control/commands/library/StopLibraryScanCommand",["plex/control/Dispatcher","jquery"],function(e,t){function n(e,n){n=n?n.id:"all";var i="/library/sections/"+n+"/refresh",a=_.extend({type:"DELETE"},e.getAjaxOptions(i));t.ajax(a)}e.on("command:StopLibraryScan",n)}),define("plex/control/commands/library/StartMediaAnalysisCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery"],function(e,t,n,i){function a(e,a){var s="/library/sections/"+a.id+"/analyze",r=_.extend({type:"PUT"},e.getAjaxOptions(s));
i.ajax(r).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem trying to start media analysis in {1}.",a.get("title"))})})}e.on("command:StartMediaAnalysis",a)}),define("plex/control/commands/library/OptimizeLibraryCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery"],function(e,t,n,i){function a(a,s){var r=a.get("friendlyName")||a.get("name"),l="/library/optimize",o=_.extend({type:"PUT"},a.getAjaxOptions(l));e.trigger("command:ShowLoading",!0),i.ajax(o).always(function(){e.trigger("command:ShowLoading",!1),s&&s()
}).done(function(){n.set("alert",{status:"success",message:t.t("The database for {1} was optimized.",r)})}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem optimizing the database for {1}.",r)})})}e.on("command:OptimizeLibrary",a)}),define("plex/control/commands/library/CleanBundlesCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery"],function(e,t,n,i){function a(a,s){var r=a.get("friendlyName")||a.get("name"),l="/library/clean/bundles",o=_.extend({type:"PUT"},a.getAjaxOptions(l));
e.trigger("command:ShowLoading",!0),i.ajax(o).always(function(){e.trigger("command:ShowLoading",!1),s&&s()}).done(function(){n.set("alert",{status:"success",message:t.t("Unused bundles for {1} are being removed.",r)})}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem removing unused bundles for {1}.",r)})})}e.on("command:CleanBundles",a)}),define("plex/control/commands/library/EmptyTrashCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery"],function(e,t,n,i){function a(e,a,s){var r="/library/sections/"+a.id+"/emptyTrash",l=_.extend({type:"PUT"},e.getAjaxOptions(r));
i.ajax(l).done(function(){return s?(s(),void 0):(n.set("alert",{status:"success",message:t.t("The trash for {1} was emptied.",a.get("title"))}),void 0)}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem emptying the trash for {1}.",a.get("title"))})})}e.on("command:EmptyTrash",a)}),define("hb!templates/modals/SelectServerModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a="";return a+="\n			",i=n.unless.call(e,e.shared,{hash:{},inverse:v.noop,fn:v.program(2,r,t),data:t}),(i||0===i)&&(a+=i),a+="\n		"
}function r(e,t){var i,a,s;return s={hash:{},inverse:v.noop,fn:v.program(3,l,t),data:t},i=n.if_neq,a=i?i.call(e,e.serverClass,"secondary",s):f.call(e,"if_neq",e.serverClass,"secondary",s),a||0===a?a:""}function l(e,t){var i;return i=n["if"].call(e,e.isAvailable,{hash:{},inverse:v.noop,fn:v.program(4,o,t),data:t}),i||0===i?i:""}function o(e,t){var i,a,s="";return s+='\n				<li><a class="server" data-id="',(i=n.machineIdentifier)?i=i.call(e,{hash:{},data:t}):(i=e.machineIdentifier,i=typeof i===p?i.apply(e):i),s+=m(i)+'" href="#">',a={hash:{},data:t},s+=m((i=n.truncate,i?i.call(e,e.name,20,a):f.call(e,"truncate",e.name,20,a)))+"</a></li>\n			"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d,h,u="",p="function",m=this.escapeExpression,f=n.helperMissing,v=this;return u+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3>',h={hash:{},data:a},u+=m((c=n.t,c?c.call(t,"Select a Media Server",h):f.call(t,"t","Select a Media Server",h)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	<ul class="select-list">\n		',d=n.each.call(t,t.servers,{hash:{},inverse:v.noop,fn:v.program(1,s,a),data:a}),(d||0===d)&&(u+=d),u+="\n	</ul>\n</div>\n"
})}),define("plex/view/modals/SelectServerModal",["hb!templates/modals/SelectServerModal.tpl","plex/view/modals/BaseModal","jquery"],function(e,t,n){var i=t.extend({name:"selectServerModal",className:"modal modal-small select-modal fade",events:{hidden:"close","click .server":"onServerClick"},render:function(){return this.$el.html(e({servers:this.collection.toJSON()})).modal(),this},onServerClick:function(e){e.preventDefault(),this.$el.modal("hide"),this.trigger("select:server",n(e.target).data("id"))
}});return i}),define("hb!templates/modals/EditSectionModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n	<h3><i class="glyphicon-plus"></i> ',a={hash:{},data:t},s+=y((i=n.t,i?i.call(e,"Add Section",a):g.call(e,"t","Add Section",a)))+"</h3>\n	"}function r(e,t){var i,a,s="";return s+='\n	<h3><i class="glyphicon pencil"></i> ',a={hash:{},data:t},s+=y((i=n.t,i?i.call(e,"Edit Section",a):g.call(e,"t","Edit Section",a)))+"</h3>\n	"}function l(e,t){var i,a,s,r="";
return r+='\n		<div class="add-section-type">\n			<h4>',s={hash:{},data:t},r+=y((i=n.t,i?i.call(e,"Select the type of media",s):g.call(e,"t","Select the type of media",s)))+"</h3>\n			",a=n.each.call(e,e.sectionTypes,{hash:{},inverse:w.noop,fn:w.program(6,o,t),data:t}),(a||0===a)&&(r+=a),r+="\n		</div>\n		"}function o(e,t){var i,a,s="";return s+='\n				<a class="section-type" data-key="',(i=n.key)?i=i.call(e,{hash:{},data:t}):(i=e.key,i=typeof i===b?i.apply(e):i),s+=y(i)+'" href="#">\n					<i class="plex-icon-',(i=n.key)?i=i.call(e,{hash:{},data:t}):(i=e.key,i=typeof i===b?i.apply(e):i),s+=y(i)+'-medium"></i>\n					<span class="section-type-label">',a={hash:{},data:t},s+=y((i=n.t,i?i.call(e,e.label,a):g.call(e,"t",e.label,a)))+"</span>\n				</a>\n			"
}function c(){return" hide"}function d(e,t){var i,a,s="";return s+="\n							",a={hash:{},data:t},s+=y((i=n.t,i?i.call(e,"Add folders where your {1} is located",e.sectionType,a):g.call(e,"t","Add folders where your {1} is located",e.sectionType,a)))+"\n						"}function h(e,t){var i,a,s="";return s+="\n							",a={hash:{},data:t},s+=y((i=n.t,i?i.call(e,"Add folders where your {1} are located",e.sectionType,a):g.call(e,"t","Add folders where your {1} are located",e.sectionType,a)))+"\n						"}function u(e,t){var i,a,s="";
return s+="\n							",a={hash:{value:e},data:t},s+=y((i=n.partial,i?i.call(e,"sectionPathInput",a):g.call(e,"partial","sectionPathInput",a)))+"\n						"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var p,m,f,v="",g=n.helperMissing,y=this.escapeExpression,b="function",w=this;return v+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	',p=n["if"].call(t,t.add,{hash:{},inverse:w.program(3,r,a),fn:w.program(1,s,a),data:a}),(p||0===p)&&(v+=p),v+='\n</div>\n\n<form class="modal-form add-section-form">\n	<div class="modal-body minimal-light-scrollbar">\n		',p=n["if"].call(t,t.add,{hash:{},inverse:w.noop,fn:w.program(5,l,a),data:a}),(p||0===p)&&(v+=p),v+='\n\n		<div class="add-section-details',p=n["if"].call(t,t.add,{hash:{},inverse:w.noop,fn:w.program(8,c,a),data:a}),(p||0===p)&&(v+=p),v+='">\n			<div class="row-fluid">\n				<div class="name-group control-group">\n					<span class="help-inline hide">',f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"A section name is required.",f):g.call(t,"t","A section name is required.",f)))+"</span>\n					<label>",f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"Name",f):g.call(t,"t","Name",f)))+'</label>\n					<input type="text" name="name" class="span12" value="'+y((p=t.section,p=null==p||p===!1?p:p.title,typeof p===b?p.apply(t):p))+'">\n				</div>\n			</div>\n\n			<div class="row-fluid">\n				<div class="folder-group control-group">\n					<label>\n						',f={hash:{},inverse:w.program(12,h,a),fn:w.program(10,d,a),data:a},p=n.if_eq,m=p?p.call(t,t.sectionType,"music",f):g.call(t,"if_eq",t.sectionType,"music",f),(m||0===m)&&(v+=m),v+='\n					</label>\n\n					<p class="help-block">',f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"Help us out by following <a href='{1}' target='_blank'>our guide</a> to naming and organizing your media.","http://wiki.plexapp.com/index.php/Media_Naming_and_Organization_Guide",f):g.call(t,"t","Help us out by following <a href='{1}' target='_blank'>our guide</a> to naming and organizing your media.","http://wiki.plexapp.com/index.php/Media_Naming_and_Organization_Guide",f)))+'</p>\n\n					<div class="folders">\n						',m=n.each.call(t,(p=t.section,null==p||p===!1?p:p.location),{hash:{},inverse:w.noop,fn:w.program(14,u,a),data:a}),(m||0===m)&&(v+=m),v+='\n					</div>\n\n					<p class="pull-center">\n						<button type="button" class="add-folder-btn btn" tabindex="0"><i class="glyphicon folder-plus"></i> ',f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"Add Folder",f):g.call(t,"t","Add Folder",f)))+'</button>\n					</p>\n\n					<p class="folder-help hide">',f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"At least one folder is required.",f):g.call(t,"t","At least one folder is required.",f)))+'</p>\n				</div>\n			</div>\n\n			<div class="row-fluid advanced-options hide">\n				<div class="control-group">\n					<label>',f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"Scanner",f):g.call(t,"t","Scanner",f)))+'</label>\n					<select name="scanner" class="span6"></select>\n				</div>\n			</div>\n\n			<div class="row-fluid advanced-options hide">\n				<div class="control-group">\n					<label>',f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"Agent",f):g.call(t,"t","Agent",f)))+'</label>\n					<select name="agent" class="span6"></select>\n				</div>\n			</div>\n\n			<div class="row-fluid advanced-options hide">\n				<div class="control-group">\n					<label>',f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"Language",f):g.call(t,"t","Language",f)))+'</label>\n					<select name="language" class="span6"></select>\n				</div>\n			</div>\n		</div>\n	</div>\n\n	<div class="modal-footer',m=n["if"].call(t,t.add,{hash:{},inverse:w.noop,fn:w.program(8,c,a),data:a}),(m||0===m)&&(v+=m),v+='">\n		<div class="pull-left">\n			<a class="standard-options" href="#">',f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"Show Advanced Options",f):g.call(t,"t","Show Advanced Options",f)))+'</a>\n			<a class="advanced-options hide" href="#">',f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"Hide Advanced Options",f):g.call(t,"t","Hide Advanced Options",f)))+'</a>\n		</div>\n\n		<button type="submit" class="btn btn-primary" tabindex="0">',f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"Save",f):g.call(t,"t","Save",f)))+'</button>\n		<button type="button" class="btn cancel-btn" tabindex="0">',f={hash:{},data:a},v+=y((p=n.t,p?p.call(t,"Cancel",f):g.call(t,"t","Cancel",f)))+"</button>\n	</div>\n</form>\n"
})}),define("plex/control/utils/LanguageUtil",[],function(){var e=function(){this.byCode={aa:"Afaraf",af:"Afrikaans",ab:"Abkhazian",ak:"Akan",sq:"Shqip",am:"Amharic",ar:"العربية",an:"Aragonés",hy:"Հայերեն",as:"Assamese",av:"авар мацӀ",ae:"avesta",ay:"aymar aru",az:"azərbaycan dili",ba:"башҡорт теле",bm:"bamanankan",eu:"euskara",be:"Беларуская",bn:"Bengali",bh:"भोजपुरी",bi:"Bislama",bs:"bosanski jezik",br:"brezhoneg",bg:"български език",my:"Burmese",ca:"Català",ch:"Chamoru",ce:"нохчийн мотт",cu:"ѩзыкъ словѣньскъ",cv:"чӑваш чӗлхи",kw:"Kernewek",co:"corsu",cr:"ᓀᐦᐃᔭᐍᐏᐣ",dv:"Divehi",dz:"རྫོང་ཁ",en:"English","en-GB":"English (UK)",eo:"Esperanto",et:"eesti",ee:"Eʋegbe",fo:"føroyskt",fj:"vosa Vakaviti",fy:"Frysk",ff:"Fulfulde",ka:"ქართული",gd:"Gàidhlig",ga:"Gaeilge",gl:"Galego",gv:"Gaelg",gn:"Avañe&apos;ẽ",gu:"ગુજરાતી",ht:"Kreyòl ayisyen",ha:"هَوُسَ",hz:"Otjiherero",hi:"हिन्दी",ho:"Hiri Motu",hr:"hrvatski",ig:"Asụsụ Igbo",is:"Íslenska",io:"Ido",ii:"ꆈꌠ꒿ Nuosuhxop",iu:"ᐃᓄᒃᑎᑐᑦ",ie:"Interlingue",ia:"Interlingua",id:"Bahasa Indonesia",ik:"Iñupiaq",jv:"basa Jawa",kl:"kalaallisut",kn:"ಕನ್ನಡ",ks:"कश्मीरी",kr:"Kanuri",kk:"Қазақ тілі",km:"Khmer",ki:"Gĩkũyũ",rw:"Ikinyarwanda",ky:"кыргыз тили",kv:"коми кыв",kg:"KiKongo",kj:"Kuanyama",ku:"Kurdî",lo:"Lao",la:"latine",lv:"latviešu valoda",li:"Limburgs",ln:"Lingála",lt:"lietuvių kalba",lb:"Lëtzebuergesch",lu:"Luba-Katanga",lg:"Luganda",mk:"македонски јазик",mh:"Kajin M̧ajeļ",ml:"Malayalam",mi:"te reo Māori",mr:"मराठी",ms:"bahasa Melayu",mg:"Malagasy fiteny",mt:"Malti",mo:"Moldavian",mn:"монгол",na:"Ekakairũ Naoero",nv:"Diné bizaad",nr:"isiNdebele (North)",nd:"isiNdebele (South)",ng:"Owambo",ne:"नेपाली",nn:"Norsk nynorsk",nb:"Norsk bokmål",ny:"chiCheŵa",oc:"Occitan",oj:"ᐊᓂᔑᓈᐯᒧᐎᓐ",or:"Oriya",om:"Afaan Oromoo",os:"ирон æвзаг",pa:"ਪੰਜਾਬੀ",pi:"पाऴि",ps:"پښتو",qu:"Runa Simi",rm:"rumantsch grischun",ro:"română",rn:"kiRundi",sg:"yângâ tî sängö",sa:"संस्कृतम्",sr:"српски језик",si:"Sinhala",sk:"slovenčina",sl:"Slovenščina",se:"Davvisámegiella",sm:"gagana fa&apos;a Samoa",sn:"chiShona",sd:"सिन्धी",so:"Soomaaliga",st:"Sesotho",sc:"sardu",ss:"SiSwati",su:"Basa Sunda",sw:"Kiswahili",ty:"Reo Tahiti",ta:"தமிழ்",tt:"татарча",te:"Telugu",tg:"тоҷикӣ",tl:"Wikang Tagalog",th:"ไทย",bo:"བོད་ཡིག",ti:"Tigrinya",to:"faka Tonga",tn:"Setswana",ts:"Xitsonga",tk:"Türkmen",tw:"Twi",ug:"Uyƣurqə",uk:"українська",ur:"اردو",uz:"O&apos;zbek",ve:"Tshivenḓa",vi:"Tiếng Việt",vo:"Volapük",cy:"Cymraeg",wa:"Walon",wo:"Wollof",xh:"isiXhosa",yi:"ייִדיש",yo:"Yorùbá",za:"Saɯ cueŋƅ",zu:"isiZulu",pb:"Português (Brasil)",fr:"Français",de:"Deutsch",sv:"Svenska",no:"Norsk",da:"Dansk",fi:"Suomeksi",nl:"Nederlands",it:"Italiano",es:"Español","es-419":"Español (Latinoamérica)",pl:"Polski",hu:"Magyar",el:"Ελληνικά",tr:"Türkçe",zh:"中文","zh-TW":"臺語",ru:"русский язык",he:"עברית",ja:"日本語",pt:"Português","pt-BR":"Português Brasileiro",ko:"한국어",cs:"čeština",fa:"فارسی",xx:"Unknown",xn:"None"},this.getLanguageName=function(e){return this.byCode[e]||""
}};return new e}),define("plex/control/utils/SectionTypes",["underscore"],function(){var e=function(){this.types=[{key:"movies",typeID:"1",typeString:"movie",label:"Movies",defaultAgent:"com.plexapp.agents.imdb",defaultLanguage:"en",defaultScanner:"Plex Movie Scanner"},{key:"tv",typeID:"2",typeString:"show",label:"TV Shows",defaultAgent:"com.plexapp.agents.thetvdb",defaultLanguage:"en",defaultScanner:"Plex Series Scanner"},{key:"music",typeID:"8",typeString:"artist",label:"Music",defaultAgent:"com.plexapp.agents.lastfm",defaultLanguage:"en",defaultScanner:"Plex Music Scanner"},{key:"photos",typeID:"13",typeString:"photo",label:"Photos",defaultAgent:"com.plexapp.agents.none",defaultLanguage:"xn",defaultScanner:"Plex Photo Scanner"},{key:"videos",typeID:"1",typeString:"movie",label:"Home Movies",defaultAgent:"com.plexapp.agents.none",defaultLanguage:"xn",defaultScanner:"Plex Video Files Scanner"}],this.byKey=_.reduce(this.types,function(e,t){return e[t.key]=t,e
},{}),this.byType=_.reduceRight(this.types,function(e,t){return e[t.typeString]=t,e},{}),this.getSectionTypes=function(){return this.types},this.getSectionType=function(e){return this.byKey[e]},this.getSectionTypeByString=function(e){return this.byType[e]}};return new e}),define("plex/model/AgentModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","jquery"],function(e,t,n){var i=t.extend({idAttribute:"identifier",whitelistedAttrs:["identifier","name","enabled","hasPrefs","language"],initialize:function(){var e=this.server.getAjaxOptions("/system/agents/attribution?identifier="+this.id);
n.ajax(e).done(_.bind(function(e){this.set("attribution",e)},this))},convert:function(t){var i=_.isObject(t)?t:n.xml2json(t);return e.parseBoolean(i,["enabled","hasPrefs"]),i},parse:function(e){var t=this.convert(e);return _.isArray(t.Language)?t.language=_.pluck(t.Language,"code"):_.isObject(t.Language)&&(t.language=[t.Language.code]),t=_.pick(t,this.whitelistedAttrs)}});return i}),define("plex/model/collections/AgentCollection",["plex/model/collections/BaseCollection","plex/model/AgentModel","jquery"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.server=t.server,this.primaryAgent=t.primaryAgent,this.relatedAgent=t.relatedAgent,this.sectionType=t.sectionType
},url:function(){return this.primaryAgent?"system/agents/contributors?mediaType="+this.sectionType+"&primaryAgent="+this.primaryAgent:this.relatedAgent?"system/agents/"+this.relatedAgent+"/config/"+this.sectionType:this.sectionType?"system/agents?mediaType="+this.sectionType:"system/agents"},parse:function(e){return this.convert(e,"Agent")}});return n}),define("plex/model/ScannerModel",["plex/model/BaseModel","jquery"],function(e,t){var n=e.extend({idAttribute:"name",convert:function(e){var n=_.isObject(e)?e:t.xml2json(e);
return n},parse:function(e){return this.convert(e)}});return n}),define("plex/model/collections/ScannerCollection",["plex/model/collections/BaseCollection","plex/model/ScannerModel","jquery"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.sectionType=t.sectionType,this.server=t.server},url:function(){return"system/scanners/"+this.sectionType},parse:function(e){return this.convert(e,"Scanner")}});return n}),define("hb!templates/modals/AddFolderModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon folder-plus"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Add Folder",r):o.call(t,"t","Add Folder",r)))+'</h3>\n</div>\n\n<form class="modal-form add-section-form">\n	<div class="modal-body minimal-light-scrollbar">\n		<div class="row-fluid">\n			<div class="control-group">\n				<input type="text" name="path" class="span12" value="">\n				<div class="browse-control"></div>\n			</div>\n		</div>\n	</div>\n\n	<div class="modal-footer">\n		<button type="submit" class="btn btn-primary" tabindex="0">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Add",r):o.call(t,"t","Add",r)))+'</button>\n		<button type="button" class="btn cancel-btn" tabindex="0">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Cancel",r):o.call(t,"t","Cancel",r)))+"</button>\n	</div>\n</form>\n"
})}),define("plex/model/BrowseDirectoryModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","jquery"],function(e,t,n){var i=t.extend({idAttribute:"key",defaults:{key:"/services/browse",title:"Root",path:""},whitelistedAttrs:["key","title","path","network"],url:function(){return this.id},convert:function(t){var i=_.isObject(t)?t:n.xml2json(t);return e.parseBoolean(i,"network"),i},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs)}});return i}),define("plex/model/collections/BrowseDirectoryCollection",["plex/model/collections/BaseCollection","plex/model/BrowseDirectoryModel","jquery"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.parent=t.parent,this.server=t.server;
var i=_.bind(function(e){e.set("parent",this.parent),e.set("children",new n([],{parent:e,server:this.server}))},this);_.each(e,i),this.on("reset",function(){this.each(i)},this),this.on("add",i)},url:function(){return this.parent.url()},parse:function(e){return this.convert(e,"Path")}});return n}),define("plex/view/lists/BaseList",["plex/view/BaseView"],function(e){var t=e.extend({items:null,populated:!1,completed:!1,setup:function(e,t){this.items={},this.ListItem=e,this.selector=t,this.collection&&(this.addBinding(this.collection,"reset",this.reset),this.addBinding(this.collection,"add",this.addItem),this.addBinding(this.collection,"remove",this.removeItem))
},populate:function(){this.populated=!!this.collection.length,this.populated&&this.reset(this.collection)},reset:function(e){this.populated=!!e.length,this.completed=!1,this.removeAllViews(),this.items={},e.each(this.addItem,this),_.defer(_.bind(function(){this.completed=!0,this.trigger("complete")},this))},rebase:function(e){this.collection&&(this.removeBinding(this.collection,"reset"),this.removeBinding(this.collection,"add"),this.removeBinding(this.collection,"remove")),this.collection=e,this.addBinding(this.collection,"reset",this.reset),this.addBinding(this.collection,"add",this.addItem),this.addBinding(this.collection,"remove",this.removeItem),this.reset(e)
},addItem:function(e,t,n){var i,a=new this.ListItem({model:e,list:this}),s=n&&n.at!==void 0;this.registerView(a),this.items[e.id]=a,i=this.selector?this.$(this.selector):this.$el;var r=a.render().el;if(s){var l=i.children().eq(n.at);l.length?l.before(r):i.append(r)}else this.reverseItems?i.prepend(r):i.append(r);return a},removeItem:function(e){this.items[e.id]&&(this.removeView(this.items[e.id]),delete this.items[e.id])}});return t}),define("hb!templates/lists/items/BrowseDirectoryListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"inbox"
}function r(){return"folder-open"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o="",c="function",d=this.escapeExpression,h=this;return o+='<a href="#" data-key="',(l=n.key)?l=l.call(t,{hash:{},data:a}):(l=t.key,l=typeof l===c?l.apply(t):l),o+=d(l)+'"><i class="folder-icon glyphicon ',l=n["if"].call(t,t.network,{hash:{},inverse:h.program(3,r,a),fn:h.program(1,s,a),data:a}),(l||0===l)&&(o+=l),o+='"></i> ',(l=n.title)?l=l.call(t,{hash:{},data:a}):(l=t.title,l=typeof l===c?l.apply(t):l),o+=d(l)+' <div class="spinner-container"></div></a>\n'
})}),define("plex/view/lists/items/BrowseDirectoryListItem",["hb!templates/lists/items/BrowseDirectoryListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var i=n.extend({tagName:"li",className:"browse-directory-list-item",render:function(){return this.$el.html(e(this.model.toJSON())),this}});return i}),function(e,t,n){function i(e,n){var i,a=t.createElement(e||"div");for(i in n)a[i]=n[i];return a}function a(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);
return e}function s(e,t,n,i){var a=["opacity",t,~~(100*e),n,i].join("-"),s=.01+100*(n/i),r=Math.max(1-(1-e)/t*(100-s),e),l=d.substring(0,d.indexOf("Animation")).toLowerCase(),o=l&&"-"+l+"-"||"";return u[a]||(p.insertRule("@"+o+"keyframes "+a+"{"+"0%{opacity:"+r+"}"+s+"%{opacity:"+e+"}"+(s+.01)+"%{opacity:1}"+(s+t)%100+"%{opacity:"+e+"}"+"100%{opacity:"+r+"}"+"}",0),u[a]=1),a}function r(e,t){var i,a,s=e.style;if(s[t]!==n)return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),a=0;h.length>a;a++)if(i=h[a]+t,s[i]!==n)return i
}function l(e,t){for(var n in t)e.style[r(e,n)||n]=t[n];return e}function o(e){for(var t=1;arguments.length>t;t++){var i=arguments[t];for(var a in i)e[a]===n&&(e[a]=i[a])}return e}function c(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}var d,h=["webkit","Moz","ms","O"],u={},p=function(){var e=i("style");return a(t.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),m={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},f=function f(e){return this.spin?(this.opts=o(e||{},f.defaults,m),n):new f(e)
};f.defaults={},o(f.prototype,{spin:function(e){this.stop();var t,n,a=this,s=a.opts,r=a.el=l(i(0,{className:s.className}),{position:"relative",zIndex:s.zIndex}),o=s.radius+s.length+s.width;if(e&&(e.insertBefore(r,e.firstChild||null),n=c(e),t=c(r),l(r,{left:("auto"==s.left?n.x-t.x+(e.offsetWidth>>1):s.left+o)+"px",top:("auto"==s.top?n.y-t.y+(e.offsetHeight>>1):s.top+o)+"px"})),r.setAttribute("aria-role","progressbar"),a.lines(r,a.opts),!d){var h=0,u=s.fps,p=u/s.speed,m=(1-s.opacity)/(p*s.trail/100),f=p/s.lines;
!function v(){h++;for(var e=s.lines;e;e--){var t=Math.max(1-(h+e*f)%p*m,s.opacity);a.opacity(r,s.lines-e,t,s)}a.timeout=a.el&&setTimeout(v,~~(1e3/u))}()}return a},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=n),this},lines:function(e,t){function n(e,n){return l(i(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*o+t.rotate)+"deg) translate("+t.radius+"px"+",0)",borderRadius:(t.width>>1)+"px"})
}for(var r,o=0;t.lines>o;o++)r=l(i(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:d&&s(t.opacity,t.trail,o,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&a(r,l(n("#000","0 0 4px #000"),{top:"2px"})),a(e,a(r,n(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){e.childNodes.length>t&&(e.childNodes[t].style.opacity=n)}}),!function(){function e(e,t){return i("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)
}var t=l(i("group"),{behavior:"url(#default#VML)"});!r(t,"transform")&&t.adj?(p.addRule(".spin-vml","behavior:url(#default#VML)"),f.prototype.lines=function(t,n){function i(){return l(e("group",{coordsize:c+" "+c,coordorigin:-o+" "+-o}),{width:c,height:c})}function s(t,s,r){a(h,a(l(i(),{rotation:360/n.lines*t+"deg",left:~~s}),a(l(e("roundrect",{arcsize:1}),{width:o,height:n.width,left:n.radius,top:-n.width>>1,filter:r}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var r,o=n.length+n.width,c=2*o,d=2*-(n.width+n.length)+"px",h=l(i(),{position:"absolute",top:d,left:d});
if(n.shadow)for(r=1;n.lines>=r;r++)s(r,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(r=1;n.lines>=r;r++)s(r);return a(t,h)},f.prototype.opacity=function(e,t,n,i){var a=e.firstChild;i=i.shadow&&i.lines||0,a&&a.childNodes.length>t+i&&(a=a.childNodes[t+i],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=n))}):d=r(t,"animation")}(),e.Spinner=f}(window,document),define("spincore",function(){}),function(e){e.fn.spin=function(t,n){var i={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:9,length:3,width:2,radius:4},large:{length:5,width:3}};
if(Spinner)return this.each(function(){var a=e(this),s=a.data();return t!==!1?("string"==typeof t?(t=t in i?i[t]:{},n&&(t.color=n),t.hwaccel=!0):"object"==typeof t&&(t.hasOwnProperty("preset")&&e.extend(t,t.preset),t.hasOwnProperty("hwaccel")||(t.hwaccel=!0)),s.spinner=new Spinner(e.extend({color:a.css("color")},t)).spin(),a.html(e(s.spinner.el).html()),a):(s.spinner&&(s.spinner.stop(),delete s.spinner),a.empty(),void 0)});throw"Spinner class not available."},e.fn.spinContents=function(t,n){var i=e(this),a=function(t){i.off("destroy",a),i.each(function(){var n=e(this),i=n.data();
if(i&&i.spinner){var a=i.spinner;a.spin(!1),n.data("spinner",null),t&&(n.css({height:"",width:""}),n.removeClass("active").html(i.html))}})};return t===!1?(a(!0),i):(i.on("destroy",a),setTimeout(function(){i.each(function(){var a=e(this);if(a.data("spinner"))return i;a.data({html:a.html()}),a.height(a.height()),a.width(a.width()),a.html('<div class="spinner"></div>');var s=a.find(".spinner").spin(t,n);a.addClass("active").html(s.get(0)),a.data("spinner",s)})},1),i)}}(jQuery),define("spin",function(){}),define("plex/view/lists/BrowseDirectoryList",["plex/view/lists/BaseList","plex/view/lists/items/BrowseDirectoryListItem","plex/model/collections/BrowseDirectoryCollection","jquery","spin"],function(e,t,n,i){var a=e.extend({tagName:"ul",className:"list rounded-list media-list media-compact-list browse-directory-list",events:{"click a":"onDirectoryClick"},initialize:function(){this.setup(t)
},render:function(){return this.$el.empty(),this.populate(this.collection),this},reset:function(e){this.populated=!!e.length,this.removeAllViews(),this.items={},this.parentItem&&this.addItem(this.parentItem),e.each(this.addItem,this)},onDirectoryClick:function(e){e.preventDefault();var t=i(e.currentTarget),n=t.find(".spinner-container"),a=t.data("key"),s=this.collection.get(a)||this.parentItem;this.trigger("change:path",s.get("path")),this.collection.parent=s,s.get("parent")?(this.parentItem=s.get("parent").clone(),this.parentItem.set("title",".. [Back]")):this.parentItem=null,n.spinContents("tiny"),this.collection.fetch({hideLoadingAlert:!0}).always(function(){n.spinContents(!1)
})}});return a}),define("plex/view/modals/AddFolderModal",["hb!templates/modals/AddFolderModal.tpl","plex/model/BrowseDirectoryModel","plex/model/collections/BrowseDirectoryCollection","plex/view/modals/BaseModal","plex/view/lists/BrowseDirectoryList","jquery"],function(e,t,n,i,a){var s=i.extend({name:"editSectionModal",className:"add-folder-modal modal modal-small fade",events:{hidden:"close","submit form":"onSubmit","click .cancel-btn":"onCancel"},initialize:function(e){this.server=e.server,this.pathRoot=new t({title:"Browse folders"},{server:this.server});
var i=new n([this.pathRoot],{parent:null,server:this.server});this.pathList=this.registerView(new a({collection:i})),this.addBinding(this.pathList,"change:path",this.onPathChange)},render:function(){return this.$el.html(e()).modal(),this.$(".browse-control").append(this.pathList.render().el),this},resetPathList:function(){this.pathList.parentItem=null,this.pathList.collection.reset([this.pathRoot])},onPathChange:function(e){this.$('input[name="path"]').val(e)},onSubmit:function(e){e.preventDefault(),this.trigger("add:folder",this.$('input[name="path"]').val()),this.$el.modal("hide")
},onCancel:function(e){e.preventDefault(),this.$el.modal("hide")}});return s}),define("plex/view/modals/EditSectionModal",["hb!templates/modals/EditSectionModal.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/control/utils/LanguageUtil","plex/control/utils/SectionTypes","plex/model/AppModel","plex/model/collections/AgentCollection","plex/model/collections/ScannerCollection","plex/view/modals/BaseModal","plex/view/modals/AddFolderModal","jquery"],function(e,t,n,i,a,s,r,l,o,c,d){var h=function(e){return _.map(e,function(e){return'<option value="'+e.value+'">'+e.label+"</option>"
}).join("\n")},u=function(e,t){for(var n=0;e.options.length>n;n++)if(t==e.options[n].value)return e.selectedIndex=n,void 0},p=o.extend({name:"editSectionModal",className:"edit-section-modal modal fade",redirect:!1,events:{hidden:"close","click .section-type":"onSectionTypeClick",'change select[name="agent"]':"onAgentChange","click a.advanced-options":"onHideAdvanced","click a.standard-options":"onShowAdvanced","click .add-folder-btn":"onAddFolderClick","click .remove-path-btn":"onRemovePathClick","submit form":"onSubmit","click .cancel-btn":"onCancel"},initialize:function(e){this.server=e.server,this.section=e.section,this.scanners={},this.agents={},this.redirect=e.redirect,_.each(a.getSectionTypes(),function(e){if(!this.scanners[e.typeID]){var t={server:this.server,sectionType:e.typeID};
this.scanners[e.typeID]=new l([],t),this.agents[e.typeID]=new r([],t)}},this)},render:function(){var t={};if(this.section){var i=a.getSectionTypeByString(this.section.get("type"));t.edit=!0,t.section=this.section.toJSON(),t.sectionType=n.t(i.label.toLowerCase())}else t.add=!0;return t.sectionTypes=a.getSectionTypes(),this.$el.html(e(t)).modal(),this.section&&this.populateDropdowns(a.getSectionTypeByString(this.section.get("type"))),this},setLanguages:function(e,t){var n=this.$('select[name="language"]');
if(n.empty(),t&&(n.append(h(_.map(t.get("language"),function(e){return{label:i.getLanguageName(e),value:e}}))),this.section)){var a=this.section.get("language");u(n[0],a)}},populateDropdowns:function(e){var t=this.$('select[name="agent"]'),n=this.$('select[name="scanner"]');if(e){this.type=e.key,this.$(".add-section-type").addClass("hide"),this.$(".add-section-details").removeClass("hide"),this.$(".modal-footer").removeClass("hide");var i=h([{value:"",label:"Loading..."}]);t.empty().append(i),n.empty().append(i),this.agents[e.typeID].populate().done(_.bind(function(n){t.empty().append(h(n.map(function(e){return{label:e.get("name"),value:e.get("identifier")}
})));var i=this.section?this.section.get("agent"):e.defaultAgent;u(t[0],i);var a=n.get(i);this.setLanguages(e,a)},this)).fail(_.bind(function(){t.empty()},this)),this.scanners[e.typeID].populate().done(_.bind(function(t){n.empty().append(h(t.map(function(e){return{label:e.get("name"),value:e.get("name")}}))),u(n[0],this.section?this.section.get("scanner"):e.defaultScanner)},this)).fail(_.bind(function(){n.empty()},this))}else t.empty(),n.empty()},validate:function(e){var t=!0;return e.title?(this.$(".name-group").removeClass("error"),this.$(".name-group .help-inline").addClass("hide")):(this.$(".name-group").addClass("error"),this.$(".name-group .help-inline").removeClass("hide"),t=!1),e.location.length?(this.$(".add-folder-btn").removeClass("btn-danger"),this.$(".folder-help").addClass("hide")):(this.$(".add-folder-btn").addClass("btn-danger"),this.$(".folder-help").removeClass("hide"),t=!1),t
},onSectionTypeClick:function(e){e.preventDefault();var t=d(e.target).closest("a"),i=t.data("key"),s=a.getSectionType(i),r=s.label;this.$('input[name="name"]').val(r),this.$('input[name="path"]').focus(),r=n.t(r.toLowerCase()),"music"===r?this.$(".folder-group label").text(n.t("Add folders where your {1} is located",r)):this.$(".folder-group label").text(n.t("Add folders where your {1} are located",r)),this.populateDropdowns(s)},onAgentChange:function(e){var t=a.getSectionType(this.type),n=this.agents[t.typeID].get(e.target.value);
this.setLanguages(t,n)},onHideAdvanced:function(e){e.preventDefault(),this.$(".advanced-options").addClass("hide"),this.$(".standard-options").removeClass("hide")},onShowAdvanced:function(e){e.preventDefault(),this.$(".standard-options").addClass("hide"),this.$(".advanced-options").removeClass("hide")},onAddFolderClick:function(){var e=new c({server:this.server}),t=_.bind(function(n){if(n){var i=d(Handlebars.partials.sectionPathInput({}));i.find('input[name="path"]').val(n),this.$(".folders").append(i),this.$(".add-folder-btn").removeClass("btn-danger"),this.$(".folder-help").addClass("hide"),e.off("add:folder",t)
}},this);e.on("add:folder",t),s.set("modal",e)},onRemovePathClick:function(e){e.preventDefault(),d(e.currentTarget).closest(".path-container").remove()},onSubmit:function(e){e.preventDefault();var n=e.target,i=a.getSectionType(this.type),s={type:i.typeString,title:n.name.value,agent:n.agent.value,scanner:n.scanner.value,language:n.language.value,location:[]};s.location=_.compact(_.map(this.$("input[name=path]"),function(e){return e.value})),this.validate(s)&&(this.section?this.section.save(s,{success:_.bind(function(e){this.$el.modal("hide"),this.redirect&&t.trigger("navigate:section",e.server.id,e.id)
},this)}):this.server.get("sections").create(s,{wait:!0,success:_.bind(function(e){this.$el.modal("hide"),this.redirect&&t.trigger("navigate:section",e.server.id,e.id)},this)}))},onCancel:function(e){e.preventDefault(),this.$el.modal("hide")}});return p}),define("plex/control/commands/library/AddSectionCommand",["plex/control/Dispatcher","plex/model/AppModel","plex/view/modals/SelectServerModal","plex/view/modals/EditSectionModal"],function(e,t,n,i){function a(e){function a(n){s.off("select:server",a),t.set("modal",new i({server:t.get("servers").get(n),redirect:e}))
}var s=new n({collection:t.get("servers")});t.get("multiServer")?(s.on("select:server",a),t.set("modal",s)):t.set("modal",new i({server:t.get("primaryServer"),redirect:e}))}e.on("command:AddSection",a)}),define("hb!templates/modals/ConfirmModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o="function",c=this.escapeExpression,d=n.helperMissing;return l+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon circle-exclamation-mark"></i> ',(s=n.title)?s=s.call(t,{hash:{},data:a}):(s=t.title,s=typeof s===o?s.apply(t):s),l+=c(s)+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">',(s=n.message)?s=s.call(t,{hash:{},data:a}):(s=t.message,s=typeof s===o?s.apply(t):s),l+=c(s)+'</div>\n\n<div class="modal-footer pull-center">\n	<button type="button" class="btn btn-large btn-primary yes-btn" tabindex="0">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Yes",r):d.call(t,"t","Yes",r)))+'</button>\n	<button type="button" class="btn btn-large no-btn" tabindex="0">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"No",r):d.call(t,"t","No",r)))+"</button>\n</div>\n"
})}),define("plex/view/modals/ConfirmModal",["hb!templates/modals/ConfirmModal.tpl","plex/view/modals/BaseModal"],function(e,t){var n=t.extend({className:"modal modal-small confirm-modal fade",title:null,message:null,events:{hidden:"close","click .no-btn":"onNo","click .yes-btn":"onYes"},initialize:function(e){this.title=e.title,this.message=e.message},render:function(){return this.$el.html(e({title:this.title,message:this.message})).modal(),this},onNo:function(e){e.preventDefault(),this.trigger("no"),this.$el.modal("hide")
},onYes:function(e){e.preventDefault(),this.trigger("yes"),this.$el.modal("hide")}});return n}),define("plex/control/commands/library/DeleteSectionCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/modals/ConfirmModal"],function(e,t,n,i){function a(e,a){var s=new i({title:t.t("Delete Section"),message:t.t("Are you sure you want to delete {1}? This cannot be undone.",e.get("title"))});s.on("yes",function(){e.destroy({wait:!0}).done(function(){a&&a()
})}),n.set("modal",s)}e.on("command:DeleteSection",a)}),define("plex/control/commands/media/DeleteMediaCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/modals/ConfirmModal"],function(e,t,n,i){function a(a){var s=new i({title:t.t("Delete Media"),message:t.t("Are you sure you want to delete {1}? This media will be deleted from your filesystem.",a.get("title"))});s.on("yes",function(){a.destroy({wait:!0}).done(function(){var t,n,i=a.get("type");
a.media&&("episode"===i?n=a.media.get("episodes").length:"track"===i&&(n=a.media.get("tracks").length)),t=n?a.get("parentRatingKey"):a.get("grandparentRatingKey"),t?e.trigger("navigate:details",a.server.id,a.section.id,t):e.trigger("navigate:section",a.server.id,a.section.id)}).fail(function(e){var i=t.t("There was a problem deleting {1}.",a.get("title"));403===e.status&&(i=t.t('"Allow clients to delete media" must be enabled in your server preferences.')),n.set("alert",{status:"error",message:i})
})}),n.set("modal",s)}e.on("command:DeleteMedia",a)}),define("plex/control/commands/media/RefreshMetadataCommand",["plex/control/Dispatcher","jquery"],function(e,t){function n(e){var n="/library/metadata/"+e.get("ratingKey")+"/refresh",i=_.extend({type:"PUT"},e.server.getAjaxOptions(n));t.ajax(i)}e.on("command:RefreshMetadata",n)}),define("plex/control/commands/media/AnalyzeMediaCommand",["plex/control/Dispatcher","jquery"],function(e,t){function n(e){var n="/library/metadata/"+e.get("ratingKey")+"/analyze",i=_.extend({type:"PUT"},e.server.getAjaxOptions(n));
t.ajax(i)}e.on("command:AnalyzeMedia",n)}),define("plex/control/commands/media/MarkWatchedCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/modals/ConfirmModal","jquery"],function(e,t,n,i,a){function s(s,r){var l=s.get("type"),o="/:/scrobble?key="+s.get("ratingKey")+"&identifier="+s.get("identifier"),c=function(){e.trigger("command:ShowLoading",!0),a.ajax(s.server.getAjaxOptions(o)).always(function(){e.trigger("command:ShowLoading",!1)}).done(function(){if("show"===l||"season"===l)if(s.set("unviewedLeafCount",0),s.set("viewedLeafCount",s.get("leafCount")),"show"===l){var e=s.get("seasons");
e.each(function(e){e.set("unviewedLeafCount",0),e.set("viewedLeafCount",e.get("leafCount"))})}else{var t=s.get("episodes");t.each(function(e){e.set("viewOffset",0),e.set("viewCount",1)})}else s.set("viewOffset",0),s.set("viewCount",1)}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem marking {1} as watched.",s.get("title"))})})};if(r||"show"!==l&&"season"!==l)c();else{var d=new i({title:t.t("Mark as Watched"),message:t.t("Are you sure you want to mark all episodes as watched?")});
d.on("yes",c),n.set("modal",d)}}e.on("command:MarkWatched",s)}),define("plex/control/commands/media/MarkUnwatchedCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/modals/ConfirmModal","jquery"],function(e,t,n,i,a){function s(s,r){var l=s.get("type"),o="/:/unscrobble?key="+s.get("ratingKey")+"&identifier="+s.get("identifier"),c=function(){e.trigger("command:ShowLoading",!0),a.ajax(s.server.getAjaxOptions(o)).always(function(){e.trigger("command:ShowLoading",!1)
}).done(function(){if("show"===l||"season"===l)if(s.set("unviewedLeafCount",s.get("leafCount")),s.set("viewedLeafCount",0),"show"===l){var e=s.get("seasons");e.each(function(e){e.set("unviewedLeafCount",e.get("leafCount")),e.set("viewedLeafCount",0)})}else{var t=s.get("episodes");t.each(function(e){e.set("viewOffset",0),e.set("viewCount",0)})}else s.set("viewOffset",0),s.set("viewCount",0)}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem marking {1} as unwatched.",s.get("title"))})
})};if(r||"show"!==l&&"season"!==l)c();else{var d=new i({title:t.t("Mark as Unwatched"),message:t.t("Are you sure you want to mark all episodes as unwatched?")});d.on("yes",c),n.set("modal",d)}}e.on("command:MarkUnwatched",s)}),define("plex/control/commands/media/MatchUsingCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery","xml2json"],function(e,t,n,i){function a(a,s){var r={agent:s.id,manual:0},l="/library/metadata/"+a.get("ratingKey")+"/matches?"+i.param(r);
e.trigger("command:ShowLoading",!0),i.ajax(a.server.getAjaxOptions(l)).always(function(){e.trigger("command:ShowLoading",!1)}).done(function(s){var o=i.xml2json(s)||s;if(o.SearchResult){var c=o.SearchResult;_.isArray(o.SearchResult)&&(c=o.SearchResult[0]),r={guid:c.guid,name:c.name},l="/library/metadata/"+a.get("ratingKey")+"/match?"+i.param(r);var d=_.extend({type:"PUT"},a.server.getAjaxOptions(l));i.ajax(d).done(function(){e.trigger("hide:fixMatchModal")}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem matching this media.")})
})}else n.set("alert",{status:"error",message:t.t("No matches were found using this agent.")})}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem looking for matches.")})})}e.on("command:MatchUsing",a)}),define("plex/control/commands/media/UnmatchCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery"],function(e,t,n,i){function a(a){var s="/library/metadata/"+a.get("ratingKey")+"/unmatch",r=_.extend({type:"PUT"},a.server.getAjaxOptions(s));
e.trigger("command:ShowLoading",!0),i.ajax(r).always(function(){e.trigger("command:ShowLoading",!1)}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem unmatching {1}.",a.get("title"))})})}e.on("command:Unmatch",a)}),define("plex/control/commands/media/SplitApartCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/modals/ConfirmModal","jquery"],function(e,t,n,i,a){function s(s){var r="/library/metadata/"+s.get("ratingKey")+"/split",l=new i({title:t.t("Split Apart"),message:t.t("Are you sure you want to split apart {1}?",s.get("title"))});
l.on("yes",function(){var i=_.extend({type:"PUT"},s.server.getAjaxOptions(r));e.trigger("command:ShowLoading",!0),a.ajax(i).always(function(){e.trigger("command:ShowLoading",!1)}).done(function(){var t,n=s.get("type");switch(n){case"movie":case"episode":t="Media";break;case"show":case"artist":case"album":t="Location";break;default:t="Media"}s.set(t,s.get(t).slice(0,1)),e.trigger("navigate:back")}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem splitting {1} apart.",s.get("title"))})
})}),n.set("modal",l)}e.on("command:SplitApart",s)}),define("plex/control/commands/media/MergeCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/modals/ConfirmModal","jquery"],function(e,t,n,i,a){function s(s,r){var l="/library/metadata/"+s.get("ratingKey")+"/merge?ids=";l+=_.pluck(r,"id").join(",");var o=new i({title:t.t("Merge"),message:t.t("Are you sure you want to merge into {1}?",s.get("title"))});o.on("yes",function(){var i=_.extend({type:"PUT"},s.server.getAjaxOptions(l));
e.trigger("command:ShowLoading",!0),a.ajax(i).always(function(){e.trigger("command:ShowLoading",!1)}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem merging these items into {1}.",s.get("title"))})})}),n.set("modal",o)}e.on("command:Merge",s)}),define("plex/control/commands/media/SelectStreamCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery"],function(e,t,n,i){function a(a,s,r){var l=_.first(s.get("Media"));if(l){var o=_.first(l.Part);
if(o){var c="/library/parts/"+o.id+"?";c+="audio"===a?"audioStreamID="+r:"subtitleStreamID="+r;var d=_.extend({type:"PUT"},s.server.getAjaxOptions(c));e.trigger("command:ShowLoading",!0),i.ajax(d).always(function(){e.trigger("command:ShowLoading",!1)}).done(function(){var e;e="audio"===a?s.getStreams(2):s.getStreams(3),_.each(e,function(e){e.id!==r?delete e.selected:e.selected=!0}),s.trigger("change:streams")}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem selecting the stream for {1}.",s.get("title"))})
})}}}e.on("command:SelectStream",a)}),define("plex/model/media/AlbumModel",["plex/model/media/MediaModel","plex/model/media/collections/TrackCollection"],function(e,t){var n=e.extend({constructor:function(){var t=e.prototype.constructor.apply(this,arguments);return _.isEmpty(t)?t:(n.prototype.initialize.apply(t,arguments),t)},initialize:function(){e.prototype.initialize.apply(this,arguments),this.get("tracks")||this.set("tracks",new t([],{server:this.server,section:this.section,media:this}))},getMediaLocation:function(){var e=this.get("tracks").first();
return e?e.getMediaLocation():null}});return n}),define("plex/control/commands/media/PlayAlbumCommand",["plex/control/Dispatcher","plex/model/SectionModel","plex/model/media/AlbumModel"],function(e,t,n){function i(i){var a=i.get("ratingKey"),s=new n({key:"/library/metadata/"+a+"/children",ratingKey:a},{server:i.server,section:i.section});i.section||(i.section=new t({key:i.get("librarySectionID")},{server:i.server}),s.section=i.section);var r=s.get("tracks");r.populate().done(function(){e.trigger("play:music",r,r.first())
})}e.on("command:PlayAlbum",i)}),define("plex/control/commands/media/PlayTrackCommand",["plex/control/Dispatcher","plex/model/SectionModel","plex/model/media/AlbumModel"],function(e,t,n){function i(i){var a=i.get("parentRatingKey"),s=new n({key:"/library/metadata/"+a+"/children",ratingKey:a},{server:i.server,section:i.section});i.section||(i.section=new t({key:i.get("librarySectionID")},{server:i.server}),s.section=i.section);var r=s.get("tracks");r.populate().done(function(){e.trigger("play:music",r,r.get(i.id))
})}e.on("command:PlayTrack",i)}),define("plex/control/utils/SyncQualities",[],function(){var e=function(){var e=[{key:"low",videoQuality:24,videoResolutionFactor:.5,photoQuality:24,musicBitrate:96},{key:"medium",videoQuality:49,videoResolutionFactor:.75,photoQuality:49,musicBitrate:128},{key:"high",videoQuality:74,videoResolutionFactor:1,photoQuality:74,musicBitrate:192},{key:"highest",videoQuality:99,photoQuality:99,musicBitrate:320}];this.byKey=_.reduce(e,function(e,t){return e[t.key]=t,e},{}),this.getSettings=function(e){return this.byKey[e]
},this.getSettingsByVideoQuality=function(e){return 25>=e?this.byKey.low:50>=e?this.byKey.medium:75>=e?this.byKey.high:this.byKey.highest}};return new e}),define("plex/control/commands/media/CreateSyncItemCommand",["plex/control/Dispatcher","plex/control/utils/MediaUtil","plex/control/utils/LocalizationUtil","plex/control/utils/SyncQualities","plex/model/AppModel","plex/model/SettingsModel","jquery"],function(e,t,n,i,a,s,r){function l(l){var o,c={},d="",h=l.device.get("screenResolution");if(h=h?h:"1024x768",l.section){var u,p;
if(d=l.settings.title?l.settings.title:l.section.get("title"),p="all"===l.subset?l.section.get("media"):l.section.get(l.subset),l.models){var m=[];_.each(l.models,function(e){m.push(e.get("ratingKey"))}),u="/library/metadata/"+m.join(",")}else u=p.url(),u=u.replace(/(&|\?)X-Plex-Container-Start=(\d+)&X-Plex-Container-Size=(\d+)/,"");o=l.section.server,c["SyncItem[Location][uri]"]="library://"+l.section.get("uuid")+"/directory/"+encodeURIComponent(u),c["SyncItem[machineIdentifier]"]=l.section.server.id,c["SyncItem[title]"]=d,c["SyncItem[rootTitle]"]=l.section.get("title"),c["SyncItem[metadataType]"]=p.viewGroup
}else if(l.media){var f=l.media.get("type"),v=l.media.get("grandparentTitle"),g=l.media.get("parentTitle");if(o=l.media.server,d=l.media.get("title"),v?d=v+" - "+l.media.get("title"):g&&(d=g+" - "+l.media.get("title")),"clip"===f)c["SyncItem[Location][uri]"]=l.directory?"channel://"+l.media.channel.get("identifier")+"/directory/"+encodeURIComponent(l.media.get("key")):"channel://"+l.media.channel.get("identifier")+"/item/"+encodeURIComponent(l.media.get("key")),c["SyncItem[rootTitle]"]=l.media.channel.get("title");
else{if("episode"===f){var y=l.media.get("parentIndex"),b=l.media.get("index"),w=l.media.get("originallyAvailableAt"),x=t.getSeasonEpisodeIndex(y,b,w);d+=" ("+x+")"}c["SyncItem[Location][uri]"]=l.directory?"library://"+l.media.section.get("uuid")+"/directory/"+encodeURIComponent(l.media.get("key")):"library://"+l.media.section.get("uuid")+"/item/"+encodeURIComponent(l.media.get("key")),c["SyncItem[rootTitle]"]=l.media.section.get("title")}c["SyncItem[machineIdentifier]"]=l.media.server.id,c["SyncItem[title]"]=d,c["SyncItem[metadataType]"]=l.media.get("type")
}var k=i.getSettings(l.settings.quality);if(c["SyncItem[Policy][unwatched]"]=l.settings.unwatched,c["SyncItem[Policy][scope]"]=l.settings.scope,c["SyncItem[MediaSettings][videoQuality]"]=k.videoQuality,c["SyncItem[MediaSettings][photoQuality]"]=k.photoQuality,c["SyncItem[MediaSettings][musicBitrate]"]=k.musicBitrate,c["SyncItem[MediaSettings][audioBoost]"]=s.get("audioBoost"),c["SyncItem[MediaSettings][subtitleSize]"]=s.get("subtitleSize"),k.videoResolutionFactor){var S=h.split("x");S[0]=Math.round(k.videoResolutionFactor*S[0]),S[1]=Math.round(k.videoResolutionFactor*S[1]),c["SyncItem[MediaSettings][videoResolution]"]=S.join("x")
}l.settings.value&&(c["SyncItem[Policy][value]"]=l.settings.value);var C="/devices/"+l.device.id+"/sync_items?"+r.param(c),A=_.extend(l.device.server.getAjaxOptions(C),{type:"POST"}),I=function(){e.trigger("command:ShowLoading",!1),a.set("alert",{status:"error",message:n.t("There was a problem syncing this media.")})};e.trigger("command:ShowLoading",!0),r.ajax(A).done(function(){var t="/sync/refreshSynclists",n=_.extend(o.getAjaxOptions(t),{type:"PUT"});r.ajax(n).done(function(){e.trigger("command:ShowLoading",!1),l.callback()
}).fail(I)}).fail(I)}e.on("command:CreateSyncItem",l)}),define("plex/control/commands/media/EditSyncItemCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/control/utils/SyncQualities","plex/model/AppModel","plex/model/SettingsModel","jquery"],function(e,t,n,i,a,s){function r(r){var o={},c=r.settings.title?r.settings.title:r.syncItem.get("title"),d=n.getSettings(r.settings.quality);if(o["SyncItem[version]"]=r.syncItem.get("version"),o["SyncItem[Location][uri]"]=r.syncItem.get("Location").uri,o["SyncItem[machineIdentifier]"]=r.syncItem.mediaServer.id,o["SyncItem[title]"]=c,o["SyncItem[rootTitle]"]=r.syncItem.get("rootTitle"),o["SyncItem[metadataType]"]=r.syncItem.get("metadataType"),o["SyncItem[Policy][unwatched]"]=r.settings.unwatched,o["SyncItem[Policy][scope]"]=r.settings.scope,o["SyncItem[MediaSettings][videoQuality]"]=d.videoQuality,o["SyncItem[MediaSettings][photoQuality]"]=d.photoQuality,o["SyncItem[MediaSettings][musicBitrate]"]=d.musicBitrate,o["SyncItem[MediaSettings][audioBoost]"]=a.get("audioBoost"),o["SyncItem[MediaSettings][subtitleSize]"]=a.get("subtitleSize"),d.videoResolutionFactor){var h=l.split("x");
h[0]=Math.round(d.videoResolutionFactor*h[0]),h[1]=Math.round(d.videoResolutionFactor*h[1]),o["SyncItem[MediaSettings][videoResolution]"]=h.join("x")}r.settings.value&&(o["SyncItem[Policy][value]"]=r.settings.value);var u="/devices/"+r.syncItem.device.id+"/sync_items/"+r.syncItem.id+"?"+s.param(o),p=_.extend(r.syncItem.server.getAjaxOptions(u),{type:"PUT"}),m=function(){e.trigger("command:ShowLoading",!1),i.set("alert",{status:"error",message:t.t("There was a problem syncing this media.")})};e.trigger("command:ShowLoading",!0),s.ajax(p).done(function(){var t="/sync/refreshSynclists",n=_.extend(r.syncItem.mediaServer.getAjaxOptions(t),{type:"PUT"});
s.ajax(n).done(function(){var t="/sync/refreshContent",n=_.extend(r.syncItem.mediaServer.getAjaxOptions(t),{type:"PUT"});s.ajax(n).done(function(){e.trigger("command:ShowLoading",!1),r.callback()}).fail(m)}).fail(m)}).fail(m),r.syncItem.set("title",c),r.syncItem.set("version",1+r.syncItem.get("version")),r.syncItem.set("MediaSettings",{videoQuality:d.videoQuality,photoQuality:d.photoQuality,musicBitrate:d.musicBitrate,audioBoost:d.audioBoost}),r.syncItem.set("Policy",{scope:r.settings.scope,unwatched:r.settings.unwatched,value:r.settings.value})
}var l="1024x768";e.on("command:EditSyncItem",r)}),define("plex/control/commands/media/PlaySoundCommand",["plex/control/Dispatcher","soundmanager"],function(e){function t(){l&&(l.destruct(),l=null)}function n(){var e=setInterval(function(){return l?(l.setVolume(l.volume-5),0>=l.volume&&(clearInterval(e),t()),void 0):(clearInterval(e),void 0)},50)}function i(e){e.onfinish=e.onfinish?_.wrap(e.onfinish,function(e){t(),e()}):t,e.id=e.url,l=soundManager.createSound(e),e.oncreate&&e.oncreate(l)}function a(e){if(!l||!e.passive||(c&&(clearTimeout(c),c=null),o&&l.url!==e.url)){o=!!e.passive,t();
var n=function(){i(e)};soundManager.preferFlash&&!soundManager.swfLoaded?(soundManager.preferFlash=!1,soundManager.onready(n),soundManager.reboot()):n()}}function s(e){_.defer(function(){a(e)})}function r(e){!l||e&&!o||(c=setTimeout(n,100))}var l=null,o=!1,c=null;e.on("command:PlaySound",s),e.on("command:StopSound",r)}),define("hb!templates/modals/SelectClientModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a="";return a+='\n			<li><a class="client" data-id="',(i=n.machineIdentifier)?i=i.call(e,{hash:{},data:t}):(i=e.machineIdentifier,i=typeof i===m?i.apply(e):i),a+=p(i)+'" href="#">',i=n["if"].call(e,e.friendlyName,{hash:{},inverse:f.program(4,l,t),fn:f.program(2,r,t),data:t}),(i||0===i)&&(a+=i),a+="</a></li>\n		"
}function r(e,t){var i,a;return a={hash:{},data:t},p((i=n.truncate,i?i.call(e,e.friendlyName,25,a):u.call(e,"truncate",e.friendlyName,25,a)))}function l(e,t){var i,a;return a={hash:{},data:t},p((i=n.truncate,i?i.call(e,e.name,25,a):u.call(e,"truncate",e.name,25,a)))}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var o,c,d,h="",u=n.helperMissing,p=this.escapeExpression,m="function",f=this;return h+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3>',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Select a Player",d):u.call(t,"t","Select a Player",d)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	<ul class="select-list">\n		',c=n.each.call(t,t.clients,{hash:{},inverse:f.noop,fn:f.program(1,s,a),data:a}),(c||0===c)&&(h+=c),h+="\n	</ul>\n</div>\n"
})}),define("plex/view/modals/SelectClientModal",["hb!templates/modals/SelectClientModal.tpl","plex/model/AppModel","plex/view/modals/BaseModal","jquery"],function(e,t,n,i){var a=n.extend({name:"selectClientModal",className:"modal modal-small select-modal fade",events:{hidden:"close","click .client":"onClientClick"},render:function(){var n=t.get("clients");return this.$el.html(e({clients:n.toJSON()})).modal(),this},onClientClick:function(e){e.preventDefault(),this.$el.modal("hide"),this.trigger("select:client",i(e.target).data("id"))
}});return a}),define("plex/control/commands/media/RemotePlayCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/modals/SelectClientModal","jquery"],function(e,t,n,i,a){function s(e){var s=n.get("clients"),r=e.media.server,l=r.get("accessToken"),o=function(){var i=e.media.get("key");e.media.media&&(i=e.media.media.get("key"));var s={key:e.media.get("key"),path:r.resolveExternalUrl(i)};e.offset&&(s.viewOffset=e.offset),l&&(s["X-Plex-Token"]=l);
var o="/system/players/"+e.client.get("host")+"/application/playMedia?"+a.param(s);a.ajax(r.getAjaxOptions(o)).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem trying to play {1} on {2}.",e.media.get("title"),e.client.get("name"))})})};if(e.client)return o(),void 0;if(s.length>1){var c=new i,d=function(t){c.off("select:client",d),e.client=s.get(t),o()};c.on("select:client",d),n.set("modal",c)}else 1===s.length&&(e.client=s.first(),o())}e.on("command:RemotePlay",s)}),define("plex/control/commands/channel/ChannelActionCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery","xml2json"],function(e,t,n,i){function a(a,s,r){e.trigger("command:ShowLoading",!0),i.ajax(a.server.getAjaxOptions(s)).always(function(){e.trigger("command:ShowLoading",!1),r&&r()
}).done(function(e){var t=i.xml2json(e)||e;/\/uninstall$/.test(s)?a.set("installed",!1):a.set("installed",!0),t.message&&n.set("alert",{status:"success",message:t.message})}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem trying to perform this action on {1}.",a.get("name"))})})}e.on("command:ChannelAction",a)}),define("plex/control/commands/channel/UpdateChannelCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","jquery","xml2json"],function(e,t,n,i){function a(a,s){var r="/system/appstore/";
r+=a.channel?"apps/"+a.channel.get("identifier")+"/update":"updates",a.silent||e.trigger("command:ShowLoading",!0),i.ajax(a.server.getAjaxOptions(r)).always(function(){a.silent||e.trigger("command:ShowLoading",!1)}).done(function(r){var l=i.xml2json(r)||r;if(l.message)a.silent||n.set("alert",{status:"success",message:l.message}),s&&s();else if(l.Directory){var o;o=_.isArray(l.Directory)?l.Directory[0].key:l.Directory.key,a.silent||e.trigger("command:ShowLoading",!0),i.ajax(a.server.getAjaxOptions(o)).always(function(){a.silent||e.trigger("command:ShowLoading",!1),s&&s()
}).done(function(e){var s=i.xml2json(e)||e;s.message&&!a.silent&&n.set("alert",{status:"success",message:t.t(s.message)})}).fail(function(){a.silent||n.set("alert",{status:"error",message:t.t("There was a problem downloading updates.")})})}}).fail(function(){a.silent||n.set("alert",{status:"error",message:t.t("There was a problem checking for updates.")}),s&&s()})}e.on("command:UpdateChannel",a)}),define("plex/control/commands/channel/UninstallChannelCommand",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/modals/ConfirmModal","jquery","xml2json"],function(e,t,n,i,a){function s(s,r){var l="/system/appstore/apps/"+s.get("identifier")+"/uninstall",o=new i({title:t.t("Uninstall Channel"),message:t.t("Are you sure you want to uninstall {1}?",s.get("title"))});
o.on("yes",function(){n.set("modal",o),e.trigger("command:ShowLoading",!0),a.ajax(s.server.getAjaxOptions(l)).always(function(){e.trigger("command:ShowLoading",!1),r&&r()}).done(function(e){var t=a.xml2json(e)||e;s.set("installed",!1),t.message&&n.set("alert",{status:"success",message:t.message})}).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem uninstalling {1}.",s.get("title"))})})}),n.set("modal",o)}e.on("command:UninstallChannel",s)}),define("plex/control/Commands",["plex/control/Dispatcher","plex/control/commands/init/StartInitCommand","plex/control/commands/init/GetMyPlexCommand","plex/control/commands/init/GetPrimaryServerCommand","plex/control/commands/init/GetAllServersCommand","plex/control/commands/init/TestServerConnectionCommand","plex/control/commands/init/FinishInitCommand","plex/control/commands/ShowLoadingCommand","plex/control/commands/CheckForUpdatesCommand","plex/control/commands/InstallUpdateCommand","plex/control/commands/SignOutCommand","plex/control/commands/myplex/SignInCommand","plex/control/commands/myplex/PublishServerCommand","plex/control/commands/myplex/ServerSignInCommand","plex/control/commands/myplex/ServerSignOutCommand","plex/control/commands/myplex/ServerSignUpCommand","plex/control/commands/myplex/ShareCommand","plex/control/commands/myplex/RecommendCommand","plex/control/commands/library/StartLibraryScanCommand","plex/control/commands/library/StopLibraryScanCommand","plex/control/commands/library/StartMediaAnalysisCommand","plex/control/commands/library/OptimizeLibraryCommand","plex/control/commands/library/CleanBundlesCommand","plex/control/commands/library/EmptyTrashCommand","plex/control/commands/library/AddSectionCommand","plex/control/commands/library/DeleteSectionCommand","plex/control/commands/media/DeleteMediaCommand","plex/control/commands/media/RefreshMetadataCommand","plex/control/commands/media/AnalyzeMediaCommand","plex/control/commands/media/MarkWatchedCommand","plex/control/commands/media/MarkUnwatchedCommand","plex/control/commands/media/MatchUsingCommand","plex/control/commands/media/UnmatchCommand","plex/control/commands/media/SplitApartCommand","plex/control/commands/media/MergeCommand","plex/control/commands/media/SelectStreamCommand","plex/control/commands/media/PlayAlbumCommand","plex/control/commands/media/PlayTrackCommand","plex/control/commands/media/CreateSyncItemCommand","plex/control/commands/media/EditSyncItemCommand","plex/control/commands/media/PlaySoundCommand","plex/control/commands/media/RemotePlayCommand","plex/control/commands/channel/ChannelActionCommand","plex/control/commands/channel/UpdateChannelCommand","plex/control/commands/channel/UninstallChannelCommand"],function(e){e.trigger("ready")
}),define("plex/model/media/SyncMediaModel",["plex/model/media/MediaModel","jquery"],function(e){var t=e.extend({idAttribute:"key",cacheKey:function(e){return this.server.id+"!"+e.key+"!"+e.syncItemId},initialize:function(e,t){t.server&&(this.server=t.server)}});return t}),define("plex/control/ServerNotificationStream",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/control/utils/StringUtil","plex/model/AppModel","plex/model/SectionModel","plex/model/SessionModel","plex/model/media/MediaModel","plex/model/media/SyncMediaModel"],function(e,t,n,i,a,s,r,l){var o={},c=function(c){var d=c.resolveUrl("/:/websockets/notifications").replace(/^http/,"ws");
c.get("accessToken")&&(d+="?X-Plex-Token="+encodeURIComponent(c.get("accessToken"))),this.server=c,this.socket=new WebSocket(d),this.socket.onclose=_.bind(function(){c.set("disconnected",!0),e.trigger("show:status",c,"Connection to "+c.get("name")+" closed"),c.trigger("websocket",{closed:!0}),delete o[c.id]},this),this.socket.onopen=_.bind(function(){c.set("disconnected",!1),c.trigger("websocket",{opened:!0})},this),this.socket.onerror=_.bind(function(){c.set("disconnected",!1),e.trigger("show:status",c,"Unable to receive notifications from "+c.get("name")),c.trigger("websocket",{error:!0})
},this),this.socket.onmessage=_.bind(function(o){var c;try{c=JSON.parse(o.data)}catch(d){return}switch(c.type){case"preference":_.each(c._children,function(t){t.key=t.id,t.server=this.server,this.server.trigger("preference:change",t),e.trigger("preference:change",t)},this);break;case"timeline":_.each(c._children,function(t){t.server=this.server;var n={server:this.server,onlyIfCached:!0},i=new a({key:t.sectionID},n);if(!_.isEmpty(i)){t.section=n.section=i;var s=new r({ratingKey:t.itemID},n);if(_.isEmpty(s)||(s.set({metadataState:t.metadataState,mediaState:t.mediaState}),t.media=s,s.trigger("timeline",t)),t.rootItemID){var l=new r({ratingKey:t.rootItemID},n);
_.isEmpty(l)||l.fetch({hideLoadingAlert:!0})}if(t.parentItemID){var o=new r({ratingKey:t.parentItemID},n);_.isEmpty(o)||o.fetch({hideLoadingAlert:!0})}i.trigger("timeline",t)}t.server.trigger("timeline",t),e.trigger("timeline",t)},this);break;case"status":_.each(c._children,function(t){var n=t.title+(t.description?": "+t.description:"");e.trigger("show:status",this.server,n),this.server.trigger("status",t),"LIBRARY_UPDATE"===t.notificationName&&this.server.get("sections").fetch({hideLoadingAlert:!0})
},this);break;case"progress":_.each(c._children,function(t){e.trigger("show:status",this.server,t.message),this.server.trigger("status",t)},this);break;case"playing":_.each(c._children,function(a){if(a.sessionKey){var r={server:this.server,onlyIfCached:!0},l=new s({sessionKey:a.sessionKey},r);if(_.isEmpty(l)){var o=this.server.get("sessions");o.fetch({hideLoadingAlert:!0}).done(function(){if(l=o.get(a.sessionKey)){var s=i.get("myPlex"),r=l.get("User"),c=l.get("Player"),d=n.truncate(r.title,20),h=n.truncate(l.get("grandparentTitle"),20),u=n.truncate(l.get("title"),40),p=n.truncate(c.title,20);
h&&(u=h+" - "+u);var m=t.t("{1} started watching {2} on {3}.",d,u,p);r.title!==s.get("username")&&e.trigger("show:status",this.server,m),this.server.trigger("playing",_.extend(a,{username:d,title:u,device:p}))}})}else{if("stopped"===a.state)return l.trigger("destroy",l,l.collection),void 0;var c=l.get("Player");c&&(c.state=a.state,l.trigger("change:Player",l,c)),l.set("viewOffset",a.viewOffset)}}},this);break;case"syncState":_.each(c._children,function(e){if(e.syncItemId&&e.key){var t={server:this.server,onlyIfCached:!0},n=new l({key:e.key,syncItemId:e.syncItemId},t);
if(!_.isEmpty(n)){var i=n.get("Media");_.each(i,function(t){var i=t.Part;_.each(i,function(t){t.transcodeState=e.syncFileState,t.transcodeStateContext=e.syncFileStateContext;var i=/^(transcoded|downloaded|directplay)$/;i.test(e.syncFileState)&&(t.key="placeholder"),n.trigger("change:Media",n,n.get("Media"))})})}}},this)}},this)},d=function(e){("undefined"==typeof PLEXWEB||PLEXWEB.webSocket!==!1)&&!e.get("shared")&&"secondary"!==e.get("serverClass")&&e.get("isAvailable")&&(e.id in o&&(o[e.id].socket.onclose=null,o[e.id].socket.close()),window.WebSocket?o[e.id]=new c(e):e.trigger("websocket",{error:!0}))
};i.get("servers").on("add",d),i.get("servers").on("change:isAvailable",d),i.get("servers").on("reset",function(e){e.each(d)}),e.on("connect:websocket",function(e){e.id in o||"myPlex"===e.id||d(e)}),e.on("timeline",function(t){var n=t.section?t.section.get("title"):"section "+t.sectionID,i=t.title||"item "+t.itemID,a="";switch(t.state){case 0:a="Created";break;case 2:a="Matching";break;case 3:a="Downloading metadata for";break;case 4:a="Loading metadata for";break;case 5:a="Finished processing";break;
case 6:a="Analyzing";break;case 9:a="Deleted"}a&&e.trigger("show:status",t.server,a+" "+i+" in "+n+" on "+t.server.get("name"))})}),!function(e){e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}()})}(window.jQuery),define("transition",function(){}),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)
};t.prototype.setState=function(e){var t="disabled",n=this.$element,i=n.data(),a=n.is("input")?"val":"html";e+="Text",i.resetText||n.data("resetText",n[a]()),n[a](i[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.parent('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(n){return this.each(function(){var i=e(this),a=i.data("button"),s="object"==typeof n&&n;
a||i.data("button",a=new t(this,s)),"toggle"==n?a.toggle():n&&a.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})})}(window.jQuery),define("button",function(){}),!function(e){function t(){e(n).parent().removeClass("open")}var n='[data-toggle="dropdown"]',i=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);
e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(){var n,i,a,s=e(this);if(!s.is(".disabled, :disabled"))return i=s.attr("data-target"),i||(i=s.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),n=e(i),n.length||(n=s.parent()),a=n.hasClass("open"),t(),a||n.toggleClass("open"),!1}},e.fn.dropdown=function(t){return this.each(function(){var n=e(this),a=n.data("dropdown");a||n.data("dropdown",a=new i(this)),"string"==typeof t&&a[t].call(n)
})},e.fn.dropdown.Constructor=i,e(function(){e("html").on("click.dropdown.data-api",t),e("body").on("click.dropdown",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",n,i.prototype.toggle)})}(window.jQuery),define("dropdown",function(){}),!function(e){function t(){var t=this,i=setTimeout(function(){t.$element.off(e.support.transition.end),n.call(t)},500);this.$element.one(e.support.transition.end,function(){clearTimeout(i),n.call(t)})}function n(){this.$element.hide().trigger("hidden"),i.call(this)
}function i(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),"static"!=this.options.backdrop&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(a,this)):a.call(this)):t&&t()
}function a(){this.$backdrop.remove(),this.$backdrop=null}function s(){var t=this;this.isShown&&this.options.keyboard?e(document).on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||e(document).off("keyup.dismiss.modal")}var r=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this))};r.prototype={constructor:r,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");
this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(e("body").addClass("modal-open"),this.isShown=!0,s.call(this),i.call(this,function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in"),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")}))},hide:function(i){i&&i.preventDefault(),i=e.Event("hide"),this.$element.trigger(i),this.isShown&&!i.isDefaultPrevented()&&(this.isShown=!1,e("body").removeClass("modal-open"),s.call(this),this.$element.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?t.call(this):n.call(this))
}},e.fn.modal=function(t){return this.each(function(){var n=e(this),i=n.data("modal"),a=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof t&&t);i||n.data("modal",i=new r(this,a)),"string"==typeof t?i[t]():a.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=r,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n,i=e(this),a=e(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=a.data("modal")?"toggle":e.extend({},a.data(),i.data());
t.preventDefault(),a.modal(s)})})}(window.jQuery),define("modal",function(){}),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,i){var a,s;this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.enabled=!0,"manual"!=this.options.trigger&&(a="hover"==this.options.trigger?"mouseenter":"focus",s="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(a,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()
},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);return n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);
return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var t,n,i,a,s,r,l;if(this.hasContent()&&this.enabled){switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,n=/in/.test(r),t.remove().css({top:0,left:0,display:"block"}).appendTo(n?this.$element:document.body),i=this.getPosition(n),"fixed"===this.$element.data("tooltip-position")&&(i.top-=e(window).scrollTop(),i.left-=e(window).scrollLeft(),t.addClass("tooltip-fixed")),a=t[0].offsetWidth,s=t[0].offsetHeight,n?r.split(" ")[1]:r){case"bottom":l={top:i.top+i.height,left:i.left+i.width/2-a/2};
break;case"top":l={top:i.top-s,left:i.left+i.width/2-a/2};break;case"left":l={top:i.top+i.height/2-s/2,left:i.left-a};break;case"right":l={top:i.top+i.height/2-s/2,left:i.left+i.width}}t.css(l).addClass(r).addClass("in")}},isHTML:function(e){return"string"!=typeof e||"<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3||/^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(e)},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.isHTML(t)?"html":"text"](t),e.removeClass("fade in top bottom left right")
},hide:function(){function t(){var t=setTimeout(function(){n.off(e.support.transition.end).remove()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.remove()})}var n=this.tip();n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():n.remove()},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()
},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0
},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide(),this.$element.off("."+this.type).removeData(this.type)}},e.fn.tooltip=function(n){return this.each(function(){var i=e(this),a=i.data("tooltip"),s="object"==typeof n&&n;a||i.data("tooltip",a=new t(this,s)),"string"==typeof n&&a[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0}
}(window.jQuery),define("tooltip",function(){}),define("plex/control/init/GlobalInit",["plex/control/init/jQueryInit","plex/control/init/BackboneInit","plex/control/init/HandlebarsInit","plex/control/init/SoundManagerInit","plex/control/init/KeyboardInit","plex/control/Commands","plex/control/ServerNotificationStream","transition","button","dropdown","modal","tooltip"],function(){}),define("plex/model/media/MovieModel",["plex/model/media/MediaModel"],function(e){var t=e.extend();return t}),define("plex/model/media/EpisodeModel",["plex/model/media/MediaModel"],function(e){var t=e.extend({parse:function(t){var n=e.prototype.parse.call(this,t);
return n.watched=n.viewCount>0,n}});return t}),define("plex/model/media/collections/EpisodeCollection",["plex/control/utils/ParseUtil","plex/model/collections/BaseCollection","plex/model/media/EpisodeModel","jquery"],function(e,t,n){var i=t.extend({model:n,allowSync:!1,url:function(){return this.media.get("key")},initialize:function(e,t){this.server=t.server,this.section=t.section,this.media=t.media,t.url&&(this.url=t.url)},parse:function(t){var n=this.convert(t);return e.parseBoolean(n,"allowSync"),this.allowSync=n.allowSync,n.Video
}});return i}),define("plex/model/media/SeasonModel",["plex/model/media/MediaModel","plex/model/media/collections/EpisodeCollection"],function(e,t){var n=e.extend({constructor:function(){var t=e.prototype.constructor.apply(this,arguments);return _.isEmpty(t)?t:(n.prototype.initialize.apply(t,arguments),t)},initialize:function(){e.prototype.initialize.apply(this,arguments),this.get("episodes")||this.set("episodes",new t([],{server:this.server,section:this.section,media:this}))},getMediaLocation:function(){var e=this.get("episodes").first();
return e?e.getMediaLocation():null}});return n}),define("plex/model/media/collections/SeasonCollection",["plex/control/utils/ParseUtil","plex/model/collections/BaseCollection","plex/model/media/SeasonModel","jquery"],function(e,t,n){var i=t.extend({model:n,allowSync:!1,url:function(){return this.media.get("key")},initialize:function(e,t){this.server=t.server,this.section=t.section,this.media=t.media},parse:function(t){var n=this.convert(t);return e.parseBoolean(n,"allowSync"),e.parseArray(n,"Directory"),this.allowSync=n.allowSync,_.each(n.Directory,function(e){e.parentThumb=n.thumb
}),n.Directory}});return i}),define("plex/model/media/ShowModel",["plex/model/media/MediaModel","plex/model/media/collections/SeasonCollection"],function(e,t){var n=e.extend({constructor:function(){var t=e.prototype.constructor.apply(this,arguments);return _.isEmpty(t)?t:(n.prototype.initialize.apply(t,arguments),t)},initialize:function(){e.prototype.initialize.apply(this,arguments),this.get("seasons")||this.set("seasons",new t([],{server:this.server,section:this.section,media:this}))},getMediaLocation:function(){var e=this.get("seasons").first();
return e?e.getMediaLocation():null}});return n}),define("plex/model/media/collections/AlbumCollection",["plex/control/utils/ParseUtil","plex/model/collections/BaseCollection","plex/model/media/AlbumModel","jquery"],function(e,t,n){var i=t.extend({model:n,allowSync:!1,url:function(){return this.media.get("key")},initialize:function(e,t){this.server=t.server,this.section=t.section,this.media=t.media},parse:function(t){var n=this.convert(t);return e.parseBoolean(n,"allowSync"),this.allowSync=n.allowSync,n.Directory
}});return i}),define("plex/model/media/ArtistModel",["plex/model/media/MediaModel","plex/model/media/collections/AlbumCollection"],function(e,t){var n=e.extend({constructor:function(){var t=e.prototype.constructor.apply(this,arguments);return _.isEmpty(t)?t:(n.prototype.initialize.apply(t,arguments),t)},initialize:function(){e.prototype.initialize.apply(this,arguments),this.get("albums")||this.set("albums",new t([],{server:this.server,section:this.section,media:this}))},getMediaLocation:function(){var e=this.get("albums").last();
return e?e.getMediaLocation():null}});return n}),define("plex/model/media/PhotoAlbumModel",["plex/model/media/MediaModel","plex/model/media/collections/PhotoCollection"],function(e,t){var n=e.extend({constructor:function(){var t=e.prototype.constructor.apply(this,arguments);return _.isEmpty(t)?t:(n.prototype.initialize.apply(t,arguments),t)},initialize:function(){e.prototype.initialize.apply(this,arguments),this.get("photos")||this.set("photos",new t([],{server:this.server,section:this.section,media:this}))
}});return n}),define("plex/model/media/DetailsModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","plex/model/media/MediaModel","plex/model/media/MovieModel","plex/model/media/ShowModel","plex/model/media/SeasonModel","plex/model/media/EpisodeModel","plex/model/media/ArtistModel","plex/model/media/AlbumModel","plex/model/media/TrackModel","plex/model/media/PhotoAlbumModel","plex/model/media/PhotoModel","jquery"],function(e,t,n,i,a,s,r,l,o,c,d,h,u){var p=t.extend({idAttribute:"ratingKey",url:function(){var e=(""+this.section.id).match(/^(\S+)\/library\//),t="";
return e&&e.length>1&&(t+=e[1]),t+="/library/metadata/"+this.id+"?checkFiles=1&skipRefresh=1"},convert:function(t){var n=_.isObject(t)?t:u.xml2json(t);return e.parseBoolean(n,"allowSync"),n},parse:function(e){var t,u=this.convert(e),p=u.Directory||u.Video||u.Track||u.Photo||u;if(p.type){switch(p.identifier=u.identifier,p.mediaTagPrefix=u.mediaTagPrefix,p.mediaTagVersion=u.mediaTagVersion,p.allowSync=u.allowSync,/^(photo|photoalbum)$/.test(p.type)&&/\/children$/.test(p.key)&&(p.type="photoAlbum"),p.type){case"movie":t=i;
break;case"show":t=a;break;case"season":t=s;break;case"episode":t=r;break;case"artist":t=l;break;case"album":t=o;break;case"track":t=c;break;case"photoAlbum":t=d;break;case"photo":t=h;break;default:t=n}this.defaults=t.prototype.defaults;var m=new t(p,{server:this.server,section:this.section,parse:!0});this.set("media",m),p=m.attributes}return p}});return p}),define("plex/model/SearchProviderModel",["plex/model/BaseModel","jquery"],function(e,t){var n=e.extend({idAttribute:"key",whitelistedAttrs:["key","machineIdentifier","type","title"],convert:function(e){var n=_.isObject(e)?e:t.xml2json(e);
return n},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs)}});return n}),define("plex/model/collections/SearchProviderCollection",["plex/model/collections/BaseCollection","plex/model/SearchProviderModel","jquery"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.server=t.server,this.query=t.query},url:function(){return"/system/search?query="+this.query},parse:function(e){return this.convert(e,"Provider")}});return n}),define("hb!templates/alerts/LoadingAlert.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<i class="loading-icon glyphicon more"></i>\n'
})}),define("plex/view/alerts/LoadingAlert",["hb!templates/alerts/LoadingAlert.tpl","plex/view/BaseView","spin"],function(e,t){var n=t.extend({className:"alert loading",spinner:null,initialize:function(){("undefined"==typeof PLEXWEB||PLEXWEB.animations!==!1)&&(this.spinner=new Spinner({color:"#fff",width:3,length:5}))},render:function(){return this.$el.html(e()),this.spinner&&this.$el.append(this.spinner.spin().el),this},destroy:function(){this.spinner&&this.spinner.stop(),t.prototype.destroy.call(this)
}});return n}),define("hb!templates/alerts/Alert.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return'\n	<i class="alert-status glyphicon ok-2"></i>\n'}function r(e,t){var i,a,s,r="";return r+="\n	",s={hash:{},inverse:p.program(6,o,t),fn:p.program(4,l,t),data:t},i=n.if_eq,a=i?i.call(e,e.status,"error",s):m.call(e,"if_eq",e.status,"error",s),(a||0===a)&&(r+=a),r+="\n"}function l(){return'\n		<i class="alert-status glyphicon warning-sign"></i>\n	'}function o(){return'\n		<i class="alert-status glyphicon circle-exclamation-mark"></i>\n	'
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d,h,u="",p=this,m=n.helperMissing,f=this.escapeExpression;return u+='<a class="close-btn gray" href="#"><i class="glyphicon circle-remove"></i></a>\n\n',h={hash:{},inverse:p.program(3,r,a),fn:p.program(1,s,a),data:a},c=n.if_eq,d=c?c.call(t,t.status,"success",h):m.call(t,"if_eq",t.status,"success",h),(d||0===d)&&(u+=d),u+='\n\n<div class="alert-message">\n	',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,t.message,h):m.call(t,"t",t.message,h)))+"\n</div>\n"
})}),define("plex/view/alerts/Alert",["hb!templates/alerts/Alert.tpl","plex/model/AppModel","plex/view/BaseView"],function(e,t,n){var i=n.extend({className:"alert animated-slow scaleInOut",active:!1,pending:!1,events:{mouseenter:"onMouseEnter",mouseleave:"onMouseLeave","click .close-btn":"onCloseClick"},initialize:function(e){this.alert=_.isString(e.alert)?{message:e.alert}:e.alert},render:function(){return this.$el.html(e(this.alert)),this.animateIn(),this},animateIn:function(){setTimeout(_.bind(function(){this.active?(this.pending=!0,this.$el.css("animation-play-state","paused")):this.animateOut()
},this),2e3)},animateOut:function(){this.$el.css("animation-play-state","running"),setTimeout(_.bind(function(){this.destroy()},this),1e3)},destroy:function(){n.prototype.destroy.call(this),t.set("alert",null)},onMouseEnter:function(){this.active=!0},onMouseLeave:function(){this.active=!1,this.pending&&this.animateOut()},onCloseClick:function(e){e.preventDefault(),this.$el.css("opacity",0),setTimeout(_.bind(function(){this.destroy()},this),500)}});return i}),define("hb!templates/header/HeaderView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,d="";
return d+='\n	<ul class="nav iconbar">\n		<li>\n			<span class="search-container">\n				<form class="search-form">\n					<input type="text" class="input-dark input-search input-focusable" placeholder="',s={hash:{},data:t},d+=p((i=n.t,i?i.call(e,"Search",s):u.call(e,"t","Search",s)))+" ",(a=n.searchPlaceholder)?a=a.call(e,{hash:{},data:t}):(a=e.searchPlaceholder,a=typeof a===m?a.apply(e):a),d+=p(a)+'" autocomplete="off" spellcheck="false" value="',(a=n.search)?a=a.call(e,{hash:{},data:t}):(a=e.search,a=typeof a===m?a.apply(e):a),d+=p(a)+'" tabindex="0">\n					<i class="glyphicon search"></i>\n					<a class="clear-search-btn gray ',a=n.unless.call(e,e.search,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(a||0===a)&&(d+=a),d+='" href="#"><i class="glyphicon circle-remove"></i></a>\n				</form>\n			</span>\n		</li>\n\n		',a=n["if"].call(e,e.showUpdate,{hash:{},inverse:f.noop,fn:f.program(4,l,t),data:t}),(a||0===a)&&(d+=a),d+='\n\n		<li>\n			<a class="navbar-glyphicon-btn settings-icon-btn" href="#!/settings" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',s={hash:{},data:t},d+=p((i=n.t,i?i.call(e,"Settings",s):u.call(e,"t","Settings",s)))+'">\n				<i class="glyphicon settings"></i>\n			</a>\n		</li>\n\n		<li>\n			<a class="navbar-glyphicon-btn activity-icon-btn" href="#!/notifications" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',s={hash:{},data:t},d+=p((i=n.t,i?i.call(e,"Activity",s):u.call(e,"t","Activity",s)))+'">\n				<i class="glyphicon cardio"></i>\n			</a>\n		</li>\n\n		<li class="server-dropdown-container dropdown">\n			<a class="dropdown-toggle navbar-glyphicon-btn server-icon-btn" href="#server-dropdown-list" tabindex="0" rel="tooltip" data-toggle="dropdown" data-tooltip-position="fixed" title="',s={hash:{},data:t},d+=p((i=n.t,i?i.call(e,"Servers",s):u.call(e,"t","Servers",s)))+'">\n				<i class="glyphicon hdd"></i><i class="glyphicon-caret"></i>\n			</a>\n		</li>\n\n		<li class="dropdown">\n			<a class="dropdown-toggle navbar-glyphicon-btn account-icon-btn" href="#account-dropdown-list" tabindex="0" rel="tooltip" data-toggle="dropdown" data-tooltip-position="fixed" title="',s={hash:{},data:t},d+=p((i=n.t,i?i.call(e,"Account",s):u.call(e,"t","Account",s)))+'">\n				<i class="glyphicon user"></i><i class="glyphicon-caret"></i>\n			</a>\n\n			<ul class="dropdown-menu dropdown-menu-large pull-right">\n				',a=n["if"].call(e,(i=e.myPlex,null==i||i===!1?i:i.username),{hash:{},inverse:f.program(8,c,t),fn:f.program(6,o,t),data:t}),(a||0===a)&&(d+=a),d+="\n			</ul>\n		</li>\n	</ul>\n"
}function r(){return"hide"}function l(e,t){var i,a,s="";return s+='\n			<li>\n				<a class="navbar-glyphicon-btn update-btn" href="#" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=p((i=n.t,i?i.call(e,"Update",a):u.call(e,"t","Update",a)))+'">\n					<i class="glyphicon up-arrow"></i>\n				</a>\n			</li>\n		'}function o(e,t){var i,a,s,l="";return l+='\n					<li><a href="'+p((i=e.myPlex,i=null==i||i===!1?i:i.url,typeof i===m?i.apply(e):i))+'users/edit" target="_blank" tabindex="0"><i class="glyphicon user"></i> ',s={hash:{},data:t},l+=p((i=n.truncate,i?i.call(e,(i=e.myPlex,null==i||i===!1?i:i.username),15,s):u.call(e,"truncate",(i=e.myPlex,null==i||i===!1?i:i.username),15,s)))+'</a></li>\n					<li class="divider"></li>\n\n					<li><a href="#!/friends" tabindex="0"><i class="glyphicon parents"></i> ',s={hash:{},data:t},l+=p((i=n.t,i?i.call(e,"Friends",s):u.call(e,"t","Friends",s)))+' <span class="friend-requests-badge ',a=n.unless.call(e,e.friendRequestsCount,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(a||0===a)&&(l+=a),l+='">',(a=n.friendRequestsCount)?a=a.call(e,{hash:{},data:t}):(a=e.friendRequestsCount,a=typeof a===m?a.apply(e):a),l+=p(a)+'</span></a></li>\n					<li><a href="#!/playlist/recommendations" tabindex="0"><i class="glyphicon share-alt"></i> ',s={hash:{},data:t},l+=p((i=n.t,i?i.call(e,"Recommendations",s):u.call(e,"t","Recommendations",s)))+'</a></li>\n					<li><a href="#!/playlist/queue" tabindex="0"><i class="glyphicon clock"></i> ',s={hash:{},data:t},l+=p((i=n.t,i?i.call(e,"Queue",s):u.call(e,"t","Queue",s)))+'</a></li>\n\n					<li class="divider"></li>\n					<li><a class="signout-btn" href="#" tabindex="0"><i class="glyphicon new-window"></i> ',s={hash:{},data:t},l+=p((i=n.t,i?i.call(e,"Sign Out",s):u.call(e,"t","Sign Out",s)))+"</a></li>\n				"
}function c(e,t){var i,a,s="";return s+='\n					<li><a class="signin-btn" href="#!/login" tabindex="0"><i class="glyphicon user"></i> ',a={hash:{},data:t},s+=p((i=n.t,i?i.call(e,"Sign In",a):u.call(e,"t","Sign In",a)))+"</a></li>\n				"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var d,h="",u=n.helperMissing,p=this.escapeExpression,m="function",f=this;return d=n["if"].call(t,t.isAuthorized,{hash:{},inverse:f.noop,fn:f.program(1,s,a),data:a}),(d||0===d)&&(h+=d),h+="\n"})}),define("text!templates/tooltips/LargeTooltip.tpl",[],function(){return'<div class="tooltip tooltip-large"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'
}),define("hb!templates/header/BreadcrumbBarView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"hide"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l,o="",c=this,d=n.helperMissing,h=this.escapeExpression;return o+='<li class="back-icon ',r=n.unless.call(t,t.showBack,{hash:{},inverse:c.noop,fn:c.program(1,s,a),data:a}),(r||0===r)&&(o+=r),o+='">\n	<a class="navbar-glyphicon-btn back-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',l={hash:{},data:a},o+=h((r=n.t,r?r.call(t,"Back",l):d.call(t,"t","Back",l)))+'">\n		<i class="glyphicon left-arrow"></i>\n	</a>\n</li>\n\n<li>\n	<a class="navbar-glyphicon-btn home-icon-btn" href="#!/dashboard" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',l={hash:{},data:a},o+=h((r=n.t,r?r.call(t,"Home",l):d.call(t,"t","Home",l)))+'">\n		<i class="glyphicon home"></i>\n	</a>\n</li>\n\n<li class="divider"></li>\n\n<li id="section-breadcrumb" class="breadcrumb-item">\n	<a class="breadcrumb-placeholder breadcrumb-btn" href="#">\n		<i class="glyphicon more"></i>\n	</a>\n</li>\n'
})}),define("hb!templates/lists/header/SectionDropdownList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,o="";return o+='\n	<a class="breadcrumb-btn split-left" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===p?i.apply(e):i),o+=u(i)+"/sections/",s={hash:{},data:t},o+=u((i=n.encodeUrl,i?i.call(e,(i=e.activeSection,null==i||i===!1?i:i.key),s):h.call(e,"encodeUrl",(i=e.activeSection,null==i||i===!1?i:i.key),s)))+'" tabindex="0">\n		<div class="breadcrumb-spinner-container spinner-container">\n			<i class="plex-icon-section-mini plex-icon-'+u((i=e.activeSection,i=null==i||i===!1?i:i.type,typeof i===p?i.apply(e):i))+'-mini"></i>\n		</div>\n\n		',a=n["if"].call(e,e.source,{hash:{},inverse:m.program(4,l,t),fn:m.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='\n	</a>\n	<a class="breadcrumb-btn split-right dropdown-toggle" href="#section-dropdown-list" tabindex="0" data-toggle="dropdown"><i class="glyphicon-caret"></i></a>\n\n	<ul class="dropdown-menu dropdown-menu-large"></ul>\n'
}function r(e,t){var i,a,s="";return s+="\n			",a={hash:{},data:t},s+=u((i=n.truncate,i?i.call(e,(i=e.activeSection,null==i||i===!1?i:i.title),15,a):h.call(e,"truncate",(i=e.activeSection,null==i||i===!1?i:i.title),15,a)))+' <span class="source-title">(',a={hash:{},data:t},s+=u((i=n.truncate,i?i.call(e,e.source,15,a):h.call(e,"truncate",e.source,15,a)))+")</span>\n		"}function l(e,t){var i,a,s="";return s+="\n			",a={hash:{},data:t},s+=u((i=n.truncate,i?i.call(e,(i=e.activeSection,null==i||i===!1?i:i.title),20,a):h.call(e,"truncate",(i=e.activeSection,null==i||i===!1?i:i.title),20,a)))+"\n		"
}function o(e,t){var i,a,s,o="";return o+='\n	<a class="breadcrumb-btn" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===p?i.apply(e):i),o+=u(i)+"/sections/",s={hash:{},data:t},o+=u((i=n.encodeUrl,i?i.call(e,(i=e.activeSection,null==i||i===!1?i:i.key),s):h.call(e,"encodeUrl",(i=e.activeSection,null==i||i===!1?i:i.key),s)))+'" tabindex="0">\n		<div class="breadcrumb-spinner-container spinner-container">\n			<i class="plex-icon-section-mini plex-icon-'+u((i=e.activeSection,i=null==i||i===!1?i:i.type,typeof i===p?i.apply(e):i))+'-mini"></i>\n		</div>\n\n		',a=n["if"].call(e,e.source,{hash:{},inverse:m.program(4,l,t),fn:m.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+="\n	</a>\n"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d="",h=n.helperMissing,u=this.escapeExpression,p="function",m=this;return c=n["if"].call(t,t.showDropdown,{hash:{},inverse:m.program(6,o,a),fn:m.program(1,s,a),data:a}),(c||0===c)&&(d+=c),d+="\n"})}),define("hb!templates/lists/header/items/SectionDropdownListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return' <i class="glyphicon ok-2"></i>'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var r,l,o,c="",d="function",h=this.escapeExpression,u=n.helperMissing,p=this;return c+='<a href="#!/servers/',(r=n.serverID)?r=r.call(t,{hash:{},data:a}):(r=t.serverID,r=typeof r===d?r.apply(t):r),c+=h(r)+"/sections/",o={hash:{},data:a},c+=h((r=n.encodeUrl,r?r.call(t,(r=t.section,null==r||r===!1?r:r.key),o):u.call(t,"encodeUrl",(r=t.section,null==r||r===!1?r:r.key),o)))+'" tabindex="0">\n	<div class="spinner-container">\n		<i class="plex-icon-section-mini plex-icon-'+h((r=t.section,r=null==r||r===!1?r:r.type,typeof r===d?r.apply(t):r))+'-mini plex-icon-dark"></i>\n	</div>\n\n	&nbsp;'+h((r=t.section,r=null==r||r===!1?r:r.title,typeof r===d?r.apply(t):r))+"\n\n	",l=n["if"].call(t,t.active,{hash:{},inverse:p.noop,fn:p.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+="\n</a>\n"
})}),define("plex/view/lists/header/items/SectionDropdownListItem",["hb!templates/lists/header/items/SectionDropdownListItem.tpl","plex/model/HeaderModel","plex/view/BaseView","jquery","spin"],function(e,t,n,i){var a=n.extend({tagName:"li",spinner:null,spinnerContainer:null,events:{mouseenter:"onMouseEnter","focus a":"onMouseEnter",mouseleave:"onMouseLeave","blur a":"onMouseLeave"},initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,section:this.model.toJSON(),active:this.model.id===t.get("activeSection").id})),this.model.get("refreshing")&&this.$(".spinner-container").spinContents("tiny","#333"),this
},onMouseEnter:function(e){var t=i(e.target).find("i");t.length?t.removeClass("plex-icon-dark"):i(e.target).closest("i").removeClass("plex-icon-dark"),this.model.get("refreshing")&&(this.$(".spinner-container").spinContents(!1),this.$(".spinner-container").spinContents("tiny","#fff"))},onMouseLeave:function(e){var t=i(e.target).find("i");t.length?t.addClass("plex-icon-dark"):i(e.target).closest("i").addClass("plex-icon-dark"),this.model.get("refreshing")&&(this.$(".spinner-container").spinContents(!1),this.$(".spinner-container").spinContents("tiny","#333"))
}});return a}),define("plex/view/lists/header/SectionDropdownList",["hb!templates/lists/header/SectionDropdownList.tpl","plex/model/AppModel","plex/model/HeaderModel","plex/view/lists/BaseList","plex/view/lists/header/items/SectionDropdownListItem","spin"],function(e,t,n,i,a){var s=i.extend({id:"section-dropdown-list",tagName:"div",className:"breadcrumb-content dropdown",activeServer:null,activeSection:null,initialize:function(){this.setup(a,".dropdown-menu")},render:function(i){this.activeSection&&(this.removeBinding(this.activeSection,"change:title"),this.removeBinding(this.activeSection,"change:refreshing")),this.activeServer=n.get("activeServer"),this.activeSection=n.get("activeSection"),this.addBinding(this.activeSection,"change:title",this.onChange),this.addBinding(this.activeSection,"change:refreshing",this.onChange);
var a;this.activeServer.get("shared")?a=this.activeServer.get("sourceTitle"):t.get("multiServer")&&(a=this.activeServer.get("friendlyName")||this.activeServer.get("name"));var s={serverID:this.activeServer.id,showDropdown:this.collection.length>1,activeSection:this.activeSection.toJSON(),source:a};return this.$el.html(e(s)),this.activeSection.get("refreshing")&&this.$(".breadcrumb-spinner-container").spinContents("tiny"),i||this.populate(this.collection),this},reset:function(e){this.render(!0),i.prototype.reset.call(this,e)
},onChange:function(){this.render()}});return s}),define("plex/view/header/BreadcrumbBarView",["hb!templates/header/BreadcrumbBarView.tpl","text!templates/tooltips/LargeTooltip.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/view/lists/header/SectionDropdownList","jquery"],function(e,t,n,i,a,s,r){var l=a.extend({tagName:"ul",className:"breadcrumbbar nav",animationDuration:300,events:{"click .back-icon-btn":"onBackClick","click .breadcrumb-placeholder":"onPlaceholderClick","mouseenter .breadcrumb-item.collapsed":"onCollapsedBreadcrumbMouseOver"},initialize:function(){this.addBinding(n,"change:language",this.onLanguageChange),this.resizeThrottle=_.throttle(_.bind(this.resize,this),this.animationDuration),r(window).on("resize",this.resizeThrottle)
},render:function(){return this.$el.html(e({showBack:this.model.get("showBack")})),this.$el.tooltip({selector:".navbar-glyphicon-btn",placement:"bottom",template:t}),this.bindView(),this.delegateEvents(),this},resize:function(){var e=this.$el.parent(),t=e.width()-e.find(".iconbar").innerWidth();if(t){if(this.$(".breadcrumb-item.animating").length)return _.delay(_.bind(this.resize,this),this.animationDuration),void 0;var n=this.$(".breadcrumb-item").get(),i=this.$(".breadcrumb-item.collapsed,.breadcrumb-item.expanded,.breadcrumb-item.animating").get(),a=this.$el.outerWidth(),s=this.getMaxWidth(a,i),l=s>t;
l||n.reverse();for(var o=0,c=n.length;c>o;o++){var d=r(n[o]),h=d.hasClass("collapsed"),u=d.find(".breadcrumb-content").outerWidth(),p=d.find(".breadcrumb-placeholder").outerWidth(),m=u-p;if(l){if(h)continue;if(i.push(d[0]),this.collapse(d),a-=m,t>this.getMaxWidth(a,i))break}else{if(!h)continue;if(i.splice(_.indexOf(i,d[0]),1),!(t>this.getMaxWidth(a+m,i)))break;this.expand(d),a+=m}}}},getMaxWidth:function(e,t){for(var n=0,i=0,a=t.length;a>i;i++){var s=r(t[i]),l=s.find(".breadcrumb-content").outerWidth(),o=s.find(".breadcrumb-placeholder").outerWidth(),c=l-o;
c>n&&(n=c)}return e+n},collapse:function(e){e.find(".breadcrumb-content").outerWidth();var t=e.find(".breadcrumb-placeholder").outerWidth(),n=_.bind(function(){e.removeClass("animating"),e.addClass("collapsed")},this);e.addClass("animating"),e.removeClass("collapsed"),e.removeClass("expanded"),e.find(".dropdown").removeClass("open"),e.stop().animate({width:t},this.animationDuration,n)},expand:function(e,t){var n=e.find(".breadcrumb-content").outerWidth();e.find(".breadcrumb-placeholder").outerWidth();
var i=_.bind(function(){e.removeClass("animating"),t&&e.addClass("expanded")},this);e.addClass("animating"),e.removeClass("expanded"),e.removeClass("collapsed"),e.stop().animate({width:n},this.animationDuration,i)},bindings:{".back-icon":{modelAttr:"showBack",format:function(e,t){t?e.removeClass("hide"):e.addClass("hide")}},"#section-breadcrumb":{modelAttr:"activeSection",format:function(e,t){var n=this.model.get("activeServer");this.sectionList&&this.removeView(this.sectionList),t?(this.sectionList=this.registerView(new s({collection:n.get("sections")})),e.append(this.sectionList.render().el),e.css("width","auto"),e.removeClass("hide"),e.prev().removeClass("hide")):(e.removeClass("expanded collapsed animating"),e.addClass("hide"),e.prev().addClass("hide")),this.resizeThrottle()
}},".media-breadcrumb":{modelAttr:"activeMedia",format:function(e,t){var n=this.model.get("activeServer"),i=this.model.get("activeSection");if(e.each(function(){var e=r(this),t=e.prev();e.remove(),t.remove()}),t){var a=r(Handlebars.partials.breadcrumbMediaItem({server:n.toJSON(),section:i.toJSON(),media:t.toJSON()},this));this.$("#section-breadcrumb").after(a)}this.resizeThrottle()}},"#channel-breadcrumb":{modelAttr:"activeChannel",format:function(e,t){var n=this.model.get("activeServer");if(this.model.get("activeSection"),e.each(function(){var e=r(this),t=e.prev();
e.remove(),t.remove()}),t){var a;n.get("shared")?a=n.get("sourceTitle"):i.get("multiServer")&&(a=n.get("friendlyName")||n.get("name"));var s=r(Handlebars.partials.breadcrumbMediaItem({server:n.toJSON(),channel:t.toJSON(),source:a},this));this.$("#section-breadcrumb").after(s)}this.resizeThrottle()}},".channel-media-breadcrumb":{modelAttr:"activeChannelMedia",format:function(e,t){var n=this.model.get("activeServer");if(this.model.get("activeSection"),e.each(function(){var e=r(this),t=e.prev();e.remove(),t.remove()
}),t){var i,a;t.channel&&(i=t.channel.id),t.channel&&(a=t.channel.get("identifier"));var s=r(Handlebars.partials.breadcrumbMediaItem({server:n.toJSON(),channelKey:i,channelID:a,channelMedia:t.toJSON()},this)),l=this.$("#channel-breadcrumb");l.length?l.after(s):this.$("#section-breadcrumb").after(s)}this.resizeThrottle()}}},onLanguageChange:function(){this.removeAllViews(),this.render()},onBackClick:function(e){e.preventDefault(),n.trigger("navigate:back")},onPlaceholderClick:function(e){e.preventDefault(),this.$(".breadcrumb-item.animating, .breadcrumb-item.expanded").each(_.bind(function(e,t){this.collapse(r(t))
},this)),this.expand(r(e.currentTarget).closest(".breadcrumb-item"),!0)},onCollapsedBreadcrumbMouseOver:function(e){this.$(".breadcrumb-item.animating, .breadcrumb-item.expanded").each(_.bind(function(e,t){this.collapse(r(t))},this)),this.expand(r(e.currentTarget),!0)},onCollapsedBreadcrumbMouseOut:function(e){this.collapse(r(e.currentTarget))}});return l}),define("hb!templates/lists/header/items/ServerDropdownListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e){var t,n="";
return n+="\n		"+u((t=e.server,t=null==t||t===!1?t:t.friendlyName,typeof t===h?t.apply(e):t))+"\n	"}function r(e){var t,n="";return n+="\n		"+u((t=e.server,t=null==t||t===!1?t:t.name,typeof t===h?t.apply(e):t))+"\n	"}function l(){return' <i class="glyphicon ok-2"></i>'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var o,c,d="",h="function",u=this.escapeExpression,p=this;return d+='<a href="#" tabindex="0">\n	',c=n["if"].call(t,(o=t.server,null==o||o===!1?o:o.friendlyName),{hash:{},inverse:p.program(3,r,a),fn:p.program(1,s,a),data:a}),(c||0===c)&&(d+=c),d+="\n\n	",c=n["if"].call(t,t.active,{hash:{},inverse:p.noop,fn:p.program(5,l,a),data:a}),(c||0===c)&&(d+=c),d+="\n</a>\n"
})}),define("plex/view/lists/header/items/ServerDropdownListItem",["hb!templates/lists/header/items/ServerDropdownListItem.tpl","plex/model/AppModel","plex/view/BaseView"],function(e,t,n){var i=n.extend({tagName:"li",events:{"click a":"onClick"},initialize:function(){this.addBinding(this.model,"change",this.render),this.addBinding(t,"change:primaryServer",this.render)},render:function(){return this.$el.html(e({server:this.model.toJSON(),active:this.model.id===t.get("primaryServer").id})),this},onClick:function(e){e.preventDefault(),t.set("primaryServer",this.model)
}});return i}),define("plex/view/lists/header/ServerDropdownList",["plex/view/lists/BaseList","plex/view/lists/header/items/ServerDropdownListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"dropdown-menu dropdown-menu-large pull-right",initialize:function(){this.setup(t)},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){return t.get("shared")||"secondary"===t.get("serverClass")?void 0:(this.removeBinding(t,"change:isAvailable"),t.get("isAvailable")?e.prototype.addItem.apply(this,arguments):(this.addBinding(t,"change:isAvailable",this.onServerAvailableChange),void 0))
},onServerAvailableChange:function(e,t){t?this.addItem(e,this.collection):this.items[e.id]&&this.removeItem(e)}});return n}),define("plex/view/header/HeaderView",["hb!templates/header/HeaderView.tpl","text!templates/tooltips/LargeTooltip.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/control/utils/StringUtil","plex/model/AppModel","plex/model/HeaderModel","plex/view/KeyboardNavigationView","plex/view/header/BreadcrumbBarView","plex/view/lists/header/ServerDropdownList","jquery"],function(e,t,n,i,a,s,r,l,o,c,d){var h=l.extend({className:"navbar navbar-fixed-top",keyboardActivationDirection:"up",keyboardCancellationDirections:{down:".input-search, li:not(.open) .navbar-glyphicon-btn, .breadcrumb-content:not(.open) .breadcrumb-btn"},breadcrumbBar:null,serverDropdown:null,searchTimeout:null,events:{"focus .input-search":"onSearchFocus","blur .input-search":"onSearchBlur","keyup .input-search":"onSearchKeyUp","submit .search-form":"onSearchSubmit","click .clear-search-btn":"onClearSearchClick","click .update-btn":"onUpdateClick","click .server-icon-btn":"onServerClick","click .account-icon-btn":"onAccountClick","click .signout-btn":"onSignOutClick"},initialize:function(){var e=s.get("myPlex"),t=e.get("friendRequests");
this.addBinding(n,"shortcut:search",this.focusSearch),this.addBinding(n,"change:language",this.refresh),this.addBinding(s,"change:isAuthorized",this.refresh),this.addBinding(s,"change:updateStatus",this.refresh),this.addBinding(e,"change:username",this.refresh),this.addBinding(r,"change:activeView",this.onViewChange),this.addBinding(r,"change:activeSection",this.onSectionChange),this.addBinding(r,"change:activeMedia",this.onSectionChange),this.addBinding(r,"change:activeChannel",this.onSectionChange),this.addBinding(r,"change:activeSearch",this.onSearchChange),this.addBinding(n,"reset:filter",this.onSearchReset),this.addBinding(t,"reset",this.onFriendRequestsReset),this.breadcrumbBar=this.registerView(new o({model:r})),this.serverDropdown=this.registerView(new c({collection:s.get("servers")}))
},render:function(){var n=s.get("myPlex"),i=r.get("activeSection"),l=r.get("activeMedia"),o=r.get("activeChannel"),c=s.get("updateStatus");this.inSection=i&&!l&&!o;var d={search:r.get("activeSearch"),searchPlaceholder:this.inSection?a.truncate(i.get("title"),10):"",isAuthorized:s.get("isAuthorized"),showUpdate:"download"===c||"reload"===c,myPlex:n.toJSON(),friendRequestsCount:n.get("friendRequests").length};return this.inSection&&(d.search=i.get("media").search),this.$el.html(e(d)),this.$el.prepend(this.breadcrumbBar.render().el),this.$(".server-dropdown-container").append(this.serverDropdown.render().el),this.$el.tooltip({selector:".navbar-glyphicon-btn",placement:"bottom",template:t}),this
},focusSearch:function(){this.$(".input-search").focus()},searchAll:function(){var e=this.$(".input-search").val();e.length>2&&n.trigger("navigate:search",e)},searchSection:function(){var e=this.$(".input-search").val(),t=r.get("activeSection").get("media");t.search!==e&&(n.trigger("navigate:section",r.get("activeServer").id,r.get("activeSection").id),n.trigger("search:section",e))},onViewChange:function(e,t){switch(this.$(".navbar-glyphicon-btn").removeClass("active"),t){case"dashboard":this.$(".home-icon-btn").addClass("active");
break;case"settings":this.$(".settings-icon-btn").addClass("active");break;case"activity":this.$(".activity-icon-btn").addClass("active")}},onSectionChange:function(){var e=r.get("activeSection"),t=r.get("activeMedia"),n=r.get("activeChannel"),s=i.t("Search");this.inSection=e&&!t&&!n,this.inSection&&(s+=" "+a.truncate(e.get("title"),10)),this.$(".input-search").attr("placeholder",s)},onSearchChange:function(e,t){this.$(".input-search").val(t),t?this.$(".clear-search-btn").removeClass("hide"):this.$(".clear-search-btn").addClass("hide")
},onSearchReset:function(){this.$(".input-search").val(""),this.$(".clear-search-btn").addClass("hide")},onFriendRequestsReset:function(e){e.length?this.$(".friend-requests-badge").removeClass("hide").text(e.length):this.$(".friend-requests-badge").addClass("hide")},onSearchFocus:function(e){d(e.target).hasClass("keyboard-focus")||this.$(".search-container").addClass("selected")},onSearchBlur:function(){this.$(".search-container").removeClass("selected")},onSearchKeyUp:function(e){13!==e.which&&(0===this.$(e.target).val().length?this.$(".clear-search-btn").addClass("hide"):this.$(".clear-search-btn").removeClass("hide"),this.inSection&&(this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(_.bind(this.searchSection,this),500)))
},onSearchSubmit:function(e){e.preventDefault(),this.$(".input-search").blur(),this.inSection?(this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchSection()):this.searchAll()},onClearSearchClick:function(e){e.preventDefault();var t=this.$(".input-search");if(this.$(".clear-search-btn").addClass("hide"),t.focus(),t.val(""),this.inSection){var i=r.get("activeSection").get("media");""!==i.search&&(n.trigger("navigate:section",r.get("activeServer").id,r.get("activeSection").id),n.trigger("search:section",""))
}},onUpdateClick:function(e){e.preventDefault(),"download"===s.get("updateStatus")?n.trigger("command:InstallUpdate"):window.location.reload(!0)},onServerClick:function(){d(".tooltip").remove()},onAccountClick:function(){d(".tooltip").remove()},onSignOutClick:function(e){e.preventDefault(),n.trigger("command:SignOut")}});return h}),define("hb!templates/StatusView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o=n.helperMissing,c=this.escapeExpression;
return l+='<a class="activity-btn gray" href="#" tabindex="-1" rel="tooltip" data-tooltip-position="fixed" title="',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Activity",r):o.call(t,"t","Activity",r)))+'"><i class="glyphicon cardio"></i></a>\n\n<span class="status"></span>\n'})}),define("plex/view/StatusView",["hb!templates/StatusView.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var i=n.extend({className:"statusbar hidden",statusTimeout:null,active:!1,events:{mouseover:"onMouseOver",mouseout:"onMouseOut","click .activity-btn":"onActivityClick"},initialize:function(){_.bindAll(this,"hide"),this.addBinding(t,"show:status",this.onShowStatus)
},render:function(){return this.$el.html(e()),this.$el.tooltip({selector:".gray",placement:"top"}),this},hide:function(){this.active?this.statusTimeout=setTimeout(this.hide,1e3):this.$el.addClass("hidden")},onShowStatus:function(e,t){this.server=e,this.$(".status").text(t),this.$el.removeClass("hidden"),this.statusTimeout&&clearTimeout(this.statusTimeout),this.statusTimeout=setTimeout(this.hide,5e3)},onMouseOver:function(){this.active=!0},onMouseOut:function(){this.active=!1},onActivityClick:function(e){e.preventDefault(),t.trigger("navigate:notifications",this.server.id)
}});return i}),define("plex/model/PlayerModel",["backbone"],function(){var e=Backbone.Model.extend({defaults:{currentTime:0,duration:0,formattedTime:"0:00",formattedDuration:"0:00",volume:0,paused:!0,ended:!1,buffering:!1,startBuffer:0,endBuffer:0,enablePrevious:!1,enableNext:!1,thumb:null},reset:function(){this.set(this.defaults)},secondsToHms:function(e){if(!e)return"0:00";e=Number(e);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60);return(t>0?t+":":"")+(n>0?(t>0&&10>n?"0":"")+n+":":"0:")+(10>i?"0":"")+i
}});return e}),define("hb!templates/players/core/MusicControlsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"disabled"}function r(){return"hide"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o,c,d="",h=n.helperMissing,u=this.escapeExpression,p="function",m=this;return d+='<a class="now-playing-album" href="#">\n	<img class="poster now-playing-poster" data-original="',c={hash:{},data:a},d+=u((l=n.transcodeImage,l?l.call(t,t.serverObj,(l=t.player,null==l||l===!1?l:l.thumb),t.thumbSize,t.thumbSize,c):h.call(t,"transcodeImage",t.serverObj,(l=t.player,null==l||l===!1?l:l.thumb),t.thumbSize,t.thumbSize,c)))+'" src="img/posters/album.png">\n</a>\n\n<div class="now-playing">\n	<a class="now-playing-title" href="#">',(o=n.title)?o=o.call(t,{hash:{},data:a}):(o=t.title,o=typeof o===p?o.apply(t):o),d+=u(o)+'</a>\n	<span class="now-playing-subtitle" href="#">',(o=n.title)?o=o.call(t,{hash:{},data:a}):(o=t.title,o=typeof o===p?o.apply(t):o),d+=u(o)+'</span>\n</div>\n\n<div class="player-controls-left">\n	<button class="player-previous-btn player-btn ',o=n.unless.call(t,(l=t.player,null==l||l===!1?l:l.enablePrevious),{hash:{},inverse:m.noop,fn:m.program(1,s,a),data:a}),(o||0===o)&&(d+=o),d+='"><i class="glyphicon rewind"></i></button>\n	<button class="player-play-btn player-play-pause-btn player-btn ',o=n["if"].call(t,(l=t.player,null==l||l===!1?l:l.paused),{hash:{},inverse:m.noop,fn:m.program(3,r,a),data:a}),(o||0===o)&&(d+=o),d+='"><i class="glyphicon play"></i></button>\n	<button class="player-pause-btn player-play-pause-btn player-btn ',o=n.unless.call(t,(l=t.player,null==l||l===!1?l:l.paused),{hash:{},inverse:m.noop,fn:m.program(3,r,a),data:a}),(o||0===o)&&(d+=o),d+='"><i class="glyphicon pause"></i></button>\n	<button class="player-stop-btn player-btn"><i class="glyphicon stop"></i></button>\n	<button class="player-next-btn player-btn ',o=n.unless.call(t,(l=t.player,null==l||l===!1?l:l.enableNext),{hash:{},inverse:m.noop,fn:m.program(1,s,a),data:a}),(o||0===o)&&(d+=o),d+='"><i class="glyphicon forward"></i></button>\n</div>\n\n<div class="player-controls-right">\n	<div class="player-time"><span class="player-current-time">'+u((l=t.player,l=null==l||l===!1?l:l.formattedTime,typeof l===p?l.apply(t):l))+'</span> / <span class="player-duration">'+u((l=t.player,l=null==l||l===!1?l:l.formattedDuration,typeof l===p?l.apply(t):l))+'</span></div>\n</div>\n\n<div class="player-controls-center-wrapper">\n	<div class="player-controls-center"></div>\n</div>\n'
})}),define("hb!templates/players/core/SeekBarView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<div class="player-slider-thumb player-progress-thumb"></div>\n<div class="player-slider-bar player-progress-bar"></div>\n<div class="player-buffer-bar"></div>'})}),define("plex/view/players/core/SeekBarView",["hb!templates/players/core/SeekBarView.tpl","plex/view/BaseView","jquery"],function(e,t,n){var i=t.extend({className:"player-slider-track player-seek-bar",events:{mousedown:"onSeekBarMouseDown"},initialize:function(){_.bindAll(this,"onSeekBarMouseMove","onSeekBarMouseUp"),this.model.bind("change:currentTime",this.onCurrentTimeChange,this),this.model.bind("change:startBuffer",this.onBufferChange,this),this.model.bind("change:endBuffer",this.onBufferChange,this)
},render:function(){return this.$el.html(e()),this.onCurrentTimeChange(),this.onBufferChange(),this},seek:function(e){var t=e-this.$el.offset().left,n=t/this.$el.width();n=Math.min(Math.max(n,0),1);var i=n*this.model.get("duration");this.trigger("seek",i)},onSeekBarMouseDown:function(e){e.preventDefault(),n(document).on("mousemove",this.onSeekBarMouseMove),n(document).on("mouseup",this.onSeekBarMouseUp),this.seek(e.pageX)},onSeekBarMouseMove:function(e){e.preventDefault(),this.seek(e.pageX)},onSeekBarMouseUp:function(e){e.preventDefault(),n(document).off("mousemove",this.onSeekBarMouseMove),n(document).off("mouseup",this.onSeekBarMouseUp),this.seek(e.pageX)
},onCurrentTimeChange:function(){var e=this.$(".player-progress-thumb"),t=this.$(".player-progress-bar"),n=this.model.get("currentTime"),i=this.model.get("duration");if(i){var a=this.$el.width(),s=e.width()/2,r=n/i,l=r*a,o=(l-2*s)/a,c=Math.min(Math.max(100*o,0),100),d=Math.min(Math.max(100*r,0),100);e.css("left",c+"%"),t.css("width",d+"%")}},onBufferChange:function(){var e=this.$(".player-buffer-bar");this.$el.width();var t=this.model.get("duration"),n=100*(this.model.get("endBuffer")/t);_.isNaN(n)&&(n=0),n=Math.min(Math.max(n,0),100),e.css("left",0),e.css("width",n+"%")
}});return i}),define("hb!templates/players/core/SliderView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<div class="player-slider-track">\n	<div class="player-slider-thumb"></div>\n	<div class="player-slider-bar"></div>\n</div>\n\n<button class="player-btn player-slider-btn glyphicon"></button>\n'})}),define("plex/view/players/core/SliderView",["hb!templates/players/core/SliderView.tpl","plex/view/BaseView","jquery"],function(e,t,n){var i=t.extend({currentValue:0,dragging:!1,events:{"click .player-slider-btn":"onButtonClick","mousedown .player-slider-track":"onSliderMouseDown"},initialize:function(){_.bindAll(this,"onSliderMouseMove","onSliderMouseUp")
},render:function(){return this.$el.html(e()),this},calculateValue:function(e){var t=this.$(".player-slider-track"),n=e-t.offset().left,i=n/t.width();i>1?i=1:0>i&&(i=0),this.currentValue=i,this.trigger("change:value",i)},setValue:function(e){this.currentValue=e;var t=this.$(".player-slider-track"),n=this.$(".player-slider-thumb"),i=this.$(".player-slider-bar"),a=t.width(),s=n.width()/2,r=e*a;s>r?r=s:r+s>a&&(r=a-s),n.css("left",Math.round(r-s)),i.width(Math.round(r))},onButtonClick:function(){this.trigger("click:button")
},onSliderMouseDown:function(e){e.preventDefault(),n(document).on("mousemove",this.onSliderMouseMove),n(document).on("mouseup",this.onSliderMouseUp),this.dragging=!0,this.$el.addClass("player-active-slider"),this.calculateValue(e.pageX)},onSliderMouseMove:function(e){e.preventDefault(),this.calculateValue(e.pageX)},onSliderMouseUp:function(e){e.preventDefault(),n(document).off("mousemove",this.onVolumeSliderMouseMove),n(document).off("mouseup",this.onVolumeSliderMouseUp),this.dragging=!1,this.$el.removeClass("player-active-slider"),this.calculateValue(e.pageX),this.trigger("release")
}});return i}),define("plex/view/players/core/MusicControlsView",["hb!templates/players/core/MusicControlsView.tpl","plex/view/BaseView","plex/view/players/core/SeekBarView","plex/view/players/core/SliderView","jquery"],function(e,t,n,i,a){var s=t.extend({className:"player-controls",server:null,seekBar:null,volumeSlider:null,muted:!1,mutedVolume:0,hideVolume:!1,hideNowPlaying:!1,events:{"click .player-play-pause-btn":"onPlayPauseClick","click .player-stop-btn":"onStopClick","click .player-previous-btn":"onPreviousClick","click .player-next-btn":"onNextClick"},initialize:function(e){this.server=e.server,this.hideVolume=e.hideVolume,this.hideNowPlaying=e.hideNowPlaying,this.seekBar=this.registerView(new n({model:this.model})),this.volumeSlider=this.registerView(new i({className:"player-volume"})),this.addBinding(this.model,"change:paused",this.onPausedChange),this.addBinding(this.model,"change:formattedTime",this.onCurrentTimeChange),this.addBinding(this.model,"change:formattedDuration",this.onDurationChange),this.addBinding(this.model,"change:volume",this.onVolumeChange),this.addBinding(this.model,"change:enablePrevious",this.onEnablePreviousChange),this.addBinding(this.model,"change:enableNext",this.onEnableNextChange),this.addBinding(this.model,"change:thumb",this.onThumbChange),this.addBinding(this.seekBar,"seek",this.onSeek),this.addBinding(this.volumeSlider,"click:button",this.onVolumeSliderClick),this.addBinding(this.volumeSlider,"change:value",this.onVolumeSliderValueChange)
},render:function(){var t=window.devicePixelRatio?window.devicePixelRatio:1;return this.$el.html(e({serverObj:this.server,player:this.model.toJSON(),thumbSize:40*t})),this.$(".player-controls-center").append(this.seekBar.render().el),this.$(".player-controls-right").prepend(this.volumeSlider.render().el),this.onVolumeChange(),this.hideVolume===!0&&this.$(".player-volume").hide(),this.hideNowPlaying===!0&&this.$(".now-playing").hide(),this.loadPoster(),this},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:!1})
},this))},onPlayPauseClick:function(){this.trigger("playPause")},onStopClick:function(){this.trigger("stop")},onPreviousClick:function(e){a(e.currentTarget).hasClass("disabled")||this.trigger("previous")},onNextClick:function(e){a(e.currentTarget).hasClass("disabled")||this.trigger("next")},onPausedChange:function(){var e=this.model.get("paused");e?(this.$(".player-play-btn").removeClass("hide"),this.$(".player-pause-btn").addClass("hide")):(this.$(".player-play-btn").addClass("hide"),this.$(".player-pause-btn").removeClass("hide"))
},onCurrentTimeChange:function(e,t){this.$(".player-current-time").text(t)},onDurationChange:function(e,t){this.$(".player-duration").text(t)},onVolumeChange:function(e,t){var n=this.$(".player-volume .player-slider-btn");this.volumeSlider.setValue(t),t>.5?(this.muted=!1,n.removeClass("volume-low"),n.removeClass("volume-off")):.5>=t&&t>0?(this.muted=!1,n.addClass("volume-low"),n.removeClass("volume-off")):(this.muted=!0,n.addClass("volume-off"),n.removeClass("volume-low"))},onEnablePreviousChange:function(e,t){t?this.$(".player-previous-btn").removeClass("disabled"):this.$(".player-previous-btn").addClass("disabled")
},onEnableNextChange:function(e,t){t?this.$(".player-next-btn").removeClass("disabled"):this.$(".player-next-btn").addClass("disabled")},onThumbChange:function(e,t){if(!t)return this.$(".now-playing-poster").attr("src","img/posters/album.png"),void 0;var n=window.devicePixelRatio?window.devicePixelRatio:1,i=40*n,a=Handlebars.helpers.transcodeImage.call(this,this.server,t,i,i);this.$(".now-playing-poster").data("original",a),this.loadPoster()},onSeek:function(e){this.trigger("seek",e)},onVolumeSliderClick:function(){this.muted===!0?(this.mutedVolume>0?this.trigger("change:volume",this.mutedVolume):this.trigger("change:volume",1),this.muted=!1,this.mutedVolume=0):(this.muted=!0,this.mutedVolume=this.model.get("volume"),this.trigger("change:volume",0))
},onVolumeSliderValueChange:function(e){this.trigger("change:volume",e)}});return s}),define("plex/view/players/MusicPlayerView",["plex/control/Dispatcher","plex/control/utils/TranscodeUtil","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/model/SettingsModel","plex/model/PlayerModel","plex/view/BaseView","plex/view/players/core/MusicControlsView"],function(e,t,n,i,a,s,r,l){var o=r.extend({className:"music-player hidden",playerModel:null,controls:null,transcoded:!1,loaded:!1,sound:null,volume:1,prevTrack:null,nextTrack:null,initialize:function(){_.bindAll(this,"onCreate","onPlay","onLoad","whileLoading","whitePlaying","onFinish"),this.volume=a.get("musicVolume"),this.playerModel=new s({showMusicIcon:!0}),this.controls=this.registerView(new l({model:this.playerModel,hidePlaybackRate:!0,hideFullscreen:!0})),this.addBinding(e,"shortcut:playPause",this.onPlayPause),this.addBinding(e,"shortcut:decreaseVolume",this.onDecreaseVolume),this.addBinding(e,"shortcut:increaseVolume",this.onIncreaseVolume),this.addBinding(e,"shortcut:seekBackward",this.onSeekBackward),this.addBinding(e,"shortcut:seekForward",this.onSeekForward),this.addBinding(e,"shortcut:stepBackward",this.onStepBackward),this.addBinding(e,"shortcut:stepForward",this.onStepForward),this.addBinding(e,"shortcut:skipBackward",this.onPrevious),this.addBinding(e,"shortcut:skipForward",this.onNext),this.addBinding(this.controls,"playPause",this.onPlayPause),this.addBinding(this.controls,"previous",this.onPrevious),this.addBinding(this.controls,"next",this.onNext),this.addBinding(this.controls,"stop",this.onStop),this.addBinding(this.controls,"seek",this.onSeek),this.addBinding(this.controls,"change:volume",this.onVolumeChange)
},render:function(){return this.$el.empty(),this.$el.append(this.controls.render().el),this},postrender:function(){this.$el.removeClass("hidden")},play:function(){var a=_.first(this.model.get("Media")),s={parentTitle:this.model.get("originalTitle")||this.model.get("artist"),parentThumb:this.model.media.get("thumb"),thumb:this.model.get("thumb")};if(this.transcoded=!1,this.controls.server=this.model.server,a)if(this.transcoded=!/^(mp3|mp4)$/.test(a.container)||a.bitrate>320,this.transcoded){var r="myPlex"===this.model.server.id?i.get("primaryServer"):this.model.server,l=r.get("transcoderAudio");
if(!l)return e.trigger("stop:music"),i.set("alert",{status:"error",message:n.t("This media server does not support transcoding.")}),void 0;s.url=t.music(r,this.model)}else s.url=this.model.getDownloadUrl();else s.url=this.model.server.resolveUrl(this.model.get("key"),!1,!0);this.updateNowPlaying(s),this.findPrevTrack(),this.findNextTrack(),this.playerModel.reset(),this.playerModel.set({enablePrevious:!!this.prevTrack,enableNext:!!this.nextTrack,thumb:s.thumb?s.thumb:s.parentThumb}),this.transcoded&&this.playerModel.set({endBuffer:0,duration:a.duration/1e3,formattedDuration:this.playerModel.secondsToHms(a.duration/1e3)}),this.loaded=!1,s.url?e.trigger("command:PlaySound",{url:s.url,autoLoad:!0,autoPlay:!0,volume:100*this.volume,oncreate:this.onCreate,onplay:this.onPlay,onload:this.onLoad,whileloading:this.whileLoading,whileplaying:this.whitePlaying,onfinish:this.onFinish}):(e.trigger("stop:music"),i.set("alert",{status:"error",message:n.t("Playback of this track is not supported.")}))
},updateNowPlaying:function(e){if(this.model.section)e.artistLink="#!/servers/"+this.model.server.id+"/sections/"+this.model.section.id+"/details/"+this.model.media.id,e.albumLink=e.artistLink,this.model.media.media&&(e.artistLink="#!/servers/"+this.model.server.id+"/sections/"+this.model.section.id+"/details/"+this.model.media.media.id,e.parentTitle||(e.parentTitle=this.model.media.media.get("title")));else{var t=this.model.media.channel?this.model.media.channel:this.model.media,n=this.model.media.channel;
e.artistLink="#!/servers/"+this.model.server.id+"/channels?",e.artistLink+=t.id?"key="+encodeURIComponent(t.id):"identifier="+t.get("identifier"),n&&(e.artistLink+="&path="+encodeURIComponent(this.model.media.id)),e.albumLink=e.artistLink,e.parentTitle||(e.parentTitle=t.get("title")),!e.parentThumb&&n&&(e.parentThumb=n.get("thumb"))}this.$(".now-playing-album").attr("href",e.albumLink),this.$(".now-playing-title").attr("href",e.artistLink).text(e.parentTitle),this.$(".now-playing-subtitle").text(this.model.get("title"))
},findPrevTrack:function(){var e=this.collection.get(this.model.id),t=this.collection.indexOf(e);this.prevTrack=t>0?this.collection.at(t-1):null},findNextTrack:function(){var e=this.collection.get(this.model.id),t=this.collection.indexOf(e);this.nextTrack=this.collection.length>t+1?this.collection.at(t+1):null},hide:function(){this.$el.addClass("hidden"),setTimeout(_.bind(function(){this.destroy()},this),800)},onPlayPause:function(){if(this.sound){var e=this.playerModel.get("paused");this.sound.togglePause(),this.playerModel.set("paused",!e)
}},onStop:function(){this.sound=null,e.trigger("command:StopSound"),e.trigger("stop:music")},onPrevious:function(){this.prevTrack&&(this.model=this.prevTrack,this.play())},onNext:function(){this.nextTrack&&(this.model=this.nextTrack,this.play())},onDecreaseVolume:function(){var e=this.playerModel.get("volume");e=Math.round(10*(e-.1))/10,e=Math.max(e,0),this.onVolumeChange(e)},onIncreaseVolume:function(){var e=this.playerModel.get("volume");e=Math.round(10*(e+.1))/10,e=Math.min(e,1),this.onVolumeChange(e)
},onSeekBackward:function(){this.sound&&this.onSeek(this.sound.position/1e3-10)},onSeekForward:function(){this.sound&&this.onSeek(this.sound.position/1e3+10)},onStepBackward:function(){if(this.sound){var e=this.sound.durationEstimate;if(!e){var t=_.first(this.model.get("Media"));e=t.duration}var n=this.sound.position-.1*e;this.onSeek(n/1e3)}},onStepForward:function(){if(this.sound){var e=this.sound.durationEstimate;if(!e){var t=_.first(this.model.get("Media"));e=t.duration}var n=this.sound.position+.1*e;
this.onSeek(n/1e3)}},onSeek:function(e){this.sound&&(!this.transcoded||this.loaded)&&(e=Math.max(e,0),this.sound.setPosition(1e3*e),this.playerModel.set({currentTime:e,formattedTime:this.playerModel.secondsToHms(e)}))},onVolumeChange:function(e){this.sound&&(this.sound.setVolume(100*e),this.volume=e,this.playerModel.set("volume",e),a.save("musicVolume",e))},onCreate:function(e){this.sound=e},onPlay:function(){this.playerModel.set({paused:!1,volume:this.volume})},whileLoading:function(){var e,t,n=_.first(this.model.get("Media"));
this.transcoded&&n?(e=n.duration,t=0):(e=this.sound.durationEstimate,t=this.sound.bytesLoaded/this.sound.bytesTotal*(e/1e3)),this.playerModel.set({endBuffer:t,duration:e/1e3,formattedDuration:this.playerModel.secondsToHms(e/1e3)})},whitePlaying:function(){this.sound&&this.playerModel.set({currentTime:this.sound.position/1e3,formattedTime:this.playerModel.secondsToHms(this.sound.position/1e3)})},onLoad:function(){var e=_.first(this.model.get("Media"));this.loaded=!0,this.transcoded&&e&&this.playerModel.set("endBuffer",e.duration/1e3)
},onFinish:function(){this.sound=null,null!==this.nextTrack?(this.model=this.nextTrack,this.play()):e.trigger("stop:music")}});return o}),define("hb!templates/popovers/PhotoPopover.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<a class="close-btn gray" href="#" tabindex="0"><i class="glyphicon remove-2"></i></a>\n\n<div class="spinner-container"></div>\n\n<div class="photo-controls">\n	<a class="previous-btn gray" href="#" tabindex="0">\n		<i class="glyphicon chevron-left"></i>\n	</a>\n\n	<a class="next-btn gray" href="#" tabindex="0">\n		<i class="glyphicon chevron-right"></i>\n	</a>\n</div>\n'
})}),define("hb!templates/popovers/PhotoPopoverDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"hide"}function r(e,t){var i,a,s="";return s+='\n				<div class="card-details">\n					',a={hash:{},data:t},s+=u((i=n.truncate,i?i.call(e,(i=e.photo,null==i||i===!1?i:i.summary),500,a):h.call(e,"truncate",(i=e.photo,null==i||i===!1?i:i.summary),500,a)))+"\n				</div>\n			"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o,c,d="",h=n.helperMissing,u=this.escapeExpression,p="function",m=this;
return d+='<div class="photo-details-container">\n	<div class="photo-details">\n		<img src="',c={hash:{},data:a},d+=u((l=n.transcodeImage,l?l.call(t,t.serverObj,t.key,t.photoWidth,t.photoHeight,c):h.call(t,"transcodeImage",t.serverObj,t.key,t.photoWidth,t.photoHeight,c)))+'" style="max-width: ',(o=n.imageWidth)?o=o.call(t,{hash:{},data:a}):(o=t.imageWidth,o=typeof o===p?o.apply(t):o),d+=u(o)+"px; max-height: ",(o=n.imageHeight)?o=o.call(t,{hash:{},data:a}):(o=t.imageHeight,o=typeof o===p?o.apply(t):o),d+=u(o)+'px;">\n\n		<div class="card-overlay">\n			<div class="card-menu">\n				<button class="play-btn card-menu-btn ',o=n.unless.call(t,t.showPlay,{hash:{},inverse:m.noop,fn:m.program(1,s,a),data:a}),(o||0===o)&&(d+=o),d+='"><i class="glyphicon play"></i></button><button class="pause-btn card-menu-btn ',o=n.unless.call(t,t.showPause,{hash:{},inverse:m.noop,fn:m.program(1,s,a),data:a}),(o||0===o)&&(d+=o),d+='"><i class="glyphicon pause"></i></button><button class="remote-play-btn card-menu-btn ',o=n.unless.call(t,t.showRemotePlay,{hash:{},inverse:m.noop,fn:m.program(1,s,a),data:a}),(o||0===o)&&(d+=o),d+='" href="#"><i class="glyphicon display"></i></button><button class="edit-btn card-menu-btn ',o=n.unless.call(t,t.showEdit,{hash:{},inverse:m.noop,fn:m.program(1,s,a),data:a}),(o||0===o)&&(d+=o),d+='"><i class="glyphicon pencil"></i></button><button class="sync-btn card-menu-btn ',o=n.unless.call(t,t.showSync,{hash:{},inverse:m.noop,fn:m.program(1,s,a),data:a}),(o||0===o)&&(d+=o),d+='"><i class="glyphicon download"></i></button><button class="info-btn card-menu-btn"><i class="glyphicon circle-info"></i></button>\n			</div>\n\n			',c={hash:{},data:a},d+=u((l=n.truncate,l?l.call(t,(l=t.photo,null==l||l===!1?l:l.title),50,c):h.call(t,"truncate",(l=t.photo,null==l||l===!1?l:l.title),50,c)))+' <span class="card-count">',(o=n.index)?o=o.call(t,{hash:{},data:a}):(o=t.index,o=typeof o===p?o.apply(t):o),d+=u(o)+" ",c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"of",c):h.call(t,"t","of",c)))+" ",(o=n.total)?o=o.call(t,{hash:{},data:a}):(o=t.total,o=typeof o===p?o.apply(t):o),d+=u(o)+"</span>\n\n			",o=n["if"].call(t,(l=t.photo,null==l||l===!1?l:l.summary),{hash:{},inverse:m.noop,fn:m.program(3,r,a),data:a}),(o||0===o)&&(d+=o),d+="\n		</div>\n	</div>\n</div>\n"
})}),define("hb!templates/modals/SyncModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a;return a={hash:{},data:t},k((i=n.t,i?i.call(e,"Sync Settings",a):x.call(e,"t","Sync Settings",a)))}function r(e,t){var i,a;return a={hash:{},data:t},k((i=n.t,i?i.call(e,"Sync to Device",a):x.call(e,"t","Sync to Device",a)))}function l(){return'\n			<div class="plex-pass-restricted-container">\n				<div class="plex-pass-restricted">\n		'}function o(e,t){var i,a,s,r="";
return r+='\n			<div class="control-group">\n				<label for="title">',s={hash:{},data:t},r+=k((i=n.t,i?i.call(e,"Title",s):x.call(e,"t","Title",s)))+'</label>\n				<div class="control">\n					<input type="text" id="title" name="title" class="span5" value="',(a=n.title)?a=a.call(e,{hash:{},data:t}):(a=e.title,a=typeof a===S?a.apply(e):a),r+=k(a)+'" placeholder="',(a=n.title)?a=a.call(e,{hash:{},data:t}):(a=e.title,a=typeof a===S?a.apply(e):a),r+=k(a)+'">\n				</div>\n			</div>\n		'}function c(){return"selected"
}function d(){return"hide"}function h(){return"checked"}function u(e,t){var i,a="";return a+='value="',(i=n.limitValue)?i=i.call(e,{hash:{},data:t}):(i=e.limitValue,i=typeof i===S?i.apply(e):i),a+=k(i)+'"'}function p(e,t){var i,a,s="";return s+='\n				</div>\n\n				<div class="plex-pass-message-overlay">\n					<div class="empty-message plex-pass-message">\n						',a={hash:{},data:t},s+=k((i=n.t,i?i.call(e,"Sorry, you need a <a href='{1}' target='_blank'>PlexPass subscription</a> for this feature.","https://my.plexapp.com/subscription/about",a):x.call(e,"t","Sorry, you need a <a href='{1}' target='_blank'>PlexPass subscription</a> for this feature.","https://my.plexapp.com/subscription/about",a)))+"\n					</div>\n				</div>\n			</div>\n		"
}function m(){return"disabled"}function f(e,t){var i,a;return a={hash:{},data:t},k((i=n.t,i?i.call(e,"Save",a):x.call(e,"t","Save",a)))}function v(e,t){var i,a;return a={hash:{},data:t},k((i=n.t,i?i.call(e,"Sync",a):x.call(e,"t","Sync",a)))}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var g,y,b,w="",x=n.helperMissing,k=this.escapeExpression,S="function",C=this;return w+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon refresh"></i> ',g=n["if"].call(t,t.edit,{hash:{},inverse:C.program(3,r,a),fn:C.program(1,s,a),data:a}),(g||0===g)&&(w+=g),w+='</h3>\n</div>\n\n<form id="sync-form" class="modal-form">\n	<div class="modal-body minimal-light-scrollbar">\n		',g=n.unless.call(t,t.hasSync,{hash:{},inverse:C.noop,fn:C.program(5,l,a),data:a}),(g||0===g)&&(w+=g),w+="\n\n		",g=n["if"].call(t,t.section,{hash:{},inverse:C.noop,fn:C.program(7,o,a),data:a}),(g||0===g)&&(w+=g),w+='\n\n		<div class="control-group">\n			<label for="quality">',b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"Quality",b):x.call(t,"t","Quality",b)))+'</label>\n			<select id="quality" name="quality">\n				<option value="low" ',b={hash:{},inverse:C.noop,fn:C.program(9,c,a),data:a},g=n.if_eq,y=g?g.call(t,t.selectedQuality,"low",b):x.call(t,"if_eq",t.selectedQuality,"low",b),(y||0===y)&&(w+=y),w+=">",b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"Low",b):x.call(t,"t","Low",b)))+'</option>\n				<option value="medium" ',b={hash:{},inverse:C.noop,fn:C.program(9,c,a),data:a},g=n.if_eq,y=g?g.call(t,t.selectedQuality,"medium",b):x.call(t,"if_eq",t.selectedQuality,"medium",b),(y||0===y)&&(w+=y),w+=">",b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"Medium",b):x.call(t,"t","Medium",b)))+'</option>\n				<option value="high" ',b={hash:{},inverse:C.noop,fn:C.program(9,c,a),data:a},g=n.if_eq,y=g?g.call(t,t.selectedQuality,"high",b):x.call(t,"if_eq",t.selectedQuality,"high",b),(y||0===y)&&(w+=y),w+=">",b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"High",b):x.call(t,"t","High",b)))+'</option>\n				<option value="highest" ',b={hash:{},inverse:C.noop,fn:C.program(9,c,a),data:a},g=n.if_eq,y=g?g.call(t,t.selectedQuality,"highest",b):x.call(t,"if_eq",t.selectedQuality,"highest",b),(y||0===y)&&(w+=y),w+=">",b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"Highest",b):x.call(t,"t","Highest",b)))+'</option>\n			</select>\n		</div>\n\n		<div class="control-group ',y=n.unless.call(t,t.video,{hash:{},inverse:C.noop,fn:C.program(11,d,a),data:a}),(y||0===y)&&(w+=y),w+=" ",y=n.unless.call(t,t.directory,{hash:{},inverse:C.noop,fn:C.program(11,d,a),data:a}),(y||0===y)&&(w+=y),w+='">\n			<label class="checkbox" for="unwatched"><input type="checkbox" id="unwatched" name="unwatched" ',y=n["if"].call(t,t.unwatched,{hash:{},inverse:C.noop,fn:C.program(13,h,a),data:a}),(y||0===y)&&(w+=y),w+="> ",b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"Unwatched",b):x.call(t,"t","Unwatched",b)))+'</label>\n		</div>\n\n		<div class="control-group ',y=n.unless.call(t,t.directory,{hash:{},inverse:C.noop,fn:C.program(11,d,a),data:a}),(y||0===y)&&(w+=y),w+='">\n			<label class="gap-label">',b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"Limit",b):x.call(t,"t","Limit",b)))+'</label>\n			<label class="radio inline"><input type="radio" name="limit" id="limit-none" value="all" ',b={hash:{},inverse:C.noop,fn:C.program(13,h,a),data:a},g=n.if_eq,y=g?g.call(t,t.selectedLimit,"all",b):x.call(t,"if_eq",t.selectedLimit,"all",b),(y||0===y)&&(w+=y),w+="> ",b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"None",b):x.call(t,"t","None",b)))+'</label>\n			<label class="radio inline"><input type="radio" name="limit" id="limit-items" value="count" ',b={hash:{},inverse:C.noop,fn:C.program(13,h,a),data:a},g=n.if_eq,y=g?g.call(t,t.selectedLimit,"count",b):x.call(t,"if_eq",t.selectedLimit,"count",b),(y||0===y)&&(w+=y),w+="> ",b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"By number of items",b):x.call(t,"t","By number of items",b)))+'</label>\n			<label class="radio inline ',y=n["if"].call(t,t.photo,{hash:{},inverse:C.noop,fn:C.program(11,d,a),data:a}),(y||0===y)&&(w+=y),w+='"><input type="radio" name="limit" id="limit-duration" value="duration" ',b={hash:{},inverse:C.noop,fn:C.program(13,h,a),data:a},g=n.if_eq,y=g?g.call(t,t.selectedLimit,"duration",b):x.call(t,"if_eq",t.selectedLimit,"duration",b),(y||0===y)&&(w+=y),w+="> ",b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"By duration",b):x.call(t,"t","By duration",b)))+'</label>\n		</div>\n\n		<div class="limit-value-group control-group ',b={hash:{},inverse:C.noop,fn:C.program(11,d,a),data:a},g=n.if_eq,y=g?g.call(t,t.selectedLimit,"all",b):x.call(t,"if_eq",t.selectedLimit,"all",b),(y||0===y)&&(w+=y),w+='">\n			<input type="text" id="limit-value" class="input-dark inline" ',y=n["if"].call(t,t.limitValue,{hash:{},inverse:C.noop,fn:C.program(15,u,a),data:a}),(y||0===y)&&(w+=y),w+='> <span class="limit-items-label limit-label inline ',b={hash:{},inverse:C.noop,fn:C.program(11,d,a),data:a},g=n.if_neq,y=g?g.call(t,t.selectedLimit,"count",b):x.call(t,"if_neq",t.selectedLimit,"count",b),(y||0===y)&&(w+=y),w+='">',b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"items",b):x.call(t,"t","items",b)))+'</span><span class="limit-duration-label limit-label inline ',b={hash:{},inverse:C.noop,fn:C.program(11,d,a),data:a},g=n.if_neq,y=g?g.call(t,t.selectedLimit,"duration",b):x.call(t,"if_neq",t.selectedLimit,"duration",b),(y||0===y)&&(w+=y),w+='">',b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"minutes",b):x.call(t,"t","minutes",b)))+"</span>\n		</div>\n\n		",y=n.unless.call(t,t.hasSync,{hash:{},inverse:C.noop,fn:C.program(17,p,a),data:a}),(y||0===y)&&(w+=y),w+='\n	</div>\n\n	<div class="modal-footer">\n		<button type="submit" class="btn btn-primary ',y=n.unless.call(t,t.hasSync,{hash:{},inverse:C.noop,fn:C.program(19,m,a),data:a}),(y||0===y)&&(w+=y),w+='" tabindex="0">',y=n["if"].call(t,t.edit,{hash:{},inverse:C.program(23,v,a),fn:C.program(21,f,a),data:a}),(y||0===y)&&(w+=y),w+='</button>\n		<button type="button" class="btn cancel-btn" tabindex="0">',b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"Cancel",b):x.call(t,"t","Cancel",b)))+'</button>\n	</div>\n</form>\n\n<div class="sync-success-container hide">\n	<div class="modal-body pull-center">\n		<p class="success-icon"><i class="glyphicon ok-2"></i></p>\n\n		<h4>\n			',b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"This media will be synced to your device.",b):x.call(t,"t","This media will be synced to your device.",b)))+"\n			<br>\n			",b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"Watch the sync status <a class='status-btn' href='#'>here</a>.",b):x.call(t,"t","Watch the sync status <a class='status-btn' href='#'>here</a>.",b)))+'\n		</h4>\n	</div>\n\n	<div class="modal-footer pull-center">\n		<button type="button" class="done-btn btn btn-medium btn-primary">',b={hash:{},data:a},w+=k((g=n.t,g?g.call(t,"Done",b):x.call(t,"t","Done",b)))+"</button>\n	</div>\n</div>\n"
})}),define("plex/view/modals/SyncModal",["hb!templates/modals/SyncModal.tpl","plex/control/Dispatcher","plex/control/utils/SyncQualities","plex/model/AppModel","plex/model/SettingsModel","plex/view/modals/BaseModal","jquery"],function(e,t,n,i,a,s,r){var l=s.extend({name:"syncModal",className:"modal sync-modal fade",device:null,edit:!1,directory:!1,section:!1,subset:null,models:null,limit:"all",events:{hidden:"close","change input[name=limit]":"onLimitChange","submit form":"onSubmit","click .cancel-btn":"onCancel","click .done-btn":"onDoneClick","click .status-btn":"onStatusClick"},initialize:function(e){this.edit=e.edit,this.edit?(this.directory=this.model.get("directory"),this.limit=this.model.get("Policy").scope):(this.directory=e.directory,this.section=e.section,this.subset=e.subset,this.models=e.models)
},render:function(){var t,s=i.get("myPlex"),r="";this.edit?(r=this.model.get("title"),t=this.model.get("metadataType")):this.section?(r=this.model.generateFilteredTitle(this.models),t=this.model.get("media").viewGroup):t=this.model.get("type");var l=/^(movie|show|season|episode|clip)$/.test(t),o=/^(artist|album|track)$/.test(t),c=/^photo$/.test(t),d="medium";l?d=a.get("syncVideoQuality"):o?d=a.get("syncAudioQuality"):c&&(d=a.get("syncPictureQuality"));var h={hasSync:s.hasSync(),edit:this.edit,directory:this.directory,section:this.section,title:r,video:l,audio:o,photo:c,selectedQuality:d,selectedLimit:this.limit};
if(this.edit){var u=this.model.get("MediaSettings"),p=this.model.get("Policy");h.unwatched=parseInt(p.unwatched,10),h.limitValue=p.value;var m=n.getSettingsByVideoQuality(u.videoQuality);h.selectedQuality=m.key}return this.$el.html(e(h)).modal(),this},create:function(e){var n=_.bind(function(){this.$("#sync-form").addClass("hide"),this.$(".sync-success-container").removeClass("hide")},this),i={directory:this.directory,subset:this.subset,models:this.models,device:this.device,settings:e,callback:n};
this.section?i.section=this.model:i.media=this.model,t.trigger("command:CreateSyncItem",i)},save:function(e){var n=_.bind(function(){this.$el.modal("hide")},this),i={syncItem:this.model,settings:e,callback:n};t.trigger("command:EditSyncItem",i)},onLimitChange:function(e){switch(this.limit=r(e.target).val(),this.$(".limit-label").addClass("hide"),this.limit){case"all":this.$(".limit-value-group").addClass("hide");break;case"count":this.$(".limit-value-group").removeClass("hide"),this.$(".limit-items-label").removeClass("hide"),this.$("#limit-value").val(10);
break;case"duration":this.$(".limit-value-group").removeClass("hide"),this.$(".limit-duration-label").removeClass("hide"),this.$("#limit-value").val(60)}},onSubmit:function(e){if(e.preventDefault(),!this.$("button[type=submit]").hasClass("disabled")){var t={title:this.$("#title").val(),quality:this.$("#quality").val(),unwatched:this.$("#unwatched").prop("checked")?1:0,scope:this.limit};"all"!==this.limit&&(t.value=this.$("#limit-value").val()),this.edit?this.save(t):this.create(t)}},onCancel:function(e){e.preventDefault(),this.$el.modal("hide")
},onStatusClick:function(e){e.preventDefault(),this.$el.modal("hide"),t.trigger("navigate:sync",this.model.server.id)},onDoneClick:function(e){e.preventDefault(),this.$el.modal("hide")}});return l}),define("hb!templates/modals/SelectDeviceModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a="";return a+='\n			<li><a class="device" data-id="',(i=n.clientIdentifier)?i=i.call(e,{hash:{},data:t}):(i=e.clientIdentifier,i=typeof i===m?i.apply(e):i),a+=p(i)+'" href="#">',i=n["if"].call(e,e.name,{hash:{},inverse:f.program(4,l,t),fn:f.program(2,r,t),data:t}),(i||0===i)&&(a+=i),a+="</a></li>\n		"
}function r(e,t){var i,a;return a={hash:{},data:t},p((i=n.truncate,i?i.call(e,e.name,25,a):u.call(e,"truncate",e.name,25,a)))}function l(e,t){var i,a;return a={hash:{},data:t},p((i=n.truncate,i?i.call(e,e.device,25,a):u.call(e,"truncate",e.device,25,a)))}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var o,c,d,h="",u=n.helperMissing,p=this.escapeExpression,m="function",f=this;return h+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3>',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Select a Device",d):u.call(t,"t","Select a Device",d)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	<ul class="select-list">\n		',c=n.each.call(t,t.devices,{hash:{},inverse:f.noop,fn:f.program(1,s,a),data:a}),(c||0===c)&&(h+=c),h+="\n	</ul>\n</div>\n"
})}),define("plex/view/modals/SelectDeviceModal",["hb!templates/modals/SelectDeviceModal.tpl","plex/model/AppModel","plex/view/modals/BaseModal","jquery"],function(e,t,n,i){var a=n.extend({name:"selectDeviceModal",className:"modal modal-small select-modal fade",events:{hidden:"close","click .device":"onDeviceClick"},render:function(){for(var n=t.get("myPlex"),i=n.get("devices").getSyncDevices(),a=0,s=i.length;s>a;a++)i[a]=i[a].toJSON();return this.$el.html(e({devices:i})).modal(),this},onDeviceClick:function(e){e.preventDefault(),this.$el.modal("hide"),this.trigger("select:device",i(e.target).data("id"))
}});return a}),define("hb!templates/modals/MediaInfoModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,l="";return l+='\n		<div class="well error">\n			<h4><i class="glyphicon warning-sign"></i> ',s={hash:{},data:t},l+=I((i=n.t,i?i.call(e,"Problems",s):A.call(e,"t","Problems",s)))+"</h4>\n\n			<ul>\n				",a=n.each.call(e,e.missingParts,{hash:{},inverse:_.noop,fn:_.program(2,r,t),data:t}),(a||0===a)&&(l+=a),l+="\n			</ul>\n		</div>\n	"}function r(e,t){var i,a,s,r="";
return r+='\n					<li>\n						<span class="media-info-detail-label">',(i=n.file)?i=i.call(e,{hash:{},data:t}):(i=e.file,i=typeof i===P?i.apply(e):i),r+=I(i)+'</span>\n\n						<ul>\n							<li><span class="media-info-detail">\n								',s={hash:{},inverse:_.program(5,o,t),fn:_.program(3,l,t),data:t},i=n.if_eq,a=i?i.call(e,e.exists,"1",s):A.call(e,"if_eq",e.exists,"1",s),(a||0===a)&&(r+=a),r+="\n							</span></li>\n						</ul>\n					</li>\n				"}function l(e,t){var i,a,s="";return s+="\n									",a={hash:{},data:t},s+=I((i=n.t,i?i.call(e,"Please check the permissions for this file.",a):A.call(e,"t","Please check the permissions for this file.",a)))+"\n								"
}function o(e,t){var i,a,s="";return s+="\n									",a={hash:{},data:t},s+=I((i=n.t,i?i.call(e,"Please check that this file exists and the necessary drive is mounted.",a):A.call(e,"t","Please check that this file exists and the necessary drive is mounted.",a)))+"\n								"}function c(e,t){var i,a,s,r="";return r+='\n		<div class="well">\n			<h4>',s={hash:{},data:t},r+=I((i=n.t,i?i.call(e,"Media",s):A.call(e,"t","Media",s)))+"</h4>\n			<ul>\n				",a=n.each.call(e,e.properties,{hash:{},inverse:_.noop,fn:_.program(8,d,t),data:t}),(a||0===a)&&(r+=a),r+="\n			</ul>\n\n			",a=n.each.call(e,e.Part,{hash:{},inverse:_.noop,fn:_.program(10,h,t),data:t}),(a||0===a)&&(r+=a),r+="\n		</div>\n	"
}function d(e,t){var i,a,s,r="";return r+='\n					<li>\n						<span class="media-info-detail-label">',s={hash:{},data:t},r+=I((i=n.t,i?i.call(e,e.name,s):A.call(e,"t",e.name,s)))+'</span>\n						<span class="media-info-detail">',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===P?a.apply(e):a),r+=I(a)+"</span>\n					</li>\n				"}function h(e,t){var i,a,s,r="";return r+='\n				<div class="media-info-part">\n					<h4>',s={hash:{},data:t},r+=I((i=n.t,i?i.call(e,"File",s):A.call(e,"t","File",s)))+"</h4>\n					<ul>\n						",a=n.each.call(e,e.properties,{hash:{},inverse:_.noop,fn:_.program(11,u,t),data:t}),(a||0===a)&&(r+=a),r+="\n					</ul>\n\n					",a=n.each.call(e,e.Stream,{hash:{},inverse:_.noop,fn:_.program(13,p,t),data:t}),(a||0===a)&&(r+=a),r+="\n				</div>\n			"
}function u(e,t){var i,a,s,r="";return r+='\n							<li>\n								<span class="media-info-detail-label">',s={hash:{},data:t},r+=I((i=n.t,i?i.call(e,e.name,s):A.call(e,"t",e.name,s)))+'</span>\n								<span class="media-info-detail">',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===P?a.apply(e):a),r+=I(a)+"</span>\n							</li>\n						"}function p(e,t){var i,a,s,r="";return r+='\n						<div class="media-info-stream">\n							',s={hash:{},inverse:_.program(16,f,t),fn:_.program(14,m,t),data:t},i=n.if_eq,a=i?i.call(e,e.streamType,"1",s):A.call(e,"if_eq",e.streamType,"1",s),(a||0===a)&&(r+=a),r+="\n\n							<ul>\n								",a=n.each.call(e,e.properties,{hash:{},inverse:_.noop,fn:_.program(22,b,t),data:t}),(a||0===a)&&(r+=a),r+="\n							</ul>\n						</div>\n					"
}function m(e,t){var i,a,s="";return s+="\n								<h4>",a={hash:{},data:t},s+=I((i=n.t,i?i.call(e,"Video",a):A.call(e,"t","Video",a)))+"</h4>\n							"}function f(e,t){var i,a,s;return s={hash:{},inverse:_.program(19,g,t),fn:_.program(17,v,t),data:t},i=n.if_eq,a=i?i.call(e,e.streamType,"2",s):A.call(e,"if_eq",e.streamType,"2",s),a||0===a?a:""}function v(e,t){var i,a,s="";return s+="\n								<h4>",a={hash:{},data:t},s+=I((i=n.t,i?i.call(e,"Audio",a):A.call(e,"t","Audio",a)))+"</h4>\n							"}function g(e,t){var i,a,s;
return s={hash:{},inverse:_.noop,fn:_.program(20,y,t),data:t},i=n.if_eq,a=i?i.call(e,e.streamType,"3",s):A.call(e,"if_eq",e.streamType,"3",s),a||0===a?a:""}function y(e,t){var i,a,s="";return s+="\n								<h4>",a={hash:{},data:t},s+=I((i=n.t,i?i.call(e,"Subtitles",a):A.call(e,"t","Subtitles",a)))+"</h4>\n							"}function b(e,t){var i,a,s,r="";return r+='\n									<li>\n										<span class="media-info-detail-label">',s={hash:{},data:t},r+=I((i=n.t,i?i.call(e,e.name,s):A.call(e,"t",e.name,s)))+'</span>\n										<span class="media-info-detail">',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===P?a.apply(e):a),r+=I(a)+"</span>\n									</li>\n								"
}function w(e,t){var i,a,s="";return s+='\n	<div class="modal-footer">\n		<div class="pull-left">\n			<a href="',(i=n.url)?i=i.call(e,{hash:{},data:t}):(i=e.url,i=typeof i===P?i.apply(e):i),s+=I(i)+'" target="_blank">',a={hash:{},data:t},s+=I((i=n.t,i?i.call(e,"View XML",a):A.call(e,"t","View XML",a)))+"</a>\n		</div>\n	</div>\n"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var x,k,S,C="",A=n.helperMissing,I=this.escapeExpression,P="function",_=this;return C+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon circle-info"></i> ',S={hash:{},data:a},C+=I((x=n.t,x?x.call(t,"Media Info",S):A.call(t,"t","Media Info",S)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	',k=n["if"].call(t,t.hasMissingParts,{hash:{},inverse:_.noop,fn:_.program(1,s,a),data:a}),(k||0===k)&&(C+=k),C+="\n\n	",k=n.each.call(t,t.media,{hash:{},inverse:_.noop,fn:_.program(7,c,a),data:a}),(k||0===k)&&(C+=k),C+="\n</div>\n\n",k=n["if"].call(t,t.key,{hash:{},inverse:_.noop,fn:_.program(24,w,a),data:a}),(k||0===k)&&(C+=k),C+="\n"
})}),define("plex/view/modals/MediaInfoModal",["hb!templates/modals/MediaInfoModal.tpl","plex/view/modals/BaseModal"],function(e,t){var n=["id","key","index","videoCodec","audioCodec","audioChannels","default","selected","languageCode"],i={size:"formatBytes",duration:"formatDuration",codec:"upperCase",format:"upperCase",container:"upperCase",videoResolution:"formatResolution",channels:"formatAudioChannels",level:"formatVideoLevel",bitrateMode:"upperCase",accessible:"formatBoolean",exists:"formatBoolean",optimizedForStreaming:"formatBoolean"},a={has64bitOffsets:"Has 64bit Offsets",cabac:"CABAC"},s={frameRate:" fps",dialogNorm:" dB",bitrate:" kbps",samplingRate:" Hz"},r=function(e,t){var r={properties:[]};
for(var l in e)if(l!==t&&-1===_.indexOf(n,l)){var o=a[l],c=e[l];i[l]&&(c=Handlebars.helpers[i[l]].call(this,c)),c&&(s[l]&&(c+=s[l]),o||(o=Handlebars.helpers.formatLabel.call(this,l)),r.properties.push({name:o,value:c}))}return t&&e&&(r[t]=e[t]),r},l=t.extend({name:"mediaInfoModal",className:"modal modal-large media-info-modal fade",events:{hidden:"close"},initialize:function(){var e=this.model.get("Media"),t=[];_.each(e,function(e){var n=r(e,"Part"),i=[];_.each(n.Part,function(e){var t=r(e,"Stream"),n=[];
_.each(t.Stream,function(e){n.push(r(e,"streamType"))}),t.Stream=n,i.push(t)}),n.Part=i,t.push(n)}),this.media=t},render:function(){var t=this.model.get("key"),n=this.model.getMissingParts();return this.$el.html(e({key:t,url:this.model.server.resolveUrl(t,!1,!0),media:this.media,hasMissingParts:!!n.length,missingParts:n})).modal(),this}});return l}),define("plex/view/popovers/PhotoPopoverDetailsView",["hb!templates/popovers/PhotoPopoverDetailsView.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/BaseView","plex/view/modals/SyncModal","plex/view/modals/SelectDeviceModal","plex/view/modals/MediaInfoModal","jquery"],function(e,t,n,i,a,s,r,l,o){var c=a.extend({className:"photo-container",photos:null,transition:null,slideshow:!1,allowSync:!1,events:{"mouseenter .card-menu-btn":"onMenuMouseEnter","mouseleave .card-menu-btn":"onMenuMouseLeave","click .remote-play-btn":"onRemotePlayClick","click .sync-btn":"onSyncClick","click .edit-btn":"onEditClick","click .info-btn":"onInfoClick"},initialize:function(e){this.photos=e.photos,this.transition=e.transition,this.slideshow=e.slideshow,this.allowSync=e.allowSync;
var t=i.get("myPlex"),n=i.get("clients");this.windowWidth=o(window).width(),this.windowHeight=o(window).height(),this.transition&&(this.$el.addClass(this.transition.type),this.transition.direction&&(this.$el.addClass(this.transition.direction),"left"===this.transition.direction?this.$el.css("left",-1*this.windowWidth):this.$el.css("left",this.windowWidth))),this.addBinding(n,"reset",this.onClientsReset),this.addBinding(t.get("devices"),"reset",this.onDevicesReset),n.populate({hideLoadingAlert:!0}),this.resizeThrottle=_.throttle(_.bind(this.resize,this),500),o(window).on("resize",this.resizeThrottle)
},render:function(){var t=this.model.server.get("shared"),n=i.get("clients"),a=window.devicePixelRatio?window.devicePixelRatio:1,s=Math.round(.8*this.windowWidth),r=Math.round(.8*this.windowHeight);return this.$el.html(e({photo:this.model.toJSON(),key:this.model.getMediaKey(),imageWidth:s,imageHeight:r,photoWidth:s*a,photoHeight:r*a,total:this.photos.length,index:_.indexOf(this.photos,this.model)+1,showPlay:!this.slideshow&&this.photos.length>1,showPause:this.slideshow,showRemotePlay:n.length&&!t,showEdit:!t&&this.model.section,showSync:this.canSync()})),this.preload(),this
},destroy:function(){a.prototype.destroy.call(this),o(window).off("resize",this.resizeThrottle)},resize:function(){this.windowWidth=o(window).width(),this.windowHeight=o(window).height();var e=.8*this.windowWidth,t=.8*this.windowHeight;this.$("img").css({"max-width":e,"max-height":t})},preload:function(){var e=this.$("img"),t=_.bind(function(){e.off("load",t),this.trigger("load")},this);e.on("load",t)},transitionIn:function(){this.transition&&(this.$el.removeClass(this.transition.type),this.transition.direction&&this.$el.removeClass(this.transition.direction).css("left",0))
},transitionOut:function(e){return e?(this.$el.addClass(e.type),e.direction&&("right"===e.direction?this.$el.addClass("left").css("left",-1*this.windowWidth):this.$el.addClass("right").css("left",this.windowWidth)),_.delay(_.bind(function(){this.destroy()},this),1e3),void 0):(this.destroy(),void 0)},canSync:function(){var e=i.get("myPlex"),t=e.get("devices").getSyncDevices();return!this.model.server.get("shared")&&this.model.server.supports("sync")&&t.length&&e.get("signedIn")&&this.allowSync?!0:!1
},onClientsReset:function(e){var t=e.length&&!this.model.server.get("shared");t?this.$(".remote-play-btn").removeClass("hide"):this.$(".remote-play-btn").addClass("hide")},onDevicesReset:function(){this.canSync()?this.$(".sync-btn").removeClass("hide"):this.$(".sync-btn").addClass("hide")},onMenuMouseEnter:function(e){this.$(".card-menu-btn").each(function(t,n){n!==e.currentTarget?o(n).addClass("dim"):o(n).removeClass("dim")})},onMenuMouseLeave:function(){this.$(".card-menu-btn").removeClass("dim")
},onRemotePlayClick:function(){t.trigger("command:RemotePlay",{media:this.model})},onEditClick:function(){t.trigger("navigate:edit",this.model.server.id,this.model.section.id,this.model.id)},onSyncClick:function(){var e=i.get("myPlex"),t=e.get("devices"),n=t.getSyncDevices(),a=new s({directory:!1,section:!1,model:this.model});if(n.length>1){var l=new r,o=_.bind(function(e){l.off("select:device",o),a.device=t.get(e),i.set("modal",a)},this);l.on("select:device",o),i.set("modal",l)}else 1===n.length&&(a.device=n[0],i.set("modal",a))
},onInfoClick:function(e){e.preventDefault(),i.set("modal",new l({model:this.model}))}});return c}),define("plex/view/popovers/PhotoPopover",["hb!templates/popovers/PhotoPopover.tpl","plex/control/Dispatcher","plex/view/KeyboardNavigationView","plex/view/popovers/PhotoPopoverDetailsView","spin"],function(e,t,n,i){var a=n.extend({className:"photo-popover",modal:!0,keyboardBindings:{up:".close-btn",left:".previous-btn",right:".next-btn"},details:null,photos:null,index:0,loading:!1,slideshowDuration:5e3,slideshowInterval:null,events:{"click .close-btn":"onCloseClick","click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick","click .play-btn":"onPlayClick","click .pause-btn":"onPauseClick"},initialize:function(){this.resetGlobalFocus(),this.photos=this.collection.reject(function(e){var t=e.get("type");
return"photo"!==t&&"Image"!==t}),this.index=_.indexOf(this.photos,this.model),this.addBinding(t,"shortcut:escape",this.close),this.addBinding(t,"shortcut:skipBackward",this.previous),this.addBinding(t,"shortcut:skipForward",this.next)},render:function(){return this.$el.html(e()),this.transition({type:"fade"}),this},destroy:function(){this.slideshowInterval&&clearInterval(this.slideshowInterval),n.prototype.destroy.call(this)},updateControls:function(){var e=this.index>0,t=this.photos.length>this.index+1;
e?this.$(".previous-btn").removeClass("hide"):this.$(".previous-btn").addClass("hide"),t?this.$(".next-btn").removeClass("hide"):this.$(".next-btn").addClass("hide")},close:function(){t.trigger("hide:photo")},previous:function(){this.loading||(this.index>0?this.index--:this.index=this.photos.length-1,this.model=this.photos[this.index],this.transition({type:"slide",direction:"left"}))},next:function(){this.loading||(this.photos.length>this.index+1?this.index++:this.index=0,this.model=this.photos[this.index],this.transition({type:"slide",direction:"right"}))
},transition:function(e){this.loading=!0;var t=new i({model:this.model,photos:this.photos,transition:e,slideshow:!!this.slideshowInterval,allowSync:this.collection.allowSync}),n=_.bind(function(){t.off("load",n),this.loading=!1,_.defer(_.bind(function(){this.$(".spinner-container").spinContents(!1),t.transitionIn(),this.details&&this.details.transitionOut(e),this.details=t},this))},this);t.on("load",n),this.$el.append(t.render().el),this.updateControls(),this.$(".spinner-container").spinContents("large","#ddd")
},onCloseClick:function(e){e.preventDefault(),this.close()},onPreviousClick:function(e){e.preventDefault(),this.previous()},onNextClick:function(e){e.preventDefault(),this.next()},onPlayClick:function(){this.$(".play-btn").addClass("hide"),this.$(".pause-btn").removeClass("dim hide"),this.slideshowInterval=setInterval(_.bind(this.next,this),this.slideshowDuration)},onPauseClick:function(){this.$(".pause-btn").addClass("hide"),this.$(".play-btn").removeClass("dim hide"),clearInterval(this.slideshowInterval),this.slideshowInterval=null
}});return a}),define("plex/view/AppView",["plex/control/Dispatcher","plex/control/utils/KeyboardNavigationManager","plex/model/AppModel","plex/view/alerts/LoadingAlert","plex/view/alerts/Alert","plex/view/header/HeaderView","plex/view/StatusView","plex/view/players/MusicPlayerView","plex/view/popovers/PhotoPopover","jquery","backbone"],function(e,t,n,i,a,s,r,l,o,c){var d=Backbone.View.extend({el:"#plex",loadingAlert:null,genericAlert:null,headerView:null,musicPlayerView:null,photoPopover:null,views:null,modals:null,events:{"mousedown a":"onLinkMouseDown"},initialize:function(){this.views=[],this.modals=[],this.headerView=new s,this.statusView=new r,_.bindAll(this,"onInputFocus"),c(document).on("focus",".input-focusable",this.onInputFocus),n.on("change:loading",this.onLoadingChange,this),n.on("change:alert",this.onAlertChange,this),n.on("change:view",this.onViewChange,this),n.on("change:modal",this.onModalChange,this),e.on("destroy:modal",this.onModalDestroy,this),n.on("change:multiServer",this.onMultiServerChange,this),e.on("play:music",this.onPlayMusic,this),e.on("stop:music",this.onStopMusic,this),e.on("show:photo",this.onShowPhoto,this),e.on("hide:photo",this.onHidePhoto,this)
},render:function(){return this.$el.empty(),this.$el.append(this.headerView.render().el),this.$el.append(this.statusView.render().el),this.onLoadingChange(n,n.get("loading")),this},onInputFocus:function(e){var n=c(document),i=c(e.target);if(i.hasClass("keyboard-focus")){e.preventDefault();var a=function(){n.off("click",a),n.off("keydown",s),i.removeClass("focus")},s=function(e){a(),13===e.which&&(e.preventDefault(),i.focus())};t.resetFocus(),i.removeClass("keyboard-focus").addClass("focus"),_.defer(function(){n.on("click",a),n.on("keydown",s)
})}},onLoadingChange:function(e,t){t===!0&&null===this.loadingAlert?(this.loadingAlert=new i,c("body").append(this.loadingAlert.render().el)):null!==this.loadingAlert&&(this.loadingAlert.destroy(),this.loadingAlert=null)},onAlertChange:function(e,t){null!==t?(this.genericAlert=new a({alert:t}),c("body").append(this.genericAlert.render().el)):this.genericAlert=null},onViewChange:function(t,n){for(var i=this.views.length-1;i>=0;i--)this.views[i].destroy();this.photoPopover&&(this.photoPopover.destroy(),this.photoPopover=null),c(".tooltip").remove(),this.views.length=0,this.views.push(n),this.$el.append(n.render().el),window.scrollTo&&window.scrollTo(0,0),e.trigger("command:StopSound",!0)
},onModalChange:function(e,t){this.modals.push(t),c("body").append(t.render().el)},onModalDestroy:function(e){var t=_.indexOf(this.modals,e);t>-1&&this.modals.splice(t,1)[0].destroy()},onMultiServerChange:function(e,t){t?this.$el.addClass("show-multi-server"):this.$el.removeClass("show-multi-server")},onPlayMusic:function(e,t){this.$el.addClass("show-music-player"),null===this.musicPlayerView?(this.musicPlayerView=new l({collection:e,model:t}),this.$el.prepend(this.musicPlayerView.render().el)):(this.musicPlayerView.collection=e,this.musicPlayerView.model=t),this.musicPlayerView.play()
},onStopMusic:function(){this.$el.removeClass("show-music-player"),null!==this.musicPlayerView&&(this.musicPlayerView.hide(),this.musicPlayerView=null)},onShowPhoto:function(e,t){null===this.photoPopover?(this.photoPopover=new o({collection:e,model:t}),this.$el.prepend(this.photoPopover.render().el)):(this.photoPopover.collection=e,this.photoPopover.model=t)},onHidePhoto:function(){null!==this.photoPopover&&(this.photoPopover.destroy(),this.photoPopover=null)},onLinkMouseDown:function(e){e.preventDefault()
}});return d}),define("hb!templates/DashboardView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"show-sidebar"}function r(){return"fluid"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o="",c=this;return o+='<div class="row ',l=n["if"].call(t,t.sidebarOpen,{hash:{},inverse:c.noop,fn:c.program(1,s,a),data:a}),(l||0===l)&&(o+=l),o+=" ",l=n["if"].call(t,t.fluidWidth,{hash:{},inverse:c.noop,fn:c.program(3,r,a),data:a}),(l||0===l)&&(o+=l),o+='">\n	<div id="dashboard-main" class="column-main">\n		<div class="priority0">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority1">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority2">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority3">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority4">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority5">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority6">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n	</div>\n\n	<div id="dashboard-sidebar" class="column-sidebar">\n		<div class="priority0">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority1">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority2">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority3">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority4">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority5">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n		<div class="priority6">\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n			<div class="row-fluid module"></div>\n		</div>\n	</div>\n</div>\n'
})}),define("hb!templates/dashboard/DashboardLoginView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="dashboard-well-header dashboard-well-header-secondary well-header">\n	<h3>',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Sign In",r):o.call(t,"t","Sign In",r)))+'</h3>\n</div>\n\n<form class="row-fluid dashboard-login-form">\n	<div class="control-group">\n		<input type="text" class="input-dark span12" name="username" placeholder="',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"username or email",r):o.call(t,"t","username or email",r)))+'">\n	</div>\n\n	<div class="control-group">\n		<input type="password" class="input-dark span12" name="password" placeholder="',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"password",r):o.call(t,"t","password",r)))+'">\n	</div>\n\n	<div class="control-group">\n		<button type="submit" class="btn btn-primary pull-right">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Sign In",r):o.call(t,"t","Sign In",r)))+'</button>\n\n		<label>\n			<input type="checkbox" name="rememberMe" value="1">\n			',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Remember Me",r):o.call(t,"t","Remember Me",r)))+"\n		</label>\n	</div>\n</form>\n"
})}),define("plex/view/dashboard/DashboardLoginView",["hb!templates/dashboard/DashboardLoginView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","spin"],function(e,t,n,i){var a=i.extend({className:"well span12",priority:null,events:{"submit .dashboard-login-form":"onSubmit"},initialize:function(){this.priority={module:this,visible:!0,rank:0,sidebar:!0}},render:function(){return this.$el.html(e()),this},onSubmit:function(e){e.preventDefault();var n=e.currentTarget,i=this.$("[type=submit]");
if(!i.hasClass("active")){i.spinContents("tiny");var a={username:n.username.value,password:n.password.value,rememberMe:n.rememberMe.value,silent:!0,noRedirect:!0};a.success=_.bind(function(){i.spinContents(!1),this.trigger("refresh")},this),a.error=_.bind(function(){i.spinContents(!1)}),t.trigger("command:SignIn",a)}}});return a}),define("hb!templates/dashboard/DashboardFriendsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="dashboard-well-header dashboard-well-header-secondary well-header">\n	<ul class="well-header-actions">\n		<li><a class="btn btn-inverse btn-icon" href="#!/friends" rel="tooltip" title="',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"View Friends",r):o.call(t,"t","View Friends",r)))+'"><i class="glyphicon more"></i></a></li>\n	</ul>\n\n	<h3>',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Invites",r):o.call(t,"t","Invites",r)))+"</h3>\n</div>\n"
})}),define("hb!templates/lists/myplex/items/FriendListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n		<button type="button" class="accept-btn btn btn-success btn-icon" rel="tooltip" title="',a={hash:{},data:t},s+=f((i=n.t,i?i.call(e,"Accept",a):m.call(e,"t","Accept",a)))+'"><i class="glyphicon circle-ok"></i></button>\n		<button type="button" class="reject-btn btn btn-danger btn-icon" rel="tooltip" title="',a={hash:{},data:t},s+=f((i=n.t,i?i.call(e,"Reject",a):m.call(e,"t","Reject",a)))+'"><i class="glyphicon ban"></i></button>\n	'
}function r(e,t){var i,a,s="";return s+='\n		<button type="button" class="cancel-btn btn btn btn-icon" title="',a={hash:{},data:t},s+=f((i=n.t,i?i.call(e,"Cancel",a):m.call(e,"t","Cancel",a)))+'"><i class="glyphicon circle-remove"></i></button>\n	'}function l(e,t){var i,a,s="";return s+='\n		<button type="button" class="delete-btn btn btn-danger btn-icon" title="',a={hash:{},data:t},s+=f((i=n.t,i?i.call(e,"Remove",a):m.call(e,"t","Remove",a)))+'"><i class="glyphicon ban"></i></button>\n	'}function o(e,t){var i,a,s="";
return s+="\n	<h4>",a={hash:{},data:t},s+=f((i=n.t,i?i.call(e,"wants to be your friend",a):m.call(e,"t","wants to be your friend",a)))+"</h4>\n"}function c(e,t){var i,a,s="";return s+="\n	<h4>",a={hash:{},data:t},s+=f((i=n.t,i?i.call(e,"has not accepted yet",a):m.call(e,"t","has not accepted yet",a)))+"</h4>\n"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var d,h,u,p="",m=n.helperMissing,f=this.escapeExpression,v=this,g="function";return p+='<div class="actions">\n	',u={hash:{},inverse:v.noop,fn:v.program(1,s,a),data:a},d=n.if_eq,h=d?d.call(t,t.type,"requests",u):m.call(t,"if_eq",t.type,"requests",u),(h||0===h)&&(p+=h),p+="\n\n	",u={hash:{},inverse:v.noop,fn:v.program(3,r,a),data:a},d=n.if_eq,h=d?d.call(t,t.type,"requested",u):m.call(t,"if_eq",t.type,"requested",u),(h||0===h)&&(p+=h),p+="\n\n	",u={hash:{},inverse:v.noop,fn:v.program(5,l,a),data:a},d=n.if_eq,h=d?d.call(t,t.type,"all",u):m.call(t,"if_eq",t.type,"all",u),(h||0===h)&&(p+=h),p+='\n</div>\n\n<img class="poster friend-poster" data-original="'+f((d=t.friend,d=null==d||d===!1?d:d.thumb,typeof d===g?d.apply(t):d))+'" src="img/posters/friend.png" width="40" height="40">\n\n<h3>'+f((d=t.friend,d=null==d||d===!1?d:d.title,typeof d===g?d.apply(t):d))+"</h3>\n\n",u={hash:{},inverse:v.noop,fn:v.program(7,o,a),data:a},d=n.if_eq,h=d?d.call(t,t.type,"requests",u):m.call(t,"if_eq",t.type,"requests",u),(h||0===h)&&(p+=h),p+="\n\n",u={hash:{},inverse:v.noop,fn:v.program(9,c,a),data:a},d=n.if_eq,h=d?d.call(t,t.type,"requested",u):m.call(t,"if_eq",t.type,"requested",u),(h||0===h)&&(p+=h),p+="\n"
})}),define("plex/view/lists/myplex/items/FriendListItem",["hb!templates/lists/myplex/items/FriendListItem.tpl","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/BaseView","jquery"],function(e,t,n,i,a){var s=i.extend({tagName:"li",className:"well",type:null,events:{"click .accept-btn":"onAcceptClick","click .reject-btn":"onRejectClick","click .cancel-btn":"onCancelClick","click .delete-btn":"onDeleteClick"},initialize:function(e){this.type=e.list.type||"all",this.addBinding(this.model,"change",this.render)
},render:function(){return this.$el.html(e({friend:this.model.toJSON(),type:this.type})),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this},close:function(e){var t={opacity:0,height:0,"margin-bottom":0,"padding-top":0,"padding-bottom":0};this.$el.css("overflow","hidden").animate(t,400,e)},onAcceptClick:function(e){e.preventDefault(),a(e.currentTarget).tooltip("destroy"),this.failMessage=t.t("There was a problem accepting this friend request."),this.model.urlRoot="/pms/friends/requests",this.close(_.bind(this.onSaveClose,this))
},onRejectClick:function(e){e.preventDefault(),a(e.currentTarget).tooltip("destroy"),this.failMessage=t.t("There was a problem rejecting this friend request."),this.model.urlRoot="/pms/friends/requests",this.close(_.bind(this.onDeleteClose,this))},onCancelClick:function(e){e.preventDefault(),a(e.currentTarget).tooltip("destroy"),this.failMessage=t.t("There was a problem cancelling this friend request."),this.model.urlRoot="/pms/friends/requested",this.close(_.bind(this.onDeleteClose,this))},onDeleteClick:function(e){e.preventDefault(),a(e.currentTarget).tooltip("destroy"),this.failMessage=t.t("There was a problem deleting this friend request."),this.close(_.bind(this.onDeleteClose,this))
},onSaveClose:function(){this.model.save({user:this.model.id},{hideLoadingAlert:!0}).done(_.bind(function(){this.trigger("refresh")},this)).fail(_.bind(function(){n.set("alert",{status:"error",message:this.failMessage})},this))},onDeleteClose:function(){this.model.destroy({hideLoadingAlert:!0}).done(_.bind(function(){this.trigger("refresh")},this)).fail(_.bind(function(){n.set("alert",{status:"error",message:this.failMessage})},this))}});return s}),function(e,t,n,i){var a=e(t);e.fn.lazyload=function(s){function r(){var t=0;
o.each(function(){var n=e(this);if(!c.skip_invisible||n.is(":visible"))if(e.abovethetop(this,c)||e.leftofbegin(this,c));else if(e.belowthefold(this,c)||e.rightoffold(this,c)){if(++t>c.failure_limit)return!1}else n.trigger("appear"),t=0})}var l,o=this,c={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!1,appear:null,load:null};return s&&(i!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),i!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(c,s)),l=c.container===i||c.container===t?a:e(c.container),0===c.event.indexOf("scroll")&&l.bind(c.event,function(){return r()
}),this.each(function(){var t=this,n=e(t);t.loaded=!1,n.one("appear",function(){if(!this.loaded){if(c.appear){var i=o.length;c.appear.call(t,i,c)}e("<img />").bind("load",function(){n.hide().attr("src",n.data(c.data_attribute))[c.effect](c.effect_speed),t.loaded=!0;var i=e.grep(o,function(e){return!e.loaded});if(o=e(i),c.load){var a=o.length;c.load.call(t,a,c)}}).attr("src",n.data(c.data_attribute))}}),0!==c.event.indexOf("scroll")&&n.bind(c.event,function(){t.loaded||n.trigger("appear")})}),a.bind("resize",function(){r()
}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",function(t){t.originalEvent.persisted&&o.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){r()}),this},e.belowthefold=function(n,s){var r;return s.threshold===!1?!1:(r=s.container===i||s.container===t?a.height()+a.scrollTop():e(s.container).offset().top+e(s.container).height(),e(n).offset().top-s.threshold>=r)},e.rightoffold=function(n,s){var r;return s.threshold===!1?!1:(r=s.container===i||s.container===t?a.width()+a.scrollLeft():e(s.container).offset().left+e(s.container).width(),e(n).offset().left-s.threshold>=r)
},e.abovethetop=function(n,s){var r;return s.threshold===!1?!1:(r=s.container===i||s.container===t?a.scrollTop():e(s.container).offset().top,r>=e(n).offset().top+s.threshold+e(n).height())},e.leftofbegin=function(n,s){var r;return s.threshold===!1?!1:(r=s.container===i||s.container===t?a.scrollLeft():e(s.container).offset().left,r>=e(n).offset().left+s.threshold+e(n).width())},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})
},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("lazyload",function(){}),define("plex/view/lists/myplex/FriendList",["plex/view/lists/BaseList","plex/view/lists/myplex/items/FriendListItem","lazyload"],function(e,t){var n=e.extend({tagName:"ul",className:"well-list friend-list",type:null,initialize:function(e){this.type=e.type||"all",this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100)
},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(){var t=e.prototype.addItem.apply(this,arguments);this.addBinding(t,"refresh",this.onRefresh),this.loadPosterThrottle()},loadPoster:function(){_.defer(_.bind(function(){this.$(".friend-poster").lazyload({threshold:200})},this))},onRefresh:function(){this.trigger("refresh")}});return n}),define("plex/view/dashboard/DashboardFriendsView",["hb!templates/dashboard/DashboardFriendsView.tpl","plex/view/BaseView","plex/view/lists/myplex/FriendList"],function(e,t,n){var i=t.extend({className:"dashboard-friends-container well span12",priority:null,requestsList:null,initialize:function(){this.priority={module:this,visible:null,rank:0,sidebar:!0},this.requestsList=this.registerView(new n({collection:this.collection,type:"requests"})),this.addBinding(this.collection,"reset",this.onReset),this.addBinding(this.requestsList,"refresh",this.onRefresh),this.collection.fetch()
},render:function(){return this.$el.html(e()),this.$el.append(this.requestsList.render().el),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this},onReset:function(e){null===this.priority.visible?(this.priority.visible=e.length?!0:!1,this.trigger("render",this.priority)):this.priority.visible&&!e.length&&this.destroy()},onRefresh:function(){this.collection.fetch()}});return i}),define("hb!templates/dashboard/DashboardNowPlayingView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="dashboard-well-header dashboard-well-header-secondary well-header">\n	<ul class="well-header-actions">\n		<li><a class="btn btn-inverse btn-icon" href="#!/nowplaying" rel="tooltip" title="',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"View All",r):o.call(t,"t","View All",r)))+'"><i class="glyphicon more"></i></a></li>\n	</ul>\n\n	<h3>',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Now Playing",r):o.call(t,"t","Now Playing",r)))+"</h3>\n</div>\n"
})}),define("hb!templates/lists/server/items/NowPlayingListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n	<a class="card-container" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===k?i.apply(e):i),s+=S(i)+"/sections/",a={hash:{},data:t},s+=S((i=n.encodeUrl,i?i.call(e,e.sectionID,a):C.call(e,"encodeUrl",e.sectionID,a)))+"/details/"+S((i=e.media,i=null==i||i===!1?i:i.ratingKey,typeof i===k?i.apply(e):i))+'">\n'
}function r(e,t){var i,a,s="";return s+='\n	<a class="card-container" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===k?i.apply(e):i),s+=S(i)+"/channels/details?path=",a={hash:{},data:t},s+=S((i=n.encodeUrl,i?i.call(e,(i=e.media,null==i||i===!1?i:i.key),a):C.call(e,"encodeUrl",(i=e.media,null==i||i===!1?i:i.key),a)))+'">\n'}function l(e){var t,n="";return n+="\n							"+S((t=e.media,t=null==t||t===!1?t:t.grandparentTitle,typeof t===k?t.apply(e):t))+"\n\n						"
}function o(e,t){var i,a;return a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.parentTitle),{hash:{},inverse:A.program(10,d,t),fn:A.program(8,c,t),data:t}),a||0===a?a:""}function c(e){var t,n="";return n+="\n							"+S((t=e.media,t=null==t||t===!1?t:t.parentTitle,typeof t===k?t.apply(e):t))+"\n\n						"}function d(e){var t,n="";return n+="\n							"+S((t=e.media,t=null==t||t===!1?t:t.title,typeof t===k?t.apply(e):t))+"\n\n						"}function h(e,t){var i,a,s="";return s+='\n							<span class="pull-right">\n								',a={hash:{},data:t},s+=S((i=n.truncate,i?i.call(e,(i=e.media,i=null==i||i===!1?i:i.User,null==i||i===!1?i:i.title),15,a):C.call(e,"truncate",(i=e.media,i=null==i||i===!1?i:i.User,null==i||i===!1?i:i.title),15,a)))+"\n							</span>\n						"
}function u(e,t){var i,a,s="";return s+='\n							<p><span class="muted"><span class="session-state">',a={hash:{},data:t},s+=S((i=n.titleCase,i?i.call(e,(i=e.media,i=null==i||i===!1?i:i.Player,null==i||i===!1?i:i.state),a):C.call(e,"titleCase",(i=e.media,i=null==i||i===!1?i:i.Player,null==i||i===!1?i:i.state),a)))+"</span> ",a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"on",a):C.call(e,"t","on",a)))+"</span> ",a={hash:{},data:t},s+=S((i=n.truncate,i?i.call(e,(i=e.media,i=null==i||i===!1?i:i.Player,null==i||i===!1?i:i.title),25,a):C.call(e,"truncate",(i=e.media,i=null==i||i===!1?i:i.Player,null==i||i===!1?i:i.title),25,a)))+"</p>\n						"
}function p(e,t){var i,a,s,r="";return r+='\n							<p class="session-title muted">',s={hash:{},data:t},r+=S((i=n.t,i?i.call(e,"Transcoding",s):C.call(e,"t","Transcoding",s)))+" ",s={hash:{},inverse:A.noop,fn:A.program(17,m,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,i=null==i||i===!1?i:i.TranscodeSession,null==i||i===!1?i:i.throttled),"1",s):C.call(e,"if_eq",(i=e.media,i=null==i||i===!1?i:i.TranscodeSession,null==i||i===!1?i:i.throttled),"1",s),(a||0===a)&&(r+=a),r+='</p>\n							<span class="session-stream-type muted">',s={hash:{},data:t},r+=S((i=n.t,i?i.call(e,"Video",s):C.call(e,"t","Video",s)))+"</span> ",s={hash:{},inverse:A.program(21,v,t),fn:A.program(19,f,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,i=null==i||i===!1?i:i.TranscodeSession,null==i||i===!1?i:i.videoDecision),"copy",s):C.call(e,"if_eq",(i=e.media,i=null==i||i===!1?i:i.TranscodeSession,null==i||i===!1?i:i.videoDecision),"copy",s),(a||0===a)&&(r+=a),r+=" ("+S((i=e.media,i=null==i||i===!1?i:i.TranscodeSession,i=null==i||i===!1?i:i.videoCodec,typeof i===k?i.apply(e):i))+')<br>\n							<span class="session-stream-type muted">',s={hash:{},data:t},r+=S((i=n.t,i?i.call(e,"Audio",s):C.call(e,"t","Audio",s)))+"</span> ",s={hash:{},inverse:A.program(21,v,t),fn:A.program(19,f,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,i=null==i||i===!1?i:i.TranscodeSession,null==i||i===!1?i:i.audioDecision),"copy",s):C.call(e,"if_eq",(i=e.media,i=null==i||i===!1?i:i.TranscodeSession,null==i||i===!1?i:i.audioDecision),"copy",s),(a||0===a)&&(r+=a),r+=" ("+S((i=e.media,i=null==i||i===!1?i:i.TranscodeSession,i=null==i||i===!1?i:i.audioCodec,typeof i===k?i.apply(e):i))+")<br>\n						"
}function m(e,t){var i,a,s="";return s+="(",a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"throttled",a):C.call(e,"t","throttled",a)))+")"}function f(e,t){var i,a;return a={hash:{},data:t},S((i=n.t,i?i.call(e,"Direct Stream",a):C.call(e,"t","Direct Stream",a)))}function v(e,t){var i,a;return a={hash:{},data:t},S((i=n.t,i?i.call(e,"Transcode",a):C.call(e,"t","Transcode",a)))}function g(e,t){var i,a,s="";return s+='\n							<p class="session-title muted">',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"No Transcode Session",a):C.call(e,"t","No Transcode Session",a)))+"</p>\n						"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var y,b,w,x="",k="function",S=this.escapeExpression,C=n.helperMissing,A=this;return y=n["if"].call(t,t.sectionID,{hash:{},inverse:A.program(3,r,a),fn:A.program(1,s,a),data:a}),(y||0===y)&&(x+=y),x+='\n	<div class="poster-container">\n		<div class="poster-card">\n			<div class="poster-face front">\n				<img class="poster" data-original="',w={hash:{},data:a},x+=S((y=n.transcodeImage,y?y.call(t,t.serverObj,t.poster,t.posterWidth,t.posterHeight,w):C.call(t,"transcodeImage",t.serverObj,t.poster,t.posterWidth,t.posterHeight,w)))+'" src="img/posters/poster_wide.png">\n\n				<img class="poster-fade hidden" src="',w={hash:{},data:a},x+=S((y=n.transcodeImage,y?y.call(t,t.serverObj,t.poster,t.posterWidth,t.posterHeight,w):C.call(t,"transcodeImage",t.serverObj,t.poster,t.posterWidth,t.posterHeight,w)))+'">\n\n				<ul class="poster-actions">\n					<li><button class="play-btn poster-action-btn"><i class="glyphicon play"></i></button></li>\n					<li><button class="info-btn poster-action-btn"><i class="glyphicon circle-info"></i></button></li>\n				</ul>\n\n				<div class="card-overlay card-progress-overlay">\n					<div class="card-progress-bar"><div class="track" style="width: ',(b=n.progress)?b=b.call(t,{hash:{},data:a}):(b=t.progress,b=typeof b===k?b.apply(t):b),x+=S(b)+'%"></div></div>\n\n					<img class="card-poster" data-original="',(b=n.userThumb)?b=b.call(t,{hash:{},data:a}):(b=t.userThumb,b=typeof b===k?b.apply(t):b),x+=S(b)+'" src="img/posters/friend.png">\n\n					<h4>\n						',b=n["if"].call(t,(y=t.media,null==y||y===!1?y:y.grandparentTitle),{hash:{},inverse:A.program(7,o,a),fn:A.program(5,l,a),data:a}),(b||0===b)&&(x+=b),x+='\n					</h4>\n\n					<p class="card-details">\n						',b=n["if"].call(t,(y=t.media,null==y||y===!1?y:y.User),{hash:{},inverse:A.noop,fn:A.program(12,h,a),data:a}),(b||0===b)&&(x+=b),x+="\n\n						",w={hash:{},data:a},y=n.dashboardMediaCardDetails,b=y?y.call(t,t.media,!1,w):C.call(t,"dashboardMediaCardDetails",t.media,!1,w),(b||0===b)&&(x+=b),x+='\n					</p>\n\n					<div class="session-details">\n						',b=n["if"].call(t,(y=t.media,null==y||y===!1?y:y.Player),{hash:{},inverse:A.noop,fn:A.program(14,u,a),data:a}),(b||0===b)&&(x+=b),x+="\n\n						",b=n["if"].call(t,(y=t.media,null==y||y===!1?y:y.TranscodeSession),{hash:{},inverse:A.program(23,g,a),fn:A.program(16,p,a),data:a}),(b||0===b)&&(x+=b),x+="\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</a>\n"
})}),define("plex/view/lists/server/items/NowPlayingListItem",["hb!templates/lists/server/items/NowPlayingListItem.tpl","plex/control/Dispatcher","plex/control/utils/MediaUtil","plex/model/AppModel","plex/view/BaseView","jquery"],function(e,t,n,i,a){var s=a.extend({tagName:"li",screenshotWidth:438,screenshotPreferredIndex:"hd",screenshotInterval:null,screenshotIntervalDelay:2e3,screenshotCount:0,events:{"click .play-btn":"onPlayClick","click .info-btn":"onInfoClick"},initialize:function(){this.screenshotCount=0;
var e=this.model.get("Player");e&&"playing"===e.state&&(this.screenshotInterval=setInterval(_.bind(this.updateScreenshot,this),this.screenshotIntervalDelay)),this.addBinding(this.model,"change:Player",this.onPlayerChange),this.addBinding(this.model,"change:viewOffset",this.onViewOffsetChange)},render:function(){var t=this.model.section?this.model.section.id:this.model.get("librarySectionID");this.model.get("type");var n=this.model.get("art"),i=this.model.get("thumb"),a=n?n:i,s=this.getScreenshot(),r=this.model.get("viewOffset"),l=this.model.get("duration");
return r=r&&l?100*(r/l):0,this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,sectionID:t,media:this.model.toJSON(),poster:s.thumb?s.thumb:a,posterWidth:s.width,posterHeight:s.height,progress:r,userThumb:this.getUserThumb()})),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this},destroy:function(){a.prototype.destroy.call(this),this.screenshotInterval&&clearInterval(this.screenshotInterval)},getUserThumb:function(){var e=i.get("myPlex"),t=e.get("friends"),n=this.model.get("User");
if(n){if(n.thumb)return n.thumb;var a=t.get(n.id);if(a)return a.get("thumb")}},getScreenshot:function(){var e=_.first(this.model.get("Media")),t=window.devicePixelRatio?window.devicePixelRatio:1,i={width:this.screenshotWidth*t,height:this.screenshotWidth*t};if(!e)return i;var a=this.model.get("viewOffset")||0,s=this.screenshotCount*this.screenshotIntervalDelay+a+4e3;return i.thumb=n.getThumb(e,s,this.screenshotPreferredIndex),i},updateScreenshot:function(){this.screenshotCount++;var e=this.getScreenshot();
if(e.thumb){var t=this.$(".poster"),n=this.$(".poster-fade"),i=Handlebars.helpers.transcodeImage.call(this,this.model.server,e.thumb,e.width,e.height),a=function(){n.off("load",a),n.removeClass("hidden"),_.delay(function(){t.attr("src",i),n.addClass("hidden")},500)};n.on("load",a),n.attr("src",i)}},onPlayerChange:function(e,t){t&&(this.$(".session-state").text(Handlebars.helpers.titleCase.call(this,t.state)),"playing"!==t.state&&this.screenshotInterval?(clearInterval(this.screenshotInterval),this.screenshotInterval=null):"playing"!==t.state||this.screenshotInterval||(this.screenshotInterval=setInterval(_.bind(this.updateScreenshot,this),this.screenshotIntervalDelay)))
},onViewOffsetChange:function(e,t){var n=t;n=n?100*(n/e.get("duration")):0,this.$(".track").css("width",n+"%"),this.screenshotCount=0},onPlayClick:function(e){e.stopImmediatePropagation(),e.preventDefault();var n=this.model.section?this.model.section.id:this.model.get("librarySectionID"),i=n?this.model.get("ratingKey"):this.model.get("key"),a=this.model.get("viewOffset");n?t.trigger("navigate:player",this.model.server.id,n,i,a):t.trigger("navigate:channelStandalonePlayer",this.model.server.id,i,a)
},onInfoClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),this.$(e.currentTarget).toggleClass("active"),this.$el.toggleClass("show-session-details")}});return s}),define("plex/view/lists/dashboard/items/DashboardNowPlayingListItem",["hb!templates/lists/server/items/NowPlayingListItem.tpl","plex/view/lists/server/items/NowPlayingListItem"],function(e,t){var n=t.extend({screenshotWidth:256,screenshotPreferredIndex:"hd"});return n}),define("plex/view/lists/dashboard/DashboardNowPlayingList",["plex/view/lists/BaseList","plex/view/lists/dashboard/items/DashboardNowPlayingListItem"],function(e,t){var n=e.extend({className:"now-playing-list dashboard-now-playing-list",initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100)
},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(){var t=e.prototype.addItem.apply(this,arguments);this.addBinding(t,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200})},this))}});return n}),define("plex/view/dashboard/DashboardNowPlayingView",["hb!templates/dashboard/DashboardNowPlayingView.tpl","plex/model/SettingsModel","plex/view/BaseView","plex/view/lists/dashboard/DashboardNowPlayingList"],function(e,t,n,i){var a=n.extend({className:"well span12",priority:null,list:null,initialize:function(){this.priority={module:this,visible:null,rank:t.get("dashboardNowPlayingPriority"),sidebar:!0},this.list=this.registerView(new i({collection:this.collection})),this.addBinding(this.collection,"reset",this.onReset),this.addBinding(this.collection,"remove",this.onReset),this.collection.fetch({hideLoadingAlert:!0})
},render:function(){return this.$el.html(e()),this.$el.append(this.list.render().el),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this},onReset:function(){if(this.priority.visible)this.priority.visible&&!this.collection.length&&(this.$el.addClass("hide"),this.priority.visible=!1);else{var e=this.priority.visible===!1;this.priority.visible=this.collection.length?t.get("dashboardNowPlayingEnabled"):!1,this.priority.visible&&this.$el.hasClass("hide")?this.$el.removeClass("hide"):this.trigger("render",this.priority,e)
}}});return a}),define("hb!templates/dashboard/DashboardMediaView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"dashboard-well-header-secondary"}function r(e,t){var i,a,s="";return s+='\n			<li>\n				<a class="btn btn-inverse btn-icon" href="#!/playlist/',(i=n.playlistName)?i=i.call(e,{hash:{},data:t}):(i=e.playlistName,i=typeof i===y?i.apply(e):i),s+=b(i)+'" rel="tooltip" title="',a={hash:{},data:t},s+=b((i=n.t,i?i.call(e,"View All",a):w.call(e,"t","View All",a)))+'"><i class="glyphicon more"></i></a>\n			</li>\n		'
}function l(e,t){var i;return i=n["if"].call(e,e.showPagination,{hash:{},inverse:x.noop,fn:x.program(6,o,t),data:t}),i||0===i?i:""}function o(e,t){var i,a,s,r="";return r+='\n			<li class="well-header-pagination">\n				<span class="page">',(i=n.page)?i=i.call(e,{hash:{},data:t}):(i=e.page,i=typeof i===y?i.apply(e):i),r+=b(i)+"</span> ",s={hash:{},data:t},r+=b((i=n.t,i?i.call(e,"of",s):w.call(e,"t","of",s)))+' <span class="pages">',(a=n.pages)?a=a.call(e,{hash:{},data:t}):(a=e.pages,a=typeof a===y?a.apply(e):a),r+=b(a)+'</span>\n			</li>\n			<li>\n				<div class="btn-group btn-group-inverse">\n					<button type="button" class="previous-btn btn btn-inverse btn-icon ',a=n.unless.call(e,e.showPrevious,{hash:{},inverse:x.noop,fn:x.program(7,c,t),data:t}),(a||0===a)&&(r+=a),r+='"><i class="glyphicon chevron-left"></i></button>\n					<button type="button" class="next-btn btn btn-inverse btn-icon ',a=n.unless.call(e,e.showNext,{hash:{},inverse:x.noop,fn:x.program(7,c,t),data:t}),(a||0===a)&&(r+=a),r+='"><i class="glyphicon chevron-right"></i></button>\n				</div>\n			</li>\n		'
}function c(){return"disabled"}function d(e,t){var i,a,s="";return s+="\n			",a={hash:{},data:t},s+=b((i=n.t,i?i.call(e,e.playlistLabel,a):w.call(e,"t",e.playlistLabel,a)))+"\n		"}function h(e,t){var i,a,s="";return s+="\n			",a={hash:{},data:t},s+=b((i=n.t,i?i.call(e,e.type,a):w.call(e,"t",e.type,a)))+"\n		"}function u(e,t){var i;return i=n["if"].call(e,e.showPagination,{hash:{},inverse:x.noop,fn:x.program(14,p,t),data:t}),i||0===i?i:""}function p(e,t){var i,a,s,r="";return r+='\n	<div class="dashboard-pagination">\n		<a class="previous-btn gray ',i=n.unless.call(e,e.showPrevious,{hash:{},inverse:x.noop,fn:x.program(15,m,t),data:t}),(i||0===i)&&(r+=i),r+='" href="#"><i class="glyphicon chevron-left"></i></a>\n\n		<span class="page">',(i=n.page)?i=i.call(e,{hash:{},data:t}):(i=e.page,i=typeof i===y?i.apply(e):i),r+=b(i)+"</span> ",s={hash:{},data:t},r+=b((i=n.t,i?i.call(e,"of",s):w.call(e,"t","of",s)))+" ",(a=n.pages)?a=a.call(e,{hash:{},data:t}):(a=e.pages,a=typeof a===y?a.apply(e):a),r+=b(a)+'\n\n		<a class="next-btn gray ',a=n.unless.call(e,e.showNext,{hash:{},inverse:x.noop,fn:x.program(15,m,t),data:t}),(a||0===a)&&(r+=a),r+='" href="#"><i class="glyphicon chevron-right"></i></a>\n	</div>\n'
}function m(){return"hide"}function f(){return"dashboard-playlist-list"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var v,g="",y="function",b=this.escapeExpression,w=n.helperMissing,x=this;return g+='<div class="dashboard-well-header ',v=n["if"].call(t,t.playlistName,{hash:{},inverse:x.noop,fn:x.program(1,s,a),data:a}),(v||0===v)&&(g+=v),g+=' well-header">\n	<ul class="well-header-actions">\n		',v=n["if"].call(t,t.playlistLabel,{hash:{},inverse:x.program(5,l,a),fn:x.program(3,r,a),data:a}),(v||0===v)&&(g+=v),g+="\n	</ul>\n\n	<h3>\n		",v=n["if"].call(t,t.playlistLabel,{hash:{},inverse:x.program(11,h,a),fn:x.program(9,d,a),data:a}),(v||0===v)&&(g+=v),g+="\n	</h3>\n</div>\n\n",v=n["if"].call(t,t.playlistLabel,{hash:{},inverse:x.noop,fn:x.program(13,u,a),data:a}),(v||0===v)&&(g+=v),g+='\n\n<ul class="dashboard-media-list ',v=n["if"].call(t,t.playlistName,{hash:{},inverse:x.noop,fn:x.program(17,f,a),data:a}),(v||0===v)&&(g+=v),g+='"></ul>\n'
})}),define("hb!templates/lists/dashboard/items/DashboardMediaListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e){var t,n="";return n+='\n	<a href="#!/playlist/'+R((t=e.media,t=null==t||t===!1?t:t.playlistName,typeof t===O?t.apply(e):t))+"/player/"+R((t=e.media,t=null==t||t===!1?t:t.id,typeof t===O?t.apply(e):t))+'">\n'}function r(e,t){var i,a,s="";return s+='\n	<a class="card-container" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===O?i.apply(e):i),s+=R(i)+"/sections/",a={hash:{},data:t},s+=R((i=n.encodeUrl,i?i.call(e,e.sectionID,a):$.call(e,"encodeUrl",e.sectionID,a)))+"/details/"+R((i=e.media,i=null==i||i===!1?i:i.ratingKey,typeof i===O?i.apply(e):i))+'">\n'
}function l(e,t){var i,a="";return a+='\n					<ul class="poster-actions">\n						',i=n["if"].call(e,e.primary,{hash:{},inverse:B.program(9,d,t),fn:B.program(6,o,t),data:t}),(i||0===i)&&(a+=i),a+="\n					</ul>\n				"}function o(e,t){var i,a="";return a+='\n							<li><button class="play-btn poster-action-btn ',i=n["if"].call(e,e.isPlaylistItem,{hash:{},inverse:B.noop,fn:B.program(7,c,t),data:t}),(i||0===i)&&(a+=i),a+='"><i class="glyphicon play"></i></button></li>\n						'}function c(){return"default"
}function d(e,t){var i,a="";return a+="\n							",i=n["if"].call(e,e.showPoster,{hash:{},inverse:B.program(12,u,t),fn:B.program(10,h,t),data:t}),(i||0===i)&&(a+=i),a+="\n						"}function h(e,t){var i,a="";return a+='\n								<li><button class="play-btn poster-action-btn poster-action-small-btn ',i=n["if"].call(e,e.isPlaylistItem,{hash:{},inverse:B.noop,fn:B.program(7,c,t),data:t}),(i||0===i)&&(a+=i),a+='"><i class="glyphicon play"></i></button></li>\n							'}function u(e,t){var i,a="";return a+='\n								<li><button class="play-btn poster-action-btn poster-action-mini-btn ',i=n["if"].call(e,e.isPlaylistItem,{hash:{},inverse:B.noop,fn:B.program(7,c,t),data:t}),(i||0===i)&&(a+=i),a+='"><i class="glyphicon play"></i></button></li>\n							'
}function p(e,t){var i,a,s,r="";return r+='\n					<div class="card-overlay card-progress-overlay">\n						',i=n["if"].call(e,e.showProgress,{hash:{},inverse:B.noop,fn:B.program(15,m,t),data:t}),(i||0===i)&&(r+=i),r+="\n\n							",i=n["if"].call(e,e.showPoster,{hash:{},inverse:B.program(25,w,t),fn:B.program(17,f,t),data:t}),(i||0===i)&&(r+=i),r+='\n\n						<p class="card-details">\n							',s={hash:{},data:t},i=n.dashboardMediaCardDetails,a=i?i.call(e,e.media,e.showPoster,s):$.call(e,"dashboardMediaCardDetails",e.media,e.showPoster,s),(a||0===a)&&(r+=a),r+="\n						</p>\n					</div>\n				"
}function m(e,t){var i,a="";return a+='\n							<div class="card-progress-bar"><div class="track" style="width: ',(i=n.progress)?i=i.call(e,{hash:{},data:t}):(i=e.progress,i=typeof i===O?i.apply(e):i),a+=R(i)+'%"></div></div>\n						'}function f(e,t){var i,a,s,r="";return r+="\n								",s={hash:{},inverse:B.program(20,g,t),fn:B.program(18,v,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"episode",s):$.call(e,"if_eq",(i=e.media,null==i||i===!1?i:i.type),"episode",s),(a||0===a)&&(r+=a),r+="\n\n							"
}function v(e,t){var i,a,s="";return s+="\n									<h4>",a={hash:{},data:t},s+=R((i=n.seasonEpisodeIndex,i?i.call(e,(i=e.media,null==i||i===!1?i:i.parentIndex),(i=e.media,null==i||i===!1?i:i.index),(i=e.media,null==i||i===!1?i:i.originallyAvailableAt),a):$.call(e,"seasonEpisodeIndex",(i=e.media,null==i||i===!1?i:i.parentIndex),(i=e.media,null==i||i===!1?i:i.index),(i=e.media,null==i||i===!1?i:i.originallyAvailableAt),a)))+"</h4>\n\n								"}function g(e,t){var i,a;return a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.parentTitle),{hash:{},inverse:B.program(23,b,t),fn:B.program(21,y,t),data:t}),a||0===a?a:""
}function y(e){var t,n="";return n+="\n									<h4>"+R((t=e.media,t=null==t||t===!1?t:t.parentTitle,typeof t===O?t.apply(e):t))+"</h4>\n\n								"}function b(e){var t,n="";return n+="\n									<h4>"+R((t=e.media,t=null==t||t===!1?t:t.title,typeof t===O?t.apply(e):t))+"</h4>\n\n								"}function w(e,t){var i,a,s="";return s+="\n								<h4>\n									",a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.grandparentTitle),{hash:{},inverse:B.program(28,k,t),fn:B.program(26,x,t),data:t}),(a||0===a)&&(s+=a),s+="\n								</h4>\n\n							"
}function x(e){var t,n="";return n+="\n										"+R((t=e.media,t=null==t||t===!1?t:t.grandparentTitle,typeof t===O?t.apply(e):t))+"\n\n									"}function k(e,t){var i,a;return a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.parentTitle),{hash:{},inverse:B.program(31,C,t),fn:B.program(29,S,t),data:t}),a||0===a?a:""}function S(e){var t,n="";return n+="\n										"+R((t=e.media,t=null==t||t===!1?t:t.parentTitle,typeof t===O?t.apply(e):t))+"\n\n									"}function C(e){var t,n="";return n+="\n										"+R((t=e.media,t=null==t||t===!1?t:t.title,typeof t===O?t.apply(e):t))+"\n\n									"
}function A(e,t){var i,a;return a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.playlistName),{hash:{},inverse:B.noop,fn:B.program(34,I,t),data:t}),a||0===a?a:""}function I(e,t){var i,a,s,r="";return r+='\n		<h3 class="title">\n			',a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.grandparentTitle),{hash:{},inverse:B.program(37,_,t),fn:B.program(35,P,t),data:t}),(a||0===a)&&(r+=a),r+='\n		</h3>\n\n		<h4 class="subtitle">\n			',s={hash:{},data:t},i=n.dashboardMediaCardDetails,a=i?i.call(e,e.media,!1,s):$.call(e,"dashboardMediaCardDetails",e.media,!1,s),(a||0===a)&&(r+=a),r+="\n		</h4>\n	"
}function P(e){var t,n="";return n+="\n				"+R((t=e.media,t=null==t||t===!1?t:t.grandparentTitle,typeof t===O?t.apply(e):t))+"\n\n			"}function _(e,t){var i,a;return a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.parentTitle),{hash:{},inverse:B.program(40,M,t),fn:B.program(38,T,t),data:t}),a||0===a?a:""}function T(e){var t,n="";return n+="\n				"+R((t=e.media,t=null==t||t===!1?t:t.parentTitle,typeof t===O?t.apply(e):t))+"\n\n			"}function M(e){var t,n="";return n+="\n				"+R((t=e.media,t=null==t||t===!1?t:t.title,typeof t===O?t.apply(e):t))+"\n\n			"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var D,L,E,N="",O="function",R=this.escapeExpression,$=n.helperMissing,B=this;return D=n["if"].call(t,t.isPlaylistItem,{hash:{},inverse:B.program(3,r,a),fn:B.program(1,s,a),data:a}),(D||0===D)&&(N+=D),N+='\n\n	<div class="poster-container">\n		<div class="poster-card">\n			<div class="poster-face front">\n				<img class="poster" data-original="',E={hash:{},data:a},N+=R((D=n.transcodeImage,D?D.call(t,t.serverObj,t.poster,t.posterWidth,t.posterHeight,E):$.call(t,"transcodeImage",t.serverObj,t.poster,t.posterWidth,t.posterHeight,E)))+'" src="img/posters/',(L=n.placeholder)?L=L.call(t,{hash:{},data:a}):(L=t.placeholder,L=typeof L===O?L.apply(t):L),N+=R(L)+'.png">\n\n				',L=n["if"].call(t,t.showPlayButton,{hash:{},inverse:B.noop,fn:B.program(5,l,a),data:a}),(L||0===L)&&(N+=L),N+="\n\n				",L=n["if"].call(t,t.showOverlay,{hash:{},inverse:B.noop,fn:B.program(14,p,a),data:a}),(L||0===L)&&(N+=L),N+="\n			</div>\n		</div>\n	</div>\n\n	",L=n.unless.call(t,t.primary,{hash:{},inverse:B.noop,fn:B.program(33,A,a),data:a}),(L||0===L)&&(N+=L),N+="\n\n</a>\n"
})}),define("plex/view/lists/dashboard/items/DashboardMediaListItem",["hb!templates/lists/dashboard/items/DashboardMediaListItem.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","jquery"],function(e,t,n,i,a){var s=i.extend({tagName:"li",type:!1,primary:!1,initialize:function(e){this.type=e.type,this.primary=e.primary},events:{"click .play-btn":"onPlayClick"},render:function(){var t,i,a="myPlex"===this.model.server.id,s="On Deck"===this.type,r=!this.primary&&!a,l=this.primary||!a,o=!1,c=a?n.get("primaryServer"):this.model.server,d=this.model.section?this.model.section.id:this.model.get("librarySectionID"),h=this.model.get("type"),u=this.model.get("art"),p=this.model.get("thumb"),m=window.devicePixelRatio?window.devicePixelRatio:1,f="poster",v=u?u:p;
r?("album"===h||"track"===h)&&(f="album"):f="poster_wide",this.primary?t=i=256:r?(v=this.model.get("grandparentThumb")?this.model.get("grandparentThumb"):p,t=98,i=200):t=i=72;var g=this.model.get("viewOffset"),y=this.model.get("duration");switch(g=g&&y?100*(g/y):0,h){case"movie":case"episode":case"album":case"track":case"playlistItem":o=!0}return this.$el.html(e({serverID:c.id,serverURL:c.url(),serverObj:c,sectionID:d,media:this.model.toJSON(),primary:this.primary,isPlaylistItem:a,showProgress:s,showPlayButton:o,showPoster:r,showOverlay:l,placeholder:f,poster:v,posterWidth:t*m,posterHeight:i*m,progress:g})),this.primary&&this.$el.addClass("primary"),this
},onPlayClick:function(e){if(!a(e.currentTarget).hasClass("default")){e.stopImmediatePropagation(),e.preventDefault();var n=this.model.get("type"),i=this.model.section?this.model.section.id:this.model.get("librarySectionID");switch(n){case"album":t.trigger("command:PlayAlbum",this.model);break;case"track":t.trigger("command:PlayTrack",this.model);break;default:t.trigger("navigate:player",this.model.server.id,i,this.model.id)}}}});return s}),define("plex/view/dashboard/DashboardMediaView",["hb!templates/dashboard/DashboardMediaView.tpl","plex/model/SettingsModel","plex/view/BaseView","plex/view/lists/dashboard/items/DashboardMediaListItem","jquery","moment"],function(e,t,n,i,a){var s=n.extend({className:"well span12",type:null,sidebar:!1,settings:null,priority:null,page:1,pageSize:5,events:{"click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick"},initialize:function(e){switch(this.type=e.type,this.sidebar=e.sidebar,this.settings={},this.type){case"On Deck":this.settings.visible=t.get("dashboardOnDeckEnabled"),this.settings.rank=t.get("dashboardOnDeckPriority"),this.settings.dynamic=t.get("dashboardOnDeckDynamicPriority"),this.settings.wide=t.get("dashboardOnDeckWideThumbnails");
break;case"Recently Added":this.settings.visible=t.get("dashboardRecentlyAddedEnabled"),this.settings.rank=t.get("dashboardRecentlyAddedPriority"),this.settings.dynamic=t.get("dashboardRecentlyAddedDynamicPriority"),this.settings.wide=t.get("dashboardRecentlyAddedWideThumbnails");break;case"queue":this.settings.visible=t.get("dashboardQueueEnabled"),this.settings.rank=t.get("dashboardQueuePriority"),this.settings.limit=t.get("dashboardQueueLimit"),this.settings.dynamic=t.get("dashboardQueueDynamicPriority");
break;case"recommendations":this.settings.visible=t.get("dashboardRecommendationsEnabled"),this.settings.rank=t.get("dashboardRecommendationsPriority"),this.settings.limit=t.get("dashboardRecommendationsLimit"),this.settings.dynamic=t.get("dashboardRecommendationsDynamicPriority")}this.priority={module:this,visible:null,rank:this.settings.rank,sidebar:e.sidebar},this.page=1,this.addBinding(this.collection,"reset",this.onReset),this.collection.fetch({hideLoadingAlert:!0}),e.sidebar||(this.resizeThrottle=_.throttle(_.bind(this.onResize,this),100),a(window).on("resize",this.resizeThrottle))
},render:function(){var t=this.collection.unwatched&&this.settings.limit?this.collection.unwatched():this.collection.models,n=Math.ceil(t.length/this.pageSize);this.$el.html(e({type:this.type,page:this.page,pages:n,showPagination:n>1,showPrevious:this.page>1,showNext:n>this.page,playlistName:this.collection.playlistName,playlistLabel:this.collection.playlistLabel}));for(var a=this.page*this.pageSize-this.pageSize,s=a;a+this.pageSize>s&&!(s>=t.length);s++){var r=!1;"all"===this.settings.wide?r=!0:"first"!==this.settings.wide&&this.settings.wide||(r=0===s%this.pageSize);
var l=this.registerView(new i({model:t[s],primary:r,type:this.type}));this.$(".dashboard-media-list").append(l.render().el)}return this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this.loadPoster(),this},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:!1})},this))},calculatePageSize:function(){if(this.sidebar)return this.pageSize=5,this.pageSize;for(var e=this.width,t=98,n=256,i=12,a="none"===this.settings.wide?t:n,s=0;e>a;)a+=i,a+="all"===this.settings.wide?n:t,s++;
return this.pageSize=s,this.pageSize},updatePageSize:function(){this.page=1,this.removeAllViews(),this.render()},onReset:function(e){if(null===this.priority.visible){var t=e.unwatched?e.unwatched():e.models;if(t.length){if(this.settings.dynamic){var n=t[0].get("addedAt"),i=moment().diff(moment.unix(n),"days");i>7?this.priority.rank=this.settings.rank+1:i>1?this.priority.rank=this.settings.rank:1>=i&&(this.priority.rank=this.settings.rank-1)}this.priority.visible=this.settings.visible}else this.priority.visible=!1;
this.trigger("render",this.priority)}},onPreviousClick:function(e){e.preventDefault(),a(e.currentTarget).hasClass("disabled")||this.page>1&&(this.page--,this.render())},onNextClick:function(e){if(e.preventDefault(),!a(e.currentTarget).hasClass("disabled")){var t=this.collection.unwatched?this.collection.unwatched():this.collection.models;this.page<t.length&&(this.page++,this.render())}},onResize:function(){this.width=this.$el.width();var e=this.pageSize,t=this.calculatePageSize();e!==t&&this.updatePageSize()
}});return s}),define("hb!templates/dashboard/DashboardAnnouncementsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="dashboard-well-header dashboard-well-header-secondary well-header">\n	<ul class="well-header-actions">\n		<li><button type="button" class="mark-read-btn btn btn-inverse btn-icon" rel="tooltip" title="',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Mark as Read",r):o.call(t,"t","Mark as Read",r)))+'"><div class="unwatched-icon unwatched-full-icon"></div></button></li>\n	</ul>\n\n	<h3>',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Announcements",r):o.call(t,"t","Announcements",r)))+'</h3>\n</div>\n\n<div class="dashboard-carousel-container"></div>\n'
})}),define("hb!templates/lists/dashboard/DashboardAnnouncementList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<div class="dashboard-carousel-content">\n	<ul class="dashboard-announcement-list"></ul>\n</div>\n\n<div class="dashboard-carousel-navigation"></div>\n'})}),define("hb!templates/lists/dashboard/items/DashboardAnnouncementListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l,o="",c="function",d=this.escapeExpression,h=n.helperMissing;return o+='<h3><a href="',(s=n.link)?s=s.call(t,{hash:{},data:a}):(s=t.link,s=typeof s===c?s.apply(t):s),o+=d(s)+'" target="_blank" tabindex="-1">',(s=n.title)?s=s.call(t,{hash:{},data:a}):(s=t.title,s=typeof s===c?s.apply(t):s),o+=d(s)+'</a></h3>\n\n<p class="date">',l={hash:{},data:a},o+=d((s=n.formatTimestamp,s?s.call(t,t.timestamp,l):h.call(t,"formatTimestamp",t.timestamp,l)))+'</p>\n\n<img class="poster pull-left" src="',(r=n.thumb)?r=r.call(t,{hash:{},data:a}):(r=t.thumb,r=typeof r===c?r.apply(t):r),o+=d(r)+'">\n\n<p class="description">',(r=n.description)?r=r.call(t,{hash:{},data:a}):(r=t.description,r=typeof r===c?r.apply(t):r),(r||0===r)&&(o+=r),o+="</p>\n"
})}),define("plex/view/lists/dashboard/items/DashboardAnnouncementListItem",["hb!templates/lists/dashboard/items/DashboardAnnouncementListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",initialize:function(){this.addBinding(this.model,"change",this.render)},render:function(){this.$el.html(e(this.model.toJSON()));var t=100/this.model.collection.length;return this.$el.css("width",t+"%"),this}});return n}),define("plex/view/lists/dashboard/DashboardAnnouncementList",["hb!templates/lists/dashboard/DashboardAnnouncementList.tpl","plex/model/AppModel","plex/view/lists/BaseList","plex/view/lists/dashboard/items/DashboardAnnouncementListItem","jquery"],function(e,t,n,i,a){var s=n.extend({className:"dashboard-carousel-container",promos:null,index:0,pageInterval:null,hover:!1,pending:!1,events:{"mouseenter .dashboard-carousel-content":"onMouseEnter","mouseleave .dashboard-carousel-content":"onMouseLeave","click .dashboard-carousel-btn":"onCarouselClick"},initialize:function(){this.promos=[],this.index=0,this.hover=!1,this.pending=!1,this.setup(i,".dashboard-announcement-list")
},render:function(){return this.$el.html(e()),this.populate(this.collection),this},destroy:function(){n.prototype.destroy.call(this),this.pageInterval&&clearInterval(this.pageInterval)},reset:function(e){this.promos=[],this.$(".dashboard-carousel-navigation").empty();var t=100*e.length;this.$(".dashboard-announcement-list").css("width",t+"%"),n.prototype.reset.apply(this,arguments),this.$(".dashboard-carousel-btn:nth-child(1)").addClass("active"),this.start()},addItem:function(e){var i=t.get("myPlex");
if("PlexPass"!==e.get("promo")||!i.hasPlexPass()){this.promos.push(e),this.$(".dashboard-carousel-navigation").append('<a class="dashboard-carousel-btn" href="#"></a>');var a=n.prototype.addItem.apply(this,arguments);return a}},start:function(){this.pageInterval&&clearInterval(this.pageInterval),this.pageInterval=setInterval(_.bind(this.autoPage,this),1e4)},page:function(e){this.index=e,this.animate(),this.start()},autoPage:function(){return this.hover?(this.pending=!0,void 0):(this.index+1<this.promos.length?this.index++:this.index=0,this.animate(),void 0)
},animate:function(){this.$(".dashboard-carousel-btn").removeClass("active"),this.$(".dashboard-carousel-btn:nth-child("+(this.index+1)+")").addClass("active"),this.$(".dashboard-announcement-list").css("left",-256*this.index)},onMouseEnter:function(){this.hover=!0},onMouseLeave:function(){this.hover=!1,this.pending&&(this.pending=!1,this.autoPage(),this.start())},onCarouselClick:function(e){e.preventDefault();var t=a(e.currentTarget);this.page(t.index())}});return s}),define("plex/view/dashboard/DashboardAnnouncementsView",["hb!templates/dashboard/DashboardAnnouncementsView.tpl","plex/model/SettingsModel","plex/view/BaseView","plex/view/lists/dashboard/DashboardAnnouncementList","jquery"],function(e,t,n,i,a){var s=n.extend({className:"dashboard-announcements-container well span12",priority:null,unread:!1,announcementList:null,events:{"click .mark-read-btn":"onMarkReadClick"},initialize:function(){this.priority={module:this,visible:null,rank:t.get("dashboardAnnouncementsPriority"),sidebar:!0},this.announcementList=this.registerView(new i({collection:this.collection})),this.addBinding(this.collection,"reset",this.onReset),this.collection.fetch()
},render:function(){return this.$el.html(e({unread:this.unread})),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this.$(".dashboard-carousel-container").append(this.announcementList.render().el),this},onReset:function(e){if(e.length){this.priority.visible=t.get("dashboardAnnouncementsEnabled");var n=this.collection.first().get("timestamp"),i=t.get("dashboardAnnouncementsLastRead");n>i&&(this.unread=!0),this.priority.visible&&!this.unread&&t.get("dashboardAnnouncementsHideUnread")&&(this.priority.visible=!1)
}else this.priority.visible=!1;this.trigger("render",this.priority)},onMarkReadClick:function(e){e.preventDefault(),a(e.currentTarget).addClass("hide"),t.save("dashboardAnnouncementsLastRead",Math.round((new Date).getTime()/1e3)),a(".tooltip").remove()}});return s}),define("hb!templates/lists/dashboard/DashboardSectionList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n		<ul class="well-header-actions">\n			<li><button type="button" class="add-btn btn btn-inverse btn-icon" rel="tooltip" title="',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Add Section",a):v.call(e,"t","Add Section",a)))+'"><i class="glyphicon-plus"></i></button></li>\n			<li><button type="button" class="edit-btn btn btn-inverse btn-icon hide" rel="tooltip" title="',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Edit Sections",a):v.call(e,"t","Edit Sections",a)))+'"><i class="glyphicon pencil"></i></button></li>\n			<li>\n				<div class="btn-group btn-group-inverse">\n					<button type="button" class="refresh-btn btn btn-inverse btn-icon" rel="tooltip" title="',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Refresh Library",a):v.call(e,"t","Refresh Library",a)))+'"><i class="glyphicon repeat"></i></button>\n					<button type="button" class="btn btn-inverse btn-icon dropdown-toggle" data-toggle="dropdown"><i class="glyphicon-caret small"></i></button>\n\n					<ul class="dropdown-menu pull-right">\n						<li><a class="refresh-btn" data-refresh-type="turbo" href="#">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Turbo Scan (Default)",a):v.call(e,"t","Turbo Scan (Default)",a)))+'</a></li>\n						<li><a class="refresh-btn" data-refresh-type="deep" href="#">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Deep Scan",a):v.call(e,"t","Deep Scan",a)))+'</a></li>\n					</ul>\n				</div>\n			</li>\n			<li>\n				<div class="btn-group btn-group-inverse">\n					<button type="button" class="btn btn-inverse btn-icon dropdown-toggle" rel="tooltip" data-toggle="dropdown"><span class="btn-icon-label">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"More",a):v.call(e,"t","More",a)))+'</span> <i class="glyphicon-caret small"></i></button>\n\n					<ul class="maintenance-dropdown-menu dropdown-menu pull-right">\n						<li>\n							<div class="maintenance-control"><button type="button" class="optimize-btn btn btn-icon"><i class="glyphicon flash"></i> <span class="btn-icon-label">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Optimize",a):v.call(e,"t","Optimize",a)))+'</span></button></div>\n							<div class="maintenance-summary">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Cleans up the library database and ensures it is operating as quickly as possible. This is especially useful when you've added or removed a large amount of media from the library.",a):v.call(e,"t","Cleans up the library database and ensures it is operating as quickly as possible. This is especially useful when you've added or removed a large amount of media from the library.",a)))+'</div>\n						</li>\n						<li>\n							<div class="maintenance-control"><button type="button" class="empty-trash-btn btn btn-icon"><i class="glyphicon bin"></i> <span class="btn-icon-label">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Empty Trash",a):v.call(e,"t","Empty Trash",a)))+'</span></button></div>\n							<div class="maintenance-summary">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted.",a):v.call(e,"t","By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted.",a)))+'</div>\n						</li>\n						<li>\n							<div class="maintenance-control"><button type="button" class="clean-bundles-btn btn btn-icon"><i class="glyphicon cargo"></i> <span class="btn-icon-label">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Clean Bundles",a):v.call(e,"t","Clean Bundles",a)))+'</span></button></div>\n							<div class="maintenance-summary">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"The media server stores information about your media to disk, as well as posters, artwork, and other media resources from the Internet. Running this task deletes any bundles which are no longer in use.",a):v.call(e,"t","The media server stores information about your media to disk, as well as posters, artwork, and other media resources from the Internet. Running this task deletes any bundles which are no longer in use.",a)))+"</div>\n						</li>\n					</ul>\n				</div>\n			</li>\n		</ul>\n	"
}function r(e,t){var i,a,s="";return s+="\n			",a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Shared Libraries",a):v.call(e,"t","Shared Libraries",a)))+"\n		"}function l(e,t){var i,a,s="";return s+="\n			",a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"My Library",a):v.call(e,"t","My Library",a)))+"\n		"}function o(){return"hide"}function c(e,t){var i,a,s="";return s+="\n		",a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"There are no available shared libraries.",a):v.call(e,"t","There are no available shared libraries.",a)))+' <a href="https://my.plexapp.com">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Go to myPlex",a):v.call(e,"t","Go to myPlex",a)))+"</a>.\n	"
}function d(e,t){var i,a,s="";return s+="\n		",a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"There are no available library sections.",a):v.call(e,"t","There are no available library sections.",a)))+' <a class="add-btn" href="#">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Add a section",a):v.call(e,"t","Add a section",a)))+"</a>.\n	"}function h(){return"shared"}function u(e,t){var i;return i=n["if"].call(e,e.empty,{hash:{},inverse:y.noop,fn:y.program(7,o,t),data:t}),i||0===i?i:""}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var p,m,f="",v=n.helperMissing,g=this.escapeExpression,y=this;return f+='<div class="dashboard-well-header well-header">\n	',p=n.unless.call(t,t.shared,{hash:{},inverse:y.noop,fn:y.program(1,s,a),data:a}),(p||0===p)&&(f+=p),f+="\n\n	<h3>\n		",p=n["if"].call(t,t.shared,{hash:{},inverse:y.program(5,l,a),fn:y.program(3,r,a),data:a}),(p||0===p)&&(f+=p),f+='\n	</h3>\n</div>\n\n<div class="dashboard-empty-message ',p=n["if"].call(t,t.pending,{hash:{},inverse:y.noop,fn:y.program(7,o,a),data:a}),(p||0===p)&&(f+=p),f+=" ",p=n.unless.call(t,t.empty,{hash:{},inverse:y.noop,fn:y.program(7,o,a),data:a}),(p||0===p)&&(f+=p),f+='">\n	',p=n["if"].call(t,t.shared,{hash:{},inverse:y.program(11,d,a),fn:y.program(9,c,a),data:a}),(p||0===p)&&(f+=p),f+='\n</div>\n\n<ul class="tile-list section-tile-list ',p=n["if"].call(t,t.shared,{hash:{},inverse:y.noop,fn:y.program(13,h,a),data:a}),(p||0===p)&&(f+=p),f+=" ",p=n.unless.call(t,t.pending,{hash:{},inverse:y.noop,fn:y.program(15,u,a),data:a}),(p||0===p)&&(f+=p),f+='"></ul>\n\n<div class="list-actions hide">\n	<button type="button" class="edit-done-btn btn btn-primary btn-medium">',m={hash:{},data:a},f+=g((p=n.t,p?p.call(t,"Done",m):v.call(t,"t","Done",m)))+"</button>\n</div>\n"
})}),define("hb!templates/lists/items/SectionListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"active"}function r(e,t){var i,a;return a={hash:{},data:t},b((i=n.t,i?i.call(e,"Stop Refresh",a):y.call(e,"t","Stop Refresh",a)))}function l(e,t){var i,a;return a={hash:{},data:t},b((i=n.t,i?i.call(e,"Refresh",a):y.call(e,"t","Refresh",a)))}function o(e,t){var i,a,s="";return s+='\n		<img class="poster section-poster custom-section-poster" src="',a={hash:{},data:t},s+=b((i=n.transcodeImage,i?i.call(e,e.serverObj,(i=e.section,null==i||i===!1?i:i.thumb),e.thumbSize,e.thumbSize,a):y.call(e,"transcodeImage",e.serverObj,(i=e.section,null==i||i===!1?i:i.thumb),e.thumbSize,e.thumbSize,a)))+'" width="75" height="75">\n	'
}function c(e){var t,n="";return n+='\n		<i class="poster section-poster plex-icon-'+b((t=e.section,t=null==t||t===!1?t:t.type,typeof t===w?t.apply(e):t))+'"></i>\n	'}function d(e,t){var i,a,s="";return s+='\n			<span class="source-title secondary">',a={hash:{},data:t},s+=b((i=n.truncate,i?i.call(e,(i=e.server,null==i||i===!1?i:i.sourceTitle),10,a):y.call(e,"truncate",(i=e.server,null==i||i===!1?i:i.sourceTitle),10,a)))+"</span>\n		"}function h(e,t){var i,a,s="";return s+="\n			",a=n["if"].call(e,(i=e.server,null==i||i===!1?i:i.friendlyName),{hash:{},inverse:x.program(16,p,t),fn:x.program(14,u,t),data:t}),(a||0===a)&&(s+=a),s+="\n		"
}function u(e,t){var i,a,s="";return s+='\n				<span class="source-title secondary">',a={hash:{},data:t},s+=b((i=n.truncate,i?i.call(e,(i=e.server,null==i||i===!1?i:i.friendlyName),10,a):y.call(e,"truncate",(i=e.server,null==i||i===!1?i:i.friendlyName),10,a)))+"</span>\n			"}function p(e,t){var i,a,s="";return s+='\n				<span class="source-title secondary">',a={hash:{},data:t},s+=b((i=n.truncate,i?i.call(e,(i=e.server,null==i||i===!1?i:i.name),10,a):y.call(e,"truncate",(i=e.server,null==i||i===!1?i:i.name),10,a)))+"</span>\n			"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var m,f,v,g="",y=n.helperMissing,b=this.escapeExpression,w="function",x=this;return g+='<a href="#!/servers/'+b((m=t.server,m=null==m||m===!1?m:m.machineIdentifier,typeof m===w?m.apply(t):m))+"/sections/",v={hash:{},data:a},g+=b((m=n.encodeUrl,m?m.call(t,(m=t.section,null==m||m===!1?m:m.key),v):y.call(t,"encodeUrl",(m=t.section,null==m||m===!1?m:m.key),v)))+'">\n	<div class="actions">\n		<button type="button" class="edit-section-btn btn btn-icon" rel="tooltip" title="',v={hash:{},data:a},g+=b((m=n.t,m?m.call(t,"Edit",v):y.call(t,"t","Edit",v)))+'"><i class="glyphicon pencil"></i></button>\n		<button type="button" class="refresh-section-btn btn btn-icon ',f=n["if"].call(t,(m=t.section,null==m||m===!1?m:m.refreshing),{hash:{},inverse:x.noop,fn:x.program(1,s,a),data:a}),(f||0===f)&&(g+=f),g+='" rel="tooltip" title="',f=n["if"].call(t,(m=t.section,null==m||m===!1?m:m.refreshing),{hash:{},inverse:x.program(5,l,a),fn:x.program(3,r,a),data:a}),(f||0===f)&&(g+=f),g+='"><i class="glyphicon repeat"></i></button>\n		<button type="button" class="delete-section-btn btn btn-danger btn-icon" rel="tooltip" title="',v={hash:{},data:a},g+=b((m=n.t,m?m.call(t,"Delete",v):y.call(t,"t","Delete",v)))+'"><i class="glyphicon ban"></i></button>\n	</div>\n\n	',f=n["if"].call(t,(m=t.section,null==m||m===!1?m:m.thumb),{hash:{},inverse:x.program(9,c,a),fn:x.program(7,o,a),data:a}),(f||0===f)&&(g+=f),g+='\n\n	<h3>\n		<span class="section-title">',v={hash:{},data:a},g+=b((m=n.truncate,m?m.call(t,(m=t.section,null==m||m===!1?m:m.title),20,v):y.call(t,"truncate",(m=t.section,null==m||m===!1?m:m.title),20,v)))+"</span>\n\n		",f=n["if"].call(t,(m=t.server,null==m||m===!1?m:m.sourceTitle),{hash:{},inverse:x.program(13,h,a),fn:x.program(11,d,a),data:a}),(f||0===f)&&(g+=f),g+="\n	</h3>\n\n	<h4>",v={hash:{},data:a},g+=b((m=n.t,m?m.call(t,"Last updated",v):y.call(t,"t","Last updated",v)))+" ",v={hash:{},data:a},g+=b((m=n.timeAgo,m?m.call(t,(m=t.section,null==m||m===!1?m:m.updatedAt),v):y.call(t,"timeAgo",(m=t.section,null==m||m===!1?m:m.updatedAt),v)))+"</h4>\n</a>\n"
})}),define("plex/view/lists/items/SectionListItem",["hb!templates/lists/items/SectionListItem.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/view/modals/EditSectionModal","jquery","spin"],function(e,t,n,i,a,s){var r=i.extend({tagName:"li",className:"disabled",events:{"click a":"onClick","click .edit-section-btn":"onEditClick","click .refresh-section-btn":"onRefreshClick","click .delete-section-btn":"onDeleteClick"},initialize:function(){this.addBinding(this.model,"change",this.onChange)
},render:function(){var t=window.devicePixelRatio?window.devicePixelRatio:1;return this.$el.html(e({serverObj:this.model.server,server:this.model.server.toJSON(),section:this.model.toJSON(),thumbSize:75*t})),this.model.get("limited")&&this.$el.addClass("limited"),this.model.get("refreshing")&&this.$(".refresh-section-btn").spinContents("tiny"),s(".tooltip").remove(),this},onChange:function(){this.$(".refresh-section-btn").spinContents(!1),this.render()},onClick:function(e){this.$el.hasClass("disabled")&&e.preventDefault()
},onEditClick:function(e){e.preventDefault(),n.set("modal",new a({server:this.model.server,section:this.model}))},onRefreshClick:function(e){e.preventDefault();var n=s(e.currentTarget);n.hasClass("active")?(n.removeClass("active"),t.trigger("command:StopLibraryScan",this.model.server,this.model)):(n.addClass("active"),t.trigger("command:StartLibraryScan",this.model.server,this.model))},onDeleteClick:function(e){e.preventDefault(),t.trigger("command:DeleteSection",this.model)}});return r}),define("plex/view/lists/dashboard/items/DashboardSectionListItem",["plex/view/lists/items/SectionListItem"],function(e){var t=e.extend({className:""});
return t}),define("plex/view/lists/dashboard/DashboardSectionList",["hb!templates/lists/dashboard/DashboardSectionList.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/model/SettingsModel","plex/model/collections/SectionCollection","plex/view/BaseView","plex/view/lists/dashboard/items/DashboardSectionListItem","jquery"],function(e,t,n,i,a,s,r,l,o){var c=r.extend({className:"well span12",shared:!1,pendingRequests:0,empty:!0,currentServers:null,currentSections:null,items:null,priority:null,events:{"click .add-btn":"onAddClick","click .edit-btn":"onEditClick","click .edit-done-btn":"onEditDoneClick","click .refresh-btn":"onRefreshClick","click .optimize-btn":"onOptimizeClick","click .empty-trash-btn":"onEmptyTrashClick","click .clean-bundles-btn":"onCleanBundlesClick"},initialize:function(e){this.shared=e.shared,this.pendingRequests=1,this.currentServers=[],this.currentSections=[],this.items={},this.priority={module:this,visible:null},this.shared?this.priority.rank=a.get("dashboardSharedLibrariesPriority"):(this.priority.visible=a.get("dashboardMyLibraryEnabled"),this.priority.rank=a.get("dashboardMyLibraryPriority")),this.addBinding(this.collection,"add",this.onServerAdd),this.collection.populate().done(_.bind(function(){this.pendingRequests+=this.collection.length,this.onServerAddAll(this.collection),this.addBinding(this.collection,"reset",this.onServerAddAll),this.hideLoading(0)
},this)).fail(_.bind(function(){this.hideLoading(0)},this))},render:function(){return this.$el.html(e({shared:this.shared,pending:this.pendingRequests>0,empty:this.empty})),_.each(this._views,function(e){this.$(".section-tile-list").append(e.render().el),this.$(".edit-btn").removeClass("hide")},this),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this},hideLoading:function(e){this.pendingRequests--,e&&(this.empty=!1,this.shared&&null===this.priority.visible&&(this.priority.visible=a.get("dashboardSharedLibrariesEnabled"),this.trigger("render",this.priority))),0>=this.pendingRequests&&this.empty&&(this.$(".dashboard-empty-message").removeClass("hide"),this.$(".section-tile-list").addClass("hide"),null===this.priority.visible&&(this.priority.visible=!1,this.trigger("render",this.priority)))
},onServerAdd:function(e){if(this.shared!==e.get("shared"))return this.hideLoading(0),void 0;var t=_.bind(function(){var t=e.get("sections");this.addBinding(t,"add",this.onSectionAdd),this.addBinding(t,"remove",this.onSectionRemove),t.populate({hideLoadingAlert:!0}).done(_.bind(function(){this.currentServers.push(e),this.hideLoading(t.length),this.onSectionAddAll(t),this.addBinding(t,"reset",this.onSectionAddAll)},this)).fail(_.bind(function(){this.hideLoading(0)},this))},this);e.get("isAvailable")?t():this.addBinding(e,"change:isAvailable",t)
},onServerAddAll:function(e){this.removeAllViews(),this.currentServers=[],this.currentSections=[],this.items={},e.each(this.onServerAdd,this)},onSectionAdd:function(e){if(-1===_.indexOf(this.currentSections,e)){this.currentSections.push(e);var t=new l({model:e});this.items[e.server.id+"!"+e.id]=t,this.registerView(t),this.$(".section-tile-list").append(t.render().el),this.$(".edit-btn").removeClass("hide")}},onSectionAddAll:function(e){e.each(this.onSectionAdd,this)},onSectionRemove:function(e){this.items[e.server.id+"!"+e.id]&&(this.removeView(this.items[e.server.id+"!"+e.id]),delete this.items[e.server.id+"!"+e.id],_.isEmpty(this.items)&&(this.$(".dashboard-empty-message").removeClass("hide"),this.$(".edit-btn").removeClass("active").addClass("hide"),this.$(".list-actions").addClass("hide"),this.$(".section-list").removeClass("list media-list section-list").addClass("tile-list section-tile-list")))
},onAddClick:function(e){e.preventDefault(),t.trigger("command:AddSection",!0)},onEditClick:function(e){e.preventDefault();var t=o(e.currentTarget);t.hasClass("active")?(t.removeClass("active"),this.$(".list-actions").addClass("hide"),this.$(".section-list").removeClass("list media-list section-list").addClass("tile-list section-tile-list")):(t.addClass("active"),this.$(".list-actions").removeClass("hide"),this.$(".section-tile-list").removeClass("tile-list section-tile-list").addClass("list media-list section-list"))
},onEditDoneClick:function(){this.$(".edit-btn").removeClass("active"),this.$(".list-actions").addClass("hide"),this.$(".section-list").removeClass("list media-list section-list").addClass("tile-list section-tile-list")},onRefreshClick:function(e){e.preventDefault();var n={},i=o(e.target).data("refreshType");i?n[i]=!0:e.altKey&&(n.deep=!0),_.each(this.currentServers,function(e){"secondary"!==e.get("serverClass")&&t.trigger("command:StartLibraryScan",e,null,n)})},onOptimizeClick:function(e){e.preventDefault(),t.trigger("command:OptimizeLibrary",i.get("primaryServer"))
},onEmptyTrashClick:function(e){e.preventDefault();var a=0,s=_.bind(function(){a++,a===this.currentSections.length&&i.set("alert",{status:"success",message:n.t("The trash for all sections was emptied.")})},this);_.each(this.currentSections,function(e){return e.get("limited")?(a++,void 0):(t.trigger("command:EmptyTrash",e.server,e,s),void 0)})},onCleanBundlesClick:function(e){e.preventDefault(),t.trigger("command:CleanBundles",i.get("primaryServer"))}});return c}),define("hb!templates/lists/dashboard/DashboardChannelList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"hide"
}function r(e,t){var i;return i=n["if"].call(e,e.empty,{hash:{},inverse:p.noop,fn:p.program(1,s,t),data:t}),i||0===i?i:""}function l(){return"limited"}function o(){return"focus-primary-channel"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d,h,u="",p=this,m=n.helperMissing,f=this.escapeExpression;return u+='<div class="dashboard-well-header well-header">\n	<ul class="well-header-actions">\n		<li><a class="btn btn-inverse btn-icon" href="#!/directory" rel="tooltip" title="',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"Add Channel",h):m.call(t,"t","Add Channel",h)))+'"><i class="glyphicon-plus"></i></a></li>\n		<li><a class="btn btn-inverse btn-icon" href="#!/channels" rel="tooltip" title="',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"View All",h):m.call(t,"t","View All",h)))+'"><i class="glyphicon more"></i></a></li>\n	</ul>\n\n	<h3>',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"Channels",h):m.call(t,"t","Channels",h)))+'</h3>\n</div>\n\n<div class="dashboard-empty-message ',d=n["if"].call(t,t.pending,{hash:{},inverse:p.noop,fn:p.program(1,s,a),data:a}),(d||0===d)&&(u+=d),u+=" ",d=n.unless.call(t,t.empty,{hash:{},inverse:p.noop,fn:p.program(1,s,a),data:a}),(d||0===d)&&(u+=d),u+='">\n	',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"There are no recently used channels.",h):m.call(t,"t","There are no recently used channels.",h)))+' <a class="add-btn" href="#!/directory">',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"Install a channel",h):m.call(t,"t","Install a channel",h)))+'</a>.\n</div>\n\n<ul class="tile-list channel-tile-list dashboard-channel-tile-list ',d=n.unless.call(t,t.pending,{hash:{},inverse:p.noop,fn:p.program(3,r,a),data:a}),(d||0===d)&&(u+=d),u+=" ",d=n["if"].call(t,t.limited,{hash:{},inverse:p.noop,fn:p.program(5,l,a),data:a}),(d||0===d)&&(u+=d),u+=" ",d=n["if"].call(t,t.focusPrimaryChannel,{hash:{},inverse:p.noop,fn:p.program(7,o,a),data:a}),(d||0===d)&&(u+=d),u+='"></ul>\n'
})}),define("hb!templates/lists/dashboard/items/DashboardChannelListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o="function",c=this.escapeExpression,d=n.helperMissing;return l+='<a href="#!/servers/'+c((s=t.server,s=null==s||s===!1?s:s.machineIdentifier,typeof s===o?s.apply(t):s))+"/channels?key=",r={hash:{},data:a},l+=c((s=n.encodeUrl,s?s.call(t,(s=t.channel,null==s||s===!1?s:s.key),r):d.call(t,"encodeUrl",(s=t.channel,null==s||s===!1?s:s.key),r)))+'">\n	<div class="poster-container">\n		<div class="poster-card">\n			<div class="poster-face front">\n				<img class="poster channel-poster" src="',r={hash:{},data:a},l+=c((s=n.transcodeImage,s?s.call(t,t.serverObj,(s=t.channel,null==s||s===!1?s:s.thumb),t.thumbSize,t.thumbSize,r):d.call(t,"transcodeImage",t.serverObj,(s=t.channel,null==s||s===!1?s:s.thumb),t.thumbSize,t.thumbSize,r)))+'">\n				<span class="section-label"></span>\n\n				<div class="hover-overlay card-overlay">\n					<span class="poster-title">'+c((s=t.channel,s=null==s||s===!1?s:s.title,typeof s===o?s.apply(t):s))+"</span>\n				</div>\n			</div>\n		</div>\n	</div>\n</a>\n"
})}),define("plex/view/lists/dashboard/items/DashboardChannelListItem",["hb!templates/lists/dashboard/items/DashboardChannelListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",first:!1,initialize:function(e){this.first=e.first,this.addBinding(this.model,"change",this.render)},render:function(){var t=window.devicePixelRatio?window.devicePixelRatio:1,n=this.first?182:85,i={server:this.model.server.toJSON(),serverURL:this.model.server.url(),serverObj:this.model.server,channel:this.model.toJSON(),thumbSize:n*t};
return this.$el.html(e(i)),this}});return n}),define("plex/view/lists/dashboard/DashboardChannelList",["hb!templates/lists/dashboard/DashboardChannelList.tpl","plex/model/SettingsModel","plex/model/collections/ChannelCollection","plex/view/BaseView","plex/view/lists/dashboard/items/DashboardChannelListItem","moment"],function(e,t,n,i,a){var s=i.extend({className:"well span12",pendingRequests:0,total:0,empty:!0,currentChannels:null,priority:null,initialize:function(){this.pendingRequests=1,this.total=0,this.currentChannels=[],this.priority={module:this,visible:null},this.addBinding(this.collection,"add",this.onServerAdd),this.collection.populate().done(_.bind(function(){this.pendingRequests+=this.collection.length,this.onServerAddAll(this.collection),this.addBinding(this.collection,"reset",this.onServerAddAll),this.hideLoading(0)
},this)).fail(_.bind(function(){this.hideLoading(0)},this))},render:function(){return this.$el.html(e({pending:this.pendingRequests>0,empty:this.empty,limited:t.get("dashboardChannelsLimit"),focusPrimaryChannel:t.get("dashboardChannelsLargeThumbnail")})),_.each(this._views,function(e){this.$(".dashboard-channel-tile-list").before(e.render().el)},this),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this},hideLoading:function(e){this.pendingRequests--,this.total+=e,e&&(this.empty=!1),0>=this.pendingRequests&&this.empty&&(this.priority.visible=t.get("dashboardChannelsEnabled"),this.priority.rank=t.get("dashboardChannelsPriority"),this.trigger("render",this.priority),this.$(".dashboard-empty-message").removeClass("hide"),this.$(".dashboard-channel-tile-list").addClass("hide"))
},onServerAdd:function(e){if(e.get("shared")||"myPlex"===e.id)return this.hideLoading(0),void 0;var i=_.bind(function(){var i=new n([],{server:e,recent:t.get("dashboardChannelsLimit")});this.addBinding(i,"add",this.onChannelAdd),i.populate({hideLoadingAlert:!0}).done(_.bind(function(){this.hideLoading(i.length),this.onChannelAddAll(i),this.addBinding(i,"reset",this.onChannelAddAll)},this)).fail(_.bind(function(){this.hideLoading(0)},this))},this);e.get("isAvailable")?i():this.addBinding(e,"change:isAvailable",i)
},onServerAddAll:function(e){this.removeAllViews(),this.currentChannels=[],e.each(this.onServerAdd,this)},onChannelAdd:function(e){if(!(_.indexOf(this.currentChannels,e.id)>-1)){if(null===this.priority.visible){var n=moment.unix(e.get("lastAccessedAt")),i=moment().diff(n,"days"),s=t.get("dashboardChannelsPriority");this.priority.rank=s,t.get("dashboardChannelsDynamicPriority")&&(i>7?this.priority.rank=s+1:1>=i&&(this.priority.rank=s-1)),this.priority.visible=t.get("dashboardChannelsEnabled"),this.trigger("render",this.priority)
}this.currentChannels.push(e.id);var r=new a({model:e,first:1===this.currentChannels.length});this.registerView(r),this.$(".dashboard-channel-tile-list").append(r.render().el)}},onChannelAddAll:function(e){e.each(this.onChannelAdd,this)}});return s}),define("plex/view/DashboardView",["hb!templates/DashboardView.tpl","plex/model/AppModel","plex/model/SettingsModel","plex/view/BaseView","plex/view/dashboard/DashboardLoginView","plex/view/dashboard/DashboardFriendsView","plex/view/dashboard/DashboardNowPlayingView","plex/view/dashboard/DashboardMediaView","plex/view/dashboard/DashboardAnnouncementsView","plex/view/lists/dashboard/DashboardSectionList","plex/view/lists/dashboard/DashboardChannelList","jquery"],function(e,t,n,i,a,s,r,l,o,c,d,h){var u=i.extend({className:"dashboard-container container container-full",playlistNames:["queue","recommendations"],modules:null,moduleCount:0,sidebarOpen:!1,initialize:function(){var e=t.get("myPlex"),n=t.get("primaryServer"),i=n&&n.get("shared"),h=n&&n.get("multiuser")&&e.hasPlexPass();
if(this.modules=[],this.moduleCount=0,this.sidebarOpen=!1,!i){var u=this.registerView(new c({collection:this.collection,shared:!1})),p=this.registerView(new d({collection:this.collection})),m=this.registerView(new l({collection:n.get("onDeck"),type:"On Deck"})),f=this.registerView(new l({collection:n.get("recentlyAdded"),type:"Recently Added"}));this.modules.push(u,p,m,f)}if(e.get("signedIn")){if(h&&!i){var v=this.registerView(new r({collection:n.get("sessions")}));this.modules.push(v)}var g=this.registerView(new c({collection:this.collection,shared:!0})),y=this.registerView(new s({collection:e.get("friendRequests")}));
this.modules.push(g,y),_.each(this.playlistNames,function(t){var n=this.registerView(new l({collection:e.get("playlists")[t],type:t,sidebar:!0}));this.modules.push(n)},this)}else{var b=this.registerView(new a);this.addBinding(b,"refresh",this.refresh),this.modules.push(b)}var w=this.registerView(new o({collection:t.get("announcements")}));this.modules.push(w),this.addBinding(t,"change:primaryServer",this.refresh)},render:function(){return this.$el.html(e({sidebarOpen:n.get("dashboardSidebarOpen"),fluidWidth:n.get("dashboardFluidWidth")})),_.each(this.modules,_.bind(function(e){e.priority&&e.priority.visible?this.renderModule(e.priority):this.addBinding(e,"render",this.renderModule)
},this)),this},renderModule:function(e,t){if(t||this.moduleCount++,!e.visible)return this.finishRender(),void 0;var n=Math.min(Math.max(e.rank,0),6),i=e.sidebar?this.$("#dashboard-sidebar"):this.$("#dashboard-main"),a=i.find(".priority"+n);e.sidebar&&!this.sidebarOpen&&this.openSidebar(),a.find(".module").each(function(t,n){var i=h(n);return i.find(".span12").length?void 0:(e.module.calculatePageSize&&(e.module.width=i.width()-60,e.module.calculatePageSize()),i.append(e.module.render().el),!1)}),this.finishRender()
},openSidebar:function(){this.sidebarOpen=!0,this.$el.children(".row").addClass("show-sidebar"),_.each(this.modules,function(e){if(e.calculatePageSize&&!e.priority.sidebar){var t=e.pageSize,n=e.calculatePageSize();t!==n&&e.updatePageSize()}})},closeSidebar:function(){this.$el.children(".row").removeClass("show-sidebar"),_.each(this.modules,function(e){if(e.calculatePageSize&&!e.priority.sidebar){var t=e.pageSize,n=e.calculatePageSize();t!==n&&e.updatePageSize()}})},finishRender:function(){this.moduleCount<this.modules.length||(this.sidebarOpen||this.$("#dashboard-sidebar").hasClass("hide")||this.closeSidebar(),n.save("dashboardSidebarOpen",this.sidebarOpen))
}});return u}),define("hb!templates/setup/SetupView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n		<div class="setup-starting-container">\n			<div class="spinner-container"></div><br>\n			',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Please wait a moment while Plex starts.",a):h.call(e,"t","Please wait a moment while Plex starts.",a)))+'\n		</div>\n		<div class="setup-error-container error-container hide">\n			<i class="plex-icon-sad"></i>\n			<p class="error-message">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"A problem has been detected with a core component of Plex. Please visit the <a href='{1}' target='_blank'>forums</a> and provide your logs, as described <a href='{2}' target='_blank'>here</a>.","http://forums.plexapp.com/","http://wiki.plexapp.com/index.php/PlexNine_Tips_and_Tricks#Plex_Log_Files",a):h.call(e,"t","A problem has been detected with a core component of Plex. Please visit the <a href='{1}' target='_blank'>forums</a> and provide your logs, as described <a href='{2}' target='_blank'>here</a>.","http://forums.plexapp.com/","http://wiki.plexapp.com/index.php/PlexNine_Tips_and_Tricks#Plex_Log_Files",a)))+"</p>\n		</div>\n	"
}function r(e,t){var i,a,s="";return s+='\n		<div class="setup-progress">\n			<div class="intro-segment setup-progress-segment active">\n				<a class="change-view-btn segment-title gray" data-view="intro" href="#">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Introduction",a):h.call(e,"t","Introduction",a)))+'</a>\n			</div><div class="setup-segment setup-progress-segment">\n				<a class="change-view-btn segment-title gray" data-view="setup" href="#">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Basic Setup",a):h.call(e,"t","Basic Setup",a)))+'</a>\n			</div><div class="library-segment setup-progress-segment">\n				<a class="change-view-btn segment-title gray" data-view="library" href="#">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Library",a):h.call(e,"t","Library",a)))+'</a>\n			</div><div class="channels-segment setup-progress-segment">\n				<a class="change-view-btn segment-title gray" data-view="channels" href="#">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Channels",a):h.call(e,"t","Channels",a)))+'</a>\n			</div><div class="myplex-segment setup-progress-segment">\n				<a class="change-view-btn segment-title gray" data-view="myplex" href="#">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"myPlex",a):h.call(e,"t","myPlex",a)))+'</a>\n			</div>\n		</div>\n\n		<div class="setup-inner-container"></div>\n	'
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o,c,d="",h=n.helperMissing,u=this.escapeExpression,p=this;return d+='<div class="subnav-container">\n	<ul class="subnav-actions">\n		<li>\n			<a class="skip-btn btn btn-inverse btn-icon" href="#"><span class="btn-icon-label">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Skip",c):h.call(t,"t","Skip",c)))+"</span></a>\n		</li>\n	</ul>\n\n	<h2>",c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Get Started",c):h.call(t,"t","Get Started",c)))+'</h2>\n</div>\n\n<div class="well">\n	',o=n["if"].call(t,t.starting,{hash:{},inverse:p.program(3,r,a),fn:p.program(1,s,a),data:a}),(o||0===o)&&(d+=o),d+="\n</div>\n"
})}),define("hb!templates/setup/SetupIntroView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<h2 class="setup-section-title">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Welcome to the Plex Media Server!",r):o.call(t,"t","Welcome to the Plex Media Server!",r)))+'</h2>\n\n<p class="muted">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"In the next few steps, you'll tell Plex where your music, videos, and photos are stored. Plex will create a beautiful library and organize your media inside it.",r):o.call(t,"t","In the next few steps, you'll tell Plex where your music, videos, and photos are stored. Plex will create a beautiful library and organize your media inside it.",r)))+'</p>\n\n<p class="muted">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"We will then show you how to get iOS, Android, Mac, PC, and Connected TV apps so that you can access your library from any devices you own, both inside the home and on the go.",r):o.call(t,"t","We will then show you how to get iOS, Android, Mac, PC, and Connected TV apps so that you can access your library from any devices you own, both inside the home and on the go.",r)))+'\n\n<p class="server-intro-graphic">\n	<img src="img/setup-wizard-server.png" width="780" height="269">\n</p>\n\n<div class="form-actions pull-center">\n		<a class="change-view-btn btn btn-primary btn-large" data-view="setup" href="#">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Start",r):o.call(t,"t","Start",r)))+"</i></a>\n</div>\n"
})}),define("plex/view/setup/SetupIntroView",["hb!templates/setup/SetupIntroView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({initialize:function(){},render:function(){return this.$el.html(e({server:this.model.toJSON()})),this}});return n}),define("hb!templates/setup/SetupServerView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n		<p class="muted">\n			',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Let's start by giving your Plex server a friendly name so it can identify itself to other computers on the network. If you leave it blank, your computer name will be used.",a):h.call(e,"t","Let's start by giving your Plex server a friendly name so it can identify itself to other computers on the network. If you leave it blank, your computer name will be used.",a)))+'\n		</p>\n		<div class="control-group">\n			<label class="control-label" for="'+u((i=e.friendlyName,i=null==i||i===!1?i:i.id,typeof i===p?i.apply(e):i))+'">'+u((i=e.friendlyName,i=null==i||i===!1?i:i.label,typeof i===p?i.apply(e):i))+'</label>\n			<div class="controls">\n				<input type="text" id="'+u((i=e.friendlyName,i=null==i||i===!1?i:i.id,typeof i===p?i.apply(e):i))+'" name="'+u((i=e.friendlyName,i=null==i||i===!1?i:i.id,typeof i===p?i.apply(e):i))+'" class="span5" value="'+u((i=e.friendlyName,i=null==i||i===!1?i:i.value,typeof i===p?i.apply(e):i))+'" placeholder="'+u((i=e.server,i=null==i||i===!1?i:i.name,typeof i===p?i.apply(e):i))+'">\n			</div>\n		</div>\n	'
}function r(e,t){var i,a,s="";return s+='\n		<p class="muted">\n			',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Would you like to help us make Plex better for everyone? We collect anonymous data, which we use to improve the service over time.",a):h.call(e,"t","Would you like to help us make Plex better for everyone? We collect anonymous data, which we use to improve the service over time.",a)))+'\n		</p>\n		<div class="control-group">\n			<label class="control-label" for="'+u((i=e.collectUsageData,i=null==i||i===!1?i:i.id,typeof i===p?i.apply(e):i))+'">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Send feedback",a):h.call(e,"t","Send feedback",a)))+'</label>\n			<div class="controls">\n				<input type="checkbox" id="'+u((i=e.collectUsageData,i=null==i||i===!1?i:i.id,typeof i===p?i.apply(e):i))+'" name="'+u((i=e.collectUsageData,i=null==i||i===!1?i:i.id,typeof i===p?i.apply(e):i))+'" class="input-dark" checked="checked">\n			</div>\n		</div>\n	'
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o,c,d="",h=n.helperMissing,u=this.escapeExpression,p="function",m=this;return d+='<h2 class="setup-section-title">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Basic Setup",c):h.call(t,"t","Basic Setup",c)))+'</h2>\n\n<form class="form-horizontal">\n	',o=n["if"].call(t,t.friendlyName,{hash:{},inverse:m.noop,fn:m.program(1,s,a),data:a}),(o||0===o)&&(d+=o),d+="\n\n	",o=n["if"].call(t,t.collectUsageData,{hash:{},inverse:m.noop,fn:m.program(3,r,a),data:a}),(o||0===o)&&(d+=o),d+='\n\n	<p class="muted">\n		',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"If you would like to receive announcements about Plex, please enter your email address below. Don't worry, we won't send you spam.",c):h.call(t,"t","If you would like to receive announcements about Plex, please enter your email address below. Don't worry, we won't send you spam.",c)))+'\n	</p>\n	<div class="control-group">\n			<label class="control-label" for="email">Email</label>\n			<div class="controls">\n				<input type="text" id="email" name="email" class="span5">\n			</div>\n	</div>\n\n	<div class="form-actions">\n		<a class="next-btn btn btn-primary btn-medium" href="#">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Next",c):h.call(t,"t","Next",c)))+' <i class="glyphicon right-arrow"></i></a>\n	</div>\n</form>\n'
})}),define("plex/view/setup/SetupServerView",["hb!templates/setup/SetupServerView.tpl","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/BaseView","jquery"],function(e,t,n,i,a){var s=i.extend({friendlyName:null,collectUsageData:null,events:{"change input[name]":"onPreferenceChange","change select[name]":"onPreferenceChange","click .next-btn":"onNextClick"},initialize:function(){var e=this.model.get("preferences");this.friendlyName=e.get("FriendlyName"),this.collectUsageData=e.get("collectUsageData"),this.addBinding(e,"reset",this.onPreferencesReset),e.populate()
},render:function(){var t={server:this.model.toJSON()};return this.changes=this.model.supports("firstRunPref")?{FirstRun:0}:{},this.friendlyName&&(t.friendlyName=this.friendlyName.toJSON()),this.collectUsageData&&(t.collectUsageData=this.collectUsageData.toJSON()),this.$el.html(e(t)),this},onPreferencesReset:function(e){this.friendlyName=e.get("FriendlyName"),this.collectUsageData=e.get("collectUsageData"),this.render()},onPreferenceChange:function(e){var t=e.currentTarget,n=t.value;"checkbox"!==t.type||t.checked||(n="0"),this.changes[t.name]=n
},onNextClick:function(e){e.preventDefault(),this.changes.email&&(a.ajax({type:"POST",url:"https://my.plexapp.com/mailinglist/optin",data:{email:this.changes.email}}),delete this.changes.email),this.friendlyName.save(this.changes).done(_.bind(function(){this.trigger("view:change","library")},this)).fail(function(){n.set("alert",{status:"error",message:t.t("There was a problem saving your server settings.")})})}});return s}),define("hb!templates/setup/SetupMyPlexView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<h2 class="setup-section-title">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Connect Your Server to myPlex",r):o.call(t,"t","Connect Your Server to myPlex",r)))+'</h2>\n\n<p class="muted">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"myPlex makes it easy to get to your media no matter where you are.",r):o.call(t,"t","myPlex makes it easy to get to your media no matter where you are.",r)))+'</p>\n\n<p class="muted">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"With a myPlex account you will be able to queue up video from your browser,<br>access your content from outside your home and easily share content with friends and family.",r):o.call(t,"t","With a myPlex account you will be able to queue up video from your browser,<br>access your content from outside your home and easily share content with friends and family.",r)))+'</p>\n\n<div class="myplex-container">\n	<i class="plex-icon-myplex pull-left"></i>\n\n	<form class="setup-myplex-form"></form>\n</div>\n\n<div class="form-actions">\n	<a class="next-btn btn btn-primary btn-medium" href="#">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Next",r):o.call(t,"t","Next",r)))+' <i class="glyphicon right-arrow"></i></a>\n</div>\n'
})}),define("hb!templates/server/settings/MyPlexConnectView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,o="";return o+='\n	<p>\n		<i class="myplex-connect-status-icon glyphicon ok-2"></i> ',s={hash:{},data:t},o+=T((i=n.t,i?i.call(e,"Signed in as",s):_.call(e,"t","Signed in as",s)))+" ",s={hash:{},data:t},o+=T((i=n.truncate,i?i.call(e,(i=e.account,null==i||i===!1?i:i.username),20,s):_.call(e,"truncate",(i=e.account,null==i||i===!1?i:i.username),20,s)))+'\n		<button class="sign-out-btn btn btn-small">',s={hash:{},data:t},o+=T((i=n.t,i?i.call(e,"Sign Out",s):_.call(e,"t","Sign Out",s)))+"</button>\n	</p>\n\n	",a=n["if"].call(e,e.publishing,{hash:{},inverse:M.program(4,l,t),fn:M.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+="\n"
}function r(e,t){var i,a,s="";return s+='\n		<p class="myplex-connect-loading">',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"Connecting server...",a):_.call(e,"t","Connecting server...",a)))+"</p>\n	"}function l(e,t){var i,a="";return i=n["if"].call(e,e.unpublishing,{hash:{},inverse:M.program(7,c,t),fn:M.program(5,o,t),data:t}),(i||0===i)&&(a+=i),a+="\n	"}function o(e,t){var i,a,s="";return s+='\n		<p class="myplex-connect-loading">',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"Disconnecting server...",a):_.call(e,"t","Disconnecting server...",a)))+"</p>\n	"
}function c(e,t){var i,a,s="";return s+="\n		",a=n["if"].call(e,(i=e.account,null==i||i===!1?i:i.mappingError),{hash:{},inverse:M.program(19,g,t),fn:M.program(8,d,t),data:t}),(a||0===a)&&(s+=a),s+="\n	"}function d(e,t){var i,a,s,r="";return r+="\n			",s={hash:{},inverse:M.program(11,u,t),fn:M.program(9,h,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.account,null==i||i===!1?i:i.mappingError),"badauth",s):_.call(e,"if_eq",(i=e.account,null==i||i===!1?i:i.mappingError),"badauth",s),(a||0===a)&&(r+=a),r+="\n		"
}function h(e,t){var i,a,s="";return s+='\n				<p>\n					<i class="myplex-connect-status-icon glyphicon remove-2"></i> ',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"Unable to authenticate your server",a):_.call(e,"t","Unable to authenticate your server",a)))+'\n					<button class="retry-btn btn btn-primary btn-small">',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"Retry",a):_.call(e,"t","Retry",a)))+"</button>\n				</p>\n			"}function u(e,t){var i,a,s,r="";return s={hash:{},inverse:M.program(14,m,t),fn:M.program(12,p,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.account,null==i||i===!1?i:i.mappingError),"unreachable",s):_.call(e,"if_eq",(i=e.account,null==i||i===!1?i:i.mappingError),"unreachable",s),(a||0===a)&&(r+=a),r+="\n			"
}function p(e,t){var i,a,s="";return s+='\n				<p>\n					<i class="myplex-connect-status-icon glyphicon remove-2"></i> ',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"myPlex could not reach your server",a):_.call(e,"t","myPlex could not reach your server",a)))+'\n					<button class="retry-btn btn btn-primary btn-small">',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"Retry",a):_.call(e,"t","Retry",a)))+"</button>\n				</p>\n			"}function m(e,t){var i,a,s,r="";return s={hash:{},inverse:M.program(17,v,t),fn:M.program(15,f,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.account,null==i||i===!1?i:i.mappingError),"myplexgone",s):_.call(e,"if_eq",(i=e.account,null==i||i===!1?i:i.mappingError),"myplexgone",s),(a||0===a)&&(r+=a),r+="\n			"
}function f(e,t){var i,a,s="";return s+='\n				<p>\n					<i class="myplex-connect-status-icon glyphicon remove-2"></i> ',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"myPlex is not responding",a):_.call(e,"t","myPlex is not responding",a)))+'\n					<button class="retry-btn btn btn-primary btn-small">',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"Retry",a):_.call(e,"t","Retry",a)))+"</button>\n				</p>\n			"}function v(e,t){var i,a,s="";return s+='\n				<p>\n					<i class="myplex-connect-status-icon glyphicon remove-2"></i> ',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"There was a problem connecting your server",a):_.call(e,"t","There was a problem connecting your server",a)))+'\n					<button class="retry-btn btn btn-primary btn-small">',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"Retry",a):_.call(e,"t","Retry",a)))+"</button>\n				</p>\n			"
}function g(e,t){var i,a,s,r="";return r+="\n			",s={hash:{},inverse:M.program(22,b,t),fn:M.program(20,y,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.account,null==i||i===!1?i:i.mappingState),"mapped",s):_.call(e,"if_eq",(i=e.account,null==i||i===!1?i:i.mappingState),"mapped",s),(a||0===a)&&(r+=a),r+="\n		"}function y(e,t){var i,a,s="";return s+='\n				<p>\n					<i class="myplex-connect-status-icon glyphicon ok-2"></i> ',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"Server is mapped to port {1}",(i=e.account,null==i||i===!1?i:i.publicPort),a):_.call(e,"t","Server is mapped to port {1}",(i=e.account,null==i||i===!1?i:i.publicPort),a)))+'\n					<button class="unpublish-btn btn btn-small" href="#">',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"Disconnect",a):_.call(e,"t","Disconnect",a)))+"</button>\n				</p>\n			"
}function b(e,t){var i,a,s="";return s+='\n				<p class="publish-server-group">\n					<button class="publish-btn btn btn-primary">',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"Connect Server",a):_.call(e,"t","Connect Server",a)))+'</button>\n				</p>\n\n				<p class="help-block">',a={hash:{},data:t},s+=T((i=n.t,i?i.call(e,"Connecting your server makes it automatically available on your devices without any configuration of your router.",a):_.call(e,"t","Connecting your server makes it automatically available on your devices without any configuration of your router.",a)))+"</p>\n			"
}function w(e,t){var i,a,s,r="";return r+='\n	<div class="myplex-connect-form">\n		<a class="change-form-btn ',a=n["if"].call(e,(i=e.myPlex,null==i||i===!1?i:i.signedIn),{hash:{},inverse:M.noop,fn:M.program(25,x,t),data:t}),(a||0===a)&&(r+=a),r+='" href="#">',s={hash:{},data:t},r+=T((i=n.t,i?i.call(e,"Already have an account?",s):_.call(e,"t","Already have an account?",s)))+'</a>\n		<a class="change-form-btn ',a=n.unless.call(e,(i=e.myPlex,null==i||i===!1?i:i.signedIn),{hash:{},inverse:M.noop,fn:M.program(25,x,t),data:t}),(a||0===a)&&(r+=a),r+='" href="#">',s={hash:{},data:t},r+=T((i=n.t,i?i.call(e,"Need an account?",s):_.call(e,"t","Need an account?",s)))+'</a>\n\n		<h3 class="',a=n["if"].call(e,(i=e.myPlex,null==i||i===!1?i:i.signedIn),{hash:{},inverse:M.noop,fn:M.program(25,x,t),data:t}),(a||0===a)&&(r+=a),r+='">',s={hash:{},data:t},r+=T((i=n.t,i?i.call(e,"Sign Up",s):_.call(e,"t","Sign Up",s)))+'</h3>\n		<h3 class="',a=n.unless.call(e,(i=e.myPlex,null==i||i===!1?i:i.signedIn),{hash:{},inverse:M.noop,fn:M.program(25,x,t),data:t}),(a||0===a)&&(r+=a),r+='">',s={hash:{},data:t},r+=T((i=n.t,i?i.call(e,"Sign In",s):_.call(e,"t","Sign In",s)))+'</h3>\n\n		<div class="username-group control-group">\n			<span class="help-inline"></span>\n			<label class="control-label" for="username">',s={hash:{},data:t},r+=T((i=n.t,i?i.call(e,"Username",s):_.call(e,"t","Username",s)))+'</label>\n			<div class="controls">\n				<input type="text" id="username" name="username" ',a=n["if"].call(e,e.dark,{hash:{},inverse:M.noop,fn:M.program(27,k,t),data:t}),(a||0===a)&&(r+=a),r+=" ",a=n["if"].call(e,(i=e.myPlex,null==i||i===!1?i:i.signedIn),{hash:{},inverse:M.noop,fn:M.program(29,S,t),data:t}),(a||0===a)&&(r+=a),r+='>\n			</div>\n		</div>\n\n		<div class="email-group control-group ',a=n["if"].call(e,(i=e.myPlex,null==i||i===!1?i:i.signedIn),{hash:{},inverse:M.noop,fn:M.program(25,x,t),data:t}),(a||0===a)&&(r+=a),r+='">\n			<span class="help-inline"></span>\n			<label class="control-label" for="email">',s={hash:{},data:t},r+=T((i=n.t,i?i.call(e,"Email",s):_.call(e,"t","Email",s)))+'</label>\n			<div class="controls">\n				<input type="text" id="email" name="email" ',a=n["if"].call(e,e.dark,{hash:{},inverse:M.noop,fn:M.program(27,k,t),data:t}),(a||0===a)&&(r+=a),r+='>\n			</div>\n		</div>\n\n		<div class="password-group control-group">\n			<span class="help-inline"></span>\n			<label class="control-label" for="password">',s={hash:{},data:t},r+=T((i=n.t,i?i.call(e,"Password",s):_.call(e,"t","Password",s)))+'</label>\n			<div class="controls">\n				<input type="password" id="password" name="password" ',a=n["if"].call(e,e.dark,{hash:{},inverse:M.noop,fn:M.program(27,k,t),data:t}),(a||0===a)&&(r+=a),r+='>\n			</div>\n			<a class="forgot-password-btn ',a=n.unless.call(e,(i=e.myPlex,null==i||i===!1?i:i.signedIn),{hash:{},inverse:M.noop,fn:M.program(25,x,t),data:t}),(a||0===a)&&(r+=a),r+='" href="https://my.plexapp.com/users/password/new" target="_blank">',s={hash:{},data:t},r+=T((i=n.t,i?i.call(e,"Forgot Password?",s):_.call(e,"t","Forgot Password?",s)))+'</a>\n		</div>\n\n		<div class="confirmPassword-group control-group ',a=n["if"].call(e,(i=e.myPlex,null==i||i===!1?i:i.signedIn),{hash:{},inverse:M.noop,fn:M.program(25,x,t),data:t}),(a||0===a)&&(r+=a),r+='">\n			<span class="help-inline"></span>\n			<label class="control-label" for="confirmPassword">',s={hash:{},data:t},r+=T((i=n.t,i?i.call(e,"Confirm Password",s):_.call(e,"t","Confirm Password",s)))+'</label>\n			<div class="controls">\n				<input type="password" id="confirmPassword" name="confirmPassword" ',a=n["if"].call(e,e.dark,{hash:{},inverse:M.noop,fn:M.program(27,k,t),data:t}),(a||0===a)&&(r+=a),r+=">\n			</div>\n		</div>\n	</div>\n"
}function x(){return"hide"}function k(){return'class="input-dark"'}function S(e){var t,n="";return n+='value="'+T((t=e.myPlex,t=null==t||t===!1?t:t.username,typeof t===D?t.apply(e):t))+'"'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var C,A,I,P="",_=n.helperMissing,T=this.escapeExpression,M=this,D="function";return I={hash:{},inverse:M.program(24,w,a),fn:M.program(1,s,a),data:a},C=n.if_eq,A=C?C.call(t,(C=t.account,null==C||C===!1?C:C.signInState),"ok",I):_.call(t,"if_eq",(C=t.account,null==C||C===!1?C:C.signInState),"ok",I),(A||0===A)&&(P+=A),P+="\n"
})}),define("plex/view/server/settings/MyPlexConnectView",["hb!templates/server/settings/MyPlexConnectView.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/model/MyPlexAccountModel","plex/view/BaseView","jquery"],function(e,t,n,i,a,s,r){var l={username:"A username is required",email:"An email address is required",password:"A password is required",confirmPassword:"You must confirm your password",confirmPasswordMatch:"Your passwords do not match"},o=s.extend({className:"myplex-connect-settings",required:!1,dark:!1,signedIn:!1,published:!1,publishing:!1,unpublishing:!1,pollInterval:null,events:{"blur input[name]":"onInputBlur","click .change-form-btn":"onChangeFormClick","click .sign-out-btn":"onSignOutClick","click .publish-btn":"onPublishClick","click .unpublish-btn":"onUnpublishClick","click .retry-btn":"onRetryClick"},initialize:function(e){this.required=e.required,this.dark=e.dark,this.addBinding(this.model,"change:signInState",this.onAccountChange),this.addBinding(this.model,"change:mappingState",this.onAccountChange),this.addBinding(this.model,"change:publicPort",this.onAccountChange),this.signedIn="ok"===this.model.get("signInState"),this.published="mapped"===this.model.get("mappingState")
},render:function(){var t={myPlex:i.get("myPlex").toJSON(),account:this.model.toJSON(),dark:this.dark,publishing:this.publishing,unpublishing:this.unpublishing};return this.$el.html(e(t)),this},destroy:function(){return this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null),s.prototype.destroy.call(this)},update:function(){var e=this.model.get("signInState"),t=this.model.get("mappingState");this.signedIn="ok"===e,this.published="mapped"===t;var n=_.bind(function(){this.pollInterval||(this.pollInterval=setInterval(_.bind(function(){this.model.fetch({hideLoadingAlert:!0})
},this),500))},this),i=_.bind(function(){this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null),this.publishing=!1,this.unpublishing=!1,this.trigger("stop:spinner"),this.render()},this);if("ok"===e){var a=this.publishing&&"unknown"===t,s=this.unpublishing&&"mapped"===t;"waiting"===t||a||s?n():i()}},validate:function(e){var t=e.name,i=r(e).closest("."+t+"-group");return i.hasClass("hide")?null:""===e.value&&this.required?(i.addClass("error"),i.find(".help-inline").text(n.t(l[t])),!1):"confirmPassword"===t&&e.value!==e.form.password.value?(i.addClass("error"),i.find(".help-inline").text(n.t(l.confirmPasswordMatch)),!1):(i.removeClass("error"),i.find(".help-inline").text(""),!0)
},validateAll:function(){var e=!0,t=0;for(var n in l){var i=this.$("input[name="+n+"]")[0];if(i){var a=this.validate(i);a===!0?t++:a===!1&&(e=!1)}}return e},signInServer:function(e,n){if(this.validateAll()){i.get("myPlex");var a={account:this.model,attributes:{username:e,password:n}};this.trigger("start:spinner"),a.success=_.bind(function(){this.signInUser(e,n)},this),a.error=_.bind(function(){this.trigger("stop:spinner")},this),t.trigger("command:ServerSignIn",a)}},signUpServer:function(e,n,a){if(this.validateAll()){i.get("myPlex");
var s={account:this.model,attributes:{username:e,email:n,password:a}};this.trigger("start:spinner"),s.success=_.bind(function(){this.signInUser(e,a)},this),s.error=_.bind(function(){this.trigger("stop:spinner")},this),t.trigger("command:ServerSignUp",s)}},signInUser:function(e,n){var a=i.get("myPlex");if(a.get("signedIn"))return this.publish(),void 0;var s={username:e,password:n,silent:!0,noRedirect:!0};s.success=_.bind(this.publish,this),s.error=_.bind(function(){this.trigger("stop:spinner")}),t.trigger("command:SignIn",s)
},publish:function(){this.publishing=!0,this.render();var e={server:this.model.server,value:!0};e.success=_.bind(function(){this.model.fetch({hideLoadingAlert:!0})},this),e.error=_.bind(function(){this.trigger("stop:spinner")}),this.trigger("start:spinner"),t.trigger("command:PublishServer",e)},unpublish:function(){this.unpublishing=!0,this.render();var e={server:this.model.server,value:!1};e.success=_.bind(function(){this.model.fetch({hideLoadingAlert:!0})},this),e.error=_.bind(function(){this.trigger("stop:spinner")
}),this.trigger("start:spinner"),t.trigger("command:PublishServer",e)},retry:function(){this.publishing=!0,this.render();var e={server:this.model.server,value:!1};e.error=_.bind(function(){this.trigger("stop:spinner")}),e.success=_.bind(function(){setTimeout(_.bind(function(){e.value=!0,e.success=_.bind(function(){this.model.fetch({hideLoadingAlert:!0})},this),t.trigger("command:PublishServer",e)},this),5e3)},this),this.trigger("start:spinner"),t.trigger("command:PublishServer",e)},onAccountChange:function(){this.render(),this.update()
},onInputBlur:function(e){this.validate(e.target)},onChangeFormClick:function(e){e.preventDefault(),this.$("h3, .change-form-btn, .email-group, .confirmPassword-group, .forgot-password-btn").toggleClass("hide")},onSignOutClick:function(e){var n={account:this.model},i=r(e.target);i.hasClass("active")||(i.spinContents("tiny"),n.success=_.bind(function(){this.model.fetch({hideLoadingAlert:!0}).always(function(){i.spinContents(!1)})},this),n.error=_.bind(function(){i.spinContents(!1)},this),t.trigger("command:ServerSignOut",n))
},onPublishClick:function(){this.publish()},onUnpublishClick:function(){this.unpublish()},onRetryClick:function(){this.retry()}});return o}),define("plex/view/setup/SetupMyPlexView",["hb!templates/setup/SetupMyPlexView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/view/server/settings/MyPlexConnectView","jquery","spin"],function(e,t,n,i,a){var s=i.extend({autoAdvance:!1,events:{"keypress .setup-myplex-form":"onFormKeyPress","click .next-btn":"onSubmit"},initialize:function(){var e=this.model.get("myPlexAccount"),t=this.model.get("preferences");
this.connectView=new a({model:e}),this.addBinding(this.connectView,"start:spinner",this.onSpinnerStart),this.addBinding(this.connectView,"stop:spinner",this.onSpinnerStop),e.fetch({hideLoadingAlert:!0}),t.populate({hideLoadingAlert:!0})},render:function(){var t=this.model.get("myPlexAccount");return this.$el.html(e()),this.$(".setup-myplex-form").append(this.connectView.render().el),this.connectView.delegateEvents(),_.defer(_.bind(function(){"ok"===t.get("signInState")&&"failed"===t.get("mappingState")&&this.connectView.retry()
},this)),this},onSpinnerStart:function(){this.$(".next-btn").spinContents("small")},onSpinnerStop:function(){this.$(".next-btn").spinContents(!1),this.autoAdvance&&(this.autoAdvance=!1,this.connectView.published&&this.trigger("view:change","complete"))},onFormKeyPress:function(e){13===e.keyCode&&this.onSubmit(e)},onSubmit:function(e){if(e.preventDefault(),!this.$(".next-btn").hasClass("active"))if(this.connectView.signedIn)this.trigger("view:change","complete");else{var t=this.$(".setup-myplex-form")[0],n=this.$(".confirmPassword-group").hasClass("hide");
if(!t.username.value||!t.password.value||!n&&!t.email.value)return this.trigger("view:change","complete"),void 0;this.autoAdvance=!0,this.$(".confirmPassword-group").hasClass("hide")?this.connectView.signInServer(t.username.value,t.password.value):this.connectView.signUpServer(t.username.value,t.email.value,t.password.value,t.confirmPassword.value)}}});return s}),define("hb!templates/setup/SetupLibraryView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<h2 class="setup-section-title">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Create Your Media Library",r):o.call(t,"t","Create Your Media Library",r)))+'</h2>\n\n<p class="muted">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Plex organizes your library into sections, organized by type. You can add as many sections as you want, and you can have multiple sections with the same type.",r):o.call(t,"t","Plex organizes your library into sections, organized by type. You can add as many sections as you want, and you can have multiple sections with the same type.",r)))+'</p>\n\n<div class="setup-add-section-container">\n	<a class="add-btn btn btn-medium" href="#"><i class="glyphicon-plus"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Add Section",r):o.call(t,"t","Add Section",r)))+'</a>\n</div>\n\n<div class="form-actions">\n	<a class="next-btn btn btn-primary btn-medium" href="#">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Next",r):o.call(t,"t","Next",r)))+' <i class="glyphicon right-arrow"></i></a>\n</div>\n'
})}),define("plex/view/lists/SectionList",["plex/view/lists/BaseList","plex/view/lists/items/SectionListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"list media-list section-list",initialize:function(){this.setup(t),this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this}});return n}),define("plex/view/setup/SetupLibraryView",["hb!templates/setup/SetupLibraryView.tpl","plex/model/AppModel","plex/view/BaseView","plex/view/lists/SectionList","plex/view/modals/EditSectionModal"],function(e,t,n,i,a){var s=n.extend({sectionList:null,events:{"click .add-btn":"onAddClick","click .next-btn":"onNextClick"},initialize:function(){var e=this.model.get("sections");
this.sectionList=this.registerView(new i({collection:e}))},render:function(){return this.$el.html(e({server:this.model.toJSON()})),this.$(".setup-add-section-container").after(this.sectionList.render().el),this},onAddClick:function(e){e.preventDefault(),t.set("modal",new a({server:this.model}))},onNextClick:function(e){e.preventDefault(),this.trigger("view:change","channels")}});return s}),define("hb!templates/setup/SetupChannelsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,o="";
return o+='\n	<div class="required-plugins">\n		<h3 class="setup-section-subtitle">',s={hash:{},data:t},o+=g((i=n.t,i?i.call(e,"Required Plugins",s):v.call(e,"t","Required Plugins",s)))+'</h3>\n		<p class="muted">',s={hash:{},data:t},o+=g((i=n.t,i?i.call(e,"Channels may require plugins to be installed alongside the media server. Click on the links below to download the installer for each plugin.",s):v.call(e,"t","Channels may require plugins to be installed alongside the media server. Click on the links below to download the installer for each plugin.",s)))+"</p>\n\n		",a=n["if"].call(e,e.showPluginWarning,{hash:{},inverse:y.noop,fn:y.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+='\n\n		<p class="plugin-list">\n			',a=n.unless.call(e,(i=e.server,null==i||i===!1?i:i.flashInstalled),{hash:{},inverse:y.noop,fn:y.program(4,l,t),data:t}),(a||0===a)&&(o+=a),o+="\n\n			",a=n.unless.call(e,(i=e.server,null==i||i===!1?i:i.silverlightInstalled),{hash:{},inverse:y.noop,fn:y.program(9,d,t),data:t}),(a||0===a)&&(o+=a),o+="\n\n			",a=n.unless.call(e,(i=e.server,null==i||i===!1?i:i.soundflowerInstalled),{hash:{},inverse:y.noop,fn:y.program(11,h,t),data:t}),(a||0===a)&&(o+=a),o+="\n		</p>\n	</div>\n"
}function r(e,t){var i,a,s="";return s+='\n			<p class="plugin-warning">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Plugins need to be installed on the computer that is running the media server.",a):v.call(e,"t","Plugins need to be installed on the computer that is running the media server.",a)))+"</p>\n		"}function l(e,t){var i,a="";return a+='\n				<span class="required-plugin">\n					',i=n["if"].call(e,e.mac,{hash:{},inverse:y.program(7,c,t),fn:y.program(5,o,t),data:t}),(i||0===i)&&(a+=i),a+='\n						<img src="img/plugins/flash.png" width="80" height="80"><br>\n						Flash Player\n					</a>\n				</span>\n			'
}function o(){return'\n						<a href="http://fpdownload.adobe.com/pub/flashplayer/current/support/install_flash_player_osx.dmg">\n					'}function c(){return'\n						<a href="http://fpdownload.adobe.com/pub/flashplayer/current/support/install_flash_player.exe">\n					'}function d(){return'\n				<span class="required-plugin">\n					<a href="http://www.microsoft.com/getsilverlight/handlers/getsilverlight.ashx">\n						<img src="img/plugins/silverlight.png" width="80" height="80"><br>\n						Silverlight\n					</a>\n				</span>\n			'
}function h(){return'\n				<span class="required-plugin">\n					<a href="http://soundflower.googlecode.com/files/Soundflower-1.6.6b.dmg">\n						<img src="img/plugins/soundflower.png" width="80" height="80"><br>\n						Soundflower\n					</a>\n				</span>\n			'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var u,p,m,f="",v=n.helperMissing,g=this.escapeExpression,y=this;return f+='<h2 class="setup-section-title">',m={hash:{},data:a},f+=g((u=n.t,u?u.call(t,"Install Channels",m):v.call(t,"t","Install Channels",m)))+'</h2>\n\n<p class="muted">',m={hash:{},data:a},f+=g((u=n.t,u?u.call(t,"Plex channels give you access to online media from a variety of sites. You can browse and install these channels from the Channel Directory, but get started by installing some featured channels.",m):v.call(t,"t","Plex channels give you access to online media from a variety of sites. You can browse and install these channels from the Channel Directory, but get started by installing some featured channels.",m)))+'</p>\n\n<div class="featured-channels">\n	<h3 class="setup-section-subtitle">',m={hash:{},data:a},f+=g((u=n.t,u?u.call(t,"Featured Channels",m):v.call(t,"t","Featured Channels",m)))+"</h3>\n</div>\n\n",p=n["if"].call(t,t.showPlugins,{hash:{},inverse:y.noop,fn:y.program(1,s,a),data:a}),(p||0===p)&&(f+=p),f+='\n\n<div class="form-actions">\n	<a class="next-btn btn btn-primary btn-medium" href="#">',m={hash:{},data:a},f+=g((u=n.t,u?u.call(t,"Next",m):v.call(t,"t","Next",m)))+' <i class="glyphicon right-arrow"></i></a>\n</div>\n'
})}),define("hb!templates/lists/channels/items/ChannelTileListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<a href="#">\n	<div class="poster-container">\n		<div class="poster-card">\n			<div class="poster-face front">\n				<i class="installed-icon glyphicon ok-2"></i>\n				<img class="poster channel-poster">\n\n				<div class="hover-overlay card-overlay">\n					<span class="poster-title"></span>\n				</div>\n			</div>\n		</div>\n	</div>\n</a>\n'
})}),define("hb!templates/modals/ChannelModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t,i){var a,s,o,u="";return u+="\n			",o={hash:{},inverse:b.noop,fn:b.program(2,r,t),data:t},a=n.if_eq,s=a?a.call(e,e.name,"Install",o):y.call(e,"if_eq",e.name,"Install",o),(s||0===s)&&(u+=s),u+="\n\n			",o={hash:{},inverse:b.noop,fn:b.programWithDepth(4,l,t,i),data:t},a=n.if_eq,s=a?a.call(e,e.name,"Update",o):y.call(e,"if_eq",e.name,"Update",o),(s||0===s)&&(u+=s),u+="\n\n			",o={hash:{},inverse:b.noop,fn:b.program(7,c,t),data:t},a=n.if_eq,s=a?a.call(e,e.name,"Restart",o):y.call(e,"if_eq",e.name,"Restart",o),(s||0===s)&&(u+=s),u+="\n\n			",o={hash:{},inverse:b.noop,fn:b.program(9,d,t),data:t},a=n.if_eq,s=a?a.call(e,e.name,"Reset",o):y.call(e,"if_eq",e.name,"Reset",o),(s||0===s)&&(u+=s),u+="\n\n			",o={hash:{},inverse:b.noop,fn:b.program(11,h,t),data:t},a=n.if_eq,s=a?a.call(e,e.name,"Uninstall",o):y.call(e,"if_eq",e.name,"Uninstall",o),(s||0===s)&&(u+=s),u+="\n		"
}function r(e,t){var i,a,s="";return s+='\n				<button class="btn btn-primary action-btn install-btn" data-key="',(i=n.key)?i=i.call(e,{hash:{},data:t}):(i=e.key,i=typeof i===v?i.apply(e):i),s+=g(i)+'"><i class="glyphicon circle-arrow-down"></i> ',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,e.name,a):y.call(e,"t",e.name,a)))+"</button>\n			"}function l(e,t,i){var a,s,r,l="";return l+="\n				",a=n.unless.call(e,i.agent,{hash:{},inverse:b.noop,fn:b.program(5,o,t),data:t}),(a||0===a)&&(l+=a),l+='\n\n				<div class="btn-group">\n					<button class="btn action-btn" data-key="',(a=n.key)?a=a.call(e,{hash:{},data:t}):(a=e.key,a=typeof a===v?a.apply(e):a),l+=g(a)+'"><i class="glyphicon circle-arrow-top"></i> ',r={hash:{},data:t},l+=g((a=n.t,a?a.call(e,e.name,r):y.call(e,"t",e.name,r)))+'</button>\n					<button class="btn dropdown-toggle" data-toggle="dropdown">\n						<i class="glyphicon-caret small"></i>\n					</button>\n					<ul class="dropdown-menu dropdown-menu-large pull-right">\n						<li><a class="action-btn" data-key="',(s=n.key)?s=s.call(e,{hash:{},data:t}):(s=e.key,s=typeof s===v?s.apply(e):s),l+=g(s)+'" href="#">',r={hash:{},data:t},l+=g((a=n.t,a?a.call(e,e.name,r):y.call(e,"t",e.name,r)))+"</a></li>\n			"
}function o(e,t){var i,a,s="";return s+='\n					<button class="btn btn-primary browse-btn"><i class="glyphicon show-thumbnails"></i> ',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Browse",a):y.call(e,"t","Browse",a)))+"</button>\n				"}function c(e,t){var i,a,s="";return s+='\n						<li><a class="action-btn" data-key="',(i=n.key)?i=i.call(e,{hash:{},data:t}):(i=e.key,i=typeof i===v?i.apply(e):i),s+=g(i)+'" href="#">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,e.name,a):y.call(e,"t",e.name,a)))+"</a></li>\n			"
}function d(e,t){var i,a,s="";return s+='\n						<li><a class="action-btn" data-key="',(i=n.key)?i=i.call(e,{hash:{},data:t}):(i=e.key,i=typeof i===v?i.apply(e):i),s+=g(i)+'" href="#">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,e.name,a):y.call(e,"t",e.name,a)))+"</a></li>\n					</ul>\n				</div>\n			"}function h(e,t){var i,a,s="";return s+='\n				<button class="btn btn-danger action-btn" data-key="',(i=n.key)?i=i.call(e,{hash:{},data:t}):(i=e.key,i=typeof i===v?i.apply(e):i),s+=g(i)+'"><i class="glyphicon ban"></i> ',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,e.name,a):y.call(e,"t",e.name,a)))+"</button>\n			"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var u,p,m,f="",v="function",g=this.escapeExpression,y=n.helperMissing,b=this;return f+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3>'+g((u=t.channel,u=null==u||u===!1?u:u.name,typeof u===v?u.apply(t):u))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	<div class="channel-controls">\n		<img class="poster channel-poster" src="',m={hash:{},data:a},f+=g((u=n.transcodeImage,u?u.call(t,t.serverObj,(u=t.channel,null==u||u===!1?u:u.thumb),t.thumbSize,t.thumbSize,m):y.call(t,"transcodeImage",t.serverObj,(u=t.channel,null==u||u===!1?u:u.thumb),t.thumbSize,t.thumbSize,m)))+'" width="200" height="200">\n\n		',p=n.each.call(t,t.actions,{hash:{},inverse:b.noop,fn:b.programWithDepth(1,s,a,t),data:a}),(p||0===p)&&(f+=p),f+='\n	</div>\n\n	<div class="channel-details">\n		<p class="summary">',m={hash:{},data:a},f+=g((u=n.truncate,u?u.call(t,(u=t.channel,null==u||u===!1?u:u.summary),500,m):y.call(t,"truncate",(u=t.channel,null==u||u===!1?u:u.summary),500,m)))+"</p>\n	</div>\n</div>\n"
})}),define("plex/view/modals/ChannelModal",["hb!templates/modals/ChannelModal.tpl","plex/control/Dispatcher","plex/view/modals/BaseModal","jquery"],function(e,t,n,i){var a=n.extend({name:"channelModal",className:"modal channel-modal fade",closeOnInstall:!1,events:{hidden:"close","click .action-btn":"onActionClick","click .browse-btn":"onBrowseClick"},initialize:function(e){this.closeOnInstall=e.closeOnInstall;var t=this.model.get("actions");t.url=this.model.id,this.addBinding(t,"reset",this.render),t.fetch()
},render:function(){var t=window.devicePixelRatio?window.devicePixelRatio:1;return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,channel:this.model.toJSON(),agent:/com.plexapp.agents./.test(this.model.id),actions:this.model.get("actions").toJSON(),thumbSize:200*t})).modal(),this},onActionClick:function(e){e.preventDefault();var n=i(e.target);n.addClass("disabled");var a=_.bind(function(){n.hasClass("install-btn")&&this.closeOnInstall?this.$el.modal("hide"):(n.removeClass("disabled"),this.model.get("actions").fetch())
},this);t.trigger("command:ChannelAction",this.model,n.data("key"),a)},onBrowseClick:function(e){e.preventDefault();var n=this.model.get("key"),i=_.last(n.split("/"));this.$el.modal("hide"),t.trigger("navigate:channelByIdentifier",this.model.server.id,i)}});return a}),define("plex/view/lists/channels/items/ChannelTileListItem",["hb!templates/lists/channels/items/ChannelTileListItem.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/view/modals/ChannelModal"],function(e,t,n,i,a){var s=i.extend({tagName:"li",closeOnInstall:!1,events:{"click a":"onClick"},initialize:function(e){this.closeOnInstall=e.list.closeOnInstall,this.addBinding(this.model,"change",this.render)
},render:function(){return this.$el.html(e({channel:this.model.toJSON()})),this.bindView(),this},bindings:{".poster-title":{modelAttr:"name"},".channel-poster":{modelAttr:"thumb",format:function(e,t){e.attr("src")||e.attr("src","img/posters/poster_square.png");var n=window.devicePixelRatio?window.devicePixelRatio:1,i=128*n,a=128*n,s=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,i,a);e.data("original",s),this.trigger("change:poster")}},".installed-icon":{modelAttr:"installed",hideEmpty:!0,format:function(e,t){t?e.removeClass("hide"):e.addClass("hide")
}}},onClick:function(e){e.preventDefault(),n.set("modal",new a({model:this.model,closeOnInstall:this.closeOnInstall}))}});return s}),define("plex/view/lists/channels/ChannelTileList",["plex/view/lists/BaseList","plex/view/lists/channels/items/ChannelTileListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list channel-tile-list",closeOnInstall:!1,initialize:function(e){this.setup(t),this.closeOnInstall=e.closeOnInstall,this.loadPosterThrottle=_.throttle(this.loadPoster,100)},render:function(){return this.$el.empty(),this.populate(this.collection),this
},addItem:function(){var t=e.prototype.addItem.apply(this,arguments);this.addBinding(t,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200})},this))}});return n}),define("plex/view/setup/SetupChannelsView",["hb!templates/setup/SetupChannelsView.tpl","plex/model/collections/ChannelCollection","plex/view/BaseView","plex/view/lists/channels/ChannelTileList","jquery"],function(e,t,n,i){var a=n.extend({channelList:null,events:{"click .next-btn":"onNextClick"},initialize:function(){var e=new t([],{server:this.model,url:"/system/appstore/featured"});
e.fetch({hideLoadingAlert:!0}),this.channelList=this.registerView(new i({collection:e,closeOnInstall:!0}))},render:function(){var t=this.model.get("flashInstalled"),n=this.model.get("flashInstalled"),i=this.model.get("soundflowerInstalled");return this.$el.html(e({server:this.model.toJSON(),showPlugins:!t||!n||!i,showPluginWarning:!/^(localhost|127.0.0.1)$/.test(window.location.hostname),mac:navigator.appVersion.indexOf("Mac")>-1})),this.$(".featured-channels").append(this.channelList.render().el),this
},onNextClick:function(e){e.preventDefault(),this.trigger("view:change","myplex")}});return a}),define("hb!templates/setup/SetupCompleteView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n	<h3 class="setup-section-subtitle">',a={hash:{},data:t},s+=h((i=n.t,i?i.call(e,"Add videos to your queue from the browser",a):d.call(e,"t","Add videos to your queue from the browser",a)))+"</h3>\n\n	<p class=\"queue-email\">\n		<a class=\"queue-bookmarklet-btn well\" href=\"javascript: var s=document.createElement('script');s.type='text/javascript';s.src='https://my.plexapp.com/queue/bookmarklet_payload?uid="+h((i=e.myPlex,i=null==i||i===!1?i:i.queueUid,typeof i===u?i.apply(e):i))+"';var h=document.getElementsByTagName('head')[0];h.appendChild(s);void(0);\">❯ ",a={hash:{},data:t},s+=h((i=n.t,i?i.call(e,"Plex It!",a):d.call(e,"t","Plex It!",a)))+'</a>\n	</p>\n\n	<ol class="muted">\n		<li>',a={hash:{},data:t},s+=h((i=n.t,i?i.call(e,"Drag the link above to your bookmarks bar.",a):d.call(e,"t","Drag the link above to your bookmarks bar.",a)))+"</li>\n		<li>",a={hash:{},data:t},s+=h((i=n.t,i?i.call(e,"To save a video to your queue, click “❯ Plex It!” in your Bookmarks Bar so you can watch it later.",a):d.call(e,"t","To save a video to your queue, click “❯ Plex It!” in your Bookmarks Bar so you can watch it later.",a)))+"</li>\n		<li>",a={hash:{},data:t},s+=h((i=n.t,i?i.call(e,"A panel will appear on the left side of the page to let you know the video has been saved.",a):d.call(e,"t","A panel will appear on the left side of the page to let you know the video has been saved.",a)))+'</li>\n	</ol>\n\n	<h3 class="setup-section-subtitle">',a={hash:{},data:t},s+=h((i=n.t,i?i.call(e,"Or send videos to your queue by email",a):d.call(e,"t","Or send videos to your queue by email",a)))+'</h3>\n\n	<p class="queue-email">\n		<a class="well" href="mailto:'+h((i=e.myPlex,i=null==i||i===!1?i:i.queueEmail,typeof i===u?i.apply(e):i))+'">'+h((i=e.myPlex,i=null==i||i===!1?i:i.queueEmail,typeof i===u?i.apply(e):i))+'</a>\n	</p>\n\n	<p class="muted">',a={hash:{},data:t},s+=h((i=n.t,i?i.call(e,"Every link that you email to this address will be added to your myPlex queue. Add it to your address book so you can easily email links from your iPhone, iPad, Android, or any other device.",a):d.call(e,"t","Every link that you email to this address will be added to your myPlex queue. Add it to your address book so you can easily email links from your iPhone, iPad, Android, or any other device.",a)))+"</p>\n"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l,o,c="",d=n.helperMissing,h=this.escapeExpression,u="function",p=this;return c+='<h2 class="setup-section-title">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Congratulations!",o):d.call(t,"t","Congratulations!",o)))+'</h2>\n\n<p class="muted">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"See, that wasn't too bad, right? At this very moment, Plex is working tirelessly to build your library, and make it look beautiful. Like, there are at least a dozen mice on spinny wheels inside your computer, all peddling furiously.",o):d.call(t,"t","See, that wasn't too bad, right? At this very moment, Plex is working tirelessly to build your library, and make it look beautiful. Like, there are at least a dozen mice on spinny wheels inside your computer, all peddling furiously.",o)))+'</p>\n\n<p class="muted">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Feel free to watch Plex work, or take this opportunity to <a href='{1}' target='_blank'>download</a> some Plex apps!","http://www.plexapp.com/getplex/index.php#apps",o):d.call(t,"t","Feel free to watch Plex work, or take this opportunity to <a href='{1}' target='_blank'>download</a> some Plex apps!","http://www.plexapp.com/getplex/index.php#apps",o)))+"</p>\n\n",l=n["if"].call(t,(r=t.myPlex,null==r||r===!1?r:r.signedIn),{hash:{},inverse:p.noop,fn:p.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='\n\n<div class="form-actions pull-center">\n	<a class="next-btn btn btn-primary btn-large" href="#!/dashboard">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Done",o):d.call(t,"t","Done",o)))+"</i></a>\n</div>\n"
})}),define("plex/view/setup/SetupCompleteView",["hb!templates/setup/SetupCompleteView.tpl","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/BaseView"],function(e,t,n,i){var a=i.extend({events:{"click .queue-bookmarklet-btn":"onBookmarkletClick"},render:function(){return this.$el.html(e({server:this.model.toJSON(),myPlex:n.get("myPlex").toJSON()})),this},onBookmarkletClick:function(e){e.preventDefault(),n.set("alert",{message:t.t("Drag ❯ Plex It! to your bookmarks.")})}});return a
}),define("plex/view/setup/SetupView",["hb!templates/setup/SetupView.tpl","plex/control/Dispatcher","plex/model/collections/AgentCollection","plex/view/BaseView","plex/view/setup/SetupIntroView","plex/view/setup/SetupServerView","plex/view/setup/SetupMyPlexView","plex/view/setup/SetupLibraryView","plex/view/setup/SetupChannelsView","plex/view/setup/SetupCompleteView","jquery","spin"],function(e,t,n,i,a,s,r,l,o,c,d){var h=i.extend({className:"setup-container container container-full",currentView:"intro",views:{intro:null,setup:null,library:null,channels:null,myplex:null,complete:null},events:{"click .change-view-btn":"onChangeViewClick","click .skip-btn":"onSkipClick"},initialize:function(){this.views.intro=this.registerView(new a({model:this.model})),this.views.setup=this.registerView(new s({model:this.model})),this.views.library=this.registerView(new l({model:this.model})),this.views.channels=this.registerView(new o({model:this.model})),this.views.myplex=this.registerView(new r({model:this.model})),this.views.complete=this.registerView(new c({model:this.model})),this.addBinding(this.views.setup,"view:change",this.onViewChange),this.addBinding(this.views.library,"view:change",this.onViewChange),this.addBinding(this.views.channels,"view:change",this.onViewChange),this.addBinding(this.views.myplex,"view:change",this.onViewChange),this.currentView="intro",this.starting=!0,this.model.populate({hideLoadingAlert:!0}).done(_.bind(this.start,this))
},render:function(){if(this.$el.html(e({starting:this.starting})),this.starting)this.$(".spinner-container").spinContents("large","#777");else{this.$(".spinner-container").spinContents(!1);var t=this.views[this.currentView];this.$(".setup-inner-container").html(t.render().el),t.delegateEvents(),this.updateProgress()}return this},start:function(){if(this.model.get("startState"))this.model.fetch({hideLoadingAlert:!0}).done(_.delay(_.bind(this.start,this),500));else{var e=_.bind(function(){this.starting=!1,this.render()
},this),i=_.bind(function(n){var i=!0,a=["com.plexapp.agents.imdb","com.plexapp.agents.thetvdb","com.plexapp.agents.lastfm"];if(_.each(a,function(e){n.get(e)&&(i=!1)}),i)this.$(".setup-starting-container").addClass("hide"),this.$(".setup-error-container").removeClass("hide");else{var s={server:this.model,silent:!0};t.trigger("command:UpdateChannel",s,e)}},this),a=_.bind(function(){_.delay(_.bind(this.start,this),500)}),s=new n([],{server:this.model});s.fetch({hideLoadingAlert:!0}).done(i).fail(a)
}},changeView:function(e){this.currentView!==e&&(this.currentView=e,this.render(),window.scrollTo&&window.scrollTo(0,0))},updateProgress:function(){var e,t=this.$("."+this.currentView+"-segment"),n=!1;t.length&&(e=t[0]),d(".setup-progress-segment").each(function(){var t=d(this);n?t.removeClass("active complete"):t.addClass("active complete"),this===e&&(n=!0,t.removeClass("complete"))})},onViewChange:function(e){this.changeView(e)},onChangeViewClick:function(e){e.preventDefault(),this.changeView(d(e.target).data("view"))
},onSkipClick:function(e){e.preventDefault();var n=this.model.get("preferences"),i=n.first();this.model.supports("firstRunPref")&&i.save({FirstRun:0}),t.trigger("navigate:dashboard")}});return h}),define("hb!templates/myplex/FriendsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i;return(i=n.requestsCount)?i=i.call(e,{hash:{},data:t}):(i=e.requestsCount,i=typeof i===u?i.apply(e):i),p(i)}function r(e,t){var i;return(i=n.friendsCount)?i=i.call(e,{hash:{},data:t}):(i=e.friendsCount,i=typeof i===u?i.apply(e):i),p(i)
}function l(){return"hide"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var o,c,d,h="",u="function",p=this.escapeExpression,m=n.helperMissing,f=this;return h+='<div id="requests-container" class="well hide">\n	<div class="well-header">\n		<h3>',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Invites",d):m.call(t,"t","Invites",d)))+' <span class="well-header-count">',c=n["if"].call(t,t.requestsCount,{hash:{},inverse:f.noop,fn:f.program(1,s,a),data:a}),(c||0===c)&&(h+=c),h+='</span></h3>\n	</div>\n\n	<div class="row-fluid">\n		<span id="received-requests-container" class="requests-column span6 hide"></span>\n		<span id="sent-requests-container" class="requests-column span6 hide"></span>\n	</div>\n</div>\n\n<div id="friends-container" class="well">\n	<div class="well-header">\n		<ul class="well-header-actions">\n			<li>\n				<form class="add-friend-form">\n					<input id="add-friend-username" type="text" class="input-dark" placeholder="',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"username or email",d):m.call(t,"t","username or email",d)))+'"> <button type="submit" class="btn btn-small btn-primary" rel="tooltip" title="',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Add Friend",d):m.call(t,"t","Add Friend",d)))+'"><i class="glyphicon user-add"></i> ',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Send Invite",d):m.call(t,"t","Send Invite",d)))+"</button>\n				</form>\n			</li>\n		</ul>\n\n		<h3>",d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Friends",d):m.call(t,"t","Friends",d)))+' <span class="well-header-count">',c=n["if"].call(t,t.friendsCount,{hash:{},inverse:f.noop,fn:f.program(3,r,a),data:a}),(c||0===c)&&(h+=c),h+='</span></h3>\n	</div>\n\n	<div class="friends-empty-message empty-message ',c=n["if"].call(t,t.friendsCount,{hash:{},inverse:f.noop,fn:f.program(5,l,a),data:a}),(c||0===c)&&(h+=c),h+='">',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"No friends :(",d):m.call(t,"t","No friends :(",d)))+"</div>\n</div>\n"
})}),define("hb!templates/myplex/MyPlexNavView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l,o,c="",d=n.helperMissing,h=this.escapeExpression,u=this;return c+='<ul class="subnav-actions">\n	<li>\n		<span class="subnav-action-label">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,t.username,20,o):d.call(t,"t",t.username,20,o)))+'</span>\n	</li>\n	<li>\n		<button type="button" class="sign-out-btn btn btn-inverse btn-icon"><i class="glyphicon new-window"></i> <span class="btn-icon-label">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Sign Out",o):d.call(t,"t","Sign Out",o)))+'</span></button>\n	</li>\n</ul>\n\n<ul class="subnav-list">\n	<li><i class="subnav-icon glyphicon user"></i></li>\n	<li><a class="gray ',o={hash:{},inverse:u.noop,fn:u.program(1,s,a),data:a},r=n.if_eq,l=r?r.call(t,t.active,"friends",o):d.call(t,"if_eq",t.active,"friends",o),(l||0===l)&&(c+=l),c+='" href="#!/friends">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Friends",o):d.call(t,"t","Friends",o)))+'</a></li>\n	<li><a class="gray ',o={hash:{},inverse:u.noop,fn:u.program(1,s,a),data:a},r=n.if_eq,l=r?r.call(t,t.active,"recommendations",o):d.call(t,"if_eq",t.active,"recommendations",o),(l||0===l)&&(c+=l),c+='" href="#!/playlist/recommendations">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Recommendations",o):d.call(t,"t","Recommendations",o)))+'</a></li>\n	<li><a class="gray ',o={hash:{},inverse:u.noop,fn:u.program(1,s,a),data:a},r=n.if_eq,l=r?r.call(t,t.active,"queue",o):d.call(t,"if_eq",t.active,"queue",o),(l||0===l)&&(c+=l),c+='" href="#!/playlist/queue">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Queue",o):d.call(t,"t","Queue",o)))+"</a></li>\n</ul>\n"
})}),define("plex/view/myplex/MyPlexNavView",["hb!templates/myplex/MyPlexNavView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView"],function(e,t,n,i){var a=i.extend({className:"subnav-container",active:null,events:{"click .sign-out-btn":"onSignOutClick"},initialize:function(e){this.active=e.active},render:function(){var t=n.get("myPlex");return this.$el.html(e({active:this.active,username:t.get("username")})),this},onSignOutClick:function(e){e.preventDefault(),t.trigger("command:SignOut")
}});return a}),define("plex/view/myplex/FriendsView",["hb!templates/myplex/FriendsView.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/model/FriendModel","plex/model/collections/FriendCollection","plex/view/BaseView","plex/view/myplex/MyPlexNavView","plex/view/lists/myplex/FriendList"],function(e,t,n,i,a,s,r,l,o){var c=r.extend({className:"container container-full",subnav:null,friendsList:null,requestsList:null,requestedList:null,requestsLength:0,requestedLength:0,events:{"submit .add-friend-form":"onAddFriendSubmit"},initialize:function(e){var t=new s([],{server:i.get("myPlex"),type:"requested"});
this.subnav=this.registerView(new l({active:"friends"})),this.friendsList=this.registerView(new o({collection:this.collection})),this.requestsList=this.registerView(new o({collection:e.requests,type:"requests"})),this.requestedList=this.registerView(new o({collection:t,type:"requested"})),this.addBinding(this.friendsList,"refresh",this.onListRefresh),this.addBinding(this.requestsList,"refresh",this.onListRefresh),this.addBinding(this.requestedList,"refresh",this.onListRefresh),this.addBinding(this.collection,"reset",this.onFriendsReset),this.addBinding(e.requests,"reset",this.onRequestsReset),this.addBinding(t,"reset",this.onRequestedReset),e.requests.fetch(),t.fetch()
},render:function(){return this.$el.html(e({requestsCount:this.requestsList.collection.length+this.requestedList.collection.length,friendsCount:this.friendsList.collection.length})),this.$el.prepend(this.subnav.render().el),this.$("#received-requests-container").append(this.requestsList.render().el),this.$("#sent-requests-container").append(this.requestedList.render().el),this.$("#friends-container").append(this.friendsList.render().el),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this
},onListRefresh:function(){this.friendsList.collection.fetch({hideLoadingAlert:!0}),this.requestsList.collection.fetch({hideLoadingAlert:!0}),this.requestedList.collection.fetch({hideLoadingAlert:!0})},onFriendsReset:function(e){e.length?(this.$("#friends-container .well-header-count").text(e.length),this.$(".friends-empty-message").addClass("hide")):(this.$("#friends-container .well-header-count").text(""),this.$(".friends-empty-message").removeClass("hide"))},onRequestsReset:function(e){this.requestsLength=e.length,this.$("#requests-container .well-header-count").text(e.length+this.requestedLength),this.requestsLength?(this.$("#received-requests-container").removeClass("hide"),this.$("#requests-container").removeClass("hide")):(this.$("#received-requests-container").addClass("hide"),this.requestedLength||this.$("#requests-container").addClass("hide"))
},onRequestedReset:function(e){this.requestedLength=e.length,this.$("#requests-container .well-header-count").text(e.length+this.requestsLength),this.requestedLength?(this.$("#sent-requests-container").removeClass("hide"),this.$("#requests-container").removeClass("hide")):(this.$("#sent-requests-container").addClass("hide"),this.requestsLength||this.$("#requests-container").addClass("hide"))},onAddFriendSubmit:function(e){e.preventDefault();var s=this.$("#add-friend-username"),r=this.$(".add-friend-form > input[type=submit]"),l=s.val();
if(l){r.addClass("disabled"),t.trigger("command:ShowLoading",!0);var o=new a({},{server:i.get("myPlex")});o.save({user:l}).always(_.bind(function(){r.removeClass("disabled"),t.trigger("command:ShowLoading",!1)})).done(_.bind(function(){this.requestedList.collection.fetch({hideLoadingAlert:!0}),s.val("")},this)).fail(_.bind(function(){i.set("alert",{status:"error",message:n.t("There was a problem adding {1} as a friend.",l)})}))}}});return c}),define("hb!templates/myplex/PlaylistView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";
return s+='\n				<li><a class="help-btn btn btn-inverse btn-icon" href="https://my.plexapp.com/queue/help" target="_blank" rel="tooltip" title="',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Help",a):h.call(e,"t","Help",a)))+'"><i class="glyphicon circle-question-mark"></i></a></li>\n			'}function r(){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o,c,d="",h=n.helperMissing,u=this.escapeExpression,p=this,m="function";return d+='<div id="playlist-container" class="well">\n	<div class="well-header">\n		<ul class="well-header-actions">\n			',c={hash:{},inverse:p.noop,fn:p.program(1,s,a),data:a},l=n.if_eq,o=l?l.call(t,t.playlistName,"queue",c):h.call(t,"if_eq",t.playlistName,"queue",c),(o||0===o)&&(d+=o),d+='\n		</ul>\n\n		<ul class="subnav-list well-header-list">\n			<li><a class="all-filter playlist-filter ',c={hash:{},inverse:p.noop,fn:p.program(3,r,a),data:a},l=n.if_eq,o=l?l.call(t,t.view,"all",c):h.call(t,"if_eq",t.view,"all",c),(o||0===o)&&(d+=o),d+='" href="#">',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"All",c):h.call(t,"t","All",c)))+'</a></li>\n			<li><a class="unwatched-filter playlist-filter ',c={hash:{},inverse:p.noop,fn:p.program(3,r,a),data:a},l=n.if_eq,o=l?l.call(t,t.view,"unwatched",c):h.call(t,"if_eq",t.view,"unwatched",c),(o||0===o)&&(d+=o),d+='" href="#"><span class="count">',(o=n.unwatched)?o=o.call(t,{hash:{},data:a}):(o=t.unwatched,o=typeof o===m?o.apply(t):o),d+=u(o)+"</span> ",c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Unwatched",c):h.call(t,"t","Unwatched",c)))+'</a></li>\n			<li><a class="watched-filter playlist-filter ',c={hash:{},inverse:p.noop,fn:p.program(3,r,a),data:a},l=n.if_eq,o=l?l.call(t,t.view,"watched",c):h.call(t,"if_eq",t.view,"watched",c),(o||0===o)&&(d+=o),d+='" href="#"><span class="count">',(o=n.watched)?o=o.call(t,{hash:{},data:a}):(o=t.watched,o=typeof o===m?o.apply(t):o),d+=u(o)+"</span> ",c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Watched",c):h.call(t,"t","Watched",c)))+"</a></li>\n		</ul>\n	</div>\n</div>\n"
})}),define("plex/view/lists/KeyboardNavigationList",["plex/control/utils/KeyboardNavigationManager","plex/view/lists/BaseList","plex/view/KeyboardNavigationMixin"],function(e,t,n){var i=t.extend(n),a=i.extend({postrender:function(){var e="undefined"!=typeof PLEXWEB&&PLEXWEB.autoFocus===!0;e&&!this.keyboardActivationDirection&&(this.addBinding(this,"complete",this.focusView),this.completed&&this.focusView())},getTileListItemsPerRow:function(){var e=this.selector?this.$(this.selector):this.$el,t=e.children().first(),n=e.innerWidth(),i=parseInt(t.css("margin-left"),10),a=parseInt(t.css("margin-right"),10),s=t.width()+i+a;
return Math.floor(n/s)},getNextFocusableIndex:function(e,t){var n=e.index(this.$focusedItem);if(this.keyboardCancellationDirections)return n+1;var i=this.getTileListItemsPerRow();if("right"===t){var a=n%i;return a===i-1?-1:n+1}return n+i>=e.length?e.length-1:n+i},getPreviousFocusableIndex:function(e,t){var n=e.index(this.$focusedItem);if(this.keyboardCancellationDirections)return n-1;var i=this.getTileListItemsPerRow();if("left"===t){var a=n%i;return 0===a?-1:n-1}return n-i},destroy:function(){e.removeView(this),t.prototype.destroy.call(this)
}});return a}),define("hb!templates/lists/myplex/items/PlaylistListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n			<button type="button" class="mark-unwatched-btn btn btn-icon" rel="tooltip" title="',a={hash:{},data:t},s+=b((i=n.t,i?i.call(e,"Mark as Unwatched",a):y.call(e,"t","Mark as Unwatched",a)))+'"><i class="glyphicon circle-minus"></i></button>\n		'}function r(e,t){var i,a,s="";return s+='\n			<button type="button" class="mark-watched-btn btn btn-success btn-icon" rel="tooltip" title="',a={hash:{},data:t},s+=b((i=n.t,i?i.call(e,"Mark as Watched",a):y.call(e,"t","Mark as Watched",a)))+'"><i class="glyphicon circle-ok"></i></button>\n		'
}function l(e){var t,n="";return n+='\n		<img class="poster" src="'+b((t=e.item,t=null==t||t===!1?t:t.thumb,typeof t===w?t.apply(e):t))+'">\n	'}function o(e){var t,n="";return n+="\n			<h4>"+b((t=e.item,t=null==t||t===!1?t:t.sourceTitle,typeof t===w?t.apply(e):t))+"</h4>\n		"}function c(e,t){var i,a,s,r="";return r+="\n			<h4>",s={hash:{},data:t},r+=b((i=n.t,i?i.call(e,"Recommended by",s):y.call(e,"t","Recommended by",s)))+" "+b((i=e.item,i=null==i||i===!1?i:i.recommender,typeof i===w?i.apply(e):i))+"</h4>\n\n			",a=n["if"].call(e,(i=e.item,null==i||i===!1?i:i.message),{hash:{},inverse:x.program(12,h,t),fn:x.program(10,d,t),data:t}),(a||0===a)&&(r+=a),r+="\n		"
}function d(e){var t,n="";return n+='\n				<div class="summary">'+b((t=e.item,t=null==t||t===!1?t:t.message,typeof t===w?t.apply(e):t))+"</div>\n			"}function h(e,t){var i,a,s="";return s+='\n				<div class="summary">',a={hash:{},data:t},s+=b((i=n.t,i?i.call(e,"No message",a):y.call(e,"t","No message",a)))+"</div>\n			"}function u(e,t){var i,a;return a=n["if"].call(e,(i=e.item,null==i||i===!1?i:i.summary),{hash:{},inverse:x.noop,fn:x.program(15,p,t),data:t}),a||0===a?a:""}function p(e,t){var i,a,s="";
return s+='\n			<div class="summary">',a={hash:{},data:t},s+=b((i=n.truncate,i?i.call(e,(i=e.item,null==i||i===!1?i:i.summary),180,a):y.call(e,"truncate",(i=e.item,null==i||i===!1?i:i.summary),180,a)))+"</div>\n		"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var m,f,v,g="",y=n.helperMissing,b=this.escapeExpression,w="function",x=this;return g+='<a href="#!/playlist/'+b((m=t.item,m=null==m||m===!1?m:m.playlistName,typeof m===w?m.apply(t):m))+"/player/"+b((m=t.item,m=null==m||m===!1?m:m.id,typeof m===w?m.apply(t):m))+'" tabindex="0">\n	<div class="actions">\n		',f=n["if"].call(t,t.watched,{hash:{},inverse:x.program(3,r,a),fn:x.program(1,s,a),data:a}),(f||0===f)&&(g+=f),g+='\n\n		<button type="button" class="delete-btn btn btn-danger btn-icon" rel="tooltip" title="',v={hash:{},data:a},g+=b((m=n.t,m?m.call(t,"Delete",v):y.call(t,"t","Delete",v)))+'"><i class="glyphicon ban"></i></button>\n	</div>\n\n	',f=n["if"].call(t,(m=t.item,null==m||m===!1?m:m.thumb),{hash:{},inverse:x.noop,fn:x.program(5,l,a),data:a}),(f||0===f)&&(g+=f),g+='\n\n	<div class="media-details">\n		<h3>',v={hash:{},data:a},g+=b((m=n.truncate,m?m.call(t,(m=t.item,null==m||m===!1?m:m.title),80,v):y.call(t,"truncate",(m=t.item,null==m||m===!1?m:m.title),80,v)))+"</h3>\n\n		",f=n["if"].call(t,(m=t.item,null==m||m===!1?m:m.sourceTitle),{hash:{},inverse:x.noop,fn:x.program(7,o,a),data:a}),(f||0===f)&&(g+=f),g+="\n\n		",f=n["if"].call(t,(m=t.item,null==m||m===!1?m:m.recommender),{hash:{},inverse:x.program(14,u,a),fn:x.program(9,c,a),data:a}),(f||0===f)&&(g+=f),g+="\n	</div>\n</a>\n\n\n"
})}),define("plex/view/lists/myplex/items/PlaylistListItem",["hb!templates/lists/myplex/items/PlaylistListItem.tpl","plex/control/Dispatcher","plex/view/BaseView","jquery"],function(e,t,n,i){var a=n.extend({tagName:"li",events:{"click .mark-watched-btn":"onMarkWatchedClick","click .mark-unwatched-btn":"onMarkUnwatchedClick","click .delete-btn":"onDeleteClick"},initialize:function(e){this.filtered=e.filtered,this.addBinding(this.model,"change:viewCount",this.onViewCountChange),_.bindAll(this,"onAnimationComplete")
},render:function(){return this.$el.html(e({watched:this.model.get("viewCount")>0,item:this.model.toJSON()})),this},close:function(e){var t=e||this.onAnimationComplete,n={opacity:0,height:0,"margin-bottom":0,"padding-top":0,"padding-bottom":0};this.$el.animate(n,400,t)},onViewCountChange:function(){this.filtered===!0?this.close():this.trigger("refresh")},onMarkWatchedClick:function(e){e.preventDefault(),i(e.currentTarget).tooltip("destroy"),t.trigger("command:MarkWatched",this.model)},onMarkUnwatchedClick:function(e){e.preventDefault(),i(e.currentTarget).tooltip("destroy"),t.trigger("command:MarkUnwatched",this.model)
},onDeleteClick:function(e){e.preventDefault(),i(e.currentTarget).tooltip("destroy"),this.close(_.bind(function(){this.model.destroy({hideLoadingAlert:!0}),this.trigger("refresh")},this))},onAnimationComplete:function(){this.destroy(),this.trigger("refresh")}});return a}),define("plex/view/lists/myplex/PlaylistList",["plex/view/lists/KeyboardNavigationList","plex/view/lists/myplex/items/PlaylistListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"list media-list playlist-list",initialize:function(e){this.filtered=e.filtered,this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100)
},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(e){var t=new this.ListItem({model:e,list:this,filtered:this.filtered});return this.registerView(t),this.addBinding(t,"refresh",this.onRefresh),this.items[e.id]=t,this.$el.append(t.render().el),this.loadPosterThrottle(),t},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200})},this))},onRefresh:function(){this.trigger("refresh")}});return n}),define("plex/view/myplex/PlaylistView",["hb!templates/myplex/PlaylistView.tpl","plex/view/BaseView","plex/view/myplex/MyPlexNavView","plex/view/lists/myplex/PlaylistList"],function(e,t,n,i){var a=t.extend({className:"container container-full",view:"unwatched",subnav:null,list:null,events:{"click .all-filter":"onAllClick","click .unwatched-filter":"onUnwatchedClick","click .watched-filter":"onWatchedClick"},initialize:function(){this.listCollection=new Backbone.Collection(this.collection.unwatched()),this.subnav=this.registerView(new n({active:this.collection.playlistName})),this.list=this.registerView(new i({collection:this.listCollection,filtered:!0})),this.addBinding(this.list,"refresh",this.onRefresh)
},render:function(){var t=this.collection.unwatched().length,n=this.collection.watched().length;return this.$el.html(e({view:this.view,unwatched:t,watched:n,playlistName:this.collection.playlistName,playlistLabel:this.collection.playlistLabel})),this.$el.prepend(this.subnav.render().el),this.$("#playlist-container").append(this.list.render().el),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this},updateCounts:function(){var e=this.collection.unwatched().length,t=this.collection.watched().length;
this.$(".unwatched-filter > .count").text(e),this.$(".watched-filter > .count").text(t)},onAllClick:function(e){e.preventDefault(),this.view="all",this.$(".playlist-filter").removeClass("active"),this.$(".all-filter").addClass("active"),this.list.filtered=!1,this.listCollection.reset(this.collection.all())},onUnwatchedClick:function(e){e.preventDefault(),this.view="unwatched",this.$(".playlist-filter").removeClass("active"),this.$(".unwatched-filter").addClass("active"),this.list.filtered=!0,this.listCollection.reset(this.collection.unwatched())
},onWatchedClick:function(e){e.preventDefault(),this.view="watched",this.$(".playlist-filter").removeClass("active"),this.$(".watched-filter").addClass("active"),this.list.filtered=!0,this.listCollection.reset(this.collection.watched())},onRefresh:function(){switch(this.view){case"unwatched":this.listCollection.reset(this.collection.unwatched());break;case"watched":this.listCollection.reset(this.collection.watched());break;default:this.listCollection.reset(this.collection.models)}this.updateCounts()
}});return a}),define("hb!templates/SearchView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l,o="",c=n.helperMissing,d=this.escapeExpression,h="function";return o+='<h2 class="pending-search-header search-header">\n	',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Searching for",l):c.call(t,"t","Searching for",l)))+' <span class="primary">',(r=n.query)?r=r.call(t,{hash:{},data:a}):(r=t.query,r=typeof r===h?r.apply(t):r),o+=d(r)+'</span>...\n</h2>\n\n<h2 class="results-search-header search-header hide">\n	',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Results for",l):c.call(t,"t","Results for",l)))+' <span class="primary">',(r=n.query)?r=r.call(t,{hash:{},data:a}):(r=t.query,r=typeof r===h?r.apply(t):r),o+=d(r)+'</span>\n</h2>\n\n<h2 class="no-results-search-header search-header hide">\n	',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"No results for",l):c.call(t,"t","No results for",l)))+' <span class="primary">',(r=n.query)?r=r.call(t,{hash:{},data:a}):(r=t.query,r=typeof r===h?r.apply(t):r),o+=d(r)+'</span>\n</h2>\n\n<div class="movies-container search-results-container well hide">\n	<div class="well-header">\n		<h3>',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Movies",l):c.call(t,"t","Movies",l)))+'</h3>\n	</div>\n</div>\n\n<div class="shows-container search-results-container well hide">\n	<div class="well-header">\n		<h3>',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"TV Shows",l):c.call(t,"t","TV Shows",l)))+'</h3>\n	</div>\n</div>\n\n<div class="episodes-container search-results-container well hide">\n	<div class="well-header">\n		<h3>',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Episodes",l):c.call(t,"t","Episodes",l)))+'</h3>\n	</div>\n</div>\n\n<div class="artists-container search-results-container well hide">\n	<div class="well-header">\n		<h3>',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Artists",l):c.call(t,"t","Artists",l)))+'</h3>\n	</div>\n</div>\n\n<div class="albums-container search-results-container well hide">\n	<div class="well-header">\n		<h3>',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Albums",l):c.call(t,"t","Albums",l)))+'</h3>\n	</div>\n</div>\n\n<div class="tracks-container search-results-container well hide">\n	<div class="well-header">\n		<h3>',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Tracks",l):c.call(t,"t","Tracks",l)))+'</h3>\n	</div>\n</div>\n\n<div class="clips-container search-results-container well hide">\n	<div class="well-header">\n		<h3>',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Clips",l):c.call(t,"t","Clips",l)))+"</h3>\n	</div>\n</div>\n"
})}),define("plex/view/lists/SelectableList",["plex/view/lists/KeyboardNavigationList"],function(e){var t=function(e,t){var n,i,a=[];for(t>e?(n=e,i=t):(n=t,i=e);i>=n;n++)a.push(n);return a},n=e.extend({selectable:!0,selectedItems:null,shiftStart:-1,shiftEnd:-1,setup:function(t,n){this.selectedItems=[],e.prototype.setup.call(this,t,n)},addItem:function(t){var n=e.prototype.addItem.apply(this,arguments);return this.addBinding(n,"select",this.onSelect),this.addBinding(n,"deselect",this.onDeselect),_.each(this.selectedItems,_.bind(function(e){e.model.id===t.id&&this.select(n)
},this)),n},removeItem:function(t){this.deselect(this.items[t.id]),e.prototype.removeItem.apply(this,arguments)},select:function(e){e.select(),-1===_.indexOf(this.selectedItems,e)&&this.selectedItems.push(e),this.trigger("change:selectedItems",this.selectedItems)},deselect:function(e){var t=_.indexOf(this.selectedItems,e);t>-1&&(e.deselect(),this.selectedItems.splice(t,1)),this.trigger("change:selectedItems",this.selectedItems)},deselectAll:function(){_.each(this.selectedItems,function(e){e.deselect()
}),this.shiftStart=-1,this.shiftEnd=-1,this.selectedItems.length=0,this.trigger("change:selectedItems",this.selectedItems)},onSelect:function(e,n){if(this.selectable){var i=this.collection.indexOf(e.model);n?-1===this.shiftStart?(this.select(e),this.shiftStart=i):-1===this.shiftEnd?(_.each(t(this.shiftStart,i),_.bind(function(e){var t=this.collection.at(e);this.select(this.items[t.id])},this)),this.shiftEnd=i):(_.each(t(this.shiftStart,this.shiftEnd),_.bind(function(e){var t=this.collection.at(e);
this.deselect(this.items[t.id])},this)),_.each(t(this.shiftStart,i),_.bind(function(e){var t=this.collection.at(e);this.select(this.items[t.id])},this)),this.shiftEnd=i):(this.shiftEnd=-1,-1===_.indexOf(this.selectedItems,e)?(this.select(e),this.shiftStart=i):(this.deselect(e),this.shiftStart=-1))}},onDeselect:function(e){this.deselect(e)}});return n}),define("hb!templates/lists/media/items/MediaTileListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";
return s+='\n	<a href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===E?i.apply(e):i),s+=N(i)+"/channels/player?identifier="+N((i=e.media,i=null==i||i===!1?i:i.identifier,typeof i===E?i.apply(e):i))+"&path=",a={hash:{},data:t},s+=N((i=n.encodeUrl,i?i.call(e,(i=e.media,null==i||i===!1?i:i.key),a):O.call(e,"encodeUrl",(i=e.media,null==i||i===!1?i:i.key),a)))+'" tabindex="0">\n'}function r(e,t){var i,a;return a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.folder),{hash:{},inverse:R.program(6,o,t),fn:R.program(4,l,t),data:t}),a||0===a?a:""
}function l(e,t){var i,a,s="";return s+='\n	<a href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===E?i.apply(e):i),s+=N(i)+"/sections/",a={hash:{},data:t},s+=N((i=n.encodeUrl,i?i.call(e,e.sectionID,a):O.call(e,"encodeUrl",e.sectionID,a)))+"/folder?key=",a={hash:{},data:t},s+=N((i=n.encodeUrl,i?i.call(e,(i=e.media,null==i||i===!1?i:i.key),a):O.call(e,"encodeUrl",(i=e.media,null==i||i===!1?i:i.key),a)))+'" tabindex="0">\n'}function o(e,t){var i,a,s="";return s+='\n	<a href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===E?i.apply(e):i),s+=N(i)+"/sections/",a={hash:{},data:t},s+=N((i=n.encodeUrl,i?i.call(e,e.sectionID,a):O.call(e,"encodeUrl",e.sectionID,a)))+"/details/"+N((i=e.media,i=null==i||i===!1?i:i.ratingKey,typeof i===E?i.apply(e):i))+'" tabindex="0">\n'
}function c(e,t){var i,a,s,r="";return r+="\n				",s={hash:{},inverse:R.noop,fn:R.program(9,d,t),data:t},i=n.if_neq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"photoAlbum",s):O.call(e,"if_neq",(i=e.media,null==i||i===!1?i:i.type),"photoAlbum",s),(a||0===a)&&(r+=a),r+="\n				"}function d(e,t){var i,a,s,r="";return r+="\n				",s={hash:{},inverse:R.noop,fn:R.program(10,h,t),data:t},i=n.if_neq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"photo",s):O.call(e,"if_neq",(i=e.media,null==i||i===!1?i:i.type),"photo",s),(a||0===a)&&(r+=a),r+="\n				"
}function h(e,t){var i,a,s,r="";return r+="\n				",s={hash:{},inverse:R.noop,fn:R.program(11,u,t),data:t},i=n.if_neq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"clip",s):O.call(e,"if_neq",(i=e.media,null==i||i===!1?i:i.type),"clip",s),(a||0===a)&&(r+=a),r+="\n				"}function u(e,t){var i,a,s,r="";return r+='\n					<div class="hover-overlay card-overlay ',s={hash:{},inverse:R.noop,fn:R.program(12,p,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"episode",s):O.call(e,"if_eq",(i=e.media,null==i||i===!1?i:i.type),"episode",s),(a||0===a)&&(r+=a),r+='">\n						',s={hash:{},inverse:R.noop,fn:R.program(14,m,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"episode",s):O.call(e,"if_eq",(i=e.media,null==i||i===!1?i:i.type),"episode",s),(a||0===a)&&(r+=a),r+="\n\n						",s={hash:{},inverse:R.noop,fn:R.program(16,f,t),data:t},i=n.if_neq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"show",s):O.call(e,"if_neq",(i=e.media,null==i||i===!1?i:i.type),"show",s),(a||0===a)&&(r+=a),r+='<button type="button" class="hover-menu-btn poster-edit-btn" tabindex="-1"><i class="glyphicon pencil"></i></button>',a=n.unless.call(e,e.search,{hash:{},inverse:R.noop,fn:R.program(19,g,t),data:t}),(a||0===a)&&(r+=a),r+='\n\n						<input type="checkbox" class="multiselect" name="selected">\n					</div>\n				'
}function p(){return"episode-overlay"}function m(){return'\n							<div class="episode-overlay-details">\n								<span class="card-episode-index"></span>\n\n								<div class="unwatched-icon unwatched-partial-icon"></div>\n								<div class="unwatched-icon unwatched-full-icon"></div>\n							</div>\n						'}function f(e,t){var i,a,s;return s={hash:{},inverse:R.noop,fn:R.program(17,v,t),data:t},i=n.if_neq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"artist",s):O.call(e,"if_neq",(i=e.media,null==i||i===!1?i:i.type),"artist",s),a||0===a?a:""
}function v(){return'<button type="button" class="hover-menu-btn poster-play-btn" tabindex="-1"><i class="glyphicon play"></i></button>'}function g(){return'<button type="button" class="hover-menu-btn poster-refresh-btn" tabindex="-1"><i class="glyphicon repeat"></i></button>'}function y(){return'\n					<div class="card-overlay season-overlay">\n						<span class="card-season-index"></span>\n\n						<input type="checkbox" class="multiselect" name="selected">\n					</div>\n				'}function b(){return'\n		<div class="poster-subtitle"></div>\n	'
}function w(){return'\n		<div class="media-added-at poster-sort"></div>\n	'}function x(e,t){var i,a,s;return s={hash:{},inverse:R.program(30,S,t),fn:R.program(28,k,t),data:t},i=n.if_eq,a=i?i.call(e,e.sort,"originallyAvailableAt",s):O.call(e,"if_eq",e.sort,"originallyAvailableAt",s),a||0===a?a:""}function k(){return'\n		<div class="media-available-at poster-sort"></div>\n	'}function S(e,t){var i,a,s;return s={hash:{},inverse:R.program(33,A,t),fn:R.program(31,C,t),data:t},i=n.if_eq,a=i?i.call(e,e.sort,"rating",s):O.call(e,"if_eq",e.sort,"rating",s),a||0===a?a:""
}function C(){return'\n		<div class="media-rating poster-sort"></div>\n	'}function A(e,t){var i,a,s;return s={hash:{},inverse:R.program(36,P,t),fn:R.program(34,I,t),data:t},i=n.if_eq,a=i?i.call(e,e.sort,"mediaHeight",s):O.call(e,"if_eq",e.sort,"mediaHeight",s),a||0===a?a:""}function I(){return'\n		<div class="media-resolution poster-sort"></div>\n	'}function P(e,t){var i,a,s;return s={hash:{},inverse:R.noop,fn:R.program(37,_,t),data:t},i=n.if_eq,a=i?i.call(e,e.sort,"duration",s):O.call(e,"if_eq",e.sort,"duration",s),a||0===a?a:""
}function _(){return'\n		<div class="media-duration poster-sort"></div>\n	'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var T,M,D,L="",E="function",N=this.escapeExpression,O=n.helperMissing,R=this;return M=n["if"].call(t,(T=t.media,null==T||T===!1?T:T.url),{hash:{},inverse:R.program(3,r,a),fn:R.program(1,s,a),data:a}),(M||0===M)&&(L+=M),L+='\n	<div class="poster-container">\n		<div class="poster-card">\n			<div class="poster-face front">\n				<img class="media-tile-list-poster poster">\n\n				<span class="media-count"></span>\n\n				<span class="unwatched-count"></span>\n\n				<i class="deleted-icon glyphicon warning-sign hide" rel="tooltip" title="In the trash"></i>\n\n				<div class="poster-refreshing">\n					<i class="analyzing-icon glyphicon magic hide" rel="tooltip" title="Analyzing..."></i><i class="matching-icon glyphicon search hide" rel="tooltip" title="Matching..."></i><i class="metadata-icon glyphicon tags hide" rel="tooltip" title="Loading Metadata..."></i><i class="waiting-icon glyphicon clock hide"></i>\n				</div>\n\n				',D={hash:{},inverse:R.noop,fn:R.program(8,c,a),data:a},T=n.if_neq,M=T?T.call(t,(T=t.media,null==T||T===!1?T:T.type),"season",D):O.call(t,"if_neq",(T=t.media,null==T||T===!1?T:T.type),"season",D),(M||0===M)&&(L+=M),L+="\n\n				",D={hash:{},inverse:R.noop,fn:R.program(21,y,a),data:a},T=n.if_eq,M=T?T.call(t,(T=t.media,null==T||T===!1?T:T.type),"season",D):O.call(t,"if_eq",(T=t.media,null==T||T===!1?T:T.type),"season",D),(M||0===M)&&(L+=M),L+='\n			</div>\n		</div>\n	</div>\n\n	<div class="poster-title"></div>\n\n	',D={hash:{},inverse:R.noop,fn:R.program(23,b,a),data:a},T=n.if_eq,M=T?T.call(t,(T=t.media,null==T||T===!1?T:T.type),"episode",D):O.call(t,"if_eq",(T=t.media,null==T||T===!1?T:T.type),"episode",D),(M||0===M)&&(L+=M),L+="\n\n	",D={hash:{},inverse:R.noop,fn:R.program(23,b,a),data:a},T=n.if_eq,M=T?T.call(t,(T=t.media,null==T||T===!1?T:T.type),"album",D):O.call(t,"if_eq",(T=t.media,null==T||T===!1?T:T.type),"album",D),(M||0===M)&&(L+=M),L+="\n\n	",D={hash:{},inverse:R.noop,fn:R.program(23,b,a),data:a},T=n.if_eq,M=T?T.call(t,(T=t.media,null==T||T===!1?T:T.type),"track",D):O.call(t,"if_eq",(T=t.media,null==T||T===!1?T:T.type),"track",D),(M||0===M)&&(L+=M),L+="\n\n	",D={hash:{},inverse:R.noop,fn:R.program(23,b,a),data:a},T=n.if_eq,M=T?T.call(t,(T=t.media,null==T||T===!1?T:T.type),"clip",D):O.call(t,"if_eq",(T=t.media,null==T||T===!1?T:T.type),"clip",D),(M||0===M)&&(L+=M),L+="\n\n	",D={hash:{},inverse:R.program(27,x,a),fn:R.program(25,w,a),data:a},T=n.if_eq,M=T?T.call(t,t.sort,"addedAt",D):O.call(t,"if_eq",t.sort,"addedAt",D),(M||0===M)&&(L+=M),L+="\n</a>\n"
})}),window.Modernizr=function(e,t,n){function i(e){g.cssText=e}function a(e,t){return typeof e===t}function s(e,t){return!!~(""+e).indexOf(t)}function r(e,t){for(var i in e){var a=e[i];if(!s(a,"-")&&g[a]!==n)return"pfx"==t?a:!0}return!1}function l(e,t,i){for(var s in e){var r=t[e[s]];if(r!==n)return i===!1?e[s]:a(r,"function")?r.bind(i||t):r}return!1}function o(e,t,n){var i=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+w.join(i+" ")+i).split(" ");return a(t,"string")||a(t,"undefined")?r(s,t):(s=(e+" "+x.join(i+" ")+i).split(" "),l(s,t,n))
}var c,d,h,u="2.6.2",p={},m=t.documentElement,f="modernizr",v=t.createElement(f),g=v.style,y=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),b="Webkit Moz O ms",w=b.split(" "),x=b.toLowerCase().split(" "),k={},S=[],C=S.slice,A=function(e,n,i,a){var s,r,l,o,c=t.createElement("div"),d=t.body,h=d||t.createElement("body");if(parseInt(i,10))for(;i--;)l=t.createElement("div"),l.id=a?a[i]:f+(i+1),c.appendChild(l);return s=["&#173;",'<style id="s',f,'">',e,"</style>"].join(""),c.id=f,(d?c:h).innerHTML+=s,h.appendChild(c),d||(h.style.background="",h.style.overflow="hidden",o=m.style.overflow,m.style.overflow="hidden",m.appendChild(h)),r=n(c,e),d?c.parentNode.removeChild(c):(h.parentNode.removeChild(h),m.style.overflow=o),!!r
},I={}.hasOwnProperty;h=a(I,"undefined")||a(I.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(e,t){return I.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=C.call(arguments,1),i=function(){if(this instanceof i){var a=function(){};a.prototype=t.prototype;var s=new a,r=t.apply(s,n.concat(C.call(arguments)));return Object(r)===r?r:s}return t.apply(e,n.concat(C.call(arguments)))
};return i}),k.csstransforms3d=function(){var e=!!o("perspective");return e&&"webkitPerspective"in m.style&&A("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e};for(var P in k)h(k,P)&&(d=P.toLowerCase(),p[d]=k[P](),S.push((p[d]?"":"no-")+d));return p.addTest=function(e,t){if("object"==typeof e)for(var i in e)h(e,i)&&p.addTest(i,e[i]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(m.className+=" "+(t?"":"no-")+e),p[e]=t
}return p},i(""),v=c=null,p._version=u,p._prefixes=y,p._domPrefixes=x,p._cssomPrefixes=w,p.testProp=function(e){return r([e])},p.testAllProps=o,p.testStyles=A,p}(this,this.document),define("modernizr",function(){}),define("plex/view/lists/media/items/MediaTileListItem",["hb!templates/lists/media/items/MediaTileListItem.tpl","plex/control/Dispatcher","plex/view/BaseView","jquery","modernizr"],function(e,t,n,i){var a=n.extend({tagName:"li",list:null,sort:null,events:{"click a":"onClick","click .poster-play-btn":"onPlayClick","click .poster-edit-btn":"onEditClick","click .poster-refresh-btn":"onRefreshClick","mouseenter .hover-menu-btn":"onMenuMouseEnter","mouseleave .hover-menu-btn":"onMenuMouseLeave"},initialize:function(e){var t=e.list.collection;
this.list=e.list,this.sort=t.sort.key},render:function(){var t=this.model.section?this.model.section.id:this.model.get("librarySectionID"),n=this.model.section&&this.model.section.get("limited"),i=this.model.server.get("shared");return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),sectionID:t,media:this.model.toJSON(),sort:this.sort,search:!this.model.section})),this.$el.addClass(this.model.get("type")),(n||i||this.model.get("folder"))&&this.$el.addClass("hide-hover-overlay"),this.sort&&/^(addedAt|originallyAvailableAt|rating|mediaHeight|duration)$/.test(this.sort)&&this.$el.addClass("sorted"),this.bindView(),this.$(".poster-refreshing").tooltip({selector:"i",placement:"top"}),this.$el.tooltip({selector:".deleted-icon",placement:"top"}),this
},select:function(){this.$("a").addClass("selected"),this.$(".multiselect").prop("checked",!0)},deselect:function(){this.$("a").removeClass("selected"),this.$(".multiselect").prop("checked",!1)},updateRefreshingState:function(){var e=this.model.get("metadataState"),t=this.model.get("mediaState"),n=this.$(".poster-container"),i=this.$(".waiting-icon");e&&"created"!==e||t?(i.removeClass("hide"),n.addClass("refreshing").removeClass("refreshed")):n.hasClass("refreshing")&&(i.addClass("hide"),n.removeClass("refreshing").addClass("refreshed"))
},bindings:{".poster-title":{modelAttr:"title",format:function(e,t){var n=this.model.get("type");switch(n){case"season":case"album":return this.model.get("parentTitle");case"episode":case"track":return this.model.get("grandparentTitle");case"clip":return this.model.get("sourceTitle");default:return t}}},".poster-subtitle":{modelAttr:"title",format:function(e,t){var n=this.model.get("type");if(/^(season|episode|album|track|clip)$/.test(n))return t}},".media-tile-list-poster":{modelAttr:"thumb",format:function(e,t){var n,i=this.model.get("type"),a="img/posters/poster.png",s=window.devicePixelRatio?window.devicePixelRatio:1,r=128*s,l=200*s,o=this.$(".poster-container"),c=o.hasClass("refreshing")||o.hasClass("refreshed");
switch(i){case"artist":case"album":case"track":a="img/posters/album.png";break;case"photoAlbum":case"photo":a="img/posters/photo.png";break;case"clip":a="img/posters/poster_square.png"}if(this.model.get("folder"))return e.attr("src","img/posters/folder.png"),void 0;if(e.attr("src")||e.attr("src",a),n="track"===i?this.model.get("parentThumb")||t:this.model.get("grandparentThumb")||t){var d=Handlebars.helpers.transcodeImage.call(this,this.model.server,n,r,l);if(c&&Modernizr.csstransforms3d){var h,u=this.$(".poster-card"),p=this.$(".poster-face.front"),m=this.$(".poster-face.back");
o.hasClass("flip")?h=p:(m.length||(m=p.clone(),m.removeClass("front").addClass("back"),u.append(m)),h=m);var f=h.find(".poster");f.attr("src",d);var v=_.bind(function(){f.off("load",v),o.toggleClass("flip")},this);f.on("load",v)}else e.data("original",d),this.trigger("change:poster")}}},".media-count":{modelAttr:"Media",hideEmpty:!0,format:function(){var e=0,t=this.model.get("Media"),n=this.model.get("type");return"clip"===n?0:(t.length>1&&(e=t.length),e)}},".unwatched-count":{modelAttr:"unviewedLeafCount",hideEmpty:!0,format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser");
if(!t||n&&!i)return 0;var a=this.model.get("type");return"album"===a?0:t}},".card-season-index":{modelAttr:"index",hideEmpty:!0,format:function(e,t){var n=this.model.get("type");if("season"===n)return Handlebars.helpers.seasonIndex.call(this,t)}},".card-episode-index":{modelAttr:"index",hideEmpty:!0,format:function(e,t){var n=this.model.get("type");if("episode"===n){var i=this.model.get("parentIndex"),a=this.model.get("originallyAvailableAt");return Handlebars.helpers.seasonEpisodeIndex.call(this,i,t,a)
}}},".unwatched-icon":{modelAttr:"viewCount",format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser"),a=this.model.get("type"),s=this.model.get("viewOffset");return n&&!i?(e.addClass("hide"),void 0):("episode"===a&&(t||s?e.addClass("hide"):(e.removeClass("hide"),this.$(".unwatched-partial-icon").addClass("hide"))),void 0)}},".unwatched-partial-icon":{modelAttr:"viewOffset",format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser"),a=this.model.get("type");
return n&&!i?(e.addClass("hide"),void 0):("episode"===a&&(t?(e.removeClass("hide"),this.$(".unwatched-full-icon").addClass("hide")):e.addClass("hide")),void 0)}},".deleted-icon":{modelAttr:"deletedAt",format:function(e,t){t?e.removeClass("hide"):e.addClass("hide")}},".media-added-at":{modelAttr:"addedAt",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.timeAgo.call(this,t)}},".media-available-at":{modelAttr:"originallyAvailableAt",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatDate.call(this,t)
}},".media-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""}},".media-resolution":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){return t&&t.length?Handlebars.helpers.formatResolution.call(this,t[0].videoResolution):""}},".media-duration":{modelAttr:"duration",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatMinutes.call(this,t)}},".matching-icon":{modelAttr:"metadataState",format:function(e,t){var n=this.$(".metadata-icon");
switch(t){case"matching":e.removeClass("hide");break;case"processing":case"loading":e.addClass("hide"),n.removeClass("hide");break;default:e.addClass("hide"),n.addClass("hide")}this.updateRefreshingState()}},".analyzing-icon":{modelAttr:"mediaState",format:function(e,t){t?e.removeClass("hide"):e.addClass("hide"),this.updateRefreshingState()}}},onClick:function(e){if(e.metaKey||e.ctrlKey||e.shiftKey)return e.preventDefault(),this.trigger("select",this,e.shiftKey),void 0;if(this.list.editing){e.preventDefault();
var n=this.$(".multiselect"),a=n.prop("checked");return i(e.target)[0]===n[0]&&(a=!a,_.defer(function(){n.prop("checked",!a)})),a?this.trigger("deselect",this):this.trigger("select",this,!1),void 0}return"track"===this.model.get("type")?(e.preventDefault(),t.trigger("command:PlayTrack",this.model),void 0):"photo"===this.model.get("type")?(e.preventDefault(),t.trigger("show:photo",this.list.collection,this.model),void 0):void 0},onPlayClick:function(e){e.stopImmediatePropagation(),e.preventDefault();
var n=this.model.get("type"),i=this.model.section?this.model.section.id:this.model.get("librarySectionID");switch(n){case"album":t.trigger("command:PlayAlbum",this.model);break;case"track":t.trigger("command:PlayTrack",this.model);break;default:t.trigger("navigate:player",this.model.server.id,i,this.model.id)}},onEditClick:function(e){e.stopImmediatePropagation(),e.preventDefault();var n=this.model.section?this.model.section.id:this.model.get("librarySectionID");t.trigger("navigate:edit",this.model.server.id,n,this.model.id)
},onRefreshClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),t.trigger("command:RefreshMetadata",this.model)},onMenuMouseEnter:function(e){this.$(".hover-menu-btn").each(function(t,n){n!==e.currentTarget?i(n).addClass("dim"):i(n).removeClass("dim")})},onMenuMouseLeave:function(){this.$(".hover-menu-btn").removeClass("dim")}});return a}),define("plex/view/lists/media/MediaTileList",["plex/view/lists/SelectableList","plex/view/lists/media/items/MediaTileListItem","lazyload"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list media-tile-list",loadPosterThrottle:null,initialize:function(e){e.selectable!==void 0&&(this.selectable=e.selectable),this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100)
},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(){var t=e.prototype.addItem.apply(this,arguments);this.addBinding(t,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200,container:this.$el.parent()})},this))}});return n}),define("plex/view/SearchView",["hb!templates/SearchView.tpl","plex/model/media/collections/MediaCollection","plex/view/BaseView","plex/view/lists/media/MediaTileList"],function(e,t,n,i){var a=["movies","shows","episodes","artists","albums","tracks","clips"],s=n.extend({className:"container-fluid",query:"",pendingRequests:0,initialize:function(e){this.query=e.query,this.pendingRequests=e.collections.length,_.each(a,_.bind(function(e){this[e]=new Backbone.Collection,this[e+"List"]=this.registerView(new i({selectable:!1,collection:this[e]}))
},this)),_.each(e.providers,_.bind(function(e){e.populate().done(_.bind(function(){e.each(_.bind(function(e){if(!e.get("machineIdentifier")){var n=new t([],{server:e.server,url:e.get("key")+"&query="+this.query});this.pendingRequests++,n.populate({hideLoadingAlert:!0}).always(_.bind(function(){this.finishSearch()},this)).done(_.bind(function(){this.mergeResults(n)},this))}},this))},this))},this)),_.each(e.collections,_.bind(function(e){e.populate({hideLoadingAlert:!0}).always(_.bind(function(){this.finishSearch()
},this)).done(_.bind(function(){this.mergeResults(e)},this))},this))},render:function(){return this.$el.html(e({empty:!1,query:this.query})),_.each(a,_.bind(function(e){this.$("."+e+"-container").append(this[e+"List"].render().el)},this)),this},mergeResults:function(e){e.length&&_.each(a,_.bind(function(t){this[t].add(e[t]()),this[t].length&&this.$("."+t+"-container").removeClass("hide")},this))},finishSearch:function(){this.pendingRequests--,this.pendingRequests>0||_.delay(_.bind(function(){var e=0;
this.$(".pending-search-header").addClass("hide"),_.each(a,_.bind(function(t){e+=this[t].length},this)),0===e?this.$(".no-results-search-header").removeClass("hide"):this.$(".results-search-header").removeClass("hide")},this),100)}});return s}),define("hb!templates/server/settings/SettingsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+="\n					",a={hash:{},data:t},s+=m((i=n.t,i?i.call(e,(i=e.server,null==i||i===!1?i:i.friendlyName),20,a):p.call(e,"t",(i=e.server,null==i||i===!1?i:i.friendlyName),20,a)))+"\n				"
}function r(e,t){var i,a,s="";return s+="\n					",a={hash:{},data:t},s+=m((i=n.t,i?i.call(e,(i=e.server,null==i||i===!1?i:i.name),20,a):p.call(e,"t",(i=e.server,null==i||i===!1?i:i.name),20,a)))+"\n				"}function l(e,t){var i,a,s="";return s+='\n				<li><a class="media-server-filter settings-filter ',i=n.unless.call(e,e.plexWebActive,{hash:{},inverse:f.noop,fn:f.program(6,o,t),data:t}),(i||0===i)&&(s+=i),s+='" href="#">',a={hash:{},data:t},s+=m((i=n.t,i?i.call(e,"Plex Media Server",a):p.call(e,"t","Plex Media Server",a)))+"</a></li>\n			"
}function o(){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d,h,u="",p=n.helperMissing,m=this.escapeExpression,f=this;return u+='<div class="subnav-container">\n	<ul class="subnav-actions">\n		<li>\n			<span class="subnav-action-label source-title">\n				',d=n["if"].call(t,(c=t.server,null==c||c===!1?c:c.friendlyName),{hash:{},inverse:f.program(3,r,a),fn:f.program(1,s,a),data:a}),(d||0===d)&&(u+=d),u+='\n			</span>\n		</li>\n	</ul>\n\n	<ul class="subnav-list">\n		<li><i class="subnav-icon glyphicon settings"></i></li>\n		<li><a class="gray active" href="#!/settings">',h={hash:{},data:a},u+=m((c=n.t,c?c.call(t,"Settings",h):p.call(t,"t","Settings",h)))+'</a></li>\n	</ul>\n</div>\n\n<div class="settings-container well">\n	<div class="well-header">\n		<a class="standard-toggle pull-right" href="#">',h={hash:{},data:a},u+=m((c=n.t,c?c.call(t,"Show Advanced Settings",h):p.call(t,"t","Show Advanced Settings",h)))+'</a>\n		<a class="advanced-toggle pull-right hide" href="#">',h={hash:{},data:a},u+=m((c=n.t,c?c.call(t,"Hide Advanced Settings",h):p.call(t,"t","Hide Advanced Settings",h)))+'</a>\n\n		<ul class="subnav-list well-header-list">\n			',d=n.unless.call(t,(c=t.server,null==c||c===!1?c:c.shared),{hash:{},inverse:f.noop,fn:f.program(5,l,a),data:a}),(d||0===d)&&(u+=d),u+='\n\n			<li><a class="plex-web-filter settings-filter ',d=n["if"].call(t,t.plexWebActive,{hash:{},inverse:f.noop,fn:f.program(6,o,a),data:a}),(d||0===d)&&(u+=d),u+='" href="#">',h={hash:{},data:a},u+=m((c=n.t,c?c.call(t,"Plex/Web",h):p.call(t,"t","Plex/Web",h)))+"</a></li>\n		</ul>\n	</div>\n</div>\n"
})}),define("hb!templates/server/settings/ServerSettingsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a="";return a+="\n		",i=n["if"].call(e,e.prefs,{hash:{},inverse:x.noop,fn:x.program(2,r,t),data:t}),(i||0===i)&&(a+=i),a+="\n	"}function r(e,t){var i;return i=n["if"].call(e,e.title,{hash:{},inverse:x.noop,fn:x.program(3,l,t),data:t}),i||0===i?i:""}function l(e,t){var i,a,s,r="";return r+='\n			<li class="',s={hash:{},inverse:x.noop,fn:x.program(4,o,t),data:t},i=n.if_eq,a=i?i.call(e,e.group,"general",s):b.call(e,"if_eq",e.group,"general",s),(a||0===a)&&(r+=a),r+=" ",a=n["if"].call(e,e.advanced,{hash:{},inverse:x.noop,fn:x.program(6,c,t),data:t}),(a||0===a)&&(r+=a),r+='">\n				<a href="#',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===k?a.apply(e):a),r+=w(a)+'">',s={hash:{},data:t},r+=w((i=n.t,i?i.call(e,e.title,s):b.call(e,"t",e.title,s)))+"</a>\n			</li>\n			",s={hash:{},inverse:x.noop,fn:x.program(8,d,t),data:t},i=n.if_eq,a=i?i.call(e,e.group,"general",s):b.call(e,"if_eq",e.group,"general",s),(a||0===a)&&(r+=a),r+="\n		"
}function o(){return"active"}function c(){return"advanced-prefs hide"}function d(e,t){var i,a,s="";return s+='\n				<li>\n					<a href="#myplex">',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"myPlex",a):b.call(e,"t","myPlex",a)))+'</a>\n				</li>\n				<li>\n					<a href="#agents">',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"Agents",a):b.call(e,"t","Agents",a)))+"</a>\n				</li>\n			"}function h(e,t,i){var a,s="";return s+="\n			",a=n["if"].call(e,e.prefs,{hash:{},inverse:x.noop,fn:x.programWithDepth(11,u,t,i),data:t}),(a||0===a)&&(s+=a),s+="\n		"
}function u(e,t,i){var a,s,r,l="";return l+='\n				<div id="',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===k?a.apply(e):a),l+=w(a)+'" class="preferences-group ',r={hash:{},inverse:x.noop,fn:x.program(4,o,t),data:t},a=n.if_eq,s=a?a.call(e,e.group,"general",r):b.call(e,"if_eq",e.group,"general",r),(s||0===s)&&(l+=s),l+='">\n					',r={hash:{},inverse:x.noop,fn:x.programWithDepth(12,p,t,i),data:t},a=n.if_eq,s=a?a.call(e,e.id,"general",r):b.call(e,"if_eq",e.id,"general",r),(s||0===s)&&(l+=s),l+="\n\n					",r={hash:{},inverse:x.noop,fn:x.program(14,m,t),data:t},a=n.if_eq,s=a?a.call(e,e.id,"channels",r):b.call(e,"if_eq",e.id,"channels",r),(s||0===s)&&(l+=s),l+="\n\n					",s=n.each.call(e,e.prefs,{hash:{},inverse:x.noop,fn:x.program(16,f,t),data:t}),(s||0===s)&&(l+=s),l+="\n				</div>\n			"
}function p(e,t,i){var a,s,r="";return r+='\n						<div class="control-group">\n							<label class="control-label">\n								',s={hash:{},data:t},r+=w((a=n.t,a?a.call(e,"Version",s):b.call(e,"t","Version",s)))+" "+w((a=i.version,typeof a===k?a.apply(e):a))+"\n							</label>\n						</div>\n					"}function m(e,t){var i,a,s="";return s+='\n						<div class="control-group">\n							<a class="directory-settings-btn" href="#"><i class="glyphicon settings"></i> ',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"Directory Settings",a):b.call(e,"t","Directory Settings",a)))+"</a>\n						</div>\n					"
}function f(e,t){var i,a,s="";return s+="\n						",a={hash:{idSuffix:"_c"},data:t},s+=w((i=n.partial,i?i.call(e,"preference",a):b.call(e,"partial","preference",a)))+"\n					"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var v,g,y="",b=n.helperMissing,w=this.escapeExpression,x=this,k="function";return y+='<ul class="preferences-nav nav nav-list">\n	',v=n.each.call(t,t.groups,{hash:{},inverse:x.noop,fn:x.program(1,s,a),data:a}),(v||0===v)&&(y+=v),y+='\n</ul>\n\n<form class="preferences-form">\n	<fieldset>\n		',v=n.each.call(t,t.groups,{hash:{},inverse:x.noop,fn:x.programWithDepth(10,h,a,t),data:a}),(v||0===v)&&(y+=v),y+='\n\n		<div class="main-actions form-actions">\n			<button type="submit" class="btn btn-medium btn-primary">',g={hash:{},data:a},y+=w((v=n.t,v?v.call(t,"Save",g):b.call(t,"t","Save",g)))+'</button>\n			<button type="button" class="btn btn-medium cancel-btn">',g={hash:{},data:a},y+=w((v=n.t,v?v.call(t,"Cancel",g):b.call(t,"t","Cancel",g)))+"</button>\n		</div>\n	</fieldset>\n</form>\n"
})}),define("plex/model/AccountModel",["plex/model/BaseModel","jquery"],function(e,t){var n=e.extend({idAttribute:"key",whitelistedAttrs:["key","name","defaultAudioLanguage","autoSelectAudio","defaultSubtitleLanguage","subtitleMode"],url:function(){return this.get("key")},initialize:function(e,t){this.server=t.server},convert:function(e){var n=_.isObject(e)?e:t.xml2json(e);return n.Account},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs)}});return n}),define("hb!templates/server/settings/MyPlexSettingsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,l="";
return l+='\n	<div class="control-group manual-port-group ',i=n.unless.call(e,e.showManual,{hash:{},inverse:p.noop,fn:p.program(2,r,t),data:t}),(i||0===i)&&(l+=i),l+='">\n\n		<input type="checkbox" id="'+f((i=e.mappingMode,i=null==i||i===!1?i:i.id,typeof i===m?i.apply(e):i))+'" name="'+f((i=e.mappingMode,i=null==i||i===!1?i:i.id,typeof i===m?i.apply(e):i))+'" value="1" ',a=n["if"].call(e,(i=e.mappingMode,null==i||i===!1?i:i.value),{hash:{},inverse:p.noop,fn:p.program(5,o,t),data:t}),(a||0===a)&&(l+=a),l+='>\n		<label class="inline" for="'+f((i=e.mappingMode,i=null==i||i===!1?i:i.id,typeof i===m?i.apply(e):i))+'">',s={hash:{},data:t},l+=f((i=n.t,i?i.call(e,"Manually specify port",s):v.call(e,"t","Manually specify port",s)))+'</label>\n		<input type="text" id="'+f((i=e.mappingPort,i=null==i||i===!1?i:i.id,typeof i===m?i.apply(e):i))+'" name="'+f((i=e.mappingPort,i=null==i||i===!1?i:i.id,typeof i===m?i.apply(e):i))+'" class="input-dark" value="'+f((i=e.mappingPort,i=null==i||i===!1?i:i.value,typeof i===m?i.apply(e):i))+'">\n\n		<p class="help-block">\n			',s={hash:{},data:t},l+=f((i=n.t,i?i.call(e,"Enable this if automatic mapping fails. You will need to configure your router. Detailed instructions are available <a href='{1}' target='_blank'>here</a>.","http://wiki.plexapp.com/index.php/MyPlex#Publishing_the_Plex_Media_Server",s):v.call(e,"t","Enable this if automatic mapping fails. You will need to configure your router. Detailed instructions are available <a href='{1}' target='_blank'>here</a>.","http://wiki.plexapp.com/index.php/MyPlex#Publishing_the_Plex_Media_Server",s)))+"\n		</p>\n	</div>\n"
}function r(e,t){var i,a="";return a+="advanced-pref ",i=n.unless.call(e,e.showAdvanced,{hash:{},inverse:p.noop,fn:p.program(3,l,t),data:t}),(i||0===i)&&(a+=i),a}function l(){return"hide"}function o(){return"checked"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d,h,u="",p=this,m="function",f=this.escapeExpression,v=n.helperMissing;return c=n["if"].call(t,t.showMappingMode,{hash:{},inverse:p.noop,fn:p.program(1,s,a),data:a}),(c||0===c)&&(u+=c),u+='\n\n<div class="control-group advanced-pref ',c=n.unless.call(t,t.showAdvanced,{hash:{},inverse:p.noop,fn:p.program(3,l,a),data:a}),(c||0===c)&&(u+=c),u+='">\n	<label class="checkbox" for="require-authentication">\n		<input id="require-authentication" name="require-authentication" type="checkbox" ',h={hash:{},inverse:p.noop,fn:p.program(5,o,a),data:a},c=n.if_eq,d=c?c.call(t,(c=t.allowedNetworks,null==c||c===!1?c:c.value),"127.0.0.1/255.255.255.255",h):v.call(t,"if_eq",(c=t.allowedNetworks,null==c||c===!1?c:c.value),"127.0.0.1/255.255.255.255",h),(d||0===d)&&(u+=d),u+="> &nbsp;",h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"Require authentication on local networks",h):v.call(t,"t","Require authentication on local networks",h)))+'\n	</label>\n\n	<p class="help-block">\n		',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"Populates the allowed networks setting with 127.0.0.1/255.255.255.255. This requires other computers on a local network to authenticate with myPlex before accessing the server.",h):v.call(t,"t","Populates the allowed networks setting with 127.0.0.1/255.255.255.255. This requires other computers on a local network to authenticate with myPlex before accessing the server.",h)))+'\n	</p>\n</div>\n\n<div class="sub-actions form-actions ',d=n.unless.call(t,t.showActions,{hash:{},inverse:p.noop,fn:p.program(3,l,a),data:a}),(d||0===d)&&(u+=d),u+='">\n	<button type="submit" class="submit-btn btn btn-medium btn-primary ',d=n.unless.call(t,(c=t.myPlex,null==c||c===!1?c:c.signedIn),{hash:{},inverse:p.noop,fn:p.program(3,l,a),data:a}),(d||0===d)&&(u+=d),u+='">',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"Sign In",h):v.call(t,"t","Sign In",h)))+'</button>\n	<button type="submit" class="submit-btn btn btn-medium btn-primary ',d=n["if"].call(t,(c=t.myPlex,null==c||c===!1?c:c.signedIn),{hash:{},inverse:p.noop,fn:p.program(3,l,a),data:a}),(d||0===d)&&(u+=d),u+='">',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"Sign Up",h):v.call(t,"t","Sign Up",h)))+'</button>\n	<button type="button" class="btn btn-medium cancel-btn">',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"Cancel",h):v.call(t,"t","Cancel",h)))+"</button>\n</div>\n"
})}),define("plex/view/server/settings/MyPlexSettingsView",["hb!templates/server/settings/MyPlexSettingsView.tpl","plex/model/AppModel","plex/view/BaseView","plex/view/server/settings/MyPlexConnectView","jquery","spin"],function(e,t,n,i,a){var s=n.extend({id:"myplex",className:"preferences-group myplex-container",mappingModePref:null,mappingPortPref:null,allowedNetworksPref:null,connectView:null,events:{"click .change-form-btn":"onChangeFormClick","click .submit-btn":"onSubmitClick","change input[name=ManualPortMappingMode]":"onManualModeChange","change input[name=ManualPortMappingPort]":"onManualPortChange","change input[name=require-authentication]":"onRequireAuthenticationChange"},initialize:function(){var e=this.model.server.get("preferences");
this.mappingModePref=e.get("ManualPortMappingMode"),this.mappingPortPref=e.get("ManualPortMappingPort"),this.allowedNetworksPref=e.get("allowedNetworks"),this.connectView=new i({model:this.model,required:!0,dark:!0}),this.addBinding(this.connectView,"start:spinner",this.onSpinnerStart),this.addBinding(this.connectView,"stop:spinner",this.onSpinnerStop),this.addBinding(this.model,"change:signInState",this.onSignInStateChange),this.addBinding(this.model,"change:mappingState",this.onMappingStateChange),this.addBinding(e,"reset",this.onPreferencesReset),this.model.fetch({hideLoadingAlert:!0}),e.populate({hideLoadingAlert:!0})
},render:function(){var n=this.$(".advanced-pref:first"),i={myPlex:t.get("myPlex").toJSON(),showActions:"ok"!==this.model.get("signInState"),showManual:"failed"===this.model.get("mappingState")};return this.mappingModePref&&(i.showMappingMode=!0,i.mappingMode=this.mappingModePref.toJSON(),_.isString(i.mappingMode.value)&&(i.mappingMode.value="true"===i.mappingMode.value)),this.mappingPortPref&&(i.mappingPort=this.mappingPortPref.toJSON()),this.allowedNetworksPref&&(i.allowedNetworks=this.allowedNetworksPref.toJSON()),n.length&&!n.hasClass("hide")&&(i.showAdvanced=!0),this.$el.html(e(i)),this.$el.prepend(this.connectView.render().el),this.connectView.delegateEvents(),this
},savePreference:function(e){this.mappingModePref.save(e).done(_.bind(function(){_.delay(_.bind(function(){this.model.fetch({hideLoadingAlert:!0})},this),5e3)},this))},onSpinnerStart:function(){this.$(".submit-btn").spinContents("small")},onSpinnerStop:function(){this.$(".submit-btn").spinContents(!1)},onSignInStateChange:function(e,t){"ok"===t?this.$(".form-actions").addClass("hide"):this.$(".form-actions").removeClass("hide")},onMappingStateChange:function(e,t){"failed"===t&&this.$(".manual-port-group").removeClass("advanced-pref hide")
},onPreferencesReset:function(e){this.mappingModePref=e.get("ManualPortMappingMode"),this.mappingPortPref=e.get("ManualPortMappingPort"),this.allowedNetworksPref=e.get("allowedNetworks"),this.render()},onChangeFormClick:function(e){e.preventDefault(),this.$(".submit-btn").toggleClass("hide")},onSubmitClick:function(e){if(e.preventDefault(),!this.$(".submit-btn").hasClass("active")){var t=this.$("#username").val(),n=this.$("#password").val();if(this.$(".confirmPassword-group").hasClass("hide"))this.connectView.signInServer(t,n);
else{var i=this.$("#email").val(),a=this.$("#confirmPassword").val();this.connectView.signUpServer(t,i,n,a)}}},onManualModeChange:function(e){var t=e.currentTarget,n={},i=t.value;t.checked||(i="0"),n[t.name]=i,this.mappingModePref.set("value",t.checked),this.savePreference(n)},onManualPortChange:function(e){var t=e.currentTarget,n={};n[t.name]=t.value,this.mappingPortPref.set("value",t.value),this.savePreference(n)},onRequireAuthenticationChange:function(e){var t=a(e.currentTarget).prop("checked"),n={},i=t?"127.0.0.1/255.255.255.255":"";
n.allowedNetworks=i,this.allowedNetworksPref.set("value",i),this.savePreference(n),this.trigger("change:allowedNetworks",i)}});return s}),define("hb!templates/server/settings/AgentsSettingsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t,i){var a,s,l,o="";return o+='\n		<li class="',l={hash:{},inverse:d.noop,fn:d.program(2,r,t),data:t},a=n.if_eq,s=a?a.call(e,i.activeSection,e.key,l):h.call(e,"if_eq",i.activeSection,e.key,l),(s||0===s)&&(o+=s),o+='"><a href="#',(s=n.key)?s=s.call(e,{hash:{},data:t}):(s=e.key,s=typeof s===u?s.apply(e):s),o+=p(s)+'">',l={hash:{},data:t},o+=p((a=n.t,a?a.call(e,e.label,l):h.call(e,"t",e.label,l)))+"</a></li>\n	"
}function r(){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o,c="",d=this,h=n.helperMissing,u="function",p=this.escapeExpression;return c+='<ul class="agent-sections-nav nav nav-pills">\n	',l=n.each.call(t,t.sections,{hash:{},inverse:d.noop,fn:d.programWithDepth(1,s,a,t),data:a}),(l||0===l)&&(c+=l),c+='\n</ul>\n\n<div class="agent-details">\n	<p class="help-block">',o={hash:{},data:a},c+=p((l=n.t,l?l.call(t,"Select which additional agents should contribute to metadata from {1}, and drag them to change the order of preference.","<span class='agent-name'></span>",o):h.call(t,"t","Select which additional agents should contribute to metadata from {1}, and drag them to change the order of preference.","<span class='agent-name'></span>",o)))+"</p>\n</div>\n"
})}),define("hb!templates/lists/preferences/items/AgentListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r="",l="function",o=this.escapeExpression;return r+='<a data-identifier="',(s=n.identifier)?s=s.call(t,{hash:{},data:a}):(s=t.identifier,s=typeof s===l?s.apply(t):s),r+=o(s)+'" href="#">',(s=n.name)?s=s.call(t,{hash:{},data:a}):(s=t.name,s=typeof s===l?s.apply(t):s),r+=o(s)+"</a>\n"})}),define("plex/view/lists/preferences/items/AgentListItem",["hb!templates/lists/preferences/items/AgentListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var i=n.extend({tagName:"li",active:!1,initialize:function(e){e.list.collection.first().id===this.model.id&&(this.active=!0),this.addBinding(this.model,"change",this.render)
},render:function(){return this.$el.html(e(this.model.toJSON())),this.active&&this.$el.addClass("active"),this}});return i}),define("plex/view/lists/preferences/AgentList",["plex/view/lists/BaseList","plex/view/lists/preferences/items/AgentListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"agents-nav nav nav-pills nav-minimal",initialize:function(){this.setup(t),this.collection.populate()},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("hb!templates/lists/preferences/items/SortableAgentListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";
return s+='\n		<a class="sortable-btn info-btn" rel="tooltip" title="',a={hash:{},data:t},s+=p((i=n.t,i?i.call(e,"Agent Info",a):u.call(e,"t","Agent Info",a)))+'" href="#">\n			<i class="glyphicon circle-info"></i>\n		</a>\n	'}function r(e,t){var i,a,s="";return s+='\n		<a class="sortable-btn settings-btn" rel="tooltip" title="',a={hash:{},data:t},s+=p((i=n.t,i?i.call(e,"Agent Settings",a):u.call(e,"t","Agent Settings",a)))+'" href="#">\n			<i class="glyphicon cogwheel"></i>\n		</a>\n	'}function l(){return"checked"
}function o(){return"disabled"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d,h="",u=n.helperMissing,p=this.escapeExpression,m=this,f="function";return h+='<div class="sortable">\n	',c=n["if"].call(t,t.attribution,{hash:{},inverse:m.noop,fn:m.program(1,s,a),data:a}),(c||0===c)&&(h+=c),h+="\n\n	",c=n["if"].call(t,t.hasPrefs,{hash:{},inverse:m.noop,fn:m.program(3,r,a),data:a}),(c||0===c)&&(h+=c),h+='\n\n	<i class="sortable-icon glyphicon show-lines"></i>\n	<label class="sortable-label" for="',(c=n.identifier)?c=c.call(t,{hash:{},data:a}):(c=t.identifier,c=typeof c===f?c.apply(t):c),h+=p(c)+'">\n		<input id="',(c=n.identifier)?c=c.call(t,{hash:{},data:a}):(c=t.identifier,c=typeof c===f?c.apply(t):c),h+=p(c)+'" name="',(c=n.identifier)?c=c.call(t,{hash:{},data:a}):(c=t.identifier,c=typeof c===f?c.apply(t):c),h+=p(c)+'" type="checkbox"  ',c=n["if"].call(t,t.enabled,{hash:{},inverse:m.noop,fn:m.program(5,l,a),data:a}),(c||0===c)&&(h+=c),h+=" ",c=n["if"].call(t,t.primary,{hash:{},inverse:m.noop,fn:m.program(7,o,a),data:a}),(c||0===c)&&(h+=c),h+="> ",d={hash:{},data:a},h+=p((c=n.t,c?c.call(t,t.name,d):u.call(t,"t",t.name,d)))+"\n	</label>\n</div>\n"
})}),define("hb!templates/modals/ChannelSettingsModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a;return a={hash:{},data:t},C((i=n.t,i?i.call(e,"Directory",a):S.call(e,"t","Directory",a)))}function r(e,t){var i,a;return a=n["if"].call(e,(i=e.channel,null==i||i===!1?i:i.title),{hash:{},inverse:I.program(6,o,t),fn:I.program(4,l,t),data:t}),a||0===a?a:""}function l(e){var t;return C((t=e.channel,t=null==t||t===!1?t:t.title,typeof t===A?t.apply(e):t))
}function o(e){var t;return C((t=e.channel,t=null==t||t===!1?t:t.name,typeof t===A?t.apply(e):t))}function c(e,t){var i,a,s,r="";return r+="\n			",s={hash:{},inverse:I.program(12,u,t),fn:I.program(9,d,t),data:t},i=n.if_eq,a=i?i.call(e,e.type,"bool",s):S.call(e,"if_eq",e.type,"bool",s),(a||0===a)&&(r+=a),r+="\n		"}function d(e,t){var i,a,s="";return s+='\n				<label class="checkbox" for="input_',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===A?i.apply(e):i),s+=C(i)+'">\n					<input id="input_',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===A?i.apply(e):i),s+=C(i)+'" type="checkbox" value="true" class="input-dark" name="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===A?i.apply(e):i),s+=C(i)+'"',i=n["if"].call(e,e.value,{hash:{},inverse:I.noop,fn:I.program(10,h,t),data:t}),(i||0===i)&&(s+=i),s+="> &nbsp;",a={hash:{},data:t},s+=C((i=n.t,i?i.call(e,e.label,a):S.call(e,"t",e.label,a)))+"\n				</label>\n			"
}function h(){return' checked="checked"'}function u(e,t){var i,a,s,r="";return r+='\n				<label class="control-label" for="input_',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===A?i.apply(e):i),r+=C(i)+'">',s={hash:{},data:t},r+=C((i=n.t,i?i.call(e,e.label,s):S.call(e,"t",e.label,s)))+'</label>\n\n				<div class="controls">\n					',s={hash:{},inverse:I.program(17,v,t),fn:I.program(13,p,t),data:t},i=n.if_eq,a=i?i.call(e,e.type,"enum",s):S.call(e,"if_eq",e.type,"enum",s),(a||0===a)&&(r+=a),r+="\n				</div>\n			"
}function p(e,t){var i,a="";return a+='\n						<select id="input_',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===A?i.apply(e):i),a+=C(i)+'" class="input-dark span4" name="',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===A?i.apply(e):i),a+=C(i)+'">\n							',i=n.each.call(e,e.values,{hash:{},inverse:I.noop,fn:I.programWithDepth(14,m,t,e),data:t}),(i||0===i)&&(a+=i),a+="\n						</select>\n					"}function m(e,t,i){var a,s,r,l="";return l+='\n								<option value="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===A?a.apply(e):a),l+=C(a)+'"',r={hash:{},inverse:I.noop,fn:I.program(15,f,t),data:t},a=n.if_eq,s=a?a.call(e,e.value,i.value,r):S.call(e,"if_eq",e.value,i.value,r),(s||0===s)&&(l+=s),l+=">",r={hash:{},data:t},l+=C((a=n.t,a?a.call(e,e.label,r):S.call(e,"t",e.label,r)))+"</option>\n							"
}function f(){return' selected="selected"'}function v(e,t){var i,a,s,r="";return r+='\n						<input id="input_',(i=n.id)?i=i.call(e,{hash:{},data:t}):(i=e.id,i=typeof i===A?i.apply(e):i),r+=C(i)+'" type="',s={hash:{},inverse:I.program(20,y,t),fn:I.program(18,g,t),data:t},i=n.if_eq,a=i?i.call(e,e.option,"hidden",s):S.call(e,"if_eq",e.option,"hidden",s),(a||0===a)&&(r+=a),r+='" class="input-dark span4" name="',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===A?a.apply(e):a),r+=C(a)+'" value="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===A?a.apply(e):a),r+=C(a)+'">\n					'
}function g(){return"password"}function y(){return"text"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var b,w,x,k="",S=n.helperMissing,C=this.escapeExpression,A="function",I=this;return k+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon cogwheel"></i> ',x={hash:{},inverse:I.program(3,r,a),fn:I.program(1,s,a),data:a},b=n.if_eq,w=b?b.call(t,(b=t.channel,null==b||b===!1?b:b.name),"Preferences...",x):S.call(t,"if_eq",(b=t.channel,null==b||b===!1?b:b.name),"Preferences...",x),(w||0===w)&&(k+=w),k+=" ",x={hash:{},data:a},k+=C((b=n.t,b?b.call(t,"Settings",x):S.call(t,"t","Settings",x)))+'</h3>\n</div>\n\n<form id="channel-preferences-form" class="modal-form">\n	<div class="modal-body minimal-light-scrollbar">\n		',w=n.each.call(t,t.prefs,{hash:{},inverse:I.noop,fn:I.program(8,c,a),data:a}),(w||0===w)&&(k+=w),k+='\n	</div>\n\n	<div class="modal-footer">\n		<button type="submit" class="btn btn-primary">',x={hash:{},data:a},k+=C((b=n.t,b?b.call(t,"Save",x):S.call(t,"t","Save",x)))+'</button>\n		<button type="button" class="btn cancel-btn">',x={hash:{},data:a},k+=C((b=n.t,b?b.call(t,"Cancel",x):S.call(t,"t","Cancel",x)))+"</button>\n	</div>\n</form>\n"
})}),define("plex/view/modals/ChannelSettingsModal",["hb!templates/modals/ChannelSettingsModal.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/model/collections/PreferenceCollection","plex/view/modals/BaseModal","jquery"],function(e,t,n,i,a,s,r){var l=s.extend({name:"channelSettingsModal",className:"modal channel-preferences-modal fade",changes:null,events:{hidden:"close","change input[name]":"onPreferenceChange","change select[name]":"onPreferenceChange","submit form":"onSubmit","click .cancel-btn":"onCancel"},initialize:function(){this.changes={},this.addBinding(this.collection,"reset",this.render)
},render:function(){return this.$el.html(e({channel:this.model.toJSON(),prefs:this.collection.toJSON()})).modal(),this},close:function(){this.trigger("close",!1),s.prototype.close.apply(this,arguments)},onPreferenceChange:function(e){var t=e.currentTarget,n=t.value;"checkbox"!=t.type||t.checked||(n="0"),this.changes[t.name]=n},onSubmit:function(e){if(_.isEmpty(this.changes))return this.onCancel(e);e.preventDefault();var t=this.collection.first(),a=t.getSaveParams(this.changes),s=_.isFunction(this.collection.url)?this.collection.url():this.collection.url,l=s+"/set?"+r.param(a);
r.ajax(t.server.getAjaxOptions(l)).done(_.bind(function(){_.each(this.changes,function(e,t){var n=this.collection.get(t),i=n.get("type");"bool"==i?n.set("value","0"!==e):"int"==i?n.set("value",parseInt(e,10)):n.set("value",e)},this),this.$el.modal("hide"),this.trigger("close",!0)},this)).fail(function(){i.set("alert",{status:"error",message:n.t("There was a problem saving your channel settings.")})})},onCancel:function(e){e.preventDefault(),this.$el.modal("hide")}});return l}),define("hb!templates/modals/AgentInfoModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l,o="",c="function",d=this.escapeExpression,h=n.helperMissing;return o+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon circle-info"></i> '+d((s=t.agent,s=null==s||s===!1?s:s.name,typeof s===c?s.apply(t):s))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	<p class="pull-center"><img src="',l={hash:{},data:a},o+=d((s=n.transcodeImage,s?s.call(t,t.serverObj,t.imagePath,200,200,l):h.call(t,"transcodeImage",t.serverObj,t.imagePath,200,200,l)))+'"></p>\n\n	<p>',s=t.agent,s=null==s||s===!1?s:s.attribution,r=typeof s===c?s.apply(t):s,(r||0===r)&&(o+=r),o+="</p>\n</div>\n"
})}),define("plex/view/modals/AgentInfoModal",["hb!templates/modals/AgentInfoModal.tpl","plex/view/modals/BaseModal"],function(e,t){var n=t.extend({name:"agentInfoModal",className:"modal agent-info-modal fade",events:{hidden:"close"},render:function(){return this.$el.html(e({serverObj:this.model.server,agent:this.model.toJSON(),imagePath:"/system/agents/attribution/image?identifier="+this.model.id})).modal(),this}});return n}),define("plex/view/lists/preferences/items/SortableAgentListItem",["hb!templates/lists/preferences/items/SortableAgentListItem.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/model/collections/PreferenceCollection","plex/view/BaseView","plex/view/modals/ChannelSettingsModal","plex/view/modals/AgentInfoModal","jquery"],function(e,t,n,i,a,s,r,l){var o=a.extend({tagName:"li",className:"well",events:{"click .settings-btn":"onSettingsClick","click .info-btn":"onInfoClick"},initialize:function(){this.addBinding(this.model,"change",this.render)
},render:function(){return this.$el.html(e(this.model.toJSON())),this.$el.tooltip({selector:".sortable-btn",placement:"bottom"}),this},onSettingsClick:function(e){e.preventDefault();var t=new i([],{server:this.model.server,url:"/:/plugins/"+this.model.id+"/prefs"});t.fetch().done(_.bind(function(){n.set("modal",new s({model:this.model,collection:t}))},this)),l(".tooltip").remove()},onInfoClick:function(e){e.preventDefault(),n.set("modal",new r({model:this.model})),l(".tooltip").remove()}});return o
}),function(e){var t,n=e();e.fn.sortable=function(i){var a=i+"";return i=e.extend({connectWith:!1},i),this.each(function(){if(/^enable|disable|destroy$/.test(a)){var s=e(this).children(e(this).data("items")).attr("draggable","enable"==a);return"destroy"==a&&s.add(this).removeData("connectWith items").off("dragstart.h5s dragend.h5s selectstart.h5s dragover.h5s dragenter.h5s drop.h5s"),void 0}var r,l,s=e(this).children(i.items),o=e("<"+(/^ul|ol$/i.test(this.tagName)?"li":"div")+' class="sortable-placeholder">');
s.find(i.handle).mousedown(function(){r=!0}).mouseup(function(){r=!1}),e(this).data("items",i.items),n=n.add(o),i.connectWith&&e(i.connectWith).add(this).data("connectWith",i.connectWith),s.attr("draggable","true").on("dragstart.h5s",function(n){if(i.handle&&!r)return!1;r=!1;var a=n.originalEvent.dataTransfer;a.effectAllowed="move",a.setData("Text","dummy"),l=(t=e(this)).addClass("sortable-dragging").index()}).on("dragend.h5s",function(){t&&(t.removeClass("sortable-dragging").show(),n.detach(),l!=t.index()&&t.parent().trigger("sortupdate",{item:t}),t=null)
}).not("a[href], img").on("selectstart.h5s",function(){return this.dragDrop&&this.dragDrop(),!1}).end().add([this,o]).on("dragover.h5s dragenter.h5s drop.h5s",function(a){return s.is(t)||i.connectWith===e(t).parent().data("connectWith")?"drop"==a.type?(a.stopPropagation(),n.filter(":visible").after(t),t.trigger("dragend.h5s"),!1):(a.preventDefault(),a.originalEvent.dataTransfer.dropEffect="move",s.is(this)?(i.forcePlaceholderSize&&o.height(t.outerHeight()),t.hide(),e(this)[o.index()<e(this).index()?"after":"before"](o),n.not(o).detach()):n.is(this)||e(this).children(i.items).length||(n.detach(),e(this).append(o)),!1):!0
})})}}(jQuery),define("sortable",function(){}),define("plex/view/lists/preferences/SortableAgentList",["plex/view/lists/BaseList","plex/view/lists/preferences/items/SortableAgentListItem","jquery","sortable"],function(e,t,n){var i=e.extend({tagName:"ul",className:"sortable-list agent-list",events:{"change input[type=checkbox]":"onAgentChecked",sortupdate:"onSortUpdate"},initialize:function(){this.setup(t),this.collection&&this.collection.populate()},render:function(){return this.$el.empty(),this.collection&&this.populate(this.collection),this
},reset:function(t){e.prototype.reset.call(this,t),this.$el.sortable(),this.delegateEvents()},save:function(){var e="";this.$("input[type=checkbox]").each(function(){var t=n(this),i=t.prop("checked");i&&(e+=this.name+",")}),e=e.substring(0,e.length-1),this.trigger("save",e)},onAgentChecked:function(){this.save()},onSortUpdate:function(){this.save()}});return i}),define("plex/view/server/settings/AgentsSettingsView",["hb!templates/server/settings/AgentsSettingsView.tpl","plex/model/collections/AgentCollection","plex/view/BaseView","plex/view/lists/preferences/AgentList","plex/view/lists/preferences/SortableAgentList","jquery"],function(e,t,n,i,a,s){var r=[{key:"movies",typeID:1,label:"Movies"},{key:"tv",typeID:2,label:"TV Shows"},{key:"music",typeID:8,label:"Artists"},{key:"albums",typeID:9,label:"Albums"},{key:"photos",typeID:13,label:"Photos"}],l=_.reduce(r,function(e,t){return e[t.key]=t,e
},{}),o=function(e){return l[e]},c=n.extend({id:"agents",className:"preferences-group agents-container",activeSection:"movies",activeAgent:null,agentList:null,sortableList:null,events:{"click .agent-sections-nav a":"onAgentSectionClick","click .agents-nav a":"onAgentClick"},initialize:function(){var e=this.populateAgents(this.activeSection);this.agentList=this.registerView(new i({collection:e})),this.sortableList=this.registerView(new a({collection:null})),this.addBinding(this.sortableList,"save",this.onSaveOrder)
},render:function(){return this.$el.html(e({activeSection:this.activeSection,sections:r})),this.$(".agent-sections-nav").after(this.agentList.render().el),this.$(".agent-details").append(this.sortableList.render().el),this},populateAgents:function(e){var n=o(e);return n.agents||(n.agents=new t([],{server:this.model,sectionType:n.typeID})),n.agents.populate().done(_.bind(function(){this.selectAgent(n.agents.first())},this)),n.agents},selectAgent:function(e){this.$(".agent-name").text(e.get("name")),this.activeAgent=e,this.populateAdditionalAgents(e)
},populateAdditionalAgents:function(e){var n=o(this.activeSection),i=new t([],{server:this.model,sectionType:n.typeID,relatedAgent:e.id}),a=new t([],{server:this.model,sectionType:n.typeID,primaryAgent:e.id}),s=i.fetch().pipe(function(){return a.fetch()});s=s.pipe(_.bind(function(){var n=function(t){return t.id===e.id?(t.set("primary",!0),!0):a.get(t.id)?!0:!1};this.sortableList.rebase(new t(i.filter(n),{server:this.model}))},this))},onSaveOrder:function(e){var t=o(this.activeSection);this.activeAgent.url="system/agents/"+this.activeAgent.id+"/config/"+t.typeID,this.activeAgent.save({order:e})
},onAgentSectionClick:function(e){e.preventDefault();var t=s(e.target),n=t.attr("href"),i=n.replace("#","");this.activeSection=i;var a=this.populateAgents(i);this.agentList.rebase(a),this.$(".agent-sections-nav li").removeClass("active"),t.parent("li").addClass("active")},onAgentClick:function(e){e.preventDefault();var t=s(e.target),n=t.data("identifier"),i=this.agentList.collection.get(n);this.selectAgent(i),this.$(".agents-nav li").removeClass("active"),t.parent("li").addClass("active")}});return c
}),define("plex/view/server/settings/ServerSettingsView",["hb!templates/server/settings/ServerSettingsView.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/control/utils/LanguageUtil","plex/model/AppModel","plex/model/AccountModel","plex/model/PreferenceModel","plex/model/ChannelModel","plex/model/collections/PreferenceCollection","plex/view/BaseView","plex/view/server/settings/MyPlexSettingsView","plex/view/server/settings/AgentsSettingsView","plex/view/modals/ChannelSettingsModal","jquery"],function(e,t,n,i,a,s,r,l,o,c,d,h,u,p){var m=c.extend({id:"media-server-settings",active:!1,disableForm:!1,myPlexSettings:null,agentsSettings:null,events:{"click .preferences-nav a":"onPreferenceGroupClick","click .directory-settings-btn":"onDirectorySettingsClick","change input[name]":"onPreferenceChange","change select[name]":"onPreferenceChange","submit .preferences-form":"onSubmit","click .cancel-btn":"onCancelClick"},orderedGroups:[{id:"general",group:"general",title:"General"},{id:"library",group:"library",title:"Library"},{id:"channels",group:"channels",title:"Channels"},{id:"network",group:"network",title:"Network"},{id:"transcoder",group:"transcoder",title:"Transcoder"},{id:"languages",group:"account.language",title:"Languages"},{id:"dlna",group:"dlna",title:"DLNA"},{id:"bonjour",group:"bonjour",title:"Network Discovery"}],initialize:function(e){this.changes={},this.active=e.active,this.myPlexSettings=this.registerView(new d({model:this.model.get("myPlexAccount")})),this.agentsSettings=this.registerView(new h({model:this.model})),this.addBinding(this.myPlexSettings,"change:allowedNetworks",this.onAllowedNetworksChange),this.prefs=this.model.get("preferences"),this.addBinding(this.prefs,"reset",this.render),this.prefs.populate(),this.account=new s({key:"/accounts/1"},{server:this.model}),this.account.fetch().done(_.bind(this.render,this))
},render:function(){var t="",n=!1,i=this.prefs.get("FriendlyName");i&&!i.get("value")&&(t=i.get("value"),n=!0,i.set("value",this.model.get("name"),{silent:!0}));var a={},s={},r=function(e){if(!e.get("hidden")){var t=e.get("group");a[t]||(a[t]=[]),a[t].push(e.toJSON()),e.get("advanced")||(s[t]=!0)}};this.prefs.each(r),_.each(this.getFakePrefs(),r);var l=_.map(this.orderedGroups,function(e){var t=_.clone(e);return t.prefs=a[e.group],t.advanced=!(e.group in s),delete a[e.group],t},this);_.each(a,function(e,t){l.push({group:t,title:t,prefs:e,advanced:!(t in s)})
});var o={version:this.model.get("version"),groups:l};return n&&i.set("value",t,{silent:!0}),this.$el.html(e(o)),this.active||this.$el.addClass("hide"),this.$(".preferences-group:last").after(this.myPlexSettings.render().el),this.$(".preferences-group:last").after(this.agentsSettings.render().el),this.myPlexSettings.delegateEvents(),this.agentsSettings.delegateEvents(),this.delegateEvents(),this},getFakePrefs:function(){var e=[],t=_.map(i.byCode,function(e,t){return{value:t,label:e}});return e.push(new r({id:"account.autoSelectAudio",label:"Automatically select audio tracks",summary:"Automatically select audio tracks in your preferred language when possible.","default":!1,value:"1"===this.account.get("autoSelectAudio"),type:"bool",group:"account.language",advanced:!1,hidden:!1},{server:this.model})),e.push(new r({id:"account.defaultAudioLanguage",label:"Prefer audio tracks in","default":"en",value:this.account.get("defaultAudioLanguage"),type:"text",group:"account.language",advanced:!1,hidden:!1,enumValues:t},{server:this.model})),e.push(new r({id:"account.subtitleMode",label:"Subtitle mode","default":0,value:parseInt(this.account.get("subtitleMode"),10),type:"int",group:"account.language",advanced:!1,hidden:!1,enumValues:[{value:"0",label:"Manually selected"},{value:"1",label:"Shown with foreign audio"},{value:"2",label:"Always enabled"}]},{server:this.model})),e.push(new r({id:"account.defaultSubtitleLanguage",label:"Prefer subtitles in","default":"en",value:this.account.get("defaultSubtitleLanguage"),type:"text",group:"account.language",advanced:!1,hidden:!1,enumValues:t},{server:this.model})),e
},save:function(e){_.isEmpty(this.changes)&&!e&&t.trigger("navigate:back");var i=[],s="account.",r=!1;_.each(_.keys(this.changes),function(e){0===e.lastIndexOf(s,0)&&(this.account.set(e.substring(s.length),this.changes[e],{silent:!0}),r=!0,delete this.changes[e])},this),r&&i.push(this.account.save()),_.isEmpty(this.changes)||i.push(this.prefs.first().save(this.changes)),p.when.apply(p,i).done(_.bind(function(){_.each(this.changes,function(e,t){var n=this.prefs.get(t),i=n.get("type");"bool"==i?n.set("value","0"!==e):"int"==i?n.set("value",parseInt(e,10)):n.set("value",e)
},this),e||t.trigger("navigate:back")},this)).fail(function(){a.set("alert",{status:"error",message:n.t("There was a problem saving your server settings.")})})},onAllowedNetworksChange:function(e){this.$("input[name=allowedNetworks]").val(e)},onPreferenceGroupClick:function(e){e.preventDefault();var t=p(e.target),n=t.attr("href");this.$(".preferences-group").removeClass("active"),this.$(n).addClass("active"),"#myplex"===n||"#agents"===n?(this.disableForm=!0,this.$(".main-actions").addClass("hide")):(this.disableForm=!1,this.$(".main-actions").removeClass("hide")),this.$(".preferences-nav li").removeClass("active"),t.parent("li").addClass("active")
},onDirectorySettingsClick:function(e){e.preventDefault();var t=new l({key:"/system/:/prefs",name:"Preferences..."},{server:this.model}),n=new o([],{server:this.model,url:t.id});n.fetch().done(_.bind(function(){a.set("modal",new u({model:t,collection:n}))},this))},onPreferenceChange:function(e){if(!this.disableForm){var t=e.currentTarget,n=t.value;"checkbox"!=t.type||t.checked||(n="0"),this.changes[t.name]=n}},onSubmit:function(e){e.preventDefault(),this.disableForm||this.save()},onCancelClick:function(e){e.preventDefault(),t.trigger("navigate:back")
}});return m}),define("hb!templates/server/settings/PlexWebSettingsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,l="";return l+='\n						<span class="muted">&middot;</span>\n\n						<a class="check-updates-btn ',s={hash:{},inverse:I.noop,fn:I.program(2,r,t),data:t},i=n.if_neq,a=i?i.call(e,e.updateStatus,"none",s):P.call(e,"if_neq",e.updateStatus,"none",s),(a||0===a)&&(l+=a),l+='" href="#">\n							<i class="glyphicon circle-arrow-top"></i> ',s={hash:{},data:t},l+=_((i=n.t,i?i.call(e,"Check for Updates",s):P.call(e,"t","Check for Updates",s)))+'\n						</a>\n\n						<a class="download-updates-btn ',s={hash:{},inverse:I.noop,fn:I.program(2,r,t),data:t},i=n.if_neq,a=i?i.call(e,e.updateStatus,"download",s):P.call(e,"if_neq",e.updateStatus,"download",s),(a||0===a)&&(l+=a),l+='" href="#">\n							<i class="glyphicon circle-arrow-down"></i> ',s={hash:{},data:t},l+=_((i=n.t,i?i.call(e,"Download Updates",s):P.call(e,"t","Download Updates",s)))+'\n						</a>\n\n						<a class="reload-updates-btn ',s={hash:{},inverse:I.noop,fn:I.program(2,r,t),data:t},i=n.if_neq,a=i?i.call(e,e.updateStatus,"reload",s):P.call(e,"if_neq",e.updateStatus,"reload",s),(a||0===a)&&(l+=a),l+='" href="#">\n							<i class="glyphicon refresh"></i> ',s={hash:{},data:t},l+=_((i=n.t,i?i.call(e,"Refresh to Apply Changes",s):P.call(e,"t","Refresh to Apply Changes",s)))+'\n						</a>\n\n						<span class="latest-updates ',s={hash:{},inverse:I.noop,fn:I.program(2,r,t),data:t},i=n.if_neq,a=i?i.call(e,e.updateStatus,"latest",s):P.call(e,"if_neq",e.updateStatus,"latest",s),(a||0===a)&&(l+=a),l+='">\n							<i class="glyphicon ok-2"></i> ',s={hash:{},data:t},l+=_((i=n.t,i?i.call(e,"Plex/Web is up to date.",s):P.call(e,"t","Plex/Web is up to date.",s)))+"\n						</span>\n					"
}function r(){return"hide"}function l(e,t,i){var a,s,r,l="";return l+='\n							<option value="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===T?a.apply(e):a),l+=_(a)+'" ',r={hash:{},inverse:I.noop,fn:I.program(5,o,t),data:t},a=n.if_eq,s=a?a.call(e,e.value,(a=i.settings,null==a||a===!1?a:a.language),r):P.call(e,"if_eq",e.value,(a=i.settings,null==a||a===!1?a:a.language),r),(s||0===s)&&(l+=s),l+=">\n								",(s=n.name)?s=s.call(e,{hash:{},data:t}):(s=e.name,s=typeof s===T?s.apply(e):s),l+=_(s)+"\n							</option>\n						"
}function o(){return"selected"}function c(){return"checked"}function d(e,t,i){var a,s,r,l="";return l+='\n							<option value="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===T?a.apply(e):a),l+=_(a)+'"',r={hash:{},inverse:I.noop,fn:I.program(10,h,t),data:t},a=n.if_eq,s=a?a.call(e,e.value,(a=i.settings,null==a||a===!1?a:a.debugLevel),r):P.call(e,"if_eq",e.value,(a=i.settings,null==a||a===!1?a:a.debugLevel),r),(s||0===s)&&(l+=s),l+=">",r={hash:{},data:t},l+=_((a=n.t,a?a.call(e,e.label,r):P.call(e,"t",e.label,r)))+"</option>\n						"
}function h(){return" selected"}function u(e,t){var i,a,s,r="";return r+='\n				<h3><i class="glyphicon adjust-alt"></i> ',s={hash:{},data:t},r+=_((i=n.t,i?i.call(e,"Streaming Quality",s):P.call(e,"t","Streaming Quality",s)))+'</h3>\n\n				<div class="control-group pull-left">\n					<label class="control-label" for="quality">',s={hash:{},data:t},r+=_((i=n.t,i?i.call(e,"Local Quality",s):P.call(e,"t","Local Quality",s)))+'</label>\n					<div class="controls">\n						<select id="quality" name="quality" data-type="int">\n							',a=n.each.call(e,e.videoQualities,{hash:{},inverse:I.noop,fn:I.programWithDepth(13,p,t,e),data:t}),(a||0===a)&&(r+=a),r+='\n						</select>\n					</div>\n				</div>\n\n				<div class="control-group">\n					<label class="control-label" for="remoteQuality">',s={hash:{},data:t},r+=_((i=n.t,i?i.call(e,"Remote Quality",s):P.call(e,"t","Remote Quality",s)))+'</label>\n					<div class="controls">\n						<select id="remoteQuality" name="remoteQuality" data-type="int">\n							',a=n.each.call(e,e.videoQualities,{hash:{},inverse:I.noop,fn:I.programWithDepth(18,v,t,e),data:t}),(a||0===a)&&(r+=a),r+="\n						</select>\n					</div>\n				</div>\n			"
}function p(e,t,i){var a,s,r,l="";return l+='\n								<option value="'+_((a=e[0],typeof a===T?a.apply(e):a))+'" ',r={hash:{},inverse:I.noop,fn:I.program(5,o,t),data:t},a=n.if_eq,s=a?a.call(e,e[0],(a=i.settings,null==a||a===!1?a:a.quality),r):P.call(e,"if_eq",e[0],(a=i.settings,null==a||a===!1?a:a.quality),r),(s||0===s)&&(l+=s),l+=">\n									",r={hash:{},inverse:I.program(16,f,t),fn:I.program(14,m,t),data:t},a=n.if_eq,s=a?a.call(e,e[1],1500,r):P.call(e,"if_eq",e[1],1500,r),(s||0===s)&&(l+=s),l+=", "+_((a=e[2],typeof a===T?a.apply(e):a))+"p\n								</option>\n							"
}function m(e,t){var i,a;return a={hash:{},data:t},_((i=n.formatBitrate,i?i.call(e,e[1],1,a):P.call(e,"formatBitrate",e[1],1,a)))}function f(e,t){var i,a;return a={hash:{},data:t},_((i=n.formatBitrate,i?i.call(e,e[1],0,a):P.call(e,"formatBitrate",e[1],0,a)))}function v(e,t,i){var a,s,r,l="";return l+='\n								<option value="'+_((a=e[0],typeof a===T?a.apply(e):a))+'" ',r={hash:{},inverse:I.noop,fn:I.program(5,o,t),data:t},a=n.if_eq,s=a?a.call(e,e[0],(a=i.settings,null==a||a===!1?a:a.remoteQuality),r):P.call(e,"if_eq",e[0],(a=i.settings,null==a||a===!1?a:a.remoteQuality),r),(s||0===s)&&(l+=s),l+=">\n									",r={hash:{},inverse:I.program(16,f,t),fn:I.program(14,m,t),data:t},a=n.if_eq,s=a?a.call(e,e[1],1500,r):P.call(e,"if_eq",e[1],1500,r),(s||0===s)&&(l+=s),l+=", "+_((a=e[2],typeof a===T?a.apply(e):a))+"p\n								</option>\n							"
}function g(e,t){var i,a,s,r="";return r+='\n				<div class="control-group advanced-pref hide">\n					<label class="checkbox" for="preferAAC">\n						<input id="preferAAC" name="preferAAC" type="checkbox" class="input-dark" ',a=n["if"].call(e,(i=e.settings,null==i||i===!1?i:i.preferAAC),{hash:{},inverse:I.noop,fn:I.program(7,c,t),data:t}),(a||0===a)&&(r+=a),r+="> &nbsp;",s={hash:{},data:t},r+=_((i=n.t,i?i.call(e,"Prefer AAC Audio",s):P.call(e,"t","Prefer AAC Audio",s)))+'\n					</label>\n					<p class="help-block">',s={hash:{},data:t},r+=_((i=n.t,i?i.call(e,"Prefer AAC over MP3 when transcoding audio. Some devices, like the Wii U, only support HLS with AAC audio.",s):P.call(e,"t","Prefer AAC over MP3 when transcoding audio. Some devices, like the Wii U, only support HLS with AAC audio.",s)))+'</p>\n				</div>\n\n				<div class="control-group pull-left">\n					<label class="control-label" for="subtitleSize">',s={hash:{},data:t},r+=_((i=n.t,i?i.call(e,"Subtitle Size",s):P.call(e,"t","Subtitle Size",s)))+'</label>\n					<div class="controls">\n						<select id="subtitleSize" name="subtitleSize" data-type="int">\n							',a=n.each.call(e,e.subtitleSizes,{hash:{},inverse:I.noop,fn:I.programWithDepth(21,y,t,e),data:t}),(a||0===a)&&(r+=a),r+='\n						</select>\n					</div>\n				</div>\n\n				<div class="control-group">\n					<label class="control-label" for="audioBoost">',s={hash:{},data:t},r+=_((i=n.t,i?i.call(e,"Audio Boost",s):P.call(e,"t","Audio Boost",s)))+'</label>\n					<div class="controls">\n						<select id="audioBoost" name="audioBoost" data-type="int">\n							',a=n.each.call(e,e.audioLevels,{hash:{},inverse:I.noop,fn:I.programWithDepth(23,b,t,e),data:t}),(a||0===a)&&(r+=a),r+="\n						</select>\n					</div>\n				</div>\n			"
}function y(e,t,i){var a,s,r,l="";return l+='\n								<option value="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===T?a.apply(e):a),l+=_(a)+'"',r={hash:{},inverse:I.noop,fn:I.program(10,h,t),data:t},a=n.if_eq,s=a?a.call(e,e.value,(a=i.settings,null==a||a===!1?a:a.subtitleSize),r):P.call(e,"if_eq",e.value,(a=i.settings,null==a||a===!1?a:a.subtitleSize),r),(s||0===s)&&(l+=s),l+=">",r={hash:{},data:t},l+=_((a=n.t,a?a.call(e,e.label,r):P.call(e,"t",e.label,r)))+"</option>\n							"
}function b(e,t,i){var a,s,r,l="";return l+='\n								<option value="',(a=n.value)?a=a.call(e,{hash:{},data:t}):(a=e.value,a=typeof a===T?a.apply(e):a),l+=_(a)+'"',r={hash:{},inverse:I.noop,fn:I.program(10,h,t),data:t},a=n.if_eq,s=a?a.call(e,e.value,(a=i.settings,null==a||a===!1?a:a.audioBoost),r):P.call(e,"if_eq",e.value,(a=i.settings,null==a||a===!1?a:a.audioBoost),r),(s||0===s)&&(l+=s),l+=">",r={hash:{},data:t},l+=_((a=n.t,a?a.call(e,e.label,r):P.call(e,"t",e.label,r)))+"</option>\n							"}function w(){return'\n				<div class="plex-pass-restricted-container">\n					<div class="plex-pass-restricted">\n			'
}function x(e,t){var i,a,s="";return s+='\n					</div>\n\n					<div class="plex-pass-message-overlay">\n						<div class="empty-message plex-pass-message">\n							',a={hash:{},data:t},s+=_((i=n.t,i?i.call(e,"Sorry, you need a <a href='{1}' target='_blank'>PlexPass subscription</a> for this feature.","https://my.plexapp.com/subscription/about",a):P.call(e,"t","Sorry, you need a <a href='{1}' target='_blank'>PlexPass subscription</a> for this feature.","https://my.plexapp.com/subscription/about",a)))+"\n						</div>\n					</div>\n				</div>\n			"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var k,S,C,A="",I=this,P=n.helperMissing,_=this.escapeExpression,T="function";return A+='<ul class="preferences-nav nav nav-list">\n	<li class="active"><a href="#general">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"General",C):P.call(t,"t","General",C)))+'</a></li>\n	<li class="advanced-prefs hide"><a href="#debug">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Debug",C):P.call(t,"t","Debug",C)))+'</a></li>\n	<li><a href="#dashboard">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Dashboard",C):P.call(t,"t","Dashboard",C)))+'</a></li>\n	<li><a href="#search">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Search",C):P.call(t,"t","Search",C)))+'</a></li>\n	<li><a href="#player">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Player",C):P.call(t,"t","Player",C)))+'</a></li>\n	<li><a href="#sync">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Sync",C):P.call(t,"t","Sync",C)))+'</a></li>\n</ul>\n\n<form class="preferences-form">\n	<fieldset>\n		<div id="general" class="preferences-group active">\n			<h3><i class="glyphicon cogwheel"></i> ',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"General",C):P.call(t,"t","General",C)))+'</h3>\n\n			<div class="control-group">\n				<label class="control-label">\n					',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Version",C):P.call(t,"t","Version",C)))+" ",(S=n.version)?S=S.call(t,{hash:{},data:a}):(S=t.version,S=typeof S===T?S.apply(t):S),A+=_(S)+"\n					",S=n.unless.call(t,t.shared,{hash:{},inverse:I.noop,fn:I.program(1,s,a),data:a}),(S||0===S)&&(A+=S),A+='\n				</label>\n				<p class="help-block">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,'While Plex Media Server will automatically download updates for Plex/Web periodically, use "Check for Updates" to manually download updates.',C):P.call(t,"t",'While Plex Media Server will automatically download updates for Plex/Web periodically, use "Check for Updates" to manually download updates.',C)))+'</p>\n			</div>\n\n			<div class="control-group">\n				<label class="control-label" for="language">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Language",C):P.call(t,"t","Language",C)))+'</label>\n				<div class="controls">\n					<select id="language" name="language">\n						',S=n.each.call(t,t.languages,{hash:{},inverse:I.noop,fn:I.programWithDepth(4,l,a,t),data:a}),(S||0===S)&&(A+=S),A+='\n					</select>\n				</div>\n				<p class="help-block">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Help us translate Plex/Web into your language <a href='{1}' target='_blank'>here</a>.","https://getlocalization.com/plexweb",C):P.call(t,"t","Help us translate Plex/Web into your language <a href='{1}' target='_blank'>here</a>.","https://getlocalization.com/plexweb",C)))+'</p>\n			</div>\n\n			<div class="control-group">\n				<label class="checkbox" for="playThemeMusic">\n					<input id="playThemeMusic" name="playThemeMusic" type="checkbox" class="input-dark" ',S=n["if"].call(t,(k=t.settings,null==k||k===!1?k:k.playThemeMusic),{hash:{},inverse:I.noop,fn:I.program(7,c,a),data:a}),(S||0===S)&&(A+=S),A+="> &nbsp;",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Play Theme Music",C):P.call(t,"t","Play Theme Music",C)))+'\n				</label>\n				<p class="help-block">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Automatically play theme music in the background when available.",C):P.call(t,"t","Automatically play theme music in the background when available.",C)))+'</p>\n			</div>\n\n			<div class="control-group">\n				<label class="checkbox" for="keyboardShortcuts">\n					<input id="keyboardShortcuts" name="keyboardShortcuts" type="checkbox" class="input-dark" ',S=n["if"].call(t,(k=t.settings,null==k||k===!1?k:k.keyboardShortcuts),{hash:{},inverse:I.noop,fn:I.program(7,c,a),data:a}),(S||0===S)&&(A+=S),A+="> &nbsp;",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Enable Keyboard Shortcuts",C):P.call(t,"t","Enable Keyboard Shortcuts",C)))+'\n				</label>\n				<p class="help-block">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Press ? to view the list of <a class='keyboard-shortcuts-btn' href='#'>available shortcuts</a>.",C):P.call(t,"t","Press ? to view the list of <a class='keyboard-shortcuts-btn' href='#'>available shortcuts</a>.",C)))+'</p>\n			</div>\n		</div>\n\n		<div id="debug" class="preferences-group">\n			<h3><i class="glyphicon bug"></i> ',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Debug",C):P.call(t,"t","Debug",C)))+'</h3>\n\n			<div class="control-group">\n				<label class="control-label" for="debugLevel">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Debug Level",C):P.call(t,"t","Debug Level",C)))+'</label>\n				<div class="controls">\n					<select id="debugLevel" name="debugLevel" data-type="int">\n						',S=n.each.call(t,t.debugLevels,{hash:{},inverse:I.noop,fn:I.programWithDepth(9,d,a,t),data:a}),(S||0===S)&&(A+=S),A+='\n					</select>\n				</div>\n			</div>\n		</div>\n\n		<div id="search" class="preferences-group">\n			<h3><i class="glyphicon search"></i> ',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Search",C):P.call(t,"t","Search",C)))+'</h3>\n\n			<div class="control-group">\n				<label class="checkbox" for="remoteSearch">\n					<input id="remoteSearch" name="remoteSearch" type="checkbox" class="input-dark" ',S=n["if"].call(t,(k=t.settings,null==k||k===!1?k:k.remoteSearch),{hash:{},inverse:I.noop,fn:I.program(7,c,a),data:a}),(S||0===S)&&(A+=S),A+="> &nbsp;",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Search Remote Libraries",C):P.call(t,"t","Search Remote Libraries",C)))+'\n				</label>\n			</div>\n\n			<div class="control-group">\n				<label class="checkbox" for="channelSearch">\n					<input id="channelSearch" name="channelSearch" type="checkbox" class="input-dark" ',S=n["if"].call(t,(k=t.settings,null==k||k===!1?k:k.channelSearch),{hash:{},inverse:I.noop,fn:I.program(7,c,a),data:a}),(S||0===S)&&(A+=S),A+="> &nbsp;",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Search Channels",C):P.call(t,"t","Search Channels",C)))+'\n				</label>\n			</div>\n		</div>\n\n		<div id="player" class="preferences-group">\n			',S=n["if"].call(t,t.videoQualities,{hash:{},inverse:I.noop,fn:I.program(12,u,a),data:a}),(S||0===S)&&(A+=S),A+='\n\n			<h3><i class="glyphicon play-button"></i> ',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Player",C):P.call(t,"t","Player",C)))+'</h3>\n\n			<div class="control-group">\n				<label class="checkbox" for="directPlay">\n					<input id="directPlay" name="directPlay" type="checkbox" class="input-dark" ',S=n["if"].call(t,(k=t.settings,null==k||k===!1?k:k.directPlay),{hash:{},inverse:I.noop,fn:I.program(7,c,a),data:a}),(S||0===S)&&(A+=S),A+="> &nbsp;",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Direct Play",C):P.call(t,"t","Direct Play",C)))+'\n				</label>\n				<p class="help-block">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Allows the player to play compatible media without any conversion. In most browsers, direct play supports MP4 videos with h264 video and AAC audio. Videos with subtitles cannot be played directly.",C):P.call(t,"t","Allows the player to play compatible media without any conversion. In most browsers, direct play supports MP4 videos with h264 video and AAC audio. Videos with subtitles cannot be played directly.",C)))+'</p>\n			</div>\n\n			<div class="control-group">\n				<label class="checkbox" for="directStream">\n					<input id="directStream" name="directStream" type="checkbox" class="input-dark" ',S=n["if"].call(t,(k=t.settings,null==k||k===!1?k:k.directStream),{hash:{},inverse:I.noop,fn:I.program(7,c,a),data:a}),(S||0===S)&&(A+=S),A+="> &nbsp;",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Direct Stream",C):P.call(t,"t","Direct Stream",C)))+'\n				</label>\n				<p class="help-block">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Allows the server to copy compatible audio and video streams without converting them.",C):P.call(t,"t","Allows the server to copy compatible audio and video streams without converting them.",C)))+'</p>\n			</div>\n\n			<div class="control-group">\n				<label class="checkbox" for="highestResolution">\n					<input id="highestResolution" name="highestResolution" type="checkbox" class="input-dark" ',S=n["if"].call(t,(k=t.settings,null==k||k===!1?k:k.highestResolution),{hash:{},inverse:I.noop,fn:I.program(7,c,a),data:a}),(S||0===S)&&(A+=S),A+="> &nbsp;",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Always Use Highest Resolution",C):P.call(t,"t","Always Use Highest Resolution",C)))+'\n				</label>\n				<p class="help-block">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"When multiple resolutions are available for a video, automatically use the highest possible resolution.",C):P.call(t,"t","When multiple resolutions are available for a video, automatically use the highest possible resolution.",C)))+'</p>\n			</div>\n\n			<div class="control-group advanced-pref hide">\n				<label class="checkbox" for="directPlayAC3">\n					<input id="directPlayAC3" name="directPlayAC3" type="checkbox" class="input-dark" ',S=n["if"].call(t,(k=t.settings,null==k||k===!1?k:k.directPlayAC3),{hash:{},inverse:I.noop,fn:I.program(7,c,a),data:a}),(S||0===S)&&(A+=S),A+="> &nbsp;",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Allow Direct Play of AC3 Audio",C):P.call(t,"t","Allow Direct Play of AC3 Audio",C)))+'\n				</label>\n				<p class="help-block">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Allow MP4 videos with AC3 audio to be played directly. Browser support for AC3 audio is limited.",C):P.call(t,"t","Allow MP4 videos with AC3 audio to be played directly. Browser support for AC3 audio is limited.",C)))+"</p>\n			</div>\n\n			",S=n["if"].call(t,t.videoQualities,{hash:{},inverse:I.noop,fn:I.program(20,g,a),data:a}),(S||0===S)&&(A+=S),A+='\n		</div>\n\n		<div id="sync" class="preferences-group">\n			',S=n.unless.call(t,t.hasPlexPass,{hash:{},inverse:I.noop,fn:I.program(25,w,a),data:a}),(S||0===S)&&(A+=S),A+='\n\n			<h3><i class="glyphicon adjust-alt"></i> ',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Default Quality",C):P.call(t,"t","Default Quality",C)))+'</h3>\n\n			<div class="control-group">\n				<label class="control-label" for="syncVideoQuality">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Video",C):P.call(t,"t","Video",C)))+'</label>\n				<div class="controls">\n					<select id="syncVideoQuality" name="syncVideoQuality">\n						<option value="low" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncVideoQuality),"low",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncVideoQuality),"low",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Low",C):P.call(t,"t","Low",C)))+'</option>\n						<option value="medium" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncVideoQuality),"medium",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncVideoQuality),"medium",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Medium",C):P.call(t,"t","Medium",C)))+'</option>\n						<option value="high" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncVideoQuality),"high",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncVideoQuality),"high",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"High",C):P.call(t,"t","High",C)))+'</option>\n						<option value="highest" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncVideoQuality),"highest",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncVideoQuality),"highest",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Highest",C):P.call(t,"t","Highest",C)))+'</option>\n					</select>\n				</div>\n			</div>\n\n			<div class="control-group">\n				<label class="control-label" for="syncAudioQuality">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Audio",C):P.call(t,"t","Audio",C)))+'</label>\n				<div class="controls">\n					<select id="syncAudioQuality" name="syncAudioQuality">\n						<option value="low" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncAudioQuality),"low",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncAudioQuality),"low",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Low",C):P.call(t,"t","Low",C)))+'</option>\n						<option value="medium" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncAudioQuality),"medium",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncAudioQuality),"medium",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Medium",C):P.call(t,"t","Medium",C)))+'</option>\n						<option value="high" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncAudioQuality),"high",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncAudioQuality),"high",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"High",C):P.call(t,"t","High",C)))+'</option>\n						<option value="highest" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncAudioQuality),"highest",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncAudioQuality),"highest",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Highest",C):P.call(t,"t","Highest",C)))+'</option>\n					</select>\n				</div>\n			</div>\n\n			<div class="control-group">\n				<label class="control-label" for="syncPictureQuality">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Pictures",C):P.call(t,"t","Pictures",C)))+'</label>\n				<div class="controls">\n					<select id="syncPictureQuality" name="syncPictureQuality">\n						<option value="low" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncPictureQuality),"low",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncPictureQuality),"low",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Low",C):P.call(t,"t","Low",C)))+'</option>\n						<option value="medium" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncPictureQuality),"medium",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncPictureQuality),"medium",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Medium",C):P.call(t,"t","Medium",C)))+'</option>\n						<option value="high" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncPictureQuality),"high",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncPictureQuality),"high",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"High",C):P.call(t,"t","High",C)))+'</option>\n						<option value="highest" ',C={hash:{},inverse:I.noop,fn:I.program(5,o,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.settings,null==k||k===!1?k:k.syncPictureQuality),"highest",C):P.call(t,"if_eq",(k=t.settings,null==k||k===!1?k:k.syncPictureQuality),"highest",C),(S||0===S)&&(A+=S),A+=">",C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Highest",C):P.call(t,"t","Highest",C)))+"</option>\n					</select>\n				</div>\n			</div>\n\n			",S=n.unless.call(t,t.hasPlexPass,{hash:{},inverse:I.noop,fn:I.program(27,x,a),data:a}),(S||0===S)&&(A+=S),A+='\n		</div>\n\n		<div class="form-actions">\n			<button type="submit" class="btn btn-medium btn-primary">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Save",C):P.call(t,"t","Save",C)))+'</button>\n			<button type="button" class="btn btn-medium cancel-btn">',C={hash:{},data:a},A+=_((k=n.t,k?k.call(t,"Cancel",C):P.call(t,"t","Cancel",C)))+"</button>\n		</div>\n	</fieldset>\n</form>\n"
})}),define("hb!templates/server/settings/DashboardSettingsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"checked"}function r(){return'\n	<div class="plex-pass-restricted-container">\n		<div class="plex-pass-restricted">\n'}function l(e,t,i){var a,s,r,l="";return l+='\n				<li class="well">\n					',r={hash:{},inverse:A.noop,fn:A.programWithDepth(6,o,t,i),data:t},a=n.if_eq,s=a?a.call(e,e,"myLibrary",r):I.call(e,"if_eq",e,"myLibrary",r),(s||0===s)&&(l+=s),l+="\n					",r={hash:{},inverse:A.noop,fn:A.programWithDepth(8,c,t,i),data:t},a=n.if_eq,s=a?a.call(e,e,"onDeck",r):I.call(e,"if_eq",e,"onDeck",r),(s||0===s)&&(l+=s),l+="\n					",r={hash:{},inverse:A.noop,fn:A.programWithDepth(10,d,t,i),data:t},a=n.if_eq,s=a?a.call(e,e,"recentlyAdded",r):I.call(e,"if_eq",e,"recentlyAdded",r),(s||0===s)&&(l+=s),l+="\n					",r={hash:{},inverse:A.noop,fn:A.programWithDepth(12,h,t,i),data:t},a=n.if_eq,s=a?a.call(e,e,"channels",r):I.call(e,"if_eq",e,"channels",r),(s||0===s)&&(l+=s),l+="\n					",r={hash:{},inverse:A.noop,fn:A.programWithDepth(14,u,t,i),data:t},a=n.if_eq,s=a?a.call(e,e,"sharedLibraries",r):I.call(e,"if_eq",e,"sharedLibraries",r),(s||0===s)&&(l+=s),l+="\n				</li>\n			"
}function o(e,t,i){var a,r,l,o="";return o+='\n\n						<div id="dashboardMyLibraryPriority" class="sortable">\n							<i class="sortable-icon glyphicon show-lines"></i>\n							<label class="sortable-label" for="dashboardMyLibraryEnabled">\n								<input id="dashboardMyLibraryEnabled" name="dashboardMyLibraryEnabled" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardMyLibraryEnabled),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"My Library",l):I.call(e,"t","My Library",l)))+"\n							</label>\n						</div>\n\n					"
}function c(e,t,i){var a,r,l,o="";return o+='\n\n						<div id="dashboardOnDeckPriority" class="sortable">\n							<a class="sortable-btn settings-btn open-settings-btn" rel="tooltip" title="',l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Widget Settings",l):I.call(e,"t","Widget Settings",l)))+'" href="#">\n								<i class="settings-icon glyphicon cogwheel"></i>\n							</a>\n\n							<a class="sortable-btn settings-btn close-settings-btn hide" href="#">\n								<i class="close-icon glyphicon circle-remove"></i>\n							</a>\n\n							<i class="sortable-icon glyphicon show-lines"></i>\n							<label class="sortable-label" for="dashboardOnDeckEnabled">\n								<input id="dashboardOnDeckEnabled" name="dashboardOnDeckEnabled" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardOnDeckEnabled),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"On Deck",l):I.call(e,"t","On Deck",l)))+'\n							</label>\n						</div>\n\n						<div class="dashboard-widget-settings hide">\n							<div class="control-group">\n								<label for="dashboardOnDeckDynamicPriority">\n									<input id="dashboardOnDeckDynamicPriority" name="dashboardOnDeckDynamicPriority" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardOnDeckDynamicPriority),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Adjust priority based on when the most recent video was watched",l):I.call(e,"t","Adjust priority based on when the most recent video was watched",l)))+'\n								</label>\n							</div>\n\n							<div class="control-group">\n								<h4>',l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Show wide thumbnails",l):I.call(e,"t","Show wide thumbnails",l)))+'</h4>\n\n								<label class="radio inline">\n									<input type="radio" id="dashboardOnDeckWideThumbnails" name="dashboardOnDeckWideThumbnails" value="none" ',l={hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t},a=n.if_eq,r=a?a.call(e,(a=i.settings,null==a||a===!1?a:a.dashboardOnDeckWideThumbnails),"none",l):I.call(e,"if_eq",(a=i.settings,null==a||a===!1?a:a.dashboardOnDeckWideThumbnails),"none",l),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"None",l):I.call(e,"t","None",l)))+'\n								</label>\n								<label class="radio inline">\n									<input type="radio" id="dashboardOnDeckWideThumbnails" name="dashboardOnDeckWideThumbnails" value="first" ',l={hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t},a=n.if_eq,r=a?a.call(e,(a=i.settings,null==a||a===!1?a:a.dashboardOnDeckWideThumbnails),"first",l):I.call(e,"if_eq",(a=i.settings,null==a||a===!1?a:a.dashboardOnDeckWideThumbnails),"first",l),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"First",l):I.call(e,"t","First",l)))+'\n								</label>\n								<label class="radio inline">\n									<input type="radio" id="dashboardOnDeckWideThumbnails" name="dashboardOnDeckWideThumbnails" value="all" ',l={hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t},a=n.if_eq,r=a?a.call(e,(a=i.settings,null==a||a===!1?a:a.dashboardOnDeckWideThumbnails),"all",l):I.call(e,"if_eq",(a=i.settings,null==a||a===!1?a:a.dashboardOnDeckWideThumbnails),"all",l),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"All",l):I.call(e,"t","All",l)))+"\n								</label>\n							</div>\n						</div>\n\n					"
}function d(e,t,i){var a,r,l,o="";return o+='\n\n						<div id="dashboardRecentlyAddedPriority" class="sortable">\n							<a class="sortable-btn settings-btn open-settings-btn" rel="tooltip" title="',l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Widget Settings",l):I.call(e,"t","Widget Settings",l)))+'" href="#">\n								<i class="settings-icon glyphicon cogwheel"></i>\n							</a>\n\n							<a class="sortable-btn settings-btn close-settings-btn hide" href="#">\n								<i class="close-icon glyphicon circle-remove"></i>\n							</a>\n\n							<i class="sortable-icon glyphicon show-lines"></i>\n							<label class="sortable-label" for="dashboardRecentlyAddedEnabled">\n								<input id="dashboardRecentlyAddedEnabled" name="dashboardRecentlyAddedEnabled" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardRecentlyAddedEnabled),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Recently Added",l):I.call(e,"t","Recently Added",l)))+'\n							</label>\n						</div>\n\n						<div class="dashboard-widget-settings hide">\n							<div class="control-group">\n								<label for="dashboardRecentlyAddedDynamicPriority">\n									<input id="dashboardRecentlyAddedDynamicPriority" name="dashboardRecentlyAddedDynamicPriority" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardRecentlyAddedDynamicPriority),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Adjust priority based on when the most recent video was added",l):I.call(e,"t","Adjust priority based on when the most recent video was added",l)))+'\n								</label>\n							</div>\n\n							<div class="control-group">\n								<h4>',l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Show wide thumbnails",l):I.call(e,"t","Show wide thumbnails",l)))+'</h4>\n\n								<label class="radio inline">\n									<input type="radio" id="dashboardRecentlyAddedWideThumbnails" name="dashboardRecentlyAddedWideThumbnails" value="none" ',l={hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t},a=n.if_eq,r=a?a.call(e,(a=i.settings,null==a||a===!1?a:a.dashboardRecentlyAddedWideThumbnails),"none",l):I.call(e,"if_eq",(a=i.settings,null==a||a===!1?a:a.dashboardRecentlyAddedWideThumbnails),"none",l),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"None",l):I.call(e,"t","None",l)))+'\n								</label>\n								<label class="radio inline">\n									<input type="radio" id="dashboardRecentlyAddedWideThumbnails" name="dashboardRecentlyAddedWideThumbnails" value="first" ',l={hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t},a=n.if_eq,r=a?a.call(e,(a=i.settings,null==a||a===!1?a:a.dashboardRecentlyAddedWideThumbnails),"first",l):I.call(e,"if_eq",(a=i.settings,null==a||a===!1?a:a.dashboardRecentlyAddedWideThumbnails),"first",l),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"First",l):I.call(e,"t","First",l)))+'\n								</label>\n								<label class="radio inline">\n									<input type="radio" id="dashboardRecentlyAddedWideThumbnails" name="dashboardRecentlyAddedWideThumbnails" value="all" ',l={hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t},a=n.if_eq,r=a?a.call(e,(a=i.settings,null==a||a===!1?a:a.dashboardRecentlyAddedWideThumbnails),"all",l):I.call(e,"if_eq",(a=i.settings,null==a||a===!1?a:a.dashboardRecentlyAddedWideThumbnails),"all",l),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"All",l):I.call(e,"t","All",l)))+"\n								</label>\n							</div>\n						</div>\n\n					"
}function h(e,t,i){var a,r,l,o="";return o+='\n\n						<div id="dashboardChannelsPriority" class="sortable">\n							<a class="sortable-btn settings-btn open-settings-btn" rel="tooltip" title="',l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Widget Settings",l):I.call(e,"t","Widget Settings",l)))+'" href="#">\n								<i class="settings-icon glyphicon cogwheel"></i>\n							</a>\n\n							<a class="sortable-btn settings-btn close-settings-btn hide" href="#">\n								<i class="close-icon glyphicon circle-remove"></i>\n							</a>\n\n							<i class="sortable-icon glyphicon show-lines"></i>\n							<label class="sortable-label" for="dashboardChannelsEnabled">\n								<input id="dashboardChannelsEnabled" name="dashboardChannelsEnabled" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardChannelsEnabled),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Channels",l):I.call(e,"t","Channels",l)))+'\n							</label>\n						</div>\n\n						<div class="dashboard-widget-settings hide">\n							<label for="dashboardChannelsLimit">\n								<input id="dashboardChannelsLimit" name="dashboardChannelsLimit" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardChannelsLimit),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Limit to recently used channels",l):I.call(e,"t","Limit to recently used channels",l)))+'\n							</label>\n\n							<label for="dashboardChannelsDynamicPriority">\n								<input id="dashboardChannelsDynamicPriority" name="dashboardChannelsDynamicPriority" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardChannelsDynamicPriority),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Adjust priority based on when the most recent channel was used",l):I.call(e,"t","Adjust priority based on when the most recent channel was used",l)))+'\n							</label>\n\n							<label for="dashboardChannelsLargeThumbnail">\n								<input id="dashboardChannelsLargeThumbnail" name="dashboardChannelsLargeThumbnail" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardChannelsLargeThumbnail),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Show a large thumbnail for the first channel",l):I.call(e,"t","Show a large thumbnail for the first channel",l)))+"\n							</label>\n						</div>\n\n					"
}function u(e,t,i){var a,r,l,o="";return o+='\n\n						<div id="dashboardSharedLibrariesPriority" class="sortable">\n							<i class="sortable-icon glyphicon show-lines"></i>\n							<label class="sortable-label" for="dashboardSharedLibrariesEnabled">\n								<input id="dashboardSharedLibrariesEnabled" name="dashboardSharedLibrariesEnabled" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardSharedLibrariesEnabled),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Shared Libraries",l):I.call(e,"t","Shared Libraries",l)))+"\n							</label>\n						</div>\n\n					"
}function p(e,t,i){var a,s,r,l="";return l+='\n				<li class="well ',r={hash:{},inverse:A.noop,fn:A.programWithDepth(17,m,t,i),data:t},a=n.if_eq,s=a?a.call(e,e,"nowPlaying",r):I.call(e,"if_eq",e,"nowPlaying",r),(s||0===s)&&(l+=s),l+='">\n					',r={hash:{},inverse:A.noop,fn:A.programWithDepth(20,v,t,i),data:t},a=n.if_eq,s=a?a.call(e,e,"nowPlaying",r):I.call(e,"if_eq",e,"nowPlaying",r),(s||0===s)&&(l+=s),l+="\n					",r={hash:{},inverse:A.noop,fn:A.programWithDepth(22,g,t,i),data:t},a=n.if_eq,s=a?a.call(e,e,"queue",r):I.call(e,"if_eq",e,"queue",r),(s||0===s)&&(l+=s),l+="\n					",r={hash:{},inverse:A.noop,fn:A.programWithDepth(24,y,t,i),data:t},a=n.if_eq,s=a?a.call(e,e,"recommendations",r):I.call(e,"if_eq",e,"recommendations",r),(s||0===s)&&(l+=s),l+="\n					",r={hash:{},inverse:A.noop,fn:A.programWithDepth(26,b,t,i),data:t},a=n.if_eq,s=a?a.call(e,e,"announcements",r):I.call(e,"if_eq",e,"announcements",r),(s||0===s)&&(l+=s),l+="\n				</li>\n			"
}function m(e,t,i){var a;return a=n.unless.call(e,i.hasMultiUser,{hash:{},inverse:A.noop,fn:A.program(18,f,t),data:t}),a||0===a?a:""}function f(){return"hide"}function v(e,t,i){var a,r,l,o="";return o+='\n\n						<div id="dashboardNowPlayingPriority" class="sortable">\n							<i class="sortable-icon glyphicon show-lines"></i>\n							<label class="sortable-label" for="dashboardNowPlayingEnabled">\n								<input id="dashboardNowPlayingEnabled" name="dashboardNowPlayingEnabled" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardNowPlayingEnabled),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Now Playing",l):I.call(e,"t","Now Playing",l)))+"\n							</label>\n						</div>\n\n					"
}function g(e,t,i){var a,r,l,o="";return o+='\n\n						<div id="dashboardQueuePriority" class="sortable">\n							<a class="sortable-btn settings-btn open-settings-btn" rel="tooltip" title="',l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Widget Settings",l):I.call(e,"t","Widget Settings",l)))+'" href="#">\n								<i class="settings-icon glyphicon cogwheel"></i>\n							</a>\n\n							<a class="sortable-btn settings-btn close-settings-btn hide" href="#">\n								<i class="close-icon glyphicon circle-remove"></i>\n							</a>\n\n							<i class="sortable-icon glyphicon show-lines"></i>\n							<label class="sortable-label" for="dashboardQueueEnabled">\n								<input id="dashboardQueueEnabled" name="dashboardQueueEnabled" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardQueueEnabled),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Queue",l):I.call(e,"t","Queue",l)))+'\n							</label>\n						</div>\n\n						<div class="dashboard-widget-settings hide">\n							<label for="dashboardQueueLimit">\n								<input id="dashboardQueueLimit" name="dashboardQueueLimit" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardQueueLimit),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Limit to unwatched videos",l):I.call(e,"t","Limit to unwatched videos",l)))+'\n							</label>\n\n							<label for="dashboardQueueDynamicPriority">\n								<input id="dashboardQueueDynamicPriority" name="dashboardQueueDynamicPriority" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardQueueDynamicPriority),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Adjust priority based on when the most recent video was added",l):I.call(e,"t","Adjust priority based on when the most recent video was added",l)))+"\n							</label>\n						</div>\n\n					"
}function y(e,t,i){var a,r,l,o="";return o+='\n\n						<div id="dashboardRecommendationsPriority" class="sortable">\n							<a class="sortable-btn settings-btn open-settings-btn" rel="tooltip" title="',l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Widget Settings",l):I.call(e,"t","Widget Settings",l)))+'" href="#">\n								<i class="settings-icon glyphicon cogwheel"></i>\n							</a>\n\n							<a class="sortable-btn settings-btn close-settings-btn hide" href="#">\n								<i class="close-icon glyphicon circle-remove"></i>\n							</a>\n\n							<i class="sortable-icon glyphicon show-lines"></i>\n							<label class="sortable-label" for="dashboardRecommendationsEnabled">\n								<input id="dashboardRecommendationsEnabled" name="dashboardRecommendationsEnabled" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardRecommendationsEnabled),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Recommendations",l):I.call(e,"t","Recommendations",l)))+'\n							</label>\n						</div>\n\n						<div class="dashboard-widget-settings hide">\n							<label for="dashboardRecommendationsLimit">\n								<input id="dashboardRecommendationsLimit" name="dashboardRecommendationsLimit" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardRecommendationsLimit),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Limit to unwatched videos",l):I.call(e,"t","Limit to unwatched videos",l)))+'\n							</label>\n\n							<label for="dashboardRecommendationsDynamicPriority">\n								<input id="dashboardRecommendationsDynamicPriority" name="dashboardRecommendationsDynamicPriority" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardRecommendationsDynamicPriority),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Adjust priority based on when the most recent video was recommended",l):I.call(e,"t","Adjust priority based on when the most recent video was recommended",l)))+"\n							</label>\n						</div>\n\n					"
}function b(e,t,i){var a,r,l,o="";return o+='\n\n						<div id="dashboardAnnouncementsPriority" class="sortable">\n							<a class="sortable-btn settings-btn open-settings-btn" rel="tooltip" title="',l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Widget Settings",l):I.call(e,"t","Widget Settings",l)))+'" href="#">\n								<i class="settings-icon glyphicon cogwheel"></i>\n							</a>\n\n							<a class="sortable-btn settings-btn close-settings-btn hide" href="#">\n								<i class="close-icon glyphicon circle-remove"></i>\n							</a>\n\n							<i class="sortable-icon glyphicon show-lines"></i>\n							<label class="sortable-label" for="dashboardAnnouncementsEnabled">\n								<input id="dashboardAnnouncementsEnabled" name="dashboardAnnouncementsEnabled" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardAnnouncementsEnabled),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Announcements",l):I.call(e,"t","Announcements",l)))+'\n							</label>\n						</div>\n\n						<div class="dashboard-widget-settings hide">\n							<label for="dashboardAnnouncementsHideUnread">\n								<input id="dashboardAnnouncementsHideUnread" name="dashboardAnnouncementsHideUnread" type="checkbox" ',r=n["if"].call(e,(a=i.settings,null==a||a===!1?a:a.dashboardAnnouncementsHideUnread),{hash:{},inverse:A.noop,fn:A.program(1,s,t),data:t}),(r||0===r)&&(o+=r),o+="> ",l={hash:{},data:t},o+=P((a=n.t,a?a.call(e,"Hide when no unread announcements are available",l):I.call(e,"t","Hide when no unread announcements are available",l)))+"\n							</label>\n						</div>\n\n					"
}function w(e,t){var i,a,s="";return s+='\n		</div>\n\n		<div class="plex-pass-message-overlay">\n			<div class="empty-message plex-pass-message">\n				',a={hash:{},data:t},s+=P((i=n.t,i?i.call(e,"Sorry, you need a <a href='{1}' target='_blank'>PlexPass subscription</a> for this feature.","https://my.plexapp.com/subscription/about",a):I.call(e,"t","Sorry, you need a <a href='{1}' target='_blank'>PlexPass subscription</a> for this feature.","https://my.plexapp.com/subscription/about",a)))+"\n			</div>\n		</div>\n	</div>\n"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var x,k,S,C="",A=this,I=n.helperMissing,P=this.escapeExpression;return C+='<h3><i class="glyphicon dashboard"></i> ',S={hash:{},data:a},C+=P((x=n.t,x?x.call(t,"Dashboard",S):I.call(t,"t","Dashboard",S)))+'</h3>\n\n<div class="control-group">\n	<label class="checkbox" for="dashboardFluidWidth">\n		<input id="dashboardFluidWidth" name="dashboardFluidWidth" type="checkbox" class="input-dark" ',k=n["if"].call(t,(x=t.settings,null==x||x===!1?x:x.dashboardFluidWidth),{hash:{},inverse:A.noop,fn:A.program(1,s,a),data:a}),(k||0===k)&&(C+=k),C+="> &nbsp;",S={hash:{},data:a},C+=P((x=n.t,x?x.call(t,"Maximize width",S):I.call(t,"t","Maximize width",S)))+'\n	</label>\n	<p class="help-block">',S={hash:{},data:a},C+=P((x=n.t,x?x.call(t,"Expand the dashboard to use the full width of the page.",S):I.call(t,"t","Expand the dashboard to use the full width of the page.",S)))+"</p>\n</div>\n\n\n",k=n.unless.call(t,t.hasPlexPass,{hash:{},inverse:A.noop,fn:A.program(3,r,a),data:a}),(k||0===k)&&(C+=k),C+='\n\n<h3><i class="glyphicon posterous-spaces"></i> ',S={hash:{},data:a},C+=P((x=n.t,x?x.call(t,"Widgets",S):I.call(t,"t","Widgets",S)))+'</h3>\n\n<div class="dashboard-settings">\n	<div class="dashboard-settings-main">\n		<ul id="dashboard-settings-main-list" class="sortable-list">\n			',k=n.each.call(t,t.mainWidgets,{hash:{},inverse:A.noop,fn:A.programWithDepth(5,l,a,t),data:a}),(k||0===k)&&(C+=k),C+='\n		</ul>\n	</div>\n\n	<div class="dashboard-settings-sidebar">\n		<ul id="dashboard-settings-sidebar-list" class="sortable-list">\n			',k=n.each.call(t,t.sidebarWidgets,{hash:{},inverse:A.noop,fn:A.programWithDepth(16,p,a,t),data:a}),(k||0===k)&&(C+=k),C+="\n		</ul>\n	</div>\n</div>\n\n",k=n.unless.call(t,t.hasPlexPass,{hash:{},inverse:A.noop,fn:A.program(28,w,a),data:a}),(k||0===k)&&(C+=k),C+="\n"
})}),define("plex/view/server/settings/DashboardSettingsView",["hb!templates/server/settings/DashboardSettingsView.tpl","plex/model/AppModel","plex/view/BaseView","jquery","sortable"],function(e,t,n,i){var a=n.extend({id:"dashboard",className:"preferences-group wide",mainWidgets:null,sidebarWidgets:null,events:{"click .settings-btn":"onSettingsClick","sortupdate .sortable-list":"onSortUpdate"},initialize:function(){this.mainWidgets=[],this.sidebarWidgets=[],this.addWidget("myLibrary","dashboardMyLibraryPriority"),this.addWidget("onDeck","dashboardOnDeckPriority"),this.addWidget("recentlyAdded","dashboardRecentlyAddedPriority"),this.addWidget("channels","dashboardChannelsPriority"),this.addWidget("sharedLibraries","dashboardSharedLibrariesPriority"),this.addWidget("announcements","dashboardAnnouncementsPriority",!0),this.addWidget("nowPlaying","dashboardNowPlayingPriority",!0),this.addWidget("queue","dashboardQueuePriority",!0),this.addWidget("recommendations","dashboardRecommendationsPriority",!0)
},render:function(){var n=t.get("myPlex"),i=t.get("primaryServer"),a=i.get("multiuser")&&n.hasPlexPass();return this.$el.html(e({hasPlexPass:n.hasPlexPass(),hasMultiUser:a,mainWidgets:this.mainWidgets,sidebarWidgets:this.sidebarWidgets,settings:this.model.toJSON()})),this.$el.tooltip({selector:".sortable-btn",placement:"bottom"}),this.$(".sortable-list").sortable(),this.delegateEvents(),this},addWidget:function(e,t,n){var i=n?this.sidebarWidgets:this.mainWidgets,a=this.model.get(t)-1,s=function(e,t){return e[t]?s(e,++t):t
},r=s(i,a);r!==a&&this.model.save(t,r+1),i[r]=e},onSettingsClick:function(e){e.preventDefault();var t=i(e.currentTarget);t.toggleClass("active");var n=t.closest("li");n.find(".settings-btn").toggleClass("hide"),n.find(".dashboard-widget-settings").toggleClass("hide"),i(".tooltip").remove()},onSortUpdate:function(e){var t=i(e.currentTarget),n=t.children("li"),a={};n.each(function(e,t){i(t);var n=i(t).find(".sortable").attr("id");a[n]=e+1}),this.trigger("change:priority",a)}});return a}),define("plex/view/server/settings/PlexWebSettingsView",["hb!templates/server/settings/PlexWebSettingsView.tpl","plex/control/Dispatcher","plex/control/utils/LanguageUtil","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/BaseView","plex/view/server/settings/DashboardSettingsView","plex/view/modals/KeyboardShortcutsModal","jquery"],function(e,t,n,i,a,s,r,l,o){var c=[{value:75,label:"Tiny"},{value:90,label:"Small"},{value:100,label:"Normal"},{value:125,label:"Large"},{value:200,label:"Huge"}],d=[{value:100,label:"None"},{value:150,label:"Small"},{value:200,label:"Large"},{value:250,label:"Huge"}],h=[{value:0,label:"Disabled"},{value:1,label:"Enabled"},{value:2,label:"Verbose"}],u=s.extend({id:"plex-web-settings",className:"preferences-group",active:!1,changes:null,languages:null,videoQualities:null,dashboardSettings:null,events:{"click .preferences-nav a":"onPreferenceGroupClick","change input[name]":"onPreferenceChange","change select[name]":"onPreferenceChange","click .check-updates-btn":"onCheckUpdatesClick","click .download-updates-btn":"onDownloadUpdatesClick","click .reload-updates-btn":"onReloadUpdatesClick","click .keyboard-shortcuts-btn":"onKeyboardShortcutsClick","submit .preferences-form":"onSubmit","click .cancel-btn":"onCancelClick"},initialize:function(e){var t,s,l,o=a.get("primaryServer"),c=o.get("transcoderVideoQualities"),d=o.get("transcoderVideoBitrates"),h=o.get("transcoderVideoResolutions");
this.active=e.active,this.changes={},c&&(t=c.split(",")),d&&(s=d.split(",")),h&&(l=h.split(",")),this.languages=[],_.each(_.keys(i.languages),_.bind(function(e){this.languages.push({value:e,name:n.getLanguageName(e)})},this)),this.videoQualities=t&&t.length>1&&s&&s.length>1&&l&&l.length>1?_.zip(t,s,l):null,"latest"===a.get("updateStatus")&&a.set("updateStatus","none"),this.dashboardSettings=new r({model:this.model}),this.addBinding(a,"change:updateStatus",this.onUpdateStatusChange),this.addBinding(this.dashboardSettings,"change:priority",this.onDashboardPriorityChange)
},render:function(){var t=a.get("myPlex"),n=a.get("primaryServer");return this.$el.html(e({hasPlexPass:t.hasPlexPass(),shared:n.get("shared"),version:a.get("version"),updateStatus:a.get("updateStatus"),settings:this.model.toJSON(),languages:this.languages,videoQualities:this.videoQualities,subtitleSizes:c,audioLevels:d,debugLevels:h})),this.active||this.$el.addClass("hide"),this.$("#general").after(this.dashboardSettings.render().el),this},save:function(e){var n=a.get("myPlex"),s=n.hasPlexPass(),r=!1;
if(_.each(_.keys(this.changes),_.bind(function(e){return!s&&_.indexOf(this.model.plexPassSettings,e)>-1?(r=!0,a.set("alert",{status:"error",message:i.t("Sorry, you need a PlexPass subscription to save some of these settings.")}),!1):void 0},this)),!r){var l=!1,o=function(){e||t.trigger("navigate:back"),t.off("change:language",o)};t.on("change:language",o),this.changes.language&&(l=!0),this.model.save(this.changes,{success:_.bind(function(){this.changes={},this.trigger("save",!0),l||(t.off("change:language",o),e||t.trigger("navigate:back"))
},this),error:_.bind(function(){a.set("alert",{status:"error",message:i.t("There was a problem saving your settings.")})},this)})}},onPreferenceGroupClick:function(e){e.preventDefault();var t=o(e.target),n=t.attr("href");this.$(".preferences-group").removeClass("active"),this.$(n).addClass("active"),this.$(".preferences-nav li").removeClass("active"),t.parent("li").addClass("active")},onPreferenceChange:function(e){var t=o(e.currentTarget),n=e.currentTarget,i=n.value;"checkbox"===n.type&&(i=t.prop("checked")),"int"===t.data("type")&&(i=parseInt(i,10)),this.changes[n.name]=i
},onUpdateStatusChange:function(e,t){"download"===t?(this.$(".download-updates-btn").removeClass("hide"),this.$(".check-updates-btn, .reload-updates-btn, .latest-updates").addClass("hide")):"reload"===t?(this.$(".reload-updates-btn").removeClass("hide"),this.$(".check-updates-btn, .download-updates-btn, .latest-updates").addClass("hide")):"latest"===t?(this.$(".latest-updates").removeClass("hide"),this.$(".check-updates-btn, .download-updates-btn, .reload-updates-btn").addClass("hide")):(this.$(".check-updates-btn").removeClass("hide"),this.$(".download-updates-btn, .reload-updates-btn, .latest-updates").addClass("hide"))
},onDashboardPriorityChange:function(e){this.changes=_.extend(this.changes,e)},onCheckUpdatesClick:function(e){e.preventDefault(),t.trigger("command:CheckForUpdates",!0)},onDownloadUpdatesClick:function(e){e.preventDefault(),t.trigger("command:InstallUpdate")},onReloadUpdatesClick:function(e){e.preventDefault(),window.location.reload(!0)},onKeyboardShortcutsClick:function(e){e.preventDefault(),a.set("modal",new l)},onSubmit:function(e){e.preventDefault(),this.save()},onCancelClick:function(e){e.preventDefault(),t.trigger("navigate:back")
}});return u}),define("plex/view/server/settings/SettingsView",["hb!templates/server/settings/SettingsView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/model/SettingsModel","plex/view/BaseView","plex/view/server/settings/ServerSettingsView","plex/view/server/settings/PlexWebSettingsView","jquery"],function(e,t,n,i,a,s,r,l){var o=a.extend({className:"container container-full",serverSettings:null,plexWebSettings:null,plexWebActive:!1,events:{"click .media-server-filter":"onMediaServerClick","click .plex-web-filter":"onPlexWebClick","click .standard-toggle":"onStandardToggleClick","click .advanced-toggle":"onAdvancedToggleClick"},initialize:function(){var e=this.model.get("shared");
this.plexWebActive=e||i.get("plexWebSettingsOpen"),this.serverSettings=this.registerView(new s({model:this.model,active:!this.plexWebActive})),this.plexWebSettings=this.registerView(new r({model:i,active:this.plexWebActive})),this.addBinding(t,"shortcut:save",this.save),this.addBinding(n,"change:primaryServer",this.onPrimaryServerChange)},render:function(){return this.$el.html(e({server:this.model.toJSON(),plexWebActive:this.plexWebActive})),this.$(".settings-container").append(this.serverSettings.render().el),this.$(".settings-container").append(this.plexWebSettings.render().el),this
},save:function(){"mediaServer"===this.view?this.serverSettings.save():this.plexWebSettings.save()},onPrimaryServerChange:function(e,n){t.trigger("navigate:settings",n.id)},onMediaServerClick:function(e){e.preventDefault(),this.$(".standard-toggle").hasClass("hide"),this.view="mediaServer",this.$(".settings-filter").removeClass("active"),this.$(".media-server-filter").addClass("active"),this.$("#media-server-settings").removeClass("hide"),this.$("#plex-web-settings").addClass("hide"),i.save("plexWebSettingsOpen",!1)
},onPlexWebClick:function(e){e.preventDefault(),this.$(".standard-toggle").hasClass("hide"),this.view="plexWeb",this.$(".settings-filter").removeClass("active"),this.$(".plex-web-filter").addClass("active"),this.$("#media-server-settings").addClass("hide"),this.$("#plex-web-settings").removeClass("hide"),i.save("plexWebSettingsOpen",!0)},onStandardToggleClick:function(e){e.preventDefault(),this.$(".standard-toggle, .standard-prefs, .standard-pref").addClass("hide"),this.$(".advanced-toggle, .advanced-prefs, .advanced-pref").removeClass("hide")
},onAdvancedToggleClick:function(e){e.preventDefault(),this.$(".advanced-prefs").hasClass("active")&&this.$(".preferences-nav").each(function(e,t){l(t).find("li:first a").click()}),this.$(".standard-toggle, .standard-prefs, .standard-pref").removeClass("hide"),this.$(".advanced-toggle, .advanced-prefs, .advanced-pref").addClass("hide")}});return o}),define("hb!templates/server/NotificationsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"disabled"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var r,l,o,c="",d=n.helperMissing,h=this.escapeExpression,u="function",p=this;return c+='<div id="notifications-container" class="well">\n	<div class="well-header">\n		<ul class="well-header-actions">\n			<li class="notifications-time">\n				',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Since",o):d.call(t,"t","Since",o)))+" ",o={hash:{},data:a},c+=h((r=n.formatDateCustom,r?r.call(t,t.startTime,"LT",o):d.call(t,"formatDateCustom",t.startTime,"LT",o)))+'\n			</li>\n			<li class="well-header-pagination">\n				<span class="page">',(l=n.page)?l=l.call(t,{hash:{},data:a}):(l=t.page,l=typeof l===u?l.apply(t):l),c+=h(l)+"</span> ",o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"of",o):d.call(t,"t","of",o)))+' <span class="pages">',(l=n.pages)?l=l.call(t,{hash:{},data:a}):(l=t.pages,l=typeof l===u?l.apply(t):l),c+=h(l)+'</span>\n			</li>\n			<li>\n				<div class="btn-group btn-group-inverse">\n					<button type="button" class="previous-btn btn btn-inverse btn-icon disabled"><i class="glyphicon chevron-left"></i></button>\n					<button type="button" class="next-btn btn btn-inverse btn-icon ',l=n.unless.call(t,t.showNext,{hash:{},inverse:p.noop,fn:p.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='"><i class="glyphicon chevron-right"></i></button>\n				</div>\n			</li>\n		</ul>\n\n		<h3>',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Notifications",o):d.call(t,"t","Notifications",o)))+' <span class="well-header-count">',(l=n.count)?l=l.call(t,{hash:{},data:a}):(l=t.count,l=typeof l===u?l.apply(t):l),c+=h(l)+"</span></h3>\n	</div>\n</div>\n"
})}),define("hb!templates/server/ActivityNavView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+="\n				",a={hash:{},data:t},s+=f((i=n.t,i?i.call(e,(i=e.server,null==i||i===!1?i:i.friendlyName),20,a):m.call(e,"t",(i=e.server,null==i||i===!1?i:i.friendlyName),20,a)))+"\n			"}function r(e,t){var i,a,s="";return s+="\n				",a={hash:{},data:t},s+=f((i=n.t,i?i.call(e,(i=e.server,null==i||i===!1?i:i.name),20,a):m.call(e,"t",(i=e.server,null==i||i===!1?i:i.name),20,a)))+"\n			"
}function l(){return"active"}function o(e,t){var i,a,s,r="";return r+='\n		<li><a class="gray ',s={hash:{},inverse:v.noop,fn:v.program(5,l,t),data:t},i=n.if_eq,a=i?i.call(e,e.active,"sync",s):m.call(e,"if_eq",e.active,"sync",s),(a||0===a)&&(r+=a),r+='" href="#!/sync">',s={hash:{},data:t},r+=f((i=n.t,i?i.call(e,"Sync Status",s):m.call(e,"t","Sync Status",s)))+"</a></li>\n	"}function c(e,t){var i,a,s,r="";return r+='\n		<li><a class="gray ',s={hash:{},inverse:v.noop,fn:v.program(5,l,t),data:t},i=n.if_eq,a=i?i.call(e,e.active,"nowplaying",s):m.call(e,"if_eq",e.active,"nowplaying",s),(a||0===a)&&(r+=a),r+='" href="#!/nowplaying">',s={hash:{},data:t},r+=f((i=n.t,i?i.call(e,"Now Playing",s):m.call(e,"t","Now Playing",s)))+"</a></li>\n	"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var d,h,u,p="",m=n.helperMissing,f=this.escapeExpression,v=this;return p+='<ul class="subnav-actions">\n	<li>\n		<span class="subnav-action-label source-title">\n			',h=n["if"].call(t,(d=t.server,null==d||d===!1?d:d.friendlyName),{hash:{},inverse:v.program(3,r,a),fn:v.program(1,s,a),data:a}),(h||0===h)&&(p+=h),p+='\n		</span>\n	</li>\n</ul>\n\n<ul class="subnav-list">\n	<li><i class="subnav-icon glyphicon cardio"></i></li>\n\n	<li><a class="gray ',u={hash:{},inverse:v.noop,fn:v.program(5,l,a),data:a},d=n.if_eq,h=d?d.call(t,t.active,"notifications",u):m.call(t,"if_eq",t.active,"notifications",u),(h||0===h)&&(p+=h),p+='" href="#!/notifications">',u={hash:{},data:a},p+=f((d=n.t,d?d.call(t,"Notifications",u):m.call(t,"t","Notifications",u)))+"</a></li>\n\n	",h=n["if"].call(t,t.showSync,{hash:{},inverse:v.noop,fn:v.program(7,o,a),data:a}),(h||0===h)&&(p+=h),p+="\n\n	",h=n["if"].call(t,t.showNowPlaying,{hash:{},inverse:v.noop,fn:v.program(9,c,a),data:a}),(h||0===h)&&(p+=h),p+="\n</ul>\n"
})}),define("plex/view/server/ActivityNavView",["hb!templates/server/ActivityNavView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView"],function(e,t,n,i){var a=i.extend({className:"subnav-container",active:null,initialize:function(e){this.active=e.active;var t=n.get("myPlex");this.addBinding(t.get("devices"),"reset",this.render),this.addBinding(n,"change:primaryServer",this.onPrimaryServerChange)},render:function(){var n=this.showSync(),i=this.showNowPlaying();return(!n&&"sync"===this.active||!i&&"nowplaying"===this.active)&&_.defer(function(){t.trigger("navigate:notifications")
}),this.$el.html(e({active:this.active,showSync:n,showNowPlaying:i,server:this.model.toJSON()})),this},showSync:function(){var e=n.get("myPlex"),t=e.get("devices").getSyncDevices();return this.model.supports("sync")&&t.length&&e.hasSync()?!0:!1},showNowPlaying:function(){var e=n.get("myPlex"),t=this.model.get("multiuser")&&e.hasPlexPass();return t},onPrimaryServerChange:function(e,n){t.trigger("navigate:"+this.active,n.id)}});return a}),define("hb!templates/lists/server/items/ServerEventListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return'\n	<i class="server-event-icon glyphicon settings"></i>\n'
}function r(e,t){var i,a,s;return s={hash:{},inverse:U.program(6,o,t),fn:U.program(4,l,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.event,null==i||i===!1?i:i._type),"status",s):H.call(e,"if_eq",(i=e.event,null==i||i===!1?i:i._type),"status",s),a||0===a?a:""}function l(){return'\n	<i class="server-event-icon glyphicon bullhorn"></i>\n'}function o(e,t){var i,a,s;return s={hash:{},inverse:U.program(9,d,t),fn:U.program(7,c,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.event,null==i||i===!1?i:i._type),"playing",s):H.call(e,"if_eq",(i=e.event,null==i||i===!1?i:i._type),"playing",s),a||0===a?a:""
}function c(){return'\n	<i class="server-event-icon glyphicon imac"></i>\n'}function d(e,t){var i,a,s;return s={hash:{},inverse:U.program(15,m,t),fn:U.program(10,h,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.event,null==i||i===!1?i:i._type),"websocket",s):H.call(e,"if_eq",(i=e.event,null==i||i===!1?i:i._type),"websocket",s),a||0===a?a:""}function h(e,t){var i,a,s="";return s+="\n	",a=n["if"].call(e,(i=e.event,null==i||i===!1?i:i.opened),{hash:{},inverse:U.program(13,p,t),fn:U.program(11,u,t),data:t}),(a||0===a)&&(s+=a),s+="\n"
}function u(){return'\n		<i class="server-event-icon glyphicon bullhorn"></i>\n	'}function p(){return'\n		<i class="server-event-icon glyphicon warning-sign"></i>\n	'}function m(e,t){var i,a,s;return s={hash:{},inverse:U.program(18,v,t),fn:U.program(16,f,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.event,null==i||i===!1?i:i.state),0,s):H.call(e,"if_eq",(i=e.event,null==i||i===!1?i:i.state),0,s),a||0===a?a:""}function f(){return'\n	<i class="server-event-icon glyphicon-plus"></i>\n'}function v(e,t){var i,a,s;
return s={hash:{},inverse:U.program(21,y,t),fn:U.program(19,g,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.event,null==i||i===!1?i:i.state),5,s):H.call(e,"if_eq",(i=e.event,null==i||i===!1?i:i.state),5,s),a||0===a?a:""}function g(){return'\n	<i class="server-event-icon glyphicon ok-2"></i>\n'}function y(e,t){var i,a,s;return s={hash:{},inverse:U.program(24,w,t),fn:U.program(22,b,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.event,null==i||i===!1?i:i.state),6,s):H.call(e,"if_eq",(i=e.event,null==i||i===!1?i:i.state),6,s),a||0===a?a:""
}function b(){return'\n	<i class="server-event-icon glyphicon magic"></i>\n'}function w(e,t){var i,a,s;return s={hash:{},inverse:U.program(27,k,t),fn:U.program(25,x,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.event,null==i||i===!1?i:i.state),9,s):H.call(e,"if_eq",(i=e.event,null==i||i===!1?i:i.state),9,s),a||0===a?a:""}function x(){return'\n	<i class="server-event-icon glyphicon ban"></i>\n'}function k(){return'\n	<i class="server-event-icon glyphicon cogwheels"></i>\n'}function S(e,t){var i,a,s="";return s+="\n	",a={hash:{},data:t},s+=z((i=n.t,i?i.call(e,"Preference {1} set to {2}.",(i=e.event,null==i||i===!1?i:i.label),(i=e.event,null==i||i===!1?i:i.value),a):H.call(e,"t","Preference {1} set to {2}.",(i=e.event,null==i||i===!1?i:i.label),(i=e.event,null==i||i===!1?i:i.value),a)))+"\n"
}function C(e,t){var i,a,s;return s={hash:{},inverse:U.program(38,T,t),fn:U.program(32,A,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.event,null==i||i===!1?i:i._type),"status",s):H.call(e,"if_eq",(i=e.event,null==i||i===!1?i:i._type),"status",s),a||0===a?a:""}function A(e,t){var i,a,s="";return s+="\n	",a=n["if"].call(e,(i=e.event,null==i||i===!1?i:i.message),{hash:{},inverse:U.program(35,P,t),fn:U.program(33,I,t),data:t}),(a||0===a)&&(s+=a),s+="\n"}function I(e,t){var i,a,s="";return s+="\n		",a={hash:{},data:t},s+=z((i=n.t,i?i.call(e,(i=e.event,null==i||i===!1?i:i.message),a):H.call(e,"t",(i=e.event,null==i||i===!1?i:i.message),a)))+"\n	"
}function P(e,t){var i,a,s,r="";return r+="\n		",s={hash:{},data:t},r+=z((i=n.t,i?i.call(e,(i=e.event,null==i||i===!1?i:i.title),s):H.call(e,"t",(i=e.event,null==i||i===!1?i:i.title),s))),a=n["if"].call(e,(i=e.event,null==i||i===!1?i:i.description),{hash:{},inverse:U.noop,fn:U.program(36,_,t),data:t}),(a||0===a)&&(r+=a),r+="\n	"}function _(e,t){var i,a,s="";return s+=": ",a={hash:{},data:t},s+=z((i=n.t,i?i.call(e,(i=e.event,null==i||i===!1?i:i.description),a):H.call(e,"t",(i=e.event,null==i||i===!1?i:i.description),a)))
}function T(e,t){var i,a,s;return s={hash:{},inverse:U.program(41,D,t),fn:U.program(39,M,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.event,null==i||i===!1?i:i._type),"timeline",s):H.call(e,"if_eq",(i=e.event,null==i||i===!1?i:i._type),"timeline",s),a||0===a?a:""}function M(e,t){var i,a,s,r="";return r+="\n	",s={hash:{},data:t},r+=z((i=n.t,i?i.call(e,(i=e.event,null==i||i===!1?i:i.stateString),s):H.call(e,"t",(i=e.event,null==i||i===!1?i:i.stateString),s)))+'\n	<a href="#!/servers/',(a=n.serverID)?a=a.call(e,{hash:{},data:t}):(a=e.serverID,a=typeof a===W?a.apply(e):a),r+=z(a)+"/sections/"+z((i=e.event,i=null==i||i===!1?i:i.sectionID,typeof i===W?i.apply(e):i))+"/details/"+z((i=e.event,i=null==i||i===!1?i:i.itemID,typeof i===W?i.apply(e):i))+'">'+z((i=e.event,i=null==i||i===!1?i:i.mediaTitle,typeof i===W?i.apply(e):i))+"</a>\n	",s={hash:{},data:t},r+=z((i=n.t,i?i.call(e,"in",s):H.call(e,"t","in",s)))+'\n	<a href="#!/servers/',(a=n.serverID)?a=a.call(e,{hash:{},data:t}):(a=e.serverID,a=typeof a===W?a.apply(e):a),r+=z(a)+"/sections/"+z((i=e.event,i=null==i||i===!1?i:i.sectionID,typeof i===W?i.apply(e):i))+'">'+z((i=e.event,i=null==i||i===!1?i:i.sectionTitle,typeof i===W?i.apply(e):i))+"</a>\n"
}function D(e,t){var i,a,s;return s={hash:{},inverse:U.program(44,E,t),fn:U.program(42,L,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.event,null==i||i===!1?i:i._type),"playing",s):H.call(e,"if_eq",(i=e.event,null==i||i===!1?i:i._type),"playing",s),a||0===a?a:""}function L(e,t){var i,a,s="";return s+="\n	",a={hash:{},data:t},s+=z((i=n.t,i?i.call(e,"{1} started watching {2} on {3}.",(i=e.event,null==i||i===!1?i:i.username),(i=e.event,null==i||i===!1?i:i.title),(i=e.event,null==i||i===!1?i:i.device),a):H.call(e,"t","{1} started watching {2} on {3}.",(i=e.event,null==i||i===!1?i:i.username),(i=e.event,null==i||i===!1?i:i.title),(i=e.event,null==i||i===!1?i:i.device),a)))+"\n"
}function E(e,t){var i,a,s;return s={hash:{},inverse:U.noop,fn:U.program(45,N,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.event,null==i||i===!1?i:i._type),"websocket",s):H.call(e,"if_eq",(i=e.event,null==i||i===!1?i:i._type),"websocket",s),a||0===a?a:""}function N(e,t){var i,a,s="";return s+="\n	",a=n["if"].call(e,(i=e.event,null==i||i===!1?i:i.opened),{hash:{},inverse:U.program(48,R,t),fn:U.program(46,O,t),data:t}),(a||0===a)&&(s+=a),s+="\n"}function O(e,t){var i,a,s="";return s+="\n		",a={hash:{},data:t},s+=z((i=n.t,i?i.call(e,"Opened connection to {1}, listening for events.",e.serverName,a):H.call(e,"t","Opened connection to {1}, listening for events.",e.serverName,a)))+"\n	"
}function R(e,t){var i,a;return a=n["if"].call(e,(i=e.event,null==i||i===!1?i:i.closed),{hash:{},inverse:U.program(51,B,t),fn:U.program(49,$,t),data:t}),a||0===a?a:""}function $(e,t){var i,a,s="";return s+="\n		",a={hash:{},data:t},s+=z((i=n.t,i?i.call(e,"Connection to {1} closed.",e.serverName,a):H.call(e,"t","Connection to {1} closed.",e.serverName,a)))+"\n	"}function B(e,t){var i,a,s="";return s+="\n		",a={hash:{},data:t},s+=z((i=n.t,i?i.call(e,"Unable to listen for events on {1}.",e.serverName,a):H.call(e,"t","Unable to listen for events on {1}.",e.serverName,a)))+"\n	"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var j,V,q,F="",U=this,H=n.helperMissing,z=this.escapeExpression,W="function";return q={hash:{},inverse:U.program(3,r,a),fn:U.program(1,s,a),data:a},j=n.if_eq,V=j?j.call(t,(j=t.event,null==j||j===!1?j:j._type),"preference",q):H.call(t,"if_eq",(j=t.event,null==j||j===!1?j:j._type),"preference",q),(V||0===V)&&(F+=V),F+='\n\n<div class="server-event-details">\n<span class="server-event-time">',q={hash:{},data:a},F+=z((j=n.formatDateCustom,j?j.call(t,(j=t.event,null==j||j===!1?j:j.time),"LT",q):H.call(t,"formatDateCustom",(j=t.event,null==j||j===!1?j:j.time),"LT",q)))+"</span>\n",q={hash:{},inverse:U.program(31,C,a),fn:U.program(29,S,a),data:a},j=n.if_eq,V=j?j.call(t,(j=t.event,null==j||j===!1?j:j._type),"preference",q):H.call(t,"if_eq",(j=t.event,null==j||j===!1?j:j._type),"preference",q),(V||0===V)&&(F+=V),F+="\n</div>\n"
})}),define("plex/view/lists/server/items/ServerEventListItem",["hb!templates/lists/server/items/ServerEventListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",className:"server-event-list-item",render:function(){var t={serverID:this.model.server.id,serverName:this.model.server.get("friendlyName"),event:this.model.toJSON()};if("timeline"==this.model.get("_type"))switch(t.event.sectionTitle=this.model.get("section")?this.model.get("section").get("title"):"section "+this.model.get("sectionID"),t.event.mediaTitle=this.model.get("title")||"item "+this.model.get("itemID"),this.model.get("state")){case 0:t.event.stateString="Created";
break;case 1:t.event.stateString="Progress for";break;case 2:t.event.stateString="Matching";break;case 3:t.event.stateString="Downloading metadata for";break;case 4:t.event.stateString="Loading metadata for";break;case 5:t.event.stateString="Finished processing";break;case 6:t.event.stateString="Analyzing";break;case 9:t.event.stateString="Deleted"}return this.$el.html(e(t)),this}});return n}),define("plex/view/lists/server/ServerEventList",["plex/view/lists/BaseList","plex/view/lists/server/items/ServerEventListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"list server-event-list",reverseItems:!0,initialize:function(){this.setup(t)
},setup:function(e,t){this.items={},this.ListItem=e,this.selector=t,this.collection&&this.addBinding(this.collection,"reset",this.reset)},render:function(){return this.$el.empty(),this.populate(this.collection),this},rebase:function(e){this.collection&&this.removeBinding(this.collection,"reset"),this.collection=e,this.addBinding(e,"reset",this.reset),this.reset(e)}});return n}),define("plex/view/server/NotificationsView",["hb!templates/server/NotificationsView.tpl","plex/model/collections/ServerEventCollection","plex/view/BaseView","plex/view/server/ActivityNavView","plex/view/lists/server/ServerEventList"],function(e,t,n,i,a){var s=n.extend({className:"container container-full",subnav:null,page:1,listItems:null,list:null,events:{"click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick"},initialize:function(){var e=this.model.get("timeline");
this.listItems=new t(e.page(this.page,!0),{server:this.model}),this.subnav=this.registerView(new i({model:this.model,active:"notifications"})),this.list=this.registerView(new a({collection:this.listItems})),this.addBinding(e,"add",_.throttle(function(e,t){this.updatePaginationControls(),this.$(".well-header-count").text(t.length),this.listItems.reset(t.page(this.page,!0))},1e3))},render:function(){var t=this.model.get("timeline"),n=t.pages();return this.$el.html(e({startTime:t.startTime,count:t.length,page:this.page,pages:n,showNext:n>1})),this.$el.prepend(this.subnav.render().el),this.$("#notifications-container").append(this.list.render().el),this
},updatePaginationControls:function(){var e=this.model.get("timeline"),t=e.pages();this.page>1?this.$(".previous-btn").removeClass("disabled"):this.$(".previous-btn").addClass("disabled"),t>this.page?this.$(".next-btn").removeClass("disabled"):this.$(".next-btn").addClass("disabled"),this.$(".page").text(this.page),this.$(".pages").text(t)},onPreviousClick:function(e){e.preventDefault();var t=this.model.get("timeline");this.page>1&&(this.page--,this.updatePaginationControls(),this.listItems.reset(t.page(this.page,!0)))
},onNextClick:function(e){e.preventDefault();var t=this.model.get("timeline");this.page<t.pages()&&(this.page++,this.updatePaginationControls(),this.listItems.reset(t.page(this.page,!0)))}});return s}),define("hb!templates/server/SyncStatusView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div id="sync-status-container" class="well">\n	<div class="well-header">\n		<ul class="well-header-actions">\n			<li><button type="button" class="edit-btn btn btn-inverse btn-icon" rel="tooltip" title="',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Edit",r):o.call(t,"t","Edit",r)))+'"><i class="glyphicon pencil"></i></button></li>\n			<li><button type="button" class="refresh-btn btn btn-inverse btn-icon" rel="tooltip" title="',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Refresh",r):o.call(t,"t","Refresh",r)))+'"><i class="glyphicon repeat"></i></button></li>\n		</ul>\n\n		<h3>',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Sync Status",r):o.call(t,"t","Sync Status",r)))+"</h3>\n	</div>\n</div>\n"
})}),define("hb!templates/lists/server/items/SyncDeviceListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"ipad"}function r(e,t){var i;return i=n["if"].call(e,e.cloud,{hash:{},inverse:f.program(6,o,t),fn:f.program(4,l,t),data:t}),i||0===i?i:""}function l(){return"cloud"}function o(){return"iphone"}function c(e){var t;return g((t=e.device,t=null==t||t===!1?t:t.name,typeof t===v?t.apply(e):t))}function d(e){var t;return g((t=e.device,t=null==t||t===!1?t:t.device,typeof t===v?t.apply(e):t))
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var h,u,p,m="",f=this,v="function",g=this.escapeExpression,y=n.helperMissing;return m+='<h3><i class="glyphicon ',h=n["if"].call(t,t.tablet,{hash:{},inverse:f.program(3,r,a),fn:f.program(1,s,a),data:a}),(h||0===h)&&(m+=h),m+='"></i> ',u=n["if"].call(t,(h=t.device,null==h||h===!1?h:h.name),{hash:{},inverse:f.program(10,d,a),fn:f.program(8,c,a),data:a}),(u||0===u)&&(m+=u),m+='</h3>\n\n<p class="empty-message hide">',p={hash:{},data:a},m+=g((h=n.t,h?h.call(t,"Nothing is synced to this device.",p):y.call(t,"t","Nothing is synced to this device.",p)))+"</p>\n"
})}),define("hb!templates/lists/server/items/SyncItemTileListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"folder"}function r(){return"poster"}function l(){return"hide"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var o,c,d="",h=this;return d+='<a href="#">\n	<div class="poster-container">\n		<div class="poster-card">\n			<div class="poster-face front">\n				<img class="media-poster poster" src="img/posters/',c=n["if"].call(t,(o=t.syncItem,null==o||o===!1?o:o.directory),{hash:{},inverse:h.program(3,r,a),fn:h.program(1,s,a),data:a}),(c||0===c)&&(d+=c),d+='.png">\n\n				<div class="sync-status">\n					<div class="sync-status-transcode hide">\n						<canvas class="circle-progress-bar" width="54" height="54"></canvas>\n						<div class="sync-speed"></div>\n					</div>\n\n					<i class="sync-status-icon sync-complete-icon glyphicon ok-2 hide"></i>\n					<i class="sync-status-icon sync-waiting-icon glyphicon circle-arrow-down hide"></i>\n					<i class="sync-status-icon sync-processing-icon glyphicon more hide"></i>\n					<i class="sync-status-icon sync-failed-icon glyphicon warning-sign ',c=n.unless.call(t,t.failed,{hash:{},inverse:h.noop,fn:h.program(5,l,a),data:a}),(c||0===c)&&(d+=c),d+='"></i>\n					<i class="sync-status-icon sync-unknown-icon glyphicon circle-question-mark ',c=n["if"].call(t,t.failed,{hash:{},inverse:h.noop,fn:h.program(5,l,a),data:a}),(c||0===c)&&(d+=c),d+='"></i>\n				</div>\n\n				<div class="hover-overlay card-overlay">\n					<button type="button" class="hover-menu-btn poster-edit-btn" tabindex="-1"><i class="glyphicon pencil"></i></button><button type="button" class="hover-menu-btn hover-menu-btn-danger poster-delete-btn" tabindex="-1"><i class="glyphicon ban"></i></button>\n				</div>\n			</div>\n		</div>\n	</div>\n\n	<div class="poster-title"></div>\n	<div class="poster-subtitle"></div>\n	<div class="sync-time-remaining poster-sort"></div>\n</a>\n'
})}),define("plex/model/media/collections/SyncMediaCollection",["plex/model/collections/BaseCollection","plex/model/media/SyncMediaModel","jquery"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.server=t.server,this.syncItemId=t.syncItemId},url:function(){return"/sync/items/"+this.syncItemId},parse:function(e){var t=this.convert(e),n=[],i=_.compact(n.concat(t.Directory,t.Video,t.Track,t.Photo));return _.each(i,_.bind(function(e){e.syncItemId=this.syncItemId},this)),i}});return n
}),define("hb!templates/modals/SyncStatusModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e){var t,n="";return n+='\n		<h4><i class="glyphicon warning-sign"></i> '+h((t=e.Status,t=null==t||t===!1?t:t.failure,typeof t===d?t.apply(e):t))+"</h4>\n	"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l,o,c="",d="function",h=this.escapeExpression,u=n.helperMissing,p=this;return c+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon refresh"></i> ',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Sync Status",o):u.call(t,"t","Sync Status",o)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	<h3 class="sync-item-title">',(l=n.rootTitle)?l=l.call(t,{hash:{},data:a}):(l=t.rootTitle,l=typeof l===d?l.apply(t):l),c+=h(l)+" &middot; ",(l=n.title)?l=l.call(t,{hash:{},data:a}):(l=t.title,l=typeof l===d?l.apply(t):l),c+=h(l)+"</h3>\n\n	",l=n["if"].call(t,(r=t.Status,null==r||r===!1?r:r.failure),{hash:{},inverse:p.noop,fn:p.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+="\n</div>\n"
})}),define("hb!templates/lists/server/items/SyncStatusListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="poster-container">\n	<img class="poster small-poster">\n</div>\n\n<p class="title"></p>\n\n<p class="complete-subtitle subtitle hide">\n	<i class="glyphicon ok-2"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Synced",r):o.call(t,"t","Synced",r)))+'\n</p>\n\n<p class="waiting-subtitle subtitle hide">\n	<i class="glyphicon circle-arrow-down"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Waiting to be downloaded",r):o.call(t,"t","Waiting to be downloaded",r)))+'\n</p>\n\n<p class="downloading-subtitle subtitle hide">\n	<i class="glyphicon more"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Downloading",r):o.call(t,"t","Downloading",r)))+' &middot; <span class="transcode-progress"></span>%\n</p>\n\n<p class="converting-subtitle subtitle hide">\n	<i class="glyphicon more"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Converting",r):o.call(t,"t","Converting",r)))+' &middot; <span class="transcode-progress"></span>% &middot; <span class="transcode-remaining"></span>\n</p>\n\n<p class="processing-subtitle subtitle hide">\n	<i class="glyphicon more"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Waiting to be converted",r):o.call(t,"t","Waiting to be converted",r)))+'\n</p>\n\n<p class="unknown-subtitle subtitle hide">\n	<i class="glyphicon circle-question-mark"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Unknown",r):o.call(t,"t","Unknown",r)))+'\n</p>\n\n<p class="failed-subtitle subtitle hide">\n	<i class="glyphicon warning-sign"></i> <span class="error-message"></span>\n</p>\n'
})}),define("plex/view/lists/server/items/SyncStatusListItem",["hb!templates/lists/server/items/SyncStatusListItem.tpl","plex/control/utils/NumberUtil","plex/view/BaseView"],function(e,t,n){var i=n.extend({tagName:"li",transcodeJobs:null,initialize:function(e){this.syncItem=e.list.syncItem,this.transcodeJobs=this.model.server.get("transcodeJobs"),this.addBinding(this.transcodeJobs,"reset",function(){this.model.trigger("change:Media",this.model,this.model.get("Media"))})},render:function(){return this.$el.html(e()),this.bindView(),this
},analyzeTranscodeJobs:function(){var e;if(this.transcodeJobs.each(_.bind(function(t){var n=this.model.get("thumb"),i=this.model.get("title"),a=t.get("transcodeThumb"),s=t.get("title"),r=s.indexOf(i)>-1,l=!0;if(n&&a){var o=RegExp("(.+)"+t.get("thumb")+"$");l=o.exec(n)}this.syncItem.id===t.get("syncItemId")&&r&&l&&(e=t)},this)),e&&e.get("progress")>0){var n=Math.round(10*e.get("speed"))/10,i=t.formatMinutesRemaining(e.get("remaining")),a=Math.round(10*e.get("progress"))/10;return{active:!0,speed:n,remaining:i,progress:a}
}return{active:!1}},analyzeParts:function(){var e=/^(transcoded|downloaded|directplay)$/,t=/^downloading$/,n=/^(pending|transcoding)$/,i=/^failed$/,a="complete",s=this.model.get("Media");if(!s.length)return"unknown";for(var r=0,l=s.length;l>r;r++)for(var o=s[r].Part,c=0,d=o.length;d>c;c++){var h=o[c],u=h.transcodeState;i.test(u)&&(a=h.transcodeStateContext),n.test(u)&&(a="processing"),t.test(u)&&(a="downloading"),e.test(u)&&"processing"!==a&&(a=h.key?"waiting":"processing")}return a},bindings:{".title":{modelAttr:"title"},".subtitle":{modelAttr:"Media",format:function(){var e=this.analyzeParts(),t=this.analyzeTranscodeJobs();
switch(this.$(".subtitle").addClass("hide"),e){case"complete":this.$(".complete-subtitle").removeClass("hide");break;case"waiting":this.$(".waiting-subtitle").removeClass("hide");break;case"downloading":t.active?(this.$(".downloading-subtitle").removeClass("hide"),this.$(".transcode-progress").text(t.progress)):this.$(".processing-subtitle").removeClass("hide");break;case"processing":t.active?(this.$(".converting-subtitle").removeClass("hide"),this.$(".transcode-progress").text(t.progress),this.$(".transcode-remaining").text(t.remaining)):this.$(".processing-subtitle").removeClass("hide");
break;case"unknown":this.$(".unknown-subtitle").removeClass("hide");break;default:this.$(".failed-subtitle").removeClass("hide"),this.$(".error-message").text(e)}}},".poster":{modelAttr:"thumb",format:function(e,t){var n=this.model.get("type"),i="img/posters/poster_wide.png",a=window.devicePixelRatio?window.devicePixelRatio:1,s=200*a,r=50*a;switch(n){case"artist":case"album":case"track":i="img/posters/album.png";break;case"photoAlbum":case"photo":i="img/posters/photo.png";break;case"clip":i="img/posters/poster_square.png";
break;default:t=this.model.get("art")||t}if(e.attr("src")||e.attr("src",i),t){var l=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,s,r);e.data("original",l),this.trigger("change:poster")}}}}});return i}),define("plex/view/lists/server/SyncStatusList",["plex/view/lists/BaseList","plex/view/lists/server/items/SyncStatusListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"sync-status-list",initialize:function(e){this.syncItem=e.syncItem,this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100)
},render:function(){return this.$el.empty(),this.populate(this.collection),this},populate:function(){this.populated=!!this.collection.length,this.populated&&(this.populated=!!this.collection.length,this.removeAllViews(),this.items={},this.collection.each(this.addItem,this),_.defer(_.bind(function(){this.trigger("complete")},this)))},reset:function(){},addItem:function(){var t=e.prototype.addItem.apply(this,arguments);this.addBinding(t,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()
},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:!1})},this))}});return n}),define("plex/view/modals/SyncStatusModal",["hb!templates/modals/SyncStatusModal.tpl","plex/view/modals/BaseModal","plex/view/lists/server/SyncStatusList","jquery"],function(e,t,n){var i=t.extend({name:"syncStatusModal",className:"sync-status-modal modal fade",events:{hidden:"close"},initialize:function(){this.list=this.registerView(new n({syncItem:this.model,collection:this.collection}))
},render:function(){return this.$el.html(e(this.model.toJSON())).modal(),this.$(".sync-item-title").after(this.list.render().el),this}});return i}),define("plex/view/lists/server/items/SyncItemTileListItem",["hb!templates/lists/server/items/SyncItemTileListItem.tpl","plex/control/utils/LocalizationUtil","plex/control/utils/NumberUtil","plex/model/AppModel","plex/model/media/collections/SyncMediaCollection","plex/view/BaseView","plex/view/modals/SyncModal","plex/view/modals/ConfirmModal","plex/view/modals/SyncStatusModal","jquery"],function(e,t,n,i,a,s,r,l,o,c){var d=s.extend({tagName:"li",server:null,items:null,hasPoster:!1,mixed:!1,itemsInterval:null,events:{"click a":"onClick","click .poster-edit-btn":"onEditClick","click .poster-delete-btn":"onDeleteClick","mouseenter .hover-menu-btn":"onMenuMouseEnter","mouseleave .hover-menu-btn":"onMenuMouseLeave"},initialize:function(e){this.server=this.model.mediaServer=e.list.server,this.items=new a([],{server:this.server,syncItemId:this.model.id}),this.addBinding(this.items,"reset",this.onMediaItemsReset);
var t=this.server.get("transcodeJobs");this.addBinding(t,"reset",this.onTranscodeJobsReset),this.items.fetch({hideLoadingAlert:!0}),this.model.mediaServer.supports("syncNotifications")?this.addBinding(this.items,"change:Media",this.onMediaItemsChange):this.itemsInterval=setInterval(_.bind(function(){this.items.fetch({hideLoadingAlert:!0})},this),5e3)},render:function(){if(this.$el.html(e({syncItem:this.model.toJSON(),failed:this.model.get("Status").failure})),this.bindView(),this.supportsCanvas()){var t=this.$(".circle-progress-bar")[0],n=t.getContext("2d");
n.lineWidth=5,n.strokeStyle="#ff9d00"}var i=this.server.get("transcodeJobs");return i.populate({hideLoadingAlert:!0}),this},destroy:function(){s.prototype.destroy.call(this),this.itemsInterval&&clearInterval(this.itemsInterval)},supportsCanvas:function(){if(this.canUseCanvas===void 0){var e=document.createElement("canvas");this.canUseCanvas=!(!e.getContext||!e.getContext("2d"))}return this.canUseCanvas},drawProgress:function(e){if(this.supportsCanvas()){var t=this.$(".circle-progress-bar")[0],n=t.getContext("2d"),i=t.width/2,a=t.height/2,s=i-4,r=-Math.PI/2,l=r+2*e*Math.PI;
n.clearRect(0,0,t.width,t.height),n.beginPath(),n.arc(i,a,s,r,l,!1),n.stroke(),n.closePath()}},updatePoster:function(e){var t=window.devicePixelRatio?window.devicePixelRatio:1,n=128*t,i=200*t,a=e.get("type"),s=e.get("thumb");s="track"===a?e.get("parentThumb")||s:e.get("grandparentThumb")||s;var r=Handlebars.helpers.transcodeImage.call(this,this.server,s,n,i);this.$(".poster").data("original",r),this.trigger("change:poster"),this.hasPoster=!0},analyzeParts:function(e){if(this.model.get("Status").failure)return"failed";
var t,n=e.models,i=n.length;if(!i)return"unknown";for(var a=/^(transcoded|downloaded|directplay)$/,s=/^(pending|transcoding|downloading)$/,r=/^failed$/,l="complete",o=0;i>o;o++){var c,d=n[o],h=d.get("type"),u=d.get("Media");if(!u.length)return"unknown";if(c="track"===h?d.get("parentThumb")||d.get("thumb"):d.get("grandparentThumb")||d.get("thumb"),t===void 0&&(t=c),t!==c&&(this.mixed=!0),"failed"!==l)for(var p=0,m=u.length;m>p;p++)for(var f=u[p].Part,v=0,g=f.length;g>v;v++){var y=f[v],b=y.transcodeState;
r.test(b)&&(l="failed"),s.test(b)&&(l="processing"),a.test(b)&&"processing"!==l&&(l=y.key?"waiting":"processing")}}return this.hasPoster||this.mixed||this.updatePoster(n[0]),l},bindings:{".poster-title":{modelAttr:"title"},".poster-subtitle":{modelAttr:"rootTitle"}},onMediaItemsReset:function(e){var t=this.analyzeParts(e);if(this.$(".sync-status-icon").addClass("hide"),this.$(".sync-status-transcode").hasClass("hide"))switch(t){case"complete":this.$(".sync-complete-icon").removeClass("hide");break;
case"waiting":this.$(".sync-waiting-icon").removeClass("hide");break;case"processing":this.$(".sync-processing-icon").removeClass("hide");break;case"failed":this.$(".sync-failed-icon").removeClass("hide");break;default:this.$(".sync-unknown-icon").removeClass("hide")}},onMediaItemsChange:function(){this.onMediaItemsReset(this.items)},onTranscodeJobsReset:function(e){var i=e.where({syncItemId:this.model.id}),a=this.model.get("directory");if(!i.length)return this.$(".sync-status-transcode").hasClass("hide")||(this.$(".sync-status-transcode").addClass("hide"),this.$(".sync-waiting-icon").removeClass("hide")),this.$(".sync-time-remaining").text(""),a&&this.hasPoster&&this.mixed&&(this.$(".poster").data("original","img/posters/folder.png"),this.trigger("change:poster"),this.hasPoster=!1),void 0;
if(i.length){var s=i[0];if(this.$(".sync-status-icon").addClass("hide"),s.get("progress")>0){this.$(".sync-status-transcode").removeClass("hide");var r=Math.round(10*s.get("speed"))/10,l=n.formatMinutesRemaining(s.get("remaining")),o=.01*s.get("progress");this.drawProgress(o),r>10&&(r=Math.round(r)),"download"===s.get("type")?(this.$(".sync-speed").text(""+s.get("progress")+"%"),this.$(".sync-time-remaining").text(t.t("Downloading"))):(this.$(".sync-speed").text(""+r+"x"),this.$(".sync-time-remaining").text(l)),a&&this.updatePoster(s)
}else this.$(".sync-status-transcode").addClass("hide"),this.$(".sync-processing-icon").removeClass("hide")}},onClick:function(e){e.preventDefault(),i.set("modal",new o({model:this.model,collection:this.items}))},onEditClick:function(e){e.stopImmediatePropagation(),e.preventDefault();var t=new r({edit:!0,model:this.model});i.set("modal",t)},onDeleteClick:function(e){e.stopImmediatePropagation(),e.preventDefault();var n=new l({title:t.t("Stop Syncing"),message:t.t("Are you sure you want to stop syncing {1}?",this.model.get("title"))});
n.on("yes",_.bind(function(){i.set("modal",n),this.model.destroy()},this)),i.set("modal",n)},onMenuMouseEnter:function(e){this.$(".hover-menu-btn").each(function(t,n){n!==e.currentTarget?c(n).addClass("dim"):c(n).removeClass("dim")})},onMenuMouseLeave:function(){this.$(".hover-menu-btn").removeClass("dim")}});return d}),define("plex/view/lists/server/SyncItemTileList",["plex/view/lists/BaseList","plex/view/lists/server/items/SyncItemTileListItem","lazyload"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list media-tile-list sync-item-tile-list",server:null,initialize:function(e){this.server=e.server,this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100)
},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(){var t=e.prototype.addItem.apply(this,arguments);this.addBinding(t,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200})},this))}});return n}),define("plex/view/lists/server/items/SyncDeviceListItem",["hb!templates/lists/server/items/SyncDeviceListItem.tpl","plex/model/collections/SyncItemCollection","plex/view/BaseView","plex/view/lists/server/SyncItemTileList"],function(e,t,n,i){var a=n.extend({tagName:"li",server:null,syncItems:null,syncItemsList:null,initialize:function(e){this.server=e.list.model,this.syncItems=new t([],{server:this.server,device:this.model}),this.addBinding(this.syncItems,"reset",this.onSyncItemsChange),this.addBinding(this.syncItems,"remove",this.onSyncItemsChange);
var n=this.model.get("syncItems");n.fetch().done(_.bind(function(){this.syncItems.reset(n.getByServer(this.server.id))},this)),this.syncItemsList=this.registerView(new i({collection:this.syncItems,server:this.server}))},render:function(){var t=this.model.get("platform"),n=this.model.get("device");return this.$el.html(e({device:this.model.toJSON(),cloud:"cloudsync"===t,tablet:/(iPad)/.test(n)})),this.$el.append(this.syncItemsList.render().el),this},onSyncItemsChange:function(){this.syncItems.length?this.$(".empty-message").addClass("hide"):this.$(".empty-message").removeClass("hide")
}});return a}),define("plex/view/lists/server/SyncDeviceList",["plex/view/lists/BaseList","plex/view/lists/server/items/SyncDeviceListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"sync-device-list",initialize:function(){this.setup(t)},render:function(){return this.$el.empty(),this.populate(this.collection),this},refreshSyncItems:function(){_.each(this._views,function(e){var t=e.model.get("syncItems");t.fetch().done(function(){e.syncItems.reset(t.getByServer(e.server.id))})})}});return n
}),define("plex/view/server/SyncStatusView",["hb!templates/server/SyncStatusView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/model/collections/DeviceCollection","plex/model/collections/SyncItemCollection","plex/view/BaseView","plex/view/server/ActivityNavView","plex/view/lists/server/SyncDeviceList","jquery"],function(e,t,n,i,a,s,r,l,o){var c=s.extend({className:"container container-full",subnav:null,syncDevices:null,syncDeviceList:null,transcodeJobInterval:null,events:{"click .refresh-btn":"onRefreshClick","click .edit-btn":"onEditClick"},initialize:function(){var e=n.get("myPlex"),t=e.get("devices");
this.syncDevices=new i([],{server:e}),t.populate().done(_.bind(function(){this.syncDevices.reset(t.getSyncDevices())},this));var a=this.model.get("transcodeJobs");a.fetch({hideLoadingAlert:!0}),this.transcodeJobInterval=setInterval(function(){a.fetch({hideLoadingAlert:!0})},2e3),this.subnav=this.registerView(new r({model:this.model,active:"sync"})),this.syncDeviceList=this.registerView(new l({collection:this.syncDevices,model:this.model}))},render:function(){return this.$el.html(e()),this.$el.prepend(this.subnav.render().el),this.$("#sync-status-container").append(this.syncDeviceList.render().el),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this
},destroy:function(){s.prototype.destroy.call(this),clearInterval(this.transcodeJobInterval)},onRefreshClick:function(e){e.preventDefault(),t.trigger("command:ShowLoading",!0);var n="/sync/refreshSynclists",i=_.extend(this.model.getAjaxOptions(n),{type:"PUT"}),a=function(){t.trigger("command:ShowLoading",!1)};o.ajax(i).done(_.bind(function(){var e="/sync/refreshContent",n=_.extend(this.model.getAjaxOptions(e),{type:"PUT"});o.ajax(n).done(_.bind(function(){t.trigger("command:ShowLoading",!1),this.syncDeviceList.refreshSyncItems()
},this)).fail(a)},this)).fail(a)},onEditClick:function(e){e.preventDefault();var t=o(e.currentTarget);t.toggleClass("active"),t.hasClass("active")?this.$(".sync-item-tile-list").addClass("editing"):this.$(".sync-item-tile-list").removeClass("editing")}});return c}),define("hb!templates/server/NowPlayingView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i;return(i=n.count)?i=i.call(e,{hash:{},data:t}):(i=e.count,i=typeof i===h?i.apply(e):i),u(i)}function r(){return"hide"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o,c,d="",h="function",u=this.escapeExpression,p=n.helperMissing,m=this;return d+='<div id="now-playing-container" class="well">\n	<div class="well-header">\n		<h3>',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Now Playing",c):p.call(t,"t","Now Playing",c)))+' <span class="well-header-count">',o=n["if"].call(t,t.count,{hash:{},inverse:m.noop,fn:m.program(1,s,a),data:a}),(o||0===o)&&(d+=o),d+='</span></h3>\n	</div>\n\n	<div class="now-playing-empty-message empty-message ',o=n["if"].call(t,t.count,{hash:{},inverse:m.noop,fn:m.program(3,r,a),data:a}),(o||0===o)&&(d+=o),d+='">\n		',c={hash:{},data:a},d+=u((l=n.t,l?l.call(t,"Nothing is currently being watched.",c):p.call(t,"t","Nothing is currently being watched.",c)))+"\n	</div>\n</div>\n"
})}),define("plex/view/lists/server/NowPlayingList",["plex/view/lists/BaseList","plex/view/lists/server/items/NowPlayingListItem"],function(e,t){var n=e.extend({className:"now-playing-list",initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100)},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(){var t=e.prototype.addItem.apply(this,arguments);this.addBinding(t,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()
},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster, .card-poster").lazyload({threshold:200})},this))}});return n}),define("plex/view/server/NowPlayingView",["hb!templates/server/NowPlayingView.tpl","plex/view/BaseView","plex/view/server/ActivityNavView","plex/view/lists/server/NowPlayingList"],function(e,t,n,i){var a=t.extend({className:"container container-full",subnav:null,list:null,initialize:function(){this.subnav=this.registerView(new n({model:this.model,active:"nowplaying"})),this.list=this.registerView(new i({collection:this.collection})),this.addBinding(this.collection,"reset",this.onReset),this.addBinding(this.collection,"remove",this.onReset),this.collection.fetch()
},render:function(){return this.$el.html(e({count:this.collection.length})),this.$el.prepend(this.subnav.render().el),this.$("#now-playing-container").append(this.list.render().el),this},onReset:function(e){e.length?(this.$(".well-header-count").text(this.collection.length),this.$(".now-playing-empty-message").addClass("hide")):(this.$(".well-header-count").text(""),this.$(".now-playing-empty-message").removeClass("hide"))}});return a}),define("hb!templates/section/SectionView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<div class="section-container"></div>\n'
})}),define("hb!templates/section/SectionListView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,c="";return c+='\n		<ul class="well-header-actions">\n			<li><button type="button" class="edit-btn btn btn-inverse btn-icon" rel="tooltip" title="',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"Edit {1}",(i=e.section,null==i||i===!1?i:i.title),s):u.call(e,"t","Edit {1}",(i=e.section,null==i||i===!1?i:i.title),s)))+'"><i class="glyphicon pencil"></i></button></li>\n			<li>\n				<div class="btn-group btn-group-inverse">\n					<button type="button" class="refresh-section-btn btn btn-inverse btn-icon ',a=n["if"].call(e,(i=e.section,null==i||i===!1?i:i.refreshing),{hash:{},inverse:m.noop,fn:m.program(2,r,t),data:t}),(a||0===a)&&(c+=a),c+='" rel="tooltip" title="',a=n["if"].call(e,(i=e.section,null==i||i===!1?i:i.refreshing),{hash:{},inverse:m.program(6,o,t),fn:m.program(4,l,t),data:t}),(a||0===a)&&(c+=a),c+='"><i class="glyphicon repeat"></i></button>\n					<button type="button" class="btn btn-inverse btn-icon dropdown-toggle" data-toggle="dropdown"><i class="glyphicon-caret small"></i></button>\n\n					<ul class="dropdown-menu pull-right">\n						<li><a class="refresh-btn" data-refresh-type="turbo" href="#">',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"Turbo Scan (Default)",s):u.call(e,"t","Turbo Scan (Default)",s)))+'</a></li>\n						<li><a class="refresh-btn" data-refresh-type="deep" href="#">',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"Deep Scan",s):u.call(e,"t","Deep Scan",s)))+'</a></li>\n					</ul>\n				</div>\n			</li>\n			<li>\n				<div class="btn-group btn-group-inverse">\n					<button type="button" class="btn btn-inverse btn-icon dropdown-toggle" rel="tooltip" data-toggle="dropdown"><span class="btn-icon-label">',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"More",s):u.call(e,"t","More",s)))+'</span> <i class="glyphicon-caret small"></i></button>\n\n					<ul class="maintenance-dropdown-menu dropdown-menu pull-right">\n						<li>\n							<div class="maintenance-control"><button type="button" class="empty-trash-btn btn btn-icon"><i class="glyphicon bin"></i> <span class="btn-icon-label">',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"Empty Trash",s):u.call(e,"t","Empty Trash",s)))+'</span></button></div>\n							<div class="maintenance-summary">',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted.",s):u.call(e,"t","By default the media server doesn't remove information for media right away. This helps if a drive is temporarily disconnected. When you empty the trash for a section, all information about missing media is deleted.",s)))+'</div>\n						</li>\n						<li>\n							<div class="maintenance-control"><button type="button" class="force-refresh-btn btn btn-icon"><i class="glyphicon restart"></i> <span class="btn-icon-label">',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"Force Refresh",s):u.call(e,"t","Force Refresh",s)))+'</span></button></div>\n							<div class="maintenance-summary">',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"Forces a download of fresh media information from the Internet. This can take a long time. Any locked fields are not modified.",s):u.call(e,"t","Forces a download of fresh media information from the Internet. This can take a long time. Any locked fields are not modified.",s)))+'</div>\n						</li>\n						<li>\n							<div class="maintenance-control"><button type="button" class="analyze-media-btn btn btn-icon"><i class="glyphicon magic"></i> <span class="btn-icon-label">',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"Analyze",s):u.call(e,"t","Analyze",s)))+'</span></button></div>\n							<div class="maintenance-summary">',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"Analyzes all the media files in the library section. The analysis captures information about the media which helps Plex decide how to optimally play back the media.",s):u.call(e,"t","Analyzes all the media files in the library section. The analysis captures information about the media which helps Plex decide how to optimally play back the media.",s)))+'</div>\n						</li>\n						<li>\n							<div class="maintenance-control"><button type="button" class="delete-btn btn btn-danger btn-icon"><i class="glyphicon ban"></i> <span class="btn-icon-label">',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"Delete",s):u.call(e,"t","Delete",s)))+'</span></button></div>\n							<div class="maintenance-summary">',s={hash:{},data:t},c+=p((i=n.t,i?i.call(e,"Removes a library section and all items inside. It does not delete any media files. View progress and ratings are preserved, in case any of the items are added in the future.",s):u.call(e,"t","Removes a library section and all items inside. It does not delete any media files. View progress and ratings are preserved, in case any of the items are added in the future.",s)))+"</div>\n						</li>\n					</ul>\n				</div>\n			</li>\n		</ul>\n	"
}function r(){return"active"}function l(e,t){var i,a;return a={hash:{},data:t},p((i=n.t,i?i.call(e,"Stop Refresh",a):u.call(e,"t","Stop Refresh",a)))}function o(e,t){var i,a;return a={hash:{},data:t},p((i=n.t,i?i.call(e,"Refresh {1}",(i=e.section,null==i||i===!1?i:i.title),a):u.call(e,"t","Refresh {1}",(i=e.section,null==i||i===!1?i:i.title),a)))}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d,h="",u=n.helperMissing,p=this.escapeExpression,m=this,f="function";return h+='<div class="section-well-header well-header">\n	',c=n.unless.call(t,t.limited,{hash:{},inverse:m.noop,fn:m.program(1,s,a),data:a}),(c||0===c)&&(h+=c),h+="\n\n	<h3>\n		",(c=n.title)?c=c.call(t,{hash:{},data:a}):(c=t.title,c=typeof c===f?c.apply(t):c),h+=p(c)+' <span class="well-header-count"></span>\n\n		<button type="button" class="clear-filters-btn btn btn-inverse btn-icon hide"><i class="glyphicon circle-minus"></i> <span class="btn-icon-label">',d={hash:{},data:a},h+=p((c=n.t,c?c.call(t,"Clear Filters",d):u.call(t,"t","Clear Filters",d)))+'</span></button>\n	</h3>\n\n</div>\n\n<div class="section-list-scroll-container minimal-scrollbar"></div>\n\n<div class="well-header-shadow hidden"></div>\n'
})}),define("hb!templates/lists/media/items/MediaListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n	<a href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===T?i.apply(e):i),s+=M(i)+"/sections/",a={hash:{},data:t},s+=M((i=n.encodeUrl,i?i.call(e,e.sectionID,a):D.call(e,"encodeUrl",e.sectionID,a)))+"/folder?key=",a={hash:{},data:t},s+=M((i=n.encodeUrl,i?i.call(e,(i=e.media,null==i||i===!1?i:i.key),a):D.call(e,"encodeUrl",(i=e.media,null==i||i===!1?i:i.key),a)))+'" tabindex="0">\n'
}function r(e,t){var i,a,s="";return s+='\n	<a href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===T?i.apply(e):i),s+=M(i)+"/sections/",a={hash:{},data:t},s+=M((i=n.encodeUrl,i?i.call(e,e.sectionID,a):D.call(e,"encodeUrl",e.sectionID,a)))+"/details/"+M((i=e.media,i=null==i||i===!1?i:i.ratingKey,typeof i===T?i.apply(e):i))+'" tabindex="0">\n'}function l(){return'\n			<div class="card-overlay">\n				<span class="card-season-index"></span>\n			</div>\n		'}function o(){return'\n			<div class="card-overlay">\n				<span class="card-episode-index"></span>\n			</div>\n		'
}function c(e,t){var i,a,s,r="";return r+="\n			",s={hash:{},inverse:L.noop,fn:L.program(10,d,t),data:t},i=n.if_neq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"photoAlbum",s):D.call(e,"if_neq",(i=e.media,null==i||i===!1?i:i.type),"photoAlbum",s),(a||0===a)&&(r+=a),r+="\n			"}function d(e,t){var i,a,s,r="";return r+="\n			",s={hash:{},inverse:L.noop,fn:L.program(11,h,t),data:t},i=n.if_neq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"photo",s):D.call(e,"if_neq",(i=e.media,null==i||i===!1?i:i.type),"photo",s),(a||0===a)&&(r+=a),r+="\n			"
}function h(e,t){var i,a,s,r="";return r+="\n			",s={hash:{},inverse:L.noop,fn:L.program(12,u,t),data:t},i=n.if_neq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"clip",s):D.call(e,"if_neq",(i=e.media,null==i||i===!1?i:i.type),"clip",s),(a||0===a)&&(r+=a),r+="\n			"}function u(e,t){var i,a,s,r="";return r+='\n				<div class="hover-menu">\n					',s={hash:{},inverse:L.noop,fn:L.program(13,p,t),data:t},i=n.if_neq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"show",s):D.call(e,"if_neq",(i=e.media,null==i||i===!1?i:i.type),"show",s),(a||0===a)&&(r+=a),r+='<button type="button" class="hover-menu-btn poster-edit-btn" tabindex="-1"><i class="glyphicon pencil"></i></button><button type="button" class="hover-menu-btn poster-refresh-btn" tabindex="-1"><i class="glyphicon repeat"></i></button>\n				</div>\n			'
}function p(e,t){var i,a,s;return s={hash:{},inverse:L.noop,fn:L.program(14,m,t),data:t},i=n.if_neq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"artist",s):D.call(e,"if_neq",(i=e.media,null==i||i===!1?i:i.type),"artist",s),a||0===a?a:""}function m(){return'<button type="button" class="hover-menu-btn poster-play-btn" tabindex="-1"><i class="glyphicon play"></i></button>'}function f(){return'\n				<div class="media-added-at sorted-by"></div>\n			'}function v(e,t){var i,a,s;return s={hash:{},inverse:L.program(21,y,t),fn:L.program(19,g,t),data:t},i=n.if_eq,a=i?i.call(e,e.sort,"originallyAvailableAt",s):D.call(e,"if_eq",e.sort,"originallyAvailableAt",s),a||0===a?a:""
}function g(){return'\n				<div class="media-available-at sorted-by"></div>\n			'}function y(e,t){var i,a,s;return s={hash:{},inverse:L.program(24,w,t),fn:L.program(22,b,t),data:t},i=n.if_eq,a=i?i.call(e,e.sort,"mediaHeight",s):D.call(e,"if_eq",e.sort,"mediaHeight",s),a||0===a?a:""}function b(){return'\n				<div class="media-resolution sorted-by"></div>\n			'}function w(e,t){var i,a,s;return s={hash:{},inverse:L.program(27,k,t),fn:L.program(25,x,t),data:t},i=n.if_eq,a=i?i.call(e,e.sort,"duration",s):D.call(e,"if_eq",e.sort,"duration",s),a||0===a?a:""
}function x(){return'\n				<div class="media-duration sorted-by"></div>\n			'}function k(){return'\n				<div class="media-rating rating sorted-by"></div>\n			'}function S(){return'\n			<h4>\n				<span class="media-subtitle"></span>\n\n				<div class="unwatched-icon unwatched-partial-icon"></div>\n				<div class="unwatched-icon unwatched-full-icon"></div>\n			</h4>\n		'}function C(){return'\n			<h4>\n				<span class="media-subtitle"></span>\n			</h4>\n		'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var A,I,P,_="",T="function",M=this.escapeExpression,D=n.helperMissing,L=this;return I=n["if"].call(t,(A=t.media,null==A||A===!1?A:A.folder),{hash:{},inverse:L.program(3,r,a),fn:L.program(1,s,a),data:a}),(I||0===I)&&(_+=I),_+='\n	<div class="poster-container">\n		<img class="media-list-poster poster">\n\n		',P={hash:{},inverse:L.noop,fn:L.program(5,l,a),data:a},A=n.if_eq,I=A?A.call(t,(A=t.media,null==A||A===!1?A:A.type),"season",P):D.call(t,"if_eq",(A=t.media,null==A||A===!1?A:A.type),"season",P),(I||0===I)&&(_+=I),_+="\n\n		",P={hash:{},inverse:L.noop,fn:L.program(7,o,a),data:a},A=n.if_eq,I=A?A.call(t,(A=t.media,null==A||A===!1?A:A.type),"episode",P):D.call(t,"if_eq",(A=t.media,null==A||A===!1?A:A.type),"episode",P),(I||0===I)&&(_+=I),_+='\n	</div>\n\n	<div class="media-details">\n		<div class="media-details-right">\n			',P={hash:{},inverse:L.noop,fn:L.program(9,c,a),data:a},A=n.if_neq,I=A?A.call(t,(A=t.media,null==A||A===!1?A:A.type),"season",P):D.call(t,"if_neq",(A=t.media,null==A||A===!1?A:A.type),"season",P),(I||0===I)&&(_+=I),_+="\n\n			",P={hash:{},inverse:L.program(18,v,a),fn:L.program(16,f,a),data:a},A=n.if_eq,I=A?A.call(t,t.sort,"addedAt",P):D.call(t,"if_eq",t.sort,"addedAt",P),(I||0===I)&&(_+=I),_+='\n		</div>\n\n		<h3>\n			<input type="checkbox" class="multiselect" name="selected">\n\n			<span class="media-title"></span>\n		</h3>\n\n		',P={hash:{},inverse:L.noop,fn:L.program(29,S,a),data:a},A=n.if_eq,I=A?A.call(t,(A=t.media,null==A||A===!1?A:A.type),"episode",P):D.call(t,"if_eq",(A=t.media,null==A||A===!1?A:A.type),"episode",P),(I||0===I)&&(_+=I),_+="\n\n		",P={hash:{},inverse:L.noop,fn:L.program(31,C,a),data:a},A=n.if_eq,I=A?A.call(t,(A=t.media,null==A||A===!1?A:A.type),"album",P):D.call(t,"if_eq",(A=t.media,null==A||A===!1?A:A.type),"album",P),(I||0===I)&&(_+=I),_+='\n\n		<h4 class="media-tagline"></h4>\n\n		<div class="media-summary summary"></div>\n	</div>\n</a>\n'
})}),define("plex/view/lists/media/items/MediaListItem",["hb!templates/lists/media/items/MediaListItem.tpl","plex/control/Dispatcher","plex/view/BaseView","jquery"],function(e,t,n,i){var a=n.extend({tagName:"li",list:null,sort:null,events:{"click a":"onClick","click .poster-play-btn":"onPlayClick","click .poster-edit-btn":"onEditClick","click .poster-refresh-btn":"onRefreshClick","mouseenter .hover-menu-btn":"onMenuMouseEnter","mouseleave .hover-menu-btn":"onMenuMouseLeave"},initialize:function(e){var t=e.list.collection;
this.list=e.list,this.sort=t.sort.key},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),sectionID:this.model.section.id,media:this.model.toJSON(),sort:this.sort})),(this.model.section.get("limited")||this.model.server.get("shared")||this.model.get("folder"))&&this.$el.addClass("hide-hover-overlay"),this.bindView(),this},select:function(){this.$("a").addClass("selected"),this.$(".multiselect").prop("checked",!0)},deselect:function(){this.$("a").removeClass("selected"),this.$(".multiselect").prop("checked",!1)
},bindings:{".media-title":{modelAttr:"title",format:function(e,t){var n=this.model.get("type");switch(n){case"season":case"album":t=this.model.get("parentTitle");break;case"episode":t=this.model.get("grandparentTitle")}return Handlebars.helpers.truncate.call(this,t,80)}},".media-subtitle":{modelAttr:"title",format:function(e,t){var n=this.model.get("type");if("episode"===n||"album"===n)return Handlebars.helpers.truncate.call(this,t,120)}},".media-list-poster":{modelAttr:"thumb",format:function(e,t){var n=this.model.get("type"),i="img/posters/poster.png",a=this.model.get("grandparentThumb")||t,s=window.devicePixelRatio?window.devicePixelRatio:1,r=100*s,l=150*s;
switch(n){case"artist":case"album":case"track":i="img/posters/album.png";break;case"photoAlbum":case"photo":i="img/posters/photo.png";break;case"clip":i="img/posters/poster_square.png"}if(this.model.get("folder"))return e.attr("src","img/posters/folder.png"),void 0;if(e.attr("src")||e.attr("src",i),a){var o=Handlebars.helpers.transcodeImage.call(this,this.model.server,a,r,l);e.data("original",o),this.trigger("change:poster")}}},".card-season-index":{modelAttr:"index",hideEmpty:!0,format:function(e,t){var n=this.model.get("type");
if("season"===n)return Handlebars.helpers.seasonIndex.call(this,t)}},".card-episode-index":{modelAttr:"index",hideEmpty:!0,format:function(e,t){var n=this.model.get("type");if("episode"===n){var i=this.model.get("parentIndex"),a=this.model.get("originallyAvailableAt");return Handlebars.helpers.seasonEpisodeIndex.call(this,i,t,a)}}},".unwatched-icon":{modelAttr:"viewCount",format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser"),a=this.model.get("type"),s=this.model.get("viewOffset");
return n&&!i?(e.addClass("hide"),void 0):("episode"===a&&(t||s?e.addClass("hide"):(e.removeClass("hide"),this.$(".unwatched-partial-icon").addClass("hide"))),void 0)}},".unwatched-partial-icon":{modelAttr:"viewOffset",format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser"),a=this.model.get("type");return n&&!i?(e.addClass("hide"),void 0):("episode"===a&&(t?(e.removeClass("hide"),this.$(".unwatched-full-icon").addClass("hide")):e.addClass("hide")),void 0)}},".media-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""
}},".media-tagline":{modelAttr:"tagline",hideEmpty:!0,format:function(e,t){return t?Handlebars.helpers.truncate.call(this,t,80):""}},".media-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,250)}},".media-added-at":{modelAttr:"addedAt",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.timeAgo.call(this,t)}},".media-available-at":{modelAttr:"originallyAvailableAt",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatDate.call(this,t)
}},".media-resolution":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){return t&&t.length?Handlebars.helpers.formatResolution.call(this,t[0].videoResolution):""}},".media-duration":{modelAttr:"duration",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatMinutes.call(this,t)}}},onClick:function(e){if(e.metaKey||e.ctrlKey||e.shiftKey)return e.preventDefault(),this.trigger("select",this,e.shiftKey),void 0;if(this.list.editing){var n=this.$(".multiselect"),a=n.prop("checked");return i(e.target)[0]===n[0]?a=!a:e.preventDefault(),a?this.trigger("deselect",this):this.trigger("select",this,!1),void 0
}return"track"===this.model.get("type")?(e.preventDefault(),t.trigger("command:PlayTrack",this.model),void 0):"photo"===this.model.get("type")?(e.preventDefault(),t.trigger("show:photo",this.list.collection,this.model),void 0):void 0},onPlayClick:function(e){e.stopImmediatePropagation(),e.preventDefault();var n=this.model.get("type"),i=this.model.section?this.model.section.id:this.model.get("librarySectionID");switch(n){case"album":t.trigger("command:PlayAlbum",this.model);break;case"track":t.trigger("command:PlayTrack",this.model);
break;default:t.trigger("navigate:player",this.model.server.id,i,this.model.id)}},onEditClick:function(e){e.stopImmediatePropagation(),e.preventDefault();var n=this.model.section?this.model.section.id:this.model.get("librarySectionID");t.trigger("navigate:edit",this.model.server.id,n,this.model.id)},onRefreshClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),t.trigger("command:RefreshMetadata",this.model)},onMenuMouseEnter:function(e){this.$(".hover-menu-btn").each(function(t,n){n!==e.currentTarget?i(n).addClass("dim"):i(n).removeClass("dim")
})},onMenuMouseLeave:function(){this.$(".hover-menu-btn").removeClass("dim")}});return a}),define("plex/view/lists/media/MediaList",["plex/view/lists/SelectableList","plex/view/lists/media/items/MediaListItem","lazyload"],function(e,t){var n=e.extend({tagName:"ul",className:"list media-list",keyboardCancellationDirections:["left","right"],loadPosterThrottle:null,initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100)},render:function(){return this.$el.empty(),this.populate(this.collection),this
},addItem:function(){var t=e.prototype.addItem.apply(this,arguments);this.addBinding(t,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200,container:this.$el.parent()})},this))}});return n}),define("hb!templates/lists/media/items/MediaCompactListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n	<a href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===I?i.apply(e):i),s+=P(i)+"/sections/",a={hash:{},data:t},s+=P((i=n.encodeUrl,i?i.call(e,e.sectionID,a):_.call(e,"encodeUrl",e.sectionID,a)))+"/folder?key=",a={hash:{},data:t},s+=P((i=n.encodeUrl,i?i.call(e,(i=e.media,null==i||i===!1?i:i.key),a):_.call(e,"encodeUrl",(i=e.media,null==i||i===!1?i:i.key),a)))+'" tabindex="0">\n'
}function r(e,t){var i,a,s="";return s+='\n	<a href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===I?i.apply(e):i),s+=P(i)+"/sections/",a={hash:{},data:t},s+=P((i=n.encodeUrl,i?i.call(e,e.sectionID,a):_.call(e,"encodeUrl",e.sectionID,a)))+"/details/"+P((i=e.media,i=null==i||i===!1?i:i.ratingKey,typeof i===I?i.apply(e):i))+'" tabindex="0">\n'}function l(){return'\n		<div class="media-added-at sorted-by"></div>\n	'}function o(e,t){var i,a,s;return s={hash:{},inverse:T.program(10,d,t),fn:T.program(8,c,t),data:t},i=n.if_eq,a=i?i.call(e,e.sort,"originallyAvailableAt",s):_.call(e,"if_eq",e.sort,"originallyAvailableAt",s),a||0===a?a:""
}function c(){return'\n		<div class="media-available-at sorted-by"></div>\n	'}function d(e,t){var i,a,s;return s={hash:{},inverse:T.program(13,u,t),fn:T.program(11,h,t),data:t},i=n.if_eq,a=i?i.call(e,e.sort,"mediaHeight",s):_.call(e,"if_eq",e.sort,"mediaHeight",s),a||0===a?a:""}function h(){return'\n		<div class="media-resolution sorted-by"></div>\n	'}function u(e,t){var i,a,s;return s={hash:{},inverse:T.program(16,m,t),fn:T.program(14,p,t),data:t},i=n.if_eq,a=i?i.call(e,e.sort,"duration",s):_.call(e,"if_eq",e.sort,"duration",s),a||0===a?a:""
}function p(){return'\n		<div class="media-duration sorted-by"></div>\n	'}function m(e,t){var i,a,s;return s={hash:{},inverse:T.program(17,f,t),fn:T.program(14,p,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"track",s):_.call(e,"if_eq",(i=e.media,null==i||i===!1?i:i.type),"track",s),a||0===a?a:""}function f(){return'\n		<span class="media-rating rating sorted-by"></span>\n	'}function v(){return'\n		<i class="folder-icon glyphicon folder-open"></i>\n	'}function g(){return'\n		<span class="media-subtitle subtitle"></span>\n	'
}function y(e,t){var i,a,s;return s={hash:{},inverse:T.program(24,b,t),fn:T.program(21,g,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"episode",s):_.call(e,"if_eq",(i=e.media,null==i||i===!1?i:i.type),"episode",s),a||0===a?a:""}function b(e,t){var i,a,s;return s={hash:{},inverse:T.program(25,w,t),fn:T.program(21,g,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"album",s):_.call(e,"if_eq",(i=e.media,null==i||i===!1?i:i.type),"album",s),a||0===a?a:""
}function w(e,t){var i,a,s;return s={hash:{},inverse:T.program(26,x,t),fn:T.program(21,g,t),data:t},i=n.if_eq,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.type),"track",s):_.call(e,"if_eq",(i=e.media,null==i||i===!1?i:i.type),"track",s),a||0===a?a:""}function x(){return'\n		<span class="media-year subtitle"></span>\n	'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var k,S,C,A="",I="function",P=this.escapeExpression,_=n.helperMissing,T=this;return S=n["if"].call(t,(k=t.media,null==k||k===!1?k:k.folder),{hash:{},inverse:T.program(3,r,a),fn:T.program(1,s,a),data:a}),(S||0===S)&&(A+=S),A+='\n	<input type="checkbox" class="multiselect" name="selected">\n\n	',C={hash:{},inverse:T.program(7,o,a),fn:T.program(5,l,a),data:a},k=n.if_eq,S=k?k.call(t,t.sort,"addedAt",C):_.call(t,"if_eq",t.sort,"addedAt",C),(S||0===S)&&(A+=S),A+="\n\n	",S=n["if"].call(t,(k=t.media,null==k||k===!1?k:k.folder),{hash:{},inverse:T.noop,fn:T.program(19,v,a),data:a}),(S||0===S)&&(A+=S),A+='\n\n	<span class="media-title title"></span>\n	',C={hash:{},inverse:T.program(23,y,a),fn:T.program(21,g,a),data:a},k=n.if_eq,S=k?k.call(t,(k=t.media,null==k||k===!1?k:k.type),"season",C):_.call(t,"if_eq",(k=t.media,null==k||k===!1?k:k.type),"season",C),(S||0===S)&&(A+=S),A+="\n</a>\n"
})}),define("plex/view/lists/media/items/MediaCompactListItem",["hb!templates/lists/media/items/MediaCompactListItem.tpl","plex/control/Dispatcher","plex/view/BaseView","jquery"],function(e,t,n,i){var a=n.extend({tagName:"li",className:"hide-hover-overlay",list:null,sort:null,events:{"click a":"onClick"},initialize:function(e){var t=e.list.collection;this.list=e.list,this.sort=t.sort.key},render:function(){var t=this.model.section?this.model.section.id:this.model.get("librarySectionID");return this.$el.html(e({serverID:this.model.server.id,sectionID:t,media:this.model.toJSON(),sort:this.sort})),this.bindView(),this
},select:function(){this.$("a").addClass("selected"),this.$(".multiselect").prop("checked",!0)},deselect:function(){this.$("a").removeClass("selected"),this.$(".multiselect").prop("checked",!1)},bindings:{".media-title":{modelAttr:"title",format:function(e,t){var n=this.model.get("type");switch(n){case"season":case"album":t=this.model.get("parentTitle");break;case"episode":t=this.model.get("grandparentTitle");break;case"track":t=this.model.get("grandparentTitle")||this.model.get("originalTitle")}return Handlebars.helpers.truncate.call(this,t,50)
}},".media-subtitle":{modelAttr:"title",format:function(e,t){var n=this.model.get("type");if(/^(season|episode|album|track)$/.test(n))return Handlebars.helpers.truncate.call(this,t,50)}},".media-year":{modelAttr:"year"},".media-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?Handlebars.helpers.starRating.call(this,t):""}},".media-added-at":{modelAttr:"addedAt",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.timeAgo.call(this,t)}},".media-available-at":{modelAttr:"originallyAvailableAt",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatDate.call(this,t)
}},".media-resolution":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){return t&&t.length?Handlebars.helpers.formatResolution.call(this,t[0].videoResolution):""}},".media-duration":{modelAttr:"duration",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatMinutes.call(this,t)}}},onClick:function(e){if(e.metaKey||e.ctrlKey||e.shiftKey)return e.preventDefault(),this.trigger("select",this,e.shiftKey),void 0;if(this.list.editing){e.preventDefault();var n=this.$(".multiselect"),a=n.prop("checked");
return i(e.target)[0]===n[0]&&(a=!a,_.defer(function(){n.prop("checked",!a)})),a?this.trigger("deselect",this):this.trigger("select",this,!1),void 0}return"track"===this.model.get("type")?(e.preventDefault(),t.trigger("command:PlayTrack",this.model),void 0):"photo"===this.model.get("type")?(e.preventDefault(),t.trigger("show:photo",this.list.collection,this.model),void 0):void 0}});return a}),define("plex/view/lists/media/MediaCompactList",["plex/view/lists/SelectableList","plex/view/lists/media/items/MediaCompactListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"list media-list media-compact-list",keyboardCancellationDirections:["left","right"],initialize:function(){this.setup(t)
},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("hb!templates/lists/sidebar/items/AlphanumericListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"selected"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l="",o=this,c="function",d=this.escapeExpression;return l+='<a class="gray ',r=n["if"].call(t,t.active,{hash:{},inverse:o.noop,fn:o.program(1,s,a),data:a}),(r||0===r)&&(l+=r),l+='" href="#" tabindex="0">'+d((r=t.character,r=null==r||r===!1?r:r.title,typeof r===c?r.apply(t):r))+"</a>\n"
})}),define("plex/view/lists/sidebar/items/AlphanumericListItem",["hb!templates/lists/sidebar/items/AlphanumericListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var i=n.extend({tagName:"li",active:!1,events:{click:"onClick"},initialize:function(e){this.active=this.model.id===e.list.activeCharacter,this.addBinding(this.model,"change",this.render),this.addBinding(t,"change:firstCharacter",this.onFirstCharacterChange),this.addBinding(t,"reset:filter",this.onFirstCharacterChange)
},render:function(){return this.$el.html(e({active:this.active,character:this.model.toJSON()})),this},onClick:function(e){e.preventDefault(),this.active?t.trigger("change:firstCharacter",null):t.trigger("change:firstCharacter",this.model.id)},onFirstCharacterChange:function(e){this.active=this.model.id===e,this.render()}});return i}),define("plex/view/lists/sidebar/AlphanumericList",["plex/view/lists/KeyboardNavigationList","plex/view/lists/sidebar/items/AlphanumericListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"alphanumeric-list",keyboardActivationDirection:"right",keyboardCancellationDirections:"left",listHeight:0,initialize:function(e){this.setup(t),this.activeCharacter=e.activeCharacter
},render:function(){return this.$el.empty(),this.populate(this.collection),this},reset:function(){this.listHeight&&this.setLineHeight(),e.prototype.reset.apply(this,arguments)},setListHeight:function(e){this.listHeight=e,this.collection.length&&this.setLineHeight()},setLineHeight:function(){var e=this.listHeight/this.collection.length;this.$el.css("line-height",e+"px")}});return n}),define("plex/view/section/SectionListView",["hb!templates/section/SectionListView.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/model/SettingsModel","plex/view/BaseView","plex/view/lists/media/MediaTileList","plex/view/lists/media/MediaList","plex/view/lists/media/MediaCompactList","plex/view/lists/sidebar/AlphanumericList","plex/view/modals/EditSectionModal","jquery"],function(e,t,n,i,a,s,r,l,o,c,d,h){var u=s.extend({className:"section-list-container well",infiniteScroll:!1,loading:!1,listType:"media-tile-list",$list:null,list:null,alphanumericList:null,events:{"click .section-list-scroll-container":"onListClick","click .clear-filters-btn":"onClearFiltersClick","click .edit-btn":"onEditClick","click .refresh-btn":"onRefreshClick","click .refresh-section-btn":"onRefreshClick","click .empty-trash-btn":"onEmptyTrashClick","click .force-refresh-btn":"onForceRefreshClick","click .analyze-media-btn":"onAnalyzeMediaClick","click .delete-btn":"onDeleteClick"},initialize:function(e){var n=this.model.get("limited"),i=this.model.get("media"),s=this.model.get("alphanumeric");
this.infiniteScroll=e.infiniteScroll,this.loading=!1,this.listType=e.listType||a.get("listType");var r=this.getListConstructor(this.listType);this.list=this.registerView(new r({collection:this.collection})),n||"all"!==this.collection.subset||(this.alphanumericList=this.registerView(new c({collection:s,activeCharacter:i.firstCharacter}))),this.addBinding(this.collection,"reset",this.onReset),this.addBinding(this.collection,"merge",this.onMerge),this.addBinding(s,"reset",this.onAlphanumericReset),this.addBinding(this.list,"complete",this.onListComplete),this.addBinding(this.list,"change:selectedItems",this.onSelectedItemsChange),this.addBinding(this.model,"change:refreshing",this.onRefreshingChange),this.addBinding(this.model,"change:title",this.onTitleChange),this.addBinding(a,"change:listType",this.onListTypeChange),this.addBinding(t,"shortcut:edit",this.editSection),this.addBinding(t,"shortcut:refresh",this.refreshSection),this.addBinding(t,"shortcut:deleteItem",this.deleteSection),_.bindAll(this,"onScroll","onResize")
},initializeList:function(){this.$list.on("scroll",this.onScroll),h(window).on("resize",this.onResize),this.infiniteScroll&&(this.collection.size=this.calculatePageSize()),this.collection.populatePromise&&"resolved"===this.collection.populatePromise.state()?this.onReset(this.collection):this.collection.fetch()},initializeAlphanumericList:function(){var e=this.model.get("limited"),t=this.model.get("alphanumeric");e||(t.populatePromise&&"resolved"===t.populatePromise.state()?this.onAlphanumericReset(t):t.fetch())
},render:function(){var t=this.model.get("limited")||this.model.server.get("shared");return this.$el.html(e({section:this.model.toJSON(),title:this.collection.getSubsetTitle(),limited:t})),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this.$list=this.$(".section-list-scroll-container"),this.$list.html(this.list.render().el),this.alphanumericList&&this.$el.append(this.alphanumericList.render().el),this.model.get("refreshing")&&this.$(".refresh-section-btn").spinContents("tiny"),_.defer(_.bind(this.initializeList,this)),_.defer(_.bind(this.initializeAlphanumericList,this)),this
},destroy:function(){this.$list.off("scroll",this.onScroll),h(window).off("resize",this.onResize),s.prototype.destroy.call(this)},calculatePageSize:function(){var e=175,t=200,n=180,i=30,a=this.$list.width(),s=this.$list.height();this.alphanumericList&&this.alphanumericList.setListHeight(s);var r;switch(this.listType){case"media-list":r=s/n;break;case"media-compact-list":r=s/i;break;default:r=a*s/(e*t)}return Math.round(3*r)},getListConstructor:function(e){switch(e){case"media-tile-list":return r;
case"media-list":return l;case"media-compact-list":return o;default:return this.listType="media-tile-list",a.save("listType",this.listType),r}},updateListType:function(e){a.save("listType",e),this.listType=e;var t=this.getListConstructor(e);if(this.infiniteScroll){var n=this.calculatePageSize();n>this.collection.length&&this.collection.next(n),this.collection.size=n}var i=this.list.selectedItems,s=this.list.$el.hasClass("editing"),r=this.$el.hasClass("show-alphanumeric-list");this.removeView(this.list),this.removeBinding(this.list,"change:selectedItems"),this.list=this.registerView(new t({collection:this.collection})),this.list.selectedItems=i,this.addBinding(this.list,"change:selectedItems",this.onSelectedItemsChange),s&&this.list.$el.addClass("editing"),r&&this.list.$el.addClass("show-alphanumeric-list"),this.$list.html(this.list.render().el)
},edit:function(){this.list.editing=!0,this.list.$el.addClass("editing")},unedit:function(){this.list.editing=!1,this.list.$el.removeClass("editing")},deselectAll:function(){this.list.deselectAll()},loadPosters:function(){this.list.loadPosterThrottle&&this.list.loadPosterThrottle()},editSection:function(e){(e||!this.list.editing)&&i.set("modal",new d({server:this.model.server,section:this.model}))},refreshSection:function(e,n){(e||!this.list.editing)&&t.trigger("command:StartLibraryScan",this.model.server,this.model,n)
},deleteSection:function(e){(e||!this.list.editing)&&t.trigger("command:DeleteSection",this.model,function(){t.trigger("navigate:dashboard")})},onListClick:function(e){var t=this.$(".section-list-scroll-container")[0],n=h(e.target).parent()[0];t===n&&this.list.deselectAll()},onClearFiltersClick:function(e){e.preventDefault(),this.alphanumericList.activeCharacter=null,t.trigger("reset:filter")},onEditClick:function(e){e.preventDefault(),this.editSection(!0)},onRefreshClick:function(e){e.preventDefault();
var n=this.$(".refresh-section-btn");if(n.hasClass("active"))n.removeClass("active"),t.trigger("command:StopLibraryScan",this.model.server,this.model);else{n.addClass("active");var i={},a=h(e.target).data("refreshType");a?i[a]=!0:e.altKey&&(i.deep=!0),this.refreshSection(!0,i)}},onEmptyTrashClick:function(e){e.preventDefault(),t.trigger("command:EmptyTrash",this.model.server,this.model)},onForceRefreshClick:function(e){e.preventDefault(),t.trigger("command:StartLibraryScan",this.model.server,this.model,{force:!0})
},onAnalyzeMediaClick:function(e){e.preventDefault(),t.trigger("command:StartMediaAnalysis",this.model.server,this.model)},onDeleteClick:function(e){e.preventDefault(),this.deleteSection(!0)},onReset:function(e){var t=e.filters,n=e.totalSize||e.length;if(this.$(".well-header-count").text(n),this.$(".clear-filters-btn").addClass("hide"),e.search)this.$(".clear-filters-btn").removeClass("hide");else{var i=!1;_.each(t,function(e){e.values.length&&(i=!0)}),(e.firstCharacter||i)&&this.$(".clear-filters-btn").removeClass("hide")
}},onMerge:function(e){var t=e.totalSize||e.length;this.$(".well-header-count").text(t)},onAlphanumericReset:function(e){this.alphanumericList&&(8>e.length?(this.$el.removeClass("show-alphanumeric-list"),this.alphanumericList.$el.addClass("hide")):(this.$el.addClass("show-alphanumeric-list"),this.alphanumericList.$el.removeClass("hide")))},onListComplete:function(){this.removeBinding(this.list,"complete");var e=this.collection.scrollPosition,t=this.$list[0];e&&(t.scrollTop=e)},onSelectedItemsChange:function(e){this.trigger("change:selectedModels",_.pluck(e,"model"))
},onRefreshingChange:function(e,t){var i=this.$(".refresh-section-btn"),a=n.t("Refresh {1}",this.model.get("title")),s=n.t("Stop Refresh");t?(i.spinContents("tiny"),i.prop("title",s).tooltip("fixTitle")):(i.spinContents(!1),i.prop("title",a).tooltip("fixTitle"))},onTitleChange:function(e,t){var i=n.t("Edit {1}",t),a=n.t("Refresh {1}",t);this.$(".edit-btn").prop("title",i).tooltip("fixTitle"),this.$(".refresh-section-btn").attr("data-original-title")!==n.t("Stop Refresh")&&this.$(".refresh-section-btn").prop("title",a).tooltip("fixTitle")
},onListTypeChange:function(e,t){this.updateListType(t)},onScroll:function(e){var t=h(e.target).scrollTop();if(this.collection.scrollPosition=t,t>5?this.$(".well-header-shadow").removeClass("hidden"):this.$(".well-header-shadow").addClass("hidden"),this.infiniteScroll){var n=this.$list.children("ul").height(),i=h(e.target).height();!this.loading&&300>n-i-t&&(this.loading=!0,this.collection.next().done(_.bind(function(){this.loading=!1},this)))}},onResize:function(){this.infiniteScroll&&(this.collection.size=this.calculatePageSize())
}});return u}),define("hb!templates/section/SectionActionBarView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"hide"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l,o,c="",d=this,h=n.helperMissing,u=this.escapeExpression;return c+='<div class="actionbar">\n	<ul class="iconbar">\n		<li class="options-action ',r=n.unless.call(t,t.showOptions,{hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a}),(r||0===r)&&(c+=r),c+='">\n			<a class="actionbar-glyphicon-btn options-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Options",o):h.call(t,"t","Options",o)))+'">\n				<i class="glyphicon show-lines"></i>\n			</a>\n		</li>\n\n		<li class="select-action ',l=n.unless.call(t,t.showSelect,{hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='">\n			<a class="actionbar-glyphicon-btn select-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Select Items",o):h.call(t,"t","Select Items",o)))+'">\n				<i class="glyphicon check"></i>\n			</a>\n		</li>\n\n		<li class="deselect-action ',l=n.unless.call(t,t.showDeselect,{hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='">\n			<a class="actionbar-glyphicon-btn deselect-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Deselect Items",o):h.call(t,"t","Deselect Items",o)))+'">\n				<i class="glyphicon unchecked"></i>\n			</a>\n		</li>\n\n		<li class="refresh-action ',l=n.unless.call(t,t.showRefresh,{hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='">\n			<a class="actionbar-glyphicon-btn refresh-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Refresh",o):h.call(t,"t","Refresh",o)))+'">\n				<i class="glyphicon repeat"></i>\n			</a>\n		</li>\n\n		<li class="analyze-action ',l=n.unless.call(t,t.showAnalyze,{hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='">\n			<a class="actionbar-glyphicon-btn analyze-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Analyze",o):h.call(t,"t","Analyze",o)))+'">\n				<i class="glyphicon magic"></i>\n			</a>\n		</li>\n\n		<li class="add-to-collection-action ',l=n.unless.call(t,t.showAddToCollection,{hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='">\n			<a class="actionbar-glyphicon-btn add-collection-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Add to Collection",o):h.call(t,"t","Add to Collection",o)))+'">\n				<i class="glyphicon folder-plus"></i>\n			</a>\n		</li>\n\n		<li class="watch-action ',l=n.unless.call(t,t.showWatch,{hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='">\n			<a class="actionbar-icon-btn watch-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Mark as Watched",o):h.call(t,"t","Mark as Watched",o)))+'">\n				',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Mark as Watched",o):h.call(t,"t","Mark as Watched",o)))+'\n			</a>\n		</li>\n\n		<li class="unwatch-action ',l=n.unless.call(t,t.showWatch,{hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='">\n			<a class="actionbar-icon-btn unwatch-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Mark as Unwatched",o):h.call(t,"t","Mark as Unwatched",o)))+'">\n				',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Mark as Unwatched",o):h.call(t,"t","Mark as Unwatched",o)))+'\n			</a>\n		</li>\n\n		<li class="merge-action ',l=n.unless.call(t,t.showMerge,{hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='">\n			<a class="actionbar-glyphicon-btn merge-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Merge",o):h.call(t,"t","Merge",o)))+'">\n				<i class="glyphicon resize-small"></i>\n			</a>\n		</li>\n\n		<li class="sync-action ',l=n.unless.call(t,t.showSync,{hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='">\n			<a class="actionbar-glyphicon-btn sync-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Sync to Device",o):h.call(t,"t","Sync to Device",o)))+'">\n				<i class="glyphicon download"></i>\n			</a>\n		</li>\n	</ul>\n</div>\n'
})}),define("hb!templates/section/SidebarView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"selected active"}function r(e,t){var i,a,r,l="";return l+='\n		<button type="button" class="folder-btn btn btn-icon ',r={hash:{},inverse:v.noop,fn:v.program(1,s,t),data:t},i=n.if_eq,a=i?i.call(e,e.subset,"folder",r):g.call(e,"if_eq",e.subset,"folder",r),(a||0===a)&&(l+=a),l+='" tabindex="0" rel="tooltip" title="',r={hash:{},data:t},l+=y((i=n.t,i?i.call(e,"By Folder",r):g.call(e,"t","By Folder",r)))+'">\n			<i class="glyphicon folder-open"></i>\n		</button>\n	'
}function l(e,t){var i,a,s="";return s+='\n	<h2 class="sidebar-header media-header">',a={hash:{},data:t},s+=y((i=n.truncate,i?i.call(e,(i=e.section,null==i||i===!1?i:i.title),20,a):g.call(e,"truncate",(i=e.section,null==i||i===!1?i:i.title),20,a)))+"</h2>\n"}function o(){return"disabled"}function c(e,t){var i;return i=n["if"].call(e,e.showTypes,{hash:{},inverse:v.noop,fn:v.program(10,d,t),data:t}),i||0===i?i:""}function d(e,t){var i,a,s="";return s+='\n		<h2 class="sidebar-header type-header">',a={hash:{},data:t},s+=y((i=n.t,i?i.call(e,"Type",a):g.call(e,"t","Type",a)))+"</h2>\n	"
}function h(e,t){var i,a,s="";return s+='\n		<h2 class="sidebar-header sort-header">',a={hash:{},data:t},s+=y((i=n.t,i?i.call(e,"Sort",a):g.call(e,"t","Sort",a)))+"</h2>\n	"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var u,p,m,f="",v=this,g=n.helperMissing,y=this.escapeExpression;return f+='<div class="list-types-container">\n	<div class="btn-group" data-toggle="buttons-radio">\n		<button type="button" class="media-tile-list-btn btn btn-icon ',m={hash:{},inverse:v.noop,fn:v.program(1,s,a),data:a},u=n.if_eq,p=u?u.call(t,t.listType,"media-tile-list",m):g.call(t,"if_eq",t.listType,"media-tile-list",m),(p||0===p)&&(f+=p),f+='" tabindex="0" rel="tooltip" title="',m={hash:{},data:a},f+=y((u=n.t,u?u.call(t,"Tiles",m):g.call(t,"t","Tiles",m)))+'">\n			<i class="glyphicon show-big-thumbnails"></i>\n		</button>\n\n		<button type="button" class="media-list-btn btn btn-icon ',m={hash:{},inverse:v.noop,fn:v.program(1,s,a),data:a},u=n.if_eq,p=u?u.call(t,t.listType,"media-list",m):g.call(t,"if_eq",t.listType,"media-list",m),(p||0===p)&&(f+=p),f+='" tabindex="0" rel="tooltip" title="',m={hash:{},data:a},f+=y((u=n.t,u?u.call(t,"Details",m):g.call(t,"t","Details",m)))+'">\n			<i class="glyphicon list"></i>\n		</button>\n\n		<button type="button" class="media-compact-list-btn btn btn-icon ',m={hash:{},inverse:v.noop,fn:v.program(1,s,a),data:a},u=n.if_eq,p=u?u.call(t,t.listType,"media-compact-list",m):g.call(t,"if_eq",t.listType,"media-compact-list",m),(p||0===p)&&(f+=p),f+='" tabindex="0" rel="tooltip" title="',m={hash:{},data:a},f+=y((u=n.t,u?u.call(t,"List",m):g.call(t,"t","List",m)))+'">\n			<i class="glyphicon justify"></i>\n		</button>\n	</div>\n\n	',p=n.unless.call(t,(u=t.section,null==u||u===!1?u:u.limited),{hash:{},inverse:v.noop,fn:v.program(3,r,a),data:a}),(p||0===p)&&(f+=p),f+="\n</div>\n\n",p=n.unless.call(t,(u=t.section,null==u||u===!1?u:u.limited),{hash:{},inverse:v.noop,fn:v.program(5,l,a),data:a}),(p||0===p)&&(f+=p),f+='\n\n<div class="sidebar-all-container ',m={hash:{},inverse:v.noop,fn:v.program(7,o,a),data:a},u=n.if_neq,p=u?u.call(t,t.subset,"all",m):g.call(t,"if_neq",t.subset,"all",m),(p||0===p)&&(f+=p),f+='">\n	',p=n.unless.call(t,(u=t.section,null==u||u===!1?u:u.limited),{hash:{},inverse:v.noop,fn:v.program(9,c,a),data:a}),(p||0===p)&&(f+=p),f+='\n\n	<h2 class="sidebar-header filter-header">\n		<a class="close-filter-options-btn gray" href="#" tabindex="0"><i class="glyphicon circle-remove"></i></a>\n		<span class="filter-header-title">',m={hash:{},data:a},f+=y((u=n.t,u?u.call(t,"Filter",m):g.call(t,"t","Filter",m)))+"</span>\n	</h2>\n\n	",p=n.unless.call(t,(u=t.section,null==u||u===!1?u:u.limited),{hash:{},inverse:v.noop,fn:v.program(12,h,a),data:a}),(p||0===p)&&(f+=p),f+="\n</div>\n"
})}),define("plex/control/utils/MediaTypes",["underscore"],function(){var e=function(){this.types=[{id:1,typeString:"movie",label:"Movie"},{id:2,typeString:"show",label:"Show",related:[4]},{id:4,typeString:"episode",label:"Episode",related:[2]},{id:8,typeString:"artist",label:"Artist",related:[9]},{id:9,typeString:"album",label:"Album",related:[8]},{id:13,typeString:"photo",label:"Photo"}],this.byID=_.reduce(this.types,function(e,t){return e[t.id]=t,e},{}),this.byType=_.reduce(this.types,function(e,t){return e[t.typeString]=t,e
},{}),this.getMediaTypes=function(){return this.types},this.getMediaType=function(e){return this.byID[e]},this.getMediaTypeByString=function(e){return this.byType[e]},this.getRelatedMediaTypes=function(e){var t=this.byType[e],n=_.map(t.related,_.bind(function(e){return this.byID[e]},this));return n.unshift(t),n}};return new e}),define("hb!templates/section/FilterOptionView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="search-container">\n	<form class="search-form">\n		<input type="text" class="input-dark input-search" autocomplete="off" spellcheck="false">\n		<i class="glyphicon search"></i>\n		<a class="clear-search-btn gray hide" href="#"><i class="glyphicon circle-remove"></i></a>\n	</form>\n	<a class="deselect-btn gray" href="#">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Deselect All",r):o.call(t,"t","Deselect All",r)))+"</a>\n</div>\n"
})}),define("hb!templates/lists/sidebar/items/FilterOptionListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"selected"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l="",o=this,c="function",d=this.escapeExpression;return l+='<a class="gray ',r=n["if"].call(t,t.selected,{hash:{},inverse:o.noop,fn:o.program(1,s,a),data:a}),(r||0===r)&&(l+=r),l+='" href="#" tabindex="0">'+d((r=t.option,r=null==r||r===!1?r:r.title,typeof r===c?r.apply(t):r))+' <i class="glyphicon ok-2"></i></a>\n'
})}),define("plex/view/lists/sidebar/items/FilterOptionListItem",["hb!templates/lists/sidebar/items/FilterOptionListItem.tpl","plex/control/Dispatcher","plex/view/BaseView","jquery"],function(e,t,n,i){var a=n.extend({tagName:"li",className:"filter-option",selected:!1,events:{"click a":"onClick"},initialize:function(e){this.parentFilter=e.parentFilter,this.selected=e.selected,this.addBinding(this.model,"change",this.render),this.addBinding(t,"change:linearFilter",this.onLinearFilterChange),this.addBinding(t,"removeAll:filter",this.onRemoveAll)
},render:function(){return this.$el.html(e({option:this.model.toJSON(),selected:this.selected})),this},onClick:function(e){e.preventDefault();var n=i(e.currentTarget),a=n.hasClass("selected"),s={key:this.parentFilter.id,title:this.model.get("title"),value:this.model.id};a?this.parentFilter.get("linear")?t.trigger("change:linearFilter"):t.trigger("remove:filter",s):this.parentFilter.get("linear")?t.trigger("change:linearFilter",s):t.trigger("add:filter",s),n.toggleClass("selected")},onLinearFilterChange:function(e){e&&e.value===this.model.id||this.$(".selected").removeClass("selected")
},onRemoveAll:function(e){e.key===this.parentFilter.id&&this.$(".selected").removeClass("selected")}});return a}),define("plex/view/lists/sidebar/FilterOptionList",["plex/view/lists/BaseList","plex/view/lists/sidebar/items/FilterOptionListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"filter-option-list minimal-scrollbar",activeLinearFilter:null,activeFilters:null,initialize:function(e){this.activeLinearFilter=e.activeLinearFilter,this.activeFilters=e.activeFilters,this.setup(t)},render:function(){return this.$el.empty(),this.populate(this.collection),this
},addItem:function(e){if(e.get("title")){var n=this.collection.parentFilter,i=!1;this.activeLinearFilter&&this.activeLinearFilter.value===e.id&&(i=!0),_.each(this.activeFilters,function(t){if(t.key===n.id){var a=_.find(t.titles,function(t){return t==e.get("title")});a&&(i=!0)}});var a=new t({model:e,parentFilter:n,selected:i});this.registerView(a),this.items[e.id]=a,this.$el.append(a.render().el)}}});return n}),define("plex/view/section/FilterOptionView",["hb!templates/section/FilterOptionView.tpl","plex/control/Dispatcher","plex/view/BaseView","plex/view/lists/sidebar/FilterOptionList","jquery"],function(e,t,n,i,a){var s=n.extend({className:"filter-options-container hide",list:null,filter:null,filterOptions:null,activeLinearFilter:null,activeFilters:null,limited:!1,active:!1,events:{"focus .input-search":"onSearchFocus","blur .input-search":"onSearchBlur","keyup .input-search":"onSearchKeyUp","click .clear-search-btn":"onClearSearchClick","submit .search-form":"onSearchSubmit","click .deselect-btn":"onDeselectClick"},initialize:function(e){this.activeLinearFilter=e.activeLinearFilter,this.activeFilters=e.activeFilters,this.limited=e.limited
},render:function(){return this.$el.html(e()),this},open:function(e){this.filter=e,this.filterOptions=e.get("options"),this.active=!0,this.list?this.list.rebase(this.filterOptions):(this.list=this.registerView(new i({collection:this.filterOptions,activeLinearFilter:this.activeLinearFilter,activeFilters:this.activeFilters})),this.$(".search-container").after(this.list.render().el)),this.$(".input-search").val(""),this.$el.removeClass("hide"),_.defer(_.bind(function(){this.$el.css("max-height",this.$(".filter-option-list").height()+100)
},this))},close:function(){this.active=!1,this.$el.css("max-height",0),_.delay(_.bind(function(){this.$el.addClass("hide")},this),800)},reset:function(e){this.filterOptions&&(this.filterOptions.activeFilters=e,this.filterOptions.fetch(),this.list.rebase(this.filterOptions)),this.$(".clear-search-btn").addClass("hide"),this.$(".input-search").val("")},onSearchFocus:function(){this.$(".search-container").addClass("selected")},onSearchBlur:function(){this.$(".search-container").removeClass("selected")
},onSearchKeyUp:function(e){var t=a(e.target),n=t.val(),i=this.filterOptions.search(n);0===n.length?this.$(".clear-search-btn").addClass("hide"):this.$(".clear-search-btn").removeClass("hide"),this.list.rebase(i)},onClearSearchClick:function(e){e.preventDefault(),this.$(".clear-search-btn").addClass("hide"),this.$(".input-search").val(""),this.list.rebase(this.filterOptions)},onSearchSubmit:function(e){e.preventDefault();var n=this.$(".input-search").val();if(n&&!this.limited)for(var i=this.list.collection.models,a=0,s=i.length;s>a;a++){var r=i[a],l=r.get("title");
if(l&&l.toLowerCase()===n.toLowerCase()){var o={key:this.filter.id,title:l,value:r.id};t.trigger("add:filter",o);break}}},onDeselectClick:function(e){e.preventDefault(),this.limited?t.trigger("change:linearFilter"):t.trigger("removeAll:filter",{key:this.filter.id})}});return s}),define("hb!templates/lists/sidebar/items/PrimaryFilterListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var r,l,o="",c=this,d="function",h=this.escapeExpression,u=n.helperMissing;return o+='<a class="gray filter-toggle ',r=n["if"].call(t,t.selected,{hash:{},inverse:c.noop,fn:c.program(1,s,a),data:a}),(r||0===r)&&(o+=r),o+='" href="#!/servers/',(r=n.serverID)?r=r.call(t,{hash:{},data:a}):(r=t.serverID,r=typeof r===d?r.apply(t):r),o+=h(r)+"/sections/",(r=n.sectionID)?r=r.call(t,{hash:{},data:a}):(r=t.sectionID,r=typeof r===d?r.apply(t):r),o+=h(r)+"/"+h((r=t.filter,r=null==r||r===!1?r:r.key,typeof r===d?r.apply(t):r))+'" tabindex="0">\n	',l={hash:{},data:a},o+=h((r=n.t,r?r.call(t,(r=t.filter,null==r||r===!1?r:r.title),l):u.call(t,"t",(r=t.filter,null==r||r===!1?r:r.title),l)))+"\n</a>\n"
})}),define("plex/view/lists/sidebar/items/PrimaryFilterListItem",["hb!templates/lists/sidebar/items/PrimaryFilterListItem.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({tagName:"li",initialize:function(e){this.activePrimaryFilter=e.list.activePrimaryFilter},render:function(){return this.$el.html(e({serverID:this.model.server.id,sectionID:this.model.section.id,filter:this.model.toJSON(),selected:this.activePrimaryFilter===this.model.id})),this}});return n}),define("plex/view/lists/sidebar/PrimaryFilterList",["plex/view/lists/BaseList","plex/view/lists/sidebar/items/PrimaryFilterListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"sidebar-list",activePrimaryFilter:null,initialize:function(e){this.setup(t),this.activePrimaryFilter=e.activePrimaryFilter,this.collection.populate()
},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){return t.get("primary")?e.prototype.addItem.apply(this,arguments):void 0}});return n}),define("hb!templates/lists/sidebar/items/LinearFilterListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<a class="gray remove-filters-btn hide" href="#">\n	<i class="glyphicon circle-minus"></i>\n</a>\n\n<a class="filter-toggle gray" href="#" tabindex="0">\n	',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,(s=t.filter,null==s||s===!1?s:s.title),r):o.call(t,"t",(s=t.filter,null==s||s===!1?s:s.title),r)))+"\n</a>\n"
})}),define("plex/view/lists/sidebar/items/LinearFilterListItem",["hb!templates/lists/sidebar/items/LinearFilterListItem.tpl","plex/control/Dispatcher","plex/view/BaseView","jquery"],function(e,t,n){var i=n.extend({tagName:"li",selected:!1,events:{"click .filter-toggle":"onToggleClick","click .remove-filters-btn":"onRemoveFiltersClick"},initialize:function(e){this.activeLinearFilter=e.list.activeLinearFilter,this.addBinding(t,"change:linearFilter",this.onLinearFilterChange)},render:function(){return this.$el.html(e({filter:this.model.toJSON()})),this.updateLabel(),this
},updateLabel:function(){return this.activeLinearFilter&&this.activeLinearFilter.value?(this.activeLinearFilter.key===this.model.id?(this.$(".filter-toggle").addClass("selected"),this.$(".remove-filters-btn").removeClass("hide")):this.activeLinearFilter.value===this.model.id?(this.$(".filter-toggle").addClass("selected"),this.$(".remove-filters-btn").addClass("hide")):(this.$(".filter-toggle").removeClass("selected"),this.$(".remove-filters-btn").addClass("hide")),void 0):(this.$(".remove-filters-btn").addClass("hide"),"all"===this.model.id?this.$(".filter-toggle").addClass("selected"):this.$(".filter-toggle").removeClass("selected"),void 0)
},onToggleClick:function(e){e.preventDefault();var n=this.model.get("options");if(this.model.get("secondary"))n.url=this.model.url(),n.fetch().done(_.bind(function(){t.trigger("show:filterOptions",this.model,!0)},this));else{var i={title:this.model.get("title"),value:this.model.id};t.trigger("change:linearFilter",i)}},onRemoveFiltersClick:function(e){e.preventDefault(),t.trigger("change:linearFilter")},onLinearFilterChange:function(e){this.activeLinearFilter=e,this.updateLabel()}});return i}),define("plex/view/lists/sidebar/LinearFilterList",["plex/view/lists/BaseList","plex/view/lists/sidebar/items/LinearFilterListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"sidebar-list filter-list",activeLinearFilter:null,initialize:function(e){this.setup(t),this.activeLinearFilter=e.activeLinearFilter,this.collection.populate()
},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("hb!templates/lists/sidebar/items/FilterListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"boolean-toggle"}function r(e,t){var i;return i=n["if"].call(e,e.unwatched,{hash:{},inverse:p.program(6,o,t),fn:p.program(4,l,t),data:t}),i||0===i?i:""}function l(){return"unwatched-toggle"}function o(){return"options-toggle"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var c,d,h,u="",p=this,m=n.helperMissing,f=this.escapeExpression;return u+='<a class="gray remove-filters-btn hide" href="#" tabindex="0">\n	<i class="glyphicon circle-minus"></i>\n</a>\n\n<a class="gray filter-toggle ',h={hash:{},inverse:p.program(3,r,a),fn:p.program(1,s,a),data:a},c=n.if_eq,d=c?c.call(t,(c=t.filter,null==c||c===!1?c:c.filterType),"boolean",h):m.call(t,"if_eq",(c=t.filter,null==c||c===!1?c:c.filterType),"boolean",h),(d||0===d)&&(u+=d),u+='" href="#" tabindex="0">\n	',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,(c=t.filter,null==c||c===!1?c:c.title),h):m.call(t,"t",(c=t.filter,null==c||c===!1?c:c.title),h)))+"\n</a>\n"
})}),define("plex/view/lists/sidebar/items/FilterListItem",["hb!templates/lists/sidebar/items/FilterListItem.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/view/BaseView","jquery"],function(e,t,n,i,a){var s=i.extend({tagName:"li",selectedOptions:null,events:{"click .unwatched-toggle":"onUnwatchedToggleClick","click .boolean-toggle":"onBooleanToggleClick","click .options-toggle":"onOptionsToggleClick","click .remove-filters-btn":"onRemoveFiltersClick"},initialize:function(e){for(var n=[],i=e.list.activeFilters,a=0,s=i.length;s>a;a++){var r=i[a];
r.key===this.model.id&&(n=r.titles)}this.selectedOptions=n,this.addBinding(this.model,"change",this.render),this.addBinding(t,"add:filter",this.onAddFilter),this.addBinding(t,"remove:filter",this.onRemoveFilter),this.addBinding(t,"removeAll:filter",this.onRemoveAllFilters)},render:function(){var t="viewCount"===this.model.id||"unviewedLeafCount"===this.model.id;return this.$el.html(e({filter:this.model.toJSON(),unwatched:t})),t||"boolean"===this.model.get("filterType")?this.selectedOptions.length>0&&this.$(".unwatched-toggle, .boolean-toggle").addClass("selected"):this.updateLabel(),this
},updateLabel:function(){var e=this.$(".options-toggle"),t=n.t(this.model.get("title")),i=this.selectedOptions.length;if(i){e.addClass("selected"),t+=": ";for(var a=0;i>a;a++)t+=this.selectedOptions[a],i>a+1&&(t+=", ");this.$(".remove-filters-btn").removeClass("hide")}else e.removeClass("selected"),this.$(".remove-filters-btn").addClass("hide");e.text(t)},onUnwatchedToggleClick:function(e){e.preventDefault();var n=a(e.target),i={key:this.model.id,title:"Unwatched"};i.value="unviewedLeafCount"===this.model.id?1:0,n.hasClass("selected")?t.trigger("remove:filter",i,!0):t.trigger("add:filter",i,!0),n.toggleClass("selected")
},onBooleanToggleClick:function(e){e.preventDefault();var n=a(e.target),i={key:this.model.id,title:this.model.get("title"),value:1};n.hasClass("selected")?t.trigger("remove:filter",i,!0):t.trigger("add:filter",i,!0),n.toggleClass("selected")},onOptionsToggleClick:function(e){e.preventDefault();var n=this.model.get("options");n.fetch().done(_.bind(function(){t.trigger("show:filterOptions",this.model)},this))},onRemoveFiltersClick:function(e){e.preventDefault(),t.trigger("removeAll:filter",{key:this.model.id})
},onAddFilter:function(e,t){e.key!==this.model.id||t||(this.selectedOptions.push(e.title),this.updateLabel())},onRemoveFilter:function(e,t){e.key!==this.model.id||t||(this.selectedOptions=_.reject(this.selectedOptions,function(t){return t===e.title}),this.updateLabel())},onRemoveAllFilters:function(e){e.key===this.model.id&&(this.selectedOptions.length=0,this.updateLabel())}});return s}),define("plex/view/lists/sidebar/FilterList",["plex/view/lists/BaseList","plex/view/lists/sidebar/items/FilterListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"sidebar-list filter-list",activeFilters:null,initialize:function(e){this.setup(t),this.activeFilters=e.activeFilters,this.collection.populate()
},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("hb!templates/lists/sidebar/items/SortListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,o="";return o+='\n	<a class="gray filter-toggle selected" href="#" tabindex="0">',s={hash:{},data:t},o+=u((i=n.t,i?i.call(e,(i=e.sort,null==i||i===!1?i:i.title),s):h.call(e,"t",(i=e.sort,null==i||i===!1?i:i.title),s)))+" ",a=n["if"].call(e,e.descending,{hash:{},inverse:p.program(4,l,t),fn:p.program(2,r,t),data:t}),(a||0===a)&&(o+=a),o+="</a>\n"
}function r(){return'<i class="glyphicon-caret small"></i>'}function l(){return'<i class="glyphicon-caret reverse small"></i>'}function o(e,t){var i,a,s="";return s+='\n	<a class="gray filter-toggle" href="#" tabindex="0">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,(i=e.sort,null==i||i===!1?i:i.title),a):h.call(e,"t",(i=e.sort,null==i||i===!1?i:i.title),a)))+"</a>\n"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d="",h=n.helperMissing,u=this.escapeExpression,p=this;return c=n["if"].call(t,t.active,{hash:{},inverse:p.program(6,o,a),fn:p.program(1,s,a),data:a}),(c||0===c)&&(d+=c),d+="\n"
})}),define("plex/view/lists/sidebar/items/SortListItem",["hb!templates/lists/sidebar/items/SortListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var i=n.extend({tagName:"li",active:!1,direction:"desc",events:{click:"onClick"},initialize:function(e){var n=e.list.activeSort;if(this.addBinding(this.model,"change",this.render),this.addBinding(t,"change:sort",this.onSortChange),_.isEmpty(n)){var i=this.model.get("default");i&&(this.active=!0,this.direction=i)}else this.model.id===n.key&&(this.active=!0,this.direction=n.direction)
},render:function(){return this.$el.html(e({active:this.active,descending:"desc"===this.direction,sort:this.model.toJSON()})),this},onClick:function(e){e.preventDefault(),this.active?"desc"===this.direction?this.direction="asc":this.active=!1:(this.active=!0,this.direction="desc"),this.render(),this.active?t.trigger("change:sort",{key:this.model.id,direction:this.direction}):t.trigger("change:sort",{key:null})},onSortChange:function(e){this.model.id!==e.key&&(this.active=!1),this.render()}});return i
}),define("plex/view/lists/sidebar/SortList",["plex/view/lists/BaseList","plex/view/lists/sidebar/items/SortListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"sidebar-list",activeSort:null,initialize:function(e){this.setup(t),this.activeSort=e.activeSort,this.collection.populate()},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("hb!templates/lists/sidebar/items/MediaTypeListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"selected"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l="",o=this,c="function",d=this.escapeExpression;return l+='<a class="gray ',r=n["if"].call(t,t.active,{hash:{},inverse:o.noop,fn:o.program(1,s,a),data:a}),(r||0===r)&&(l+=r),l+='" href="#" tabindex="0">',(r=n.label)?r=r.call(t,{hash:{},data:a}):(r=t.label,r=typeof r===c?r.apply(t):r),l+=d(r)+"</a>\n"})}),define("plex/view/lists/sidebar/items/MediaTypeListItem",["hb!templates/lists/sidebar/items/MediaTypeListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var i=n.extend({tagName:"li",active:!1,direction:"desc",events:{click:"onClick"},initialize:function(e){var n=e.list.activeType;
this.addBinding(t,"change:mediaType",this.onMediaTypeChange),this.model.id===n&&(this.active=!0)},render:function(){var t={active:this.active,label:this.model.label};return this.$el.html(e(t)),this},onClick:function(e){e.preventDefault(),this.active=!0,this.render(),t.trigger("change:mediaType",this.model.id)},onMediaTypeChange:function(e){this.model.id!==e&&(this.active=!1),this.render()}});return i}),define("plex/view/lists/sidebar/MediaTypeList",["plex/view/BaseView","plex/view/lists/sidebar/items/MediaTypeListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"sidebar-list",activeType:null,initialize:function(e){this.activeType=e.activeType
},render:function(){return this.$el.empty(),_.each(this.collection,_.bind(function(e){var n=this.registerView(new t({model:e,list:this}));this.$el.append(n.render().el)},this)),this}});return n}),define("plex/view/section/SidebarView",["hb!templates/section/SidebarView.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/control/utils/MediaTypes","plex/model/SettingsModel","plex/view/BaseView","plex/view/section/FilterOptionView","plex/view/lists/sidebar/PrimaryFilterList","plex/view/lists/sidebar/LinearFilterList","plex/view/lists/sidebar/FilterList","plex/view/lists/sidebar/SortList","plex/view/lists/sidebar/MediaTypeList","jquery"],function(e,t,n,i,a,s,r,l,o,c,d,h){var u=s.extend({className:"sidebar minimal-scrollbar",subset:null,listType:null,primaryFilterList:null,mediaTypeList:null,linearFilterList:null,filterList:null,filterOptions:null,sortList:null,events:{"click .media-tile-list-btn":"onMediaTileListClick","click .media-list-btn":"onMediaListClick","click .media-compact-list-btn":"onMediaCompactListClick","click .folder-btn":"onFolderClick","click .close-filter-options-btn":"onCloseFilterOptionsClick"},initialize:function(e){var n=this.model.get("limited"),s=this.model.get("media"),u=this.model.get("alphanumeric"),p=this.model.get("linearFilters"),m=this.model.get("filters"),f=this.model.get("sorts"),v=i.getRelatedMediaTypes(this.model.get("type")),g=s.mediaType||v[0].id;
this.subset=e.subset,this.listType=e.listType||a.get("listType"),s.mediaType=g,u.mediaType=g,m.mediaType=g,f.mediaType=g,n?(this.linearFilterList=this.registerView(new o({collection:p,activeLinearFilter:s.linearFilter})),this.filterOptions=this.registerView(new r({activeLinearFilter:s.linearFilter,limited:!0}))):(this.primaryFilterList=this.registerView(new l({collection:p,activePrimaryFilter:this.subset})),this.filterList=this.registerView(new c({collection:m,activeFilters:s.filters})),this.filterOptions=this.registerView(new r({activeFilters:s.filters,limited:n})),this.sortList=this.registerView(new d({collection:f,activeSort:s.sort}))),v.length>1&&(this.mediaTypeList=this.registerView(new h({collection:v,activeType:s.mediaType}))),e.hidden&&this.$el.addClass("hidden"),this.addBinding(t,"show:filterOptions",this.onShowFilterOptions),this.addBinding(t,"change:linearFilter",this.onLinearFilterChange),this.addBinding(t,"add:filter",this.onAddFilter),this.addBinding(t,"remove:filter",this.onRemoveFilter),this.addBinding(t,"removeAll:filter",this.onRemoveAllFilters),this.addBinding(t,"reset:filter",this.onResetFilters),this.addBinding(t,"change:firstCharacter",this.onFirstCharacter),this.addBinding(t,"change:sort",this.onSortChange),this.addBinding(t,"change:mediaType",this.onMediaTypeChange),this.addBinding(t,"search:section",this.onSearch),this.addBinding(this.model,"change:title",this.onTitleChange)
},render:function(){return this.model.get("type"),this.$el.html(e({section:this.model.toJSON(),subset:this.subset,listType:this.listType,showTypes:!!this.mediaTypeList})),this.primaryFilterList&&this.$(".media-header").after(this.primaryFilterList.render().el),this.mediaTypeList&&this.$(".type-header").after(this.mediaTypeList.render().el),this.linearFilterList&&this.$(".filter-header").after(this.linearFilterList.render().el),this.filterList&&this.$(".filter-header").after(this.filterList.render().el),this.filterOptions&&this.$(".filter-header").after(this.filterOptions.render().el),this.sortList&&this.$(".sort-header").after(this.sortList.render().el),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this
},propagateFilters:function(e){var t=this.model.get("filters");t.each(function(t){var n=t.get("options");n.activeFilters=e})},propagateMediaType:function(e){var t=this.model.get("filters");t.each(function(t){var n=t.get("options");n.activeType=e})},fetchMedia:function(){var e=this.model.get("media");e.start=0,e.fetch().done(function(){window.scrollTo&&window.scrollTo(0,0)})},fetchAlphanumeric:function(){var e=this.model.get("media"),t=this.model.get("alphanumeric");t.filters=e.filters,t.fetch()},onMediaTileListClick:function(e){e.preventDefault();
var t="media-tile-list";a.save("listType",t)},onMediaListClick:function(e){e.preventDefault();var t="media-list";a.save("listType",t)},onMediaCompactListClick:function(e){e.preventDefault();var t="media-compact-list";a.save("listType",t)},onFolderClick:function(e){e.preventDefault(),"folder"===this.subset?t.trigger("navigate:section",this.model.server.id,this.model.id):t.trigger("navigate:sectionFolder",this.model.server.id,this.model.id)},onCloseFilterOptionsClick:function(e){e.preventDefault(),this.$(".filter-header").removeClass("active"),this.$(".filter-header-title").text(n.t("Filter")),this.$(".filter-list").removeClass("hidden"),this.filterOptions.close()
},onShowFilterOptions:function(e,t){e.get("options").length;var i,a=n.t(e.get("title"));i=t?n.t(a):n.t("Filter By {1}",a),this.$(".filter-header").addClass("active"),this.$(".filter-header-title").text(i),this.$(".filter-list").addClass("hidden"),this.filterOptions.open(e)},onLinearFilterChange:function(e){var t=this.model.get("media");e||(e={value:"all",title:"All"}),t.linearFilter.key=e.key,t.linearFilter.value=e.value,t.linearFilter.title=e.title;var n=e.value;e.key&&-1===n.indexOf(e.key+"/")&&(n=e.key+"/"+n),t.type=n,this.fetchMedia()
},onAddFilter:function(e,t){var n=this.model.get("media"),i=n.filters,a=_.find(i,function(t){return t.key===e.key});a?(t&&(a.titles.length=0,a.values.length=0),a.titles.push(e.title),a.values.push(e.value)):i.push({key:e.key,titles:[e.title],values:[e.value]}),this.propagateFilters(i),this.fetchMedia(),this.fetchAlphanumeric()},onRemoveFilter:function(e){var t=this.model.get("media"),n=t.filters,i=_.find(n,function(t){return t.key===e.key});i&&(i.titles=_.reject(i.titles,function(t){return t===e.title
}),i.values=_.reject(i.values,function(t){return t===e.value})),this.propagateFilters(n),this.fetchMedia(),this.fetchAlphanumeric()},onRemoveAllFilters:function(e){var t=this.model.get("media"),n=t.filters,i=_.find(n,function(t){return t.key===e.key});i&&(i.titles.length=0,i.values.length=0),this.propagateFilters(n),this.fetchMedia(),this.fetchAlphanumeric()},onResetFilters:function(){var e=this.model.get("media"),t=this.model.get("filters");e.filters.length=0,e.search=null,e.firstCharacter=null,this.filterList.reset(t),this.filterOptions.reset(e.filters),this.fetchMedia(),this.fetchAlphanumeric()
},onFirstCharacter:function(e){var t=this.model.get("media");t.firstCharacter=e,this.fetchMedia()},onSortChange:function(e){var t=this.model.get("media");t.sort=e,this.fetchMedia()},onMediaTypeChange:function(e){var t=this.model.get("media"),i=this.model.get("alphanumeric"),a=this.model.get("filters"),s=this.model.get("sorts");t.mediaType=e,i.mediaType=e,a.mediaType=e,s.mediaType=e,t.firstCharacter=null,t.filters.length=0,t.sort={},this.propagateFilters(t.filters),this.propagateMediaType(e),this.fetchMedia(),this.fetchAlphanumeric(),a.fetch(),s.fetch(),this.filterOptions.active&&(this.$(".filter-header").removeClass("active"),this.$(".filter-header-title").text(n.t("Filter")),this.$(".filter-list").removeClass("hidden"),this.filterOptions.close())
},onSearch:function(e){var t=this.model.get("media");e?this.onAddFilter({key:"title",value:e},!0):this.onRemoveFilter({key:"title",value:t.search}),t.search=e},onTitleChange:function(e,t){this.$(".media-header").text(t)}});return u}),define("hb!templates/modals/AddToCollectionModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a="";return a+='\n		<ul class="select-collections-list select-list minimal-light-scrollbar">\n			',i=n.each.call(e,e.collections,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(i||0===i)&&(a+=i),a+="\n		</ul>\n	"
}function r(e,t){var i,a,s="";return s+='\n				<li>\n					<a class="collection" data-id="',(i=n.key)?i=i.call(e,{hash:{},data:t}):(i=e.key,i=typeof i===u?i.apply(e):i),s+=p(i)+'" href="#">\n						',a={hash:{},data:t},s+=p((i=n.truncate,i?i.call(e,e.title,30,a):m.call(e,"truncate",e.title,30,a)))+"\n					</a>\n				</li>\n			"}function l(e,t){var i,a,s="";return s+='\n		<div class="empty-message">',a={hash:{},data:t},s+=p((i=n.t,i?i.call(e,"There are no collections yet.",a):m.call(e,"t","There are no collections yet.",a)))+"</div>\n	"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var o,c,d,h="",u="function",p=this.escapeExpression,m=n.helperMissing,f=this;return h+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon folder-plus"></i> ',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Add to Collection",d):m.call(t,"t","Add to Collection",d)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	',c=n["if"].call(t,t.collections,{hash:{},inverse:f.program(4,l,a),fn:f.program(1,s,a),data:a}),(c||0===c)&&(h+=c),h+='\n\n	<div class="input-minimal-container">\n		<input id="new-collection" class="input-dark input-minimal" type="text" placeholder="',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"New Collection...",d):m.call(t,"t","New Collection...",d)))+'">\n	</div>\n</div>\n\n<div class="modal-footer pull-center">\n	<button type="button" class="add-btn btn btn-medium btn-primary disabled">',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Add",d):m.call(t,"t","Add",d)))+"</button>\n</div>\n"
})}),define("plex/view/modals/AddToCollectionModal",["hb!templates/modals/AddToCollectionModal.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/modals/BaseModal","jquery"],function(e,t,n,i,a,s){var r=a.extend({name:"addToCollectionModal",className:"modal modal-small select-modal add-to-collection-modal fade",collectionIDs:null,events:{hidden:"close","click .collection":"onCollectionClick","keyup #new-collection":"onNewCollectionKeyUp","click .add-btn":"onAddClick"},initialize:function(e){this.collectionIDs=[],this.models=e.models
},render:function(){return this.$el.html(e({collections:this.collection.toJSON()})).modal(),this},enableAddButton:function(){var e=this.$("#new-collection").val();this.collectionIDs.length||e.length?this.$(".add-btn").removeClass("disabled"):this.$(".add-btn").addClass("disabled")},onCollectionClick:function(e){e.preventDefault();var t=s(e.currentTarget),n=t.data("id");t.hasClass("selected")?this.collectionIDs.splice(_.indexOf(this.collectionIDs,n),1):this.collectionIDs.push(n),s(e.target).toggleClass("selected"),this.enableAddButton()
},onNewCollectionKeyUp:function(){this.enableAddButton()},onAddClick:function(e){e.preventDefault();var a=s(e.currentTarget);if(!a.hasClass("disabled")){var r=[],l=this.$("#new-collection").val();l&&r.push(this.models[0].batchAdd(this.models,"collection",l)),this.collectionIDs.length&&_.each(this.collectionIDs,_.bind(function(e){var t=this.collection.get(e);r.push(this.models[0].batchAdd(this.models,"collection",t.get("title")))},this)),t.trigger("command:ShowLoading",!0),s.when.apply(s,r).always(function(){t.trigger("command:ShowLoading",!1)
}).done(_.bind(function(){this.$el.modal("hide")},this)).fail(function(){i.set("alert",{status:"error",message:n.t("There was a problem adding these items to a collection.")})})}}});return r}),define("plex/view/section/SectionActionBarView",["hb!templates/section/SectionActionBarView.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/model/SettingsModel","plex/model/FilterModel","plex/view/KeyboardNavigationView","plex/view/section/SidebarView","plex/view/modals/SyncModal","plex/view/modals/SelectDeviceModal","plex/view/modals/ConfirmModal","plex/view/modals/AddToCollectionModal","jquery"],function(e,t,n,i,a,s,r,l,o,c,d,h,u){var p={showOptions:!0,showSelect:!0,showDeselect:!0,showMultiSelect:!0,showSync:!0},m={movie:{showSelectionEdit:!0,showRefresh:!0,showAnalyze:!0,showAddToCollection:!0,showWatch:!0,showMerge:!0},show:{showSelectionEdit:!0,showRefresh:!0,showAddToCollection:!0,showWatch:!0,showMerge:!0},episode:{showSelectionEdit:!0,showRefresh:!0,showAnalyze:!0,showAddToCollection:!0,showWatch:!0},artist:{showSelectionEdit:!0,showRefresh:!0,showAddToCollection:!0,showMerge:!0},album:{showSelectionEdit:!0,showRefresh:!0,showAddToCollection:!0,showMerge:!0},photo:{showSelectionEdit:!0,showRefresh:!0,showAnalyze:!0,showAddToCollection:!0}},f=r.extend({className:"sidebar-container",keyboardActivationDirection:"left",keyboardNavigationPaths:{".iconbar a":{left:".list-types-container .btn:last"},".btn-group > .btn":{down:".sidebar-list .filter-toggle"},".folder-btn":{right:".options-icon-btn"},".sidebar-list .filter-toggle":{right:".options-icon-btn"}},keyboardCancellationDirections:{right:".iconbar a",up:".btn-group > .btn, .folder-btn"},models:null,editing:!1,shared:!1,collectionFilter:null,sidebar:null,events:{"click .options-icon-btn":"onOptionsClick","click .select-icon-btn":"onSelectClick","click .deselect-icon-btn":"onDeselectClick","click .refresh-icon-btn":"onRefreshClick","click .analyze-icon-btn":"onAnalyzeClick","click .add-collection-icon-btn":"onAddCollectionClick","click .watch-icon-btn":"onWatchClick","click .unwatch-icon-btn":"onUnwatchClick","click .merge-icon-btn":"onMergeClick","click .sync-icon-btn":"onSyncClick"},initialize:function(e){var n=i.get("myPlex"),a=_.clone(p);
this.collectionFilter=new s({filter:"collection",filterType:"string",type:"filter",title:"Collection"}),this.sectionOptions=_.extend(a,e),this.visibilityOptions=_.extend({},this.sectionOptions),this.sectionOptions.showSync&&(this.addBinding(this.collection,"reset",this.updateSync),this.addBinding(n.get("devices"),"reset",this.updateSync)),this.sidebar=this.registerView(new l({model:this.model,subset:this.collection.subset})),this.addBinding(t,"shortcut:sidebar",this.toggleSidebar),this.addBinding(t,"shortcut:refresh",this.refresh),this.addBinding(t,"shortcut:analyze",this.analyze),this.addBinding(t,"shortcut:markWatched",this.markWatched),this.addBinding(t,"shortcut:markUnwatched",this.markUnwatched),this.addBinding(t,"shortcut:sync",this.sync)
},render:function(){this.updateVisibilityOptions();var t=_.extend({},this.visibilityOptions);return this.$el.html(e(t)),this.$el.append(this.sidebar.render().el),a.get("sidebarOpen")?(this.$el.addClass("open"),this.trigger("open")):this.$(".sidebar").addClass("hide"),this.$el.tooltip({selector:".actionbar-icon-btn, .actionbar-glyphicon-btn",placement:"right"}),this},updateVisibilityOptions:function(){this.visibilityOptions.showSelect=this.showSelect(),this.visibilityOptions.showDeselect=this.showDeselect(),this.visibilityOptions.showSync=this.showSync();
var e=this.showMultiSelect();e&&(this.visibilityOptions=_.extend(this.visibilityOptions,e))},showSelect:function(){var e=this.model.server.get("shared"),t=this.model.get("limited"),n=this.model.server.get("multiuser");return this.sectionOptions.showSelect?e&&!n?!1:t?!1:!this.editing:!1},showDeselect:function(){var e=this.model.server.get("shared"),t=this.model.server.get("multiuser");return this.sectionOptions.showDeselect?e&&!t?!1:this.editing:!1},showMultiSelect:function(){var e=this.model.server.get("shared"),t=this.model.server.get("multiuser");
if(!this.sectionOptions.showMultiSelect)return!1;if(e&&!t)return!1;if(this.model.get("limited"))return!1;if(!this.models||!this.models.length)return!1;var n=this.models[0],i=_.extend({},m[n.get("type")]);return i.showAddToCollection&&(n.server.supports("batchEdit")||(i.showAddToCollection=!1)),i.showMerge&&(2>this.models.length||!n.server.supports("merge"))&&(i.showMerge=!1),e&&(i.showRefresh=!1,i.showAnalyze=!1,i.showAddToCollection=!1,i.showMerge=!1),i},showSync:function(){if(!this.sectionOptions.showSync)return!1;
if(this.model.get("limited"))return!1;var e=i.get("myPlex"),t=e.get("devices").getSyncDevices();return!this.model.server.get("shared")&&this.model.server.supports("sync")&&t.length&&e.get("signedIn")&&this.collection.allowSync?!0:!1},updateAction:function(e,t){e?this.$(t).removeClass("hide"):this.$(t).addClass("hide"),u(".tooltip").remove()},updateSelect:function(){this.visibilityOptions.showSelect=this.showSelect(),this.updateAction(this.visibilityOptions.showSelect,".select-action")},updateDeselect:function(){this.visibilityOptions.showDeselect=this.showDeselect(),this.updateAction(this.visibilityOptions.showDeselect,".deselect-action")
},updateMultiSelect:function(){var e=this.showMultiSelect();e?this.visibilityOptions=_.extend(this.visibilityOptions,e):(this.visibilityOptions.showRefresh=!1,this.visibilityOptions.showAnalyze=!1,this.visibilityOptions.showAddToCollection=!1,this.visibilityOptions.showWatch=!1,this.visibilityOptions.showMerge=!1),this.updateAction(e.showRefresh,".refresh-action"),this.updateAction(e.showAnalyze,".analyze-action"),this.updateAction(e.showAddToCollection,".add-to-collection-action"),this.updateAction(e.showWatch,".watch-action"),this.updateAction(e.showWatch,".unwatch-action"),this.updateAction(e.showMerge,".merge-action")
},updateSync:function(){this.visibilityOptions.showSync=this.showSync(),this.updateAction(this.visibilityOptions.showSync,".sync-action")},setModels:function(e){if(this.models=e,e.length){this.editing=!0;var t=e[0];this.collectionFilter.set("key","/library/sections/"+t.section.id+"/collection"),this.collectionFilter.server=t.server,this.collectionFilter.section=t.section;var n=this.collectionFilter.get("options");n.server=t.server,n.section=t.section}else this.editing=!1;this.updateSelect(),this.updateDeselect(),this.updateMultiSelect()
},toggleSidebar:function(){this.visibilityOptions.showOptions&&(u(".tooltip").remove(),this.$el.toggleClass("open"),this.$el.hasClass("open")?(a.save("sidebarOpen",!0),this.trigger("open")):(a.save("sidebarOpen",!1),this.trigger("close")))},refresh:function(){this.visibilityOptions.showRefresh&&_.each(this.models,function(e){t.trigger("command:RefreshMetadata",e)})},analyze:function(){this.visibilityOptions.showAnalyze&&_.each(this.models,function(e){t.trigger("command:AnalyzeMedia",e)})},markWatched:function(){if(this.visibilityOptions.showWatch){var e=_.bind(function(){_.each(this.models,function(e){t.trigger("command:MarkWatched",e,!0)
})},this),a=new d({title:n.t("Mark as Watched"),message:n.t("Are you sure you want to mark all selected items as watched?")});a.on("yes",e),i.set("modal",a)}},markUnwatched:function(){if(this.visibilityOptions.showWatch){var e=_.bind(function(){_.each(this.models,function(e){t.trigger("command:MarkUnwatched",e,!0)})},this),a=new d({title:n.t("Mark as Unwatched"),message:n.t("Are you sure you want to mark all selected items as unwatched?")});a.on("yes",e),i.set("modal",a)}},sync:function(){if(this.visibilityOptions.showSync){var e=i.get("myPlex"),t=e.get("devices"),n=t.getSyncDevices(),a={directory:!0,section:!0,subset:this.collection.subset,model:this.model};
this.models&&this.models.length&&(a.models=this.models);var s=new o(a);if(n.length>1){var r=new c,l=_.bind(function(e){r.off("select:device",l),s.device=t.get(e),i.set("modal",s)},this);r.on("select:device",l),i.set("modal",r)}else 1===n.length&&(s.device=n[0],i.set("modal",s))}},onOptionsClick:function(e){e.preventDefault(),this.toggleSidebar()},onSelectClick:function(e){e.preventDefault(),this.editing=!0,this.trigger("select"),this.updateSelect(),this.updateDeselect()},onDeselectClick:function(e){e.preventDefault(),this.trigger("deselect")
},onRefreshClick:function(e){e.preventDefault(),this.refresh()},onAnalyzeClick:function(e){e.preventDefault(),this.analyze()},onAddCollectionClick:function(e){e.preventDefault();var t=this.collectionFilter.get("options");t.fetch().always(_.bind(function(){i.set("modal",new h({collection:t,models:this.models}))},this))},onWatchClick:function(e){e.preventDefault(),this.markWatched()},onUnwatchClick:function(e){e.preventDefault(),this.markUnwatched()},onMergeClick:function(e){e.preventDefault();var n=this.models[0],i=this.models.slice(1);
t.trigger("command:Merge",n,i)},onSyncClick:function(e){e.preventDefault(),this.sync()}});return f}),define("plex/view/section/SectionView",["hb!templates/section/SectionView.tpl","plex/model/SettingsModel","plex/view/BaseView","plex/view/section/SectionListView","plex/view/section/SectionActionBarView"],function(e,t,n,i,a){var s=n.extend({className:"container-fluid container-fluid-full",list:null,actionBar:null,initialize:function(e){var n=this.model.get("media");this.model.get("alphanumeric");var s=this.model.server.id+"!"+this.model.id+"!subset";
e.subset||(e.subset=t.get(s)),n.updateSubset(e.subset),t.save(s,n.subset),this.list=this.registerView(new i({model:this.model,collection:n,infiniteScroll:!0})),this.actionBar=this.registerView(new a({model:this.model,collection:n})),this.actionBar.setModels([]),this.addBinding(this.list,"change:selectedModels",this.onSelectedModelsChange),this.addBinding(this.actionBar,"select",this.onSelectItems),this.addBinding(this.actionBar,"deselect",this.onDeselectItems),this.addBinding(this.actionBar,"open",this.onSidebarOpen),this.addBinding(this.actionBar,"close",this.onSidebarClose),this.addBinding(n,"merge",this.onMerge)
},render:function(){return this.model.get("media"),this.$el.html(e({serverID:this.model.server.id,shared:this.model.server.get("shared"),section:this.model.toJSON(),subset:this.subset,search:this.model.get("media").search})),this.$(".section-container").append(this.list.render().el),this.$el.prepend(this.actionBar.render().el),this},onMerge:function(){var e=this.model.get("alphanumeric"),t=this.model.get("recentlyAdded");e.fetch({hideLoadingAlert:!0}),this.list.collection===t&&t.fetch({hideLoadingAlert:!0})
},onSelectedModelsChange:function(e){this.actionBar.setModels(e),e.length?this.list.edit():this.list.unedit()},onSelectItems:function(){this.list.edit()},onDeselectItems:function(){this.list.deselectAll()},onSidebarOpen:function(){this.$(".sidebar").removeClass("hide"),this.$el.addClass("sidebar-open")},onSidebarClose:function(){this.$el.removeClass("sidebar-open");var e,t=this.$(".section-container").css("transition-delay").split(", ");_.isArray(t)&&t.length?(e=1e3*_.last(t).replace("s",""),_.delay(_.bind(function(){this.$(".sidebar").addClass("hide"),this.list.loadPosters()
},this),e)):(this.$(".sidebar").addClass("hide"),this.list.loadPosters())}});return s}),define("hb!templates/section/SectionFolderView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<div class="folder-section-row">\n	<div class="section-list-scroll-container"></div>\n</div>\n\n<div class="section-container"></div>\n'})}),define("plex/view/section/SectionFolderView",["hb!templates/section/SectionFolderView.tpl","plex/model/media/collections/MediaCollection","plex/view/BaseView","plex/view/section/SectionListView","plex/view/section/SectionActionBarView"],function(e,t,n,i,a){var s=n.extend({className:"container-fluid container-fluid-full",list:null,actionBar:null,initialize:function(e){var n="library/sections/"+this.model.id+"/folder";
e.folderID&&(n=decodeURIComponent(e.folderID));var s=new t([],{server:this.model.server,section:this.model,subset:"folder",url:n,listen:!1});this.actionBar=this.registerView(new a({model:this.model,collection:s,showSelect:!1,showSync:!1})),this.actionBar.setModels([]),this.list=this.registerView(new i({model:this.model,collection:s})),s.fetch(),this.addBinding(this.actionBar,"open",this.onSidebarOpen),this.addBinding(this.actionBar,"close",this.onSidebarClose)},render:function(){return this.$el.html(e()),this.$(".section-container").append(this.list.render().el),this.$el.prepend(this.actionBar.render().el),this
},onSidebarOpen:function(){this.$(".sidebar").removeClass("hide"),this.$el.addClass("sidebar-open")},onSidebarClose:function(){this.$el.removeClass("sidebar-open");var e,t=this.$(".section-container").css("transition-delay").split(", ");_.isArray(t)&&t.length?(e=1e3*_.last(t).replace("s",""),_.delay(_.bind(function(){this.$(".sidebar").addClass("hide"),this.list.loadPosters()},this),e)):(this.$(".sidebar").addClass("hide"),this.list.loadPosters())}});return s}),define("hb!templates/details/DetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<div class="fanart"></div>\n<div class="fanart-overlay"></div>\n'
})}),define("hb!templates/details/MovieDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return'\n				<div class="poster-container">\n					<img class="movie-poster poster large-poster">\n\n					<span class="media-count"></span>\n				</div>\n			'}function r(){return'\n				<a class="change-poster-btn" href="#">\n					<div class="poster-container">\n						<div class="poster-card">\n							<div class="poster-face front">\n								<img class="movie-poster poster large-poster">\n\n								<span class="media-count"></span>\n\n								<div class="hover-overlay card-overlay">\n									<i class="hover-menu-btn glyphicon pencil"></i>\n								</div>\n							</div>\n						</div>\n					</div>\n				</a>\n			'
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o,c="",d=this,h=n.helperMissing,u=this.escapeExpression;return c+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			',l=n["if"].call(t,t.limited,{hash:{},inverse:d.program(3,r,a),fn:d.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='\n\n			<div class="media-flags">\n				<img class="movie-video-resolution media-flag">\n				<img class="movie-audio-codec media-flag">\n				<img class="movie-audio-channels media-flag">\n			</div>\n		</div>\n\n		<div class="movie-metadata details-metadata">\n			<div class="metadata-right">\n				<h1 class="movie-year"></h1>\n\n				<div class="movie-content-rating metadata"><img class="media-flag"></div>\n\n				<div class="movie-rating metadata"></div>\n			</div>\n\n			<h1><span class="movie-title"></span><button class="movie-unavailable unavailable-btn btn btn-small btn-danger" tabindex="0">',o={hash:{},data:a},c+=u((l=n.t,l?l.call(t,"Unavailable",o):h.call(t,"t","Unavailable",o)))+'</button></h1>\n\n			<div class="movie-genre metadata"></div>\n\n			<div class="metadata metadata-duration">\n				<span class="movie-duration"></span>\n\n				<div class="unwatched-icon unwatched-partial-icon"></div>\n				<div class="unwatched-icon unwatched-full-icon"></div>\n			</div>\n\n			<h2 class="movie-tagline tagline"></h2>\n\n			<div class="movie-director metadata metadata-top"></div>\n			<div class="movie-writer metadata"></div>\n			<div class="movie-cast metadata"></div>\n\n			<div class="movie-audio metadata metadata-top hide"><span class="metadata-label">',o={hash:{},data:a},c+=u((l=n.t,l?l.call(t,"Audio",o):h.call(t,"t","Audio",o)))+'</span></div>\n			<div class="movie-subtitles metadata hide"><span class="metadata-label">',o={hash:{},data:a},c+=u((l=n.t,l?l.call(t,"Subtitles",o):h.call(t,"t","Subtitles",o)))+'</span></div>\n\n			<div class="movie-summary summary"></div>\n\n			<div class="media-flags">\n				<img class="movie-studio studio">\n			</div>\n		</div>\n	</div>\n</div>\n'
})}),define("hb!templates/details/ActionBarView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-glyphicon-btn edit-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Edit",a):k.call(e,"t","Edit",a)))+'">\n				<i class="glyphicon pencil"></i>\n			</a>\n		</li>\n	'}function r(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-glyphicon-btn refresh-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Refresh",a):k.call(e,"t","Refresh",a)))+'">\n				<i class="glyphicon repeat"></i>\n			</a>\n		</li>\n	'
}function l(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-glyphicon-btn analyze-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Analyze",a):k.call(e,"t","Analyze",a)))+'">\n				<i class="glyphicon magic"></i>\n			</a>\n		</li>\n	'}function o(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-icon-btn watch-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Mark as Watched",a):k.call(e,"t","Mark as Watched",a)))+'">\n				',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Mark as Watched",a):k.call(e,"t","Mark as Watched",a)))+"\n			</a>\n		</li>\n	"
}function c(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-icon-btn unwatch-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Mark as Unwatched",a):k.call(e,"t","Mark as Unwatched",a)))+'">\n				',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Mark as Unwatched",a):k.call(e,"t","Mark as Unwatched",a)))+"\n			</a>\n		</li>\n	"}function d(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-glyphicon-btn fix-match-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Fix Incorrect Match",a):k.call(e,"t","Fix Incorrect Match",a)))+'">\n				<i class="glyphicon nameplate"></i>\n			</a>\n		</li>\n	'
}function h(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-icon-btn unmatch-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Unmatch",a):k.call(e,"t","Unmatch",a)))+'">\n				',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Unmatch",a):k.call(e,"t","Unmatch",a)))+"\n			</a>\n		</li>\n	"}function u(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-glyphicon-btn split-apart-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Split Apart",a):k.call(e,"t","Split Apart",a)))+'">\n				<i class="glyphicon resize-full"></i>\n			</a>\n		</li>\n	'
}function p(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-glyphicon-btn sync-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Sync to Device",a):k.call(e,"t","Sync to Device",a)))+'">\n				<i class="glyphicon download"></i>\n			</a>\n		</li>\n	'}function m(e,t){var i;return i=n["if"].call(e,e.downloadUrl,{hash:{},inverse:A.noop,fn:A.program(20,f,t),data:t}),i||0===i?i:""}function f(e,t){var i,a,s,r="";return r+='\n		<li>\n			<a class="actionbar-glyphicon-btn download-icon-btn" href="',(i=n.downloadUrl)?i=i.call(e,{hash:{},data:t}):(i=e.downloadUrl,i=typeof i===C?i.apply(e):i),r+=S(i)+'" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',s={hash:{},data:t},r+=S((i=n.t,i?i.call(e,"Download",s):k.call(e,"t","Download",s)))+'" download="',(a=n.downloadName)?a=a.call(e,{hash:{},data:t}):(a=e.downloadName,a=typeof a===C?a.apply(e):a),r+=S(a)+'">\n				<i class="glyphicon inbox-in"></i>\n			</a>\n		</li>\n	'
}function v(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-glyphicon-btn delete-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Delete",a):k.call(e,"t","Delete",a)))+'">\n				<i class="glyphicon ban"></i>\n			</a>\n		</li>\n	'}function g(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-glyphicon-btn delete-playlist-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Delete from Playlist",a):k.call(e,"t","Delete from Playlist",a)))+'">\n				<i class="glyphicon ban"></i>\n			</a>\n		</li>\n	'
}function y(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-glyphicon-btn share-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Share",a):k.call(e,"t","Share",a)))+'">\n				<i class="glyphicon share"></i>\n			</a>\n		</li>\n\n		<li>\n			<a class="actionbar-glyphicon-btn recommend-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Recommend",a):k.call(e,"t","Recommend",a)))+'">\n				<i class="glyphicon share-alt"></i>\n			</a>\n		</li>\n	'
}function b(e,t){var i,a,s="";return s+='\n		<li>\n			<a class="actionbar-glyphicon-btn info-icon-btn" href="#" tabindex="0" rel="tooltip" data-tooltip-position="fixed" title="',a={hash:{},data:t},s+=S((i=n.t,i?i.call(e,"Media Info",a):k.call(e,"t","Media Info",a)))+'">\n				<i class="glyphicon circle-info"></i>\n			</a>\n		</li>\n	'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var w,x="",k=n.helperMissing,S=this.escapeExpression,C="function",A=this;return x+='<ul class="iconbar">\n	',w=n["if"].call(t,t.showEdit,{hash:{},inverse:A.noop,fn:A.program(1,s,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showRefresh,{hash:{},inverse:A.noop,fn:A.program(3,r,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showAnalyze,{hash:{},inverse:A.noop,fn:A.program(5,l,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showWatch,{hash:{},inverse:A.noop,fn:A.program(7,o,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showUnwatch,{hash:{},inverse:A.noop,fn:A.program(9,c,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showFixMatch,{hash:{},inverse:A.noop,fn:A.program(11,d,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showUnmatch,{hash:{},inverse:A.noop,fn:A.program(13,h,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showSplitApart,{hash:{},inverse:A.noop,fn:A.program(15,u,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showSync,{hash:{},inverse:A.noop,fn:A.program(17,p,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showDownload,{hash:{},inverse:A.noop,fn:A.program(19,m,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showDelete,{hash:{},inverse:A.noop,fn:A.program(22,v,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showPlaylistDelete,{hash:{},inverse:A.noop,fn:A.program(24,g,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showShare,{hash:{},inverse:A.noop,fn:A.program(26,y,a),data:a}),(w||0===w)&&(x+=w),x+="\n\n	",w=n["if"].call(t,t.showInfo,{hash:{},inverse:A.noop,fn:A.program(28,b,a),data:a}),(w||0===w)&&(x+=w),x+="\n</ul>\n"
})}),define("hb!templates/modals/FixMatchModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"hide"}function r(){return" hide"}function l(e,t){var i,a,s,r="";return r+='\n					<div class="row-fluid">\n						<div class="span10">\n							<a class="match-result" data-guid="',(i=n.guid)?i=i.call(e,{hash:{},data:t}):(i=e.guid,i=typeof i===b?i.apply(e):i),r+=w(i)+'" data-name="',(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===b?i.apply(e):i),r+=w(i)+'" href="#">\n								',s={hash:{},data:t},r+=w((i=n.truncate,i?i.call(e,e.name,40,s):x.call(e,"truncate",e.name,40,s))),a=n["if"].call(e,e.year,{hash:{},inverse:k.noop,fn:k.program(6,o,t),data:t}),(a||0===a)&&(r+=a),r+='\n							</a>\n						</div>\n						<div class="span2">\n							<div class="match-score">\n								<div class="bar" style="width: ',(a=n.score)?a=a.call(e,{hash:{},data:t}):(a=e.score,a=typeof a===b?a.apply(e):a),r+=w(a)+'%"></div>\n							</div>\n						</div>\n					</div>\n				'
}function o(e,t){var i,a="";return a+=" (",(i=n.year)?i=i.call(e,{hash:{},data:t}):(i=e.year,i=typeof i===b?i.apply(e):i),a+=w(i)+")"}function c(e,t){var i,a,s="";return s+='\n					<h4 class="no-matches">',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"No matches found",a):x.call(e,"t","No matches found",a)))+"</h4>\n				"}function d(e,t){var i,a="";return a+='\n						<option value="',(i=n.identifier)?i=i.call(e,{hash:{},data:t}):(i=e.identifier,i=typeof i===b?i.apply(e):i),a+=w(i)+'"',i=n["if"].call(e,e.selected,{hash:{},inverse:k.noop,fn:k.program(11,h,t),data:t}),(i||0===i)&&(a+=i),a+=">",(i=n.name)?i=i.call(e,{hash:{},data:t}):(i=e.name,i=typeof i===b?i.apply(e):i),a+=w(i)+"</option>\n						"
}function h(){return" selected"}function u(e,t){var i,a,s="";return s+='\n						<option value="">',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"Loading...",a):x.call(e,"t","Loading...",a)))+"</option>\n						"}function p(e,t){var i,a="";return a+='\n						<option value="',(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===b?i.apply(e):i),a+=w(i)+'">',(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===b?i.apply(e):i),a+=w(i)+"</option>\n						"}function m(e,t){var i,a,s="";
return s+='\n		<div class="media-location">\n			',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"File",a):x.call(e,"t","File",a)))+": ",a={hash:{},data:t},s+=w((i=n.truncateMiddle,i?i.call(e,e.path,60,12,a):x.call(e,"truncateMiddle",e.path,60,12,a)))+"\n		</div>\n	"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var f,v,g,y="",b="function",w=this.escapeExpression,x=n.helperMissing,k=this;return y+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon nameplate"></i> ',g={hash:{},data:a},y+=w((f=n.t,f?f.call(t,"Fix Incorrect Match",g):x.call(t,"t","Fix Incorrect Match",g)))+'</h3>\n</div>\n\n<form class="modal-form fix-match-form">\n	<div class="modal-body minimal-light-scrollbar">\n\n		<div class="fix-match-results ',v=n["if"].call(t,t.unmatched,{hash:{},inverse:k.noop,fn:k.program(1,s,a),data:a}),(v||0===v)&&(y+=v),y+='">\n			<h4>',g={hash:{},data:a},y+=w((f=n.t,f?f.call(t,"Select the correct {1} from the list below",t.type,g):x.call(t,"t","Select the correct {1} from the list below",t.type,g)))+'</h4>\n\n			<h4 class="match-results-loading',v=n.unless.call(t,t.loading,{hash:{},inverse:k.noop,fn:k.program(3,r,a),data:a}),(v||0===v)&&(y+=v),y+='">\n				',g={hash:{},data:a},y+=w((f=n.t,f?f.call(t,"Searching for possible matches...",g):x.call(t,"t","Searching for possible matches...",g)))+'\n			</h4>\n			<div class="match-results',v=n["if"].call(t,t.loading,{hash:{},inverse:k.noop,fn:k.program(3,r,a),data:a}),(v||0===v)&&(y+=v),y+='">\n				',v=n.each.call(t,t.results,{hash:{},inverse:k.program(8,c,a),fn:k.program(5,l,a),data:a}),(v||0===v)&&(y+=v),y+='\n			</div>\n		</div>\n\n		<div class="fix-match-search row-fluid ',v=n.unless.call(t,t.unmatched,{hash:{},inverse:k.noop,fn:k.program(1,s,a),data:a}),(v||0===v)&&(y+=v),y+='">\n			<div class="span6">\n				<div class="control-group">\n					<label>',g={hash:{},data:a},y+=w((f=n.t,f?f.call(t,"Name",g):x.call(t,"t","Name",g)))+'</label>\n					<input type="text" name="name" value="'+w((f=t.media,f=null==f||f===!1?f:f.title,typeof f===b?f.apply(t):f))+'">\n				</div>\n\n				<div class="control-group">\n					<label>',g={hash:{},data:a},y+=w((f=n.t,f?f.call(t,"Year",g):x.call(t,"t","Year",g)))+'</label>\n					<input type="text" name="year" value="'+w((f=t.media,f=null==f||f===!1?f:f.year,typeof f===b?f.apply(t):f))+'">\n				</div>\n			</div>\n\n			<div class="span6">\n				<div class="control-group">\n					<label>',g={hash:{},data:a},y+=w((f=n.t,f?f.call(t,"Search using",g):x.call(t,"t","Search using",g)))+'</label>\n					<select name="agent">\n						',v=n.each.call(t,t.agents,{hash:{},inverse:k.program(13,u,a),fn:k.program(10,d,a),data:a}),(v||0===v)&&(y+=v),y+='\n					</select>\n				</div>\n\n				<div class="control-group">\n					<label>',g={hash:{},data:a},y+=w((f=n.t,f?f.call(t,"Language",g):x.call(t,"t","Language",g)))+'</label>\n					<select name="language">\n						',v=n.each.call(t,t.languages,{hash:{},inverse:k.noop,fn:k.program(15,p,a),data:a}),(v||0===v)&&(y+=v),y+="\n					</select>\n				</div>\n			</div>\n		</div>\n\n	</div>\n\n	",v=n["if"].call(t,t.path,{hash:{},inverse:k.noop,fn:k.program(17,m,a),data:a}),(v||0===v)&&(y+=v),y+='\n\n	<div class="modal-footer">\n		<a class="pull-left toggle-custom ',v=n["if"].call(t,t.unmatched,{hash:{},inverse:k.noop,fn:k.program(1,s,a),data:a}),(v||0===v)&&(y+=v),y+='" href="#">',g={hash:{},data:a},y+=w((f=n.t,f?f.call(t,"Custom Search",g):x.call(t,"t","Custom Search",g)))+'</a>\n		<a class="pull-left toggle-default hide" href="#">',g={hash:{},data:a},y+=w((f=n.t,f?f.call(t,"Search Results",g):x.call(t,"t","Search Results",g)))+'</a>\n\n		<button type="submit" class="search-btn btn btn-primary ',v=n.unless.call(t,t.unmatched,{hash:{},inverse:k.noop,fn:k.program(1,s,a),data:a}),(v||0===v)&&(y+=v),y+='" tabindex="0">',g={hash:{},data:a},y+=w((f=n.t,f?f.call(t,"Search",g):x.call(t,"t","Search",g)))+'</button>\n		<button type="button" class="cancel-btn btn" tabindex="0">',g={hash:{},data:a},y+=w((f=n.t,f?f.call(t,"Cancel",g):x.call(t,"t","Cancel",g)))+"</button>\n	</div>\n</form>\n\n"
})}),define("plex/model/MatchResultModel",["plex/control/utils/ParseUtil","plex/model/BaseModel","jquery"],function(e,t,n){var i=t.extend({idAttribute:"guid",whitelistedAttrs:["guid","name","lang","score","year"],convert:function(t){var i=_.isObject(t)?t:n.xml2json(t);return e.parseInteger(i,"score"),i.score=Math.min(Math.max(i.score,0),100),i},parse:function(e){var t=this.convert(e);return t=_.pick(t,this.whitelistedAttrs)}});return i}),define("plex/model/collections/MatchResultCollection",["plex/model/collections/BaseCollection","plex/model/MatchResultModel","jquery"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.media=t.media,this.server=t.server
},url:function(){return"/library/metadata/"+this.media.id+"/matches"},parse:function(e){return this.convert(e,"SearchResult")}});return n}),define("hb!templates/lists/MatchUsingDropdownList.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<a class="match-using dropdown-toggle" href="#match-using-dropdown-list" data-toggle="dropdown">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Match Using",r):o.call(t,"t","Match Using",r)))+' <i class="glyphicon-caret orange small"></i></a>\n\n<ul class="dropdown-menu dropdown-menu-large"></ul>\n'
})}),define("hb!templates/lists/items/MatchUsingDropdownListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r="",l="function",o=this.escapeExpression;return r+='<a href="#">',(s=n.name)?s=s.call(t,{hash:{},data:a}):(s=t.name,s=typeof s===l?s.apply(t):s),r+=o(s)+"</a>\n"})}),define("plex/view/lists/items/MatchUsingDropdownListItem",["hb!templates/lists/items/MatchUsingDropdownListItem.tpl","plex/control/Dispatcher","plex/view/BaseView"],function(e,t,n){var i=n.extend({tagName:"li",media:null,events:{"click a":"onClick"},initialize:function(e){this.media=e.list.model,this.addBinding(this.model,"change",this.render)
},render:function(){return this.$el.html(e(this.model.toJSON())),this},onClick:function(e){e.preventDefault(),t.trigger("command:MatchUsing",this.media,this.model)}});return i}),define("plex/view/lists/MatchUsingDropdownList",["hb!templates/lists/MatchUsingDropdownList.tpl","plex/view/lists/BaseList","plex/view/lists/items/MatchUsingDropdownListItem"],function(e,t,n){var i=t.extend({id:"match-using-dropdown-list",tagName:"span",className:"dropdown pull-left",initialize:function(){this.setup(n,".dropdown-menu")
},render:function(){return this.$el.html(e()),this.populate(this.collection),this},addItem:function(e){return"com.plexapp.agents.none"!==e.id?t.prototype.addItem.apply(this,arguments):void 0}});return i}),define("plex/view/modals/FixMatchModal",["hb!templates/modals/FixMatchModal.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/control/utils/LanguageUtil","plex/control/utils/SectionTypes","plex/model/collections/AgentCollection","plex/model/collections/MatchResultCollection","plex/view/modals/BaseModal","plex/view/lists/MatchUsingDropdownList","jquery"],function(e,t,n,i,a,s,r,l,o,c){var d=function(e){return _.map(e,function(e){return'<option value="'+e.value+'"'+(e.selected?" selected":"")+">"+e.label+"</option>"
}).join("\n")},h=function(e){return e?_.map(e.get("language"),function(e){return{label:i.getLanguageName(e),value:e}}):[]},u=l.extend({name:"fixMatchModal",className:"fix-match-modal modal fade",custom:!1,matchUsingList:null,events:{hidden:"close","click .match-result":"onMatchResultClick",'change select[name="agent"]':"onAgentChange","submit form":"onSubmitSearch","click .toggle-custom":"onToggleCustomClick","click .toggle-default":"onToggleDefaultClick","click .cancel-btn":"onCancel"},initialize:function(){var e=a.getSectionTypeByString(this.model.section.get("type"));
this.results=new r([],{server:this.model.server,media:this.model}),this.agents=new s([],{server:this.model.server,sectionType:e.typeID}),this.loading=!0,this.addBinding(t,"hide:fixMatchModal",this.onCancel),this.addBinding(this.results,"reset",function(){this.loading=!1,this.render()}),this.results.populate({processData:!0,timeout:0,hideLoadingAlert:!0}).fail(_.bind(function(){this.loading=!1,this.render()},this)),this.agents.populate({hideLoadingAlert:!0}).done(_.bind(function(e){var t=this.$("select[name=agent]");
if(t){var n=this.model.section.get("agent");t.empty().append(d(e.map(function(e){return{label:e.get("name"),value:e.get("identifier"),selected:n==e.get("identifier")}}))),this.setLanguages(e.get(n))}},this)),this.matchUsingList=this.registerView(new o({model:this.model,collection:this.agents}))},render:function(){var t=this.model.section.get("agent"),i=this.agents.get(t),a=this.model.get("guid"),s=this.model.get("type")||"item",r={media:this.model.toJSON(),results:this.results.toJSON(),agents:this.agents.toJSON(),languages:h(i),loading:this.loading,type:n.t(s),path:this.model.getMediaLocation(),unmatched:(!a||/none\:\/\//.test(a))&&!this.custom};
return _.each(r.agents,function(e){e.identifier===t&&(e.selected=!0)}),this.$el.html(e(r)).modal(),this.$(".modal-footer").prepend(this.matchUsingList.render().el),this},setLanguages:function(e){var t=this.$('select[name="language"]');t.empty(),e&&t.append(d(h(e)))},onMatchResultClick:function(e){e.preventDefault();var t=c(e.target),n={guid:t.data("guid"),name:t.data("name")},i="/library/metadata/"+this.model.id+"/match?"+c.param(n),a=_.extend({type:"PUT"},this.model.server.getAjaxOptions(i));c.ajax(a),this.$el.modal("hide")
},onAgentChange:function(e){var t=this.agents.get(e.target.value);this.setLanguages(t)},onSubmitSearch:function(e){e.preventDefault();var t=e.target,n={title:t.name.value,year:t.year.value,agent:t.agent.value,language:t.language.value,manual:1};this.$(".unmatched-container").addClass("hide"),this.$(".results-container").removeClass("hide"),this.$(".match-results").addClass("hide"),this.$(".match-results-loading").removeClass("hide"),this.$(".fix-match-search").addClass("hide"),this.$(".fix-match-results").removeClass("hide"),this.$(".toggle-custom").removeClass("hide"),this.$(".toggle-default").addClass("hide"),this.$(".search-btn").addClass("hide"),this.loading=!0,this.custom=!0,this.results.fetch({data:n,processData:!0,timeout:1e5,hideLoadingAlert:!0}).fail(_.bind(function(){this.loading=!1,this.render()
},this))},onToggleCustomClick:function(e){e.preventDefault(),this.$(".fix-match-results").addClass("hide"),this.$(".fix-match-search").removeClass("hide"),this.$(".toggle-custom").addClass("hide"),this.$(".toggle-default").removeClass("hide"),this.$(".search-btn").removeClass("hide")},onToggleDefaultClick:function(e){e.preventDefault(),this.$(".fix-match-search").addClass("hide"),this.$(".fix-match-results").removeClass("hide"),this.$(".toggle-custom").removeClass("hide"),this.$(".toggle-default").addClass("hide"),this.$(".search-btn").addClass("hide")
},onCancel:function(e){e&&e.preventDefault(),this.$el.modal("hide")}});return u}),define("hb!templates/modals/ShareModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a="";return a+='\n		<ul class="select-networks-list select-list minimal-light-scrollbar">\n			',i=n.each.call(e,e.networks,{hash:{},inverse:y.noop,fn:y.programWithDepth(2,r,t,e),data:t}),(i||0===i)&&(a+=i),a+="\n		</ul>\n	"}function r(e,t,i){var a,s,r,d="";return d+='\n				<li>\n					<a class="network ',a=n["if"].call(e,i.autoSelect,{hash:{},inverse:y.noop,fn:y.program(3,l,t),data:t}),(a||0===a)&&(d+=a),d+='" data-id="',(a=n.key)?a=a.call(e,{hash:{},data:t}):(a=e.key,a=typeof a===w?a.apply(e):a),d+=x(a)+'" href="#" tabindex="0">',r={hash:{},inverse:y.program(7,c,t),fn:y.program(5,o,t),data:t},a=n.if_eq,s=a?a.call(e,e.key,"facebook",r):b.call(e,"if_eq",e.key,"facebook",r),(s||0===s)&&(d+=s),d+=" ",(s=n.title)?s=s.call(e,{hash:{},data:t}):(s=e.title,s=typeof s===w?s.apply(e):s),d+=x(s)+"</a>\n				</li>\n			"
}function l(){return"selected"}function o(){return'<i class="network-icon glyphicon facebook"></i>'}function c(e,t){var i,a,s;return s={hash:{},inverse:y.noop,fn:y.program(8,d,t),data:t},i=n.if_eq,a=i?i.call(e,e.key,"twitter",s):b.call(e,"if_eq",e.key,"twitter",s),a||0===a?a:""}function d(){return'<i class="network-icon glyphicon twitter"></i>'}function h(e,t){var i,a,s="";return s+='\n		<div class="empty-message">',a={hash:{},data:t},s+=x((i=n.t,i?i.call(e,"You need to <a href='{1}' target='_blank'>link your account</a>.",e.accountUrl,a):b.call(e,"t","You need to <a href='{1}' target='_blank'>link your account</a>.",e.accountUrl,a)))+"</div>\n	"
}function u(){return"hidden"}function p(){return"disabled"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var m,f,v,g="",y=this,b=n.helperMissing,w="function",x=this.escapeExpression;return g+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon share"></i> ',v={hash:{},data:a},g+=x((m=n.t,m?m.call(t,"Share",v):b.call(t,"t","Share",v)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	',f=n["if"].call(t,t.networks,{hash:{},inverse:y.program(10,h,a),fn:y.program(1,s,a),data:a}),(f||0===f)&&(g+=f),g+='\n\n	<div class="input-minimal-container ',f=n.unless.call(t,t.autoSelect,{hash:{},inverse:y.noop,fn:y.program(12,u,a),data:a}),(f||0===f)&&(g+=f),g+='">\n		<textarea id="share-message" class="input-dark input-minimal" placeholder="',v={hash:{},data:a},g+=x((m=n.t,m?m.call(t,"Say something about this...",v):b.call(t,"t","Say something about this...",v)))+'"></textarea>\n	</div>\n</div>\n\n<div class="modal-footer pull-center">\n	<span class="characters-remaining"></span>\n	<button type="button" class="share-btn btn btn-medium btn-primary ',f=n.unless.call(t,t.autoSelect,{hash:{},inverse:y.noop,fn:y.program(14,p,a),data:a}),(f||0===f)&&(g+=f),g+='" tabindex="0">',v={hash:{},data:a},g+=x((m=n.t,m?m.call(t,"Share",v):b.call(t,"t","Share",v)))+"</button>\n</div>\n"
})}),define("plex/view/modals/ShareModal",["hb!templates/modals/ShareModal.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/modals/BaseModal","jquery"],function(e,t,n,i,a){var s=i.extend({name:"shareModal",className:"modal modal-small select-modal fade",linkedNetworks:null,networkIDs:null,maxLength:0,events:{hidden:"close","click .network":"onNetworkClick","keyup #share-message":"onMessageKeyUp","click .share-btn":"onShareClick"},initialize:function(){var e=n.get("myPlex");this.linkedNetworks=e.get("socialNetworks").where({linked:!0}),this.networkIDs=[]
},render:function(){for(var t=[],i=1===this.linkedNetworks.length,a=n.get("myPlex"),s=0,r=this.linkedNetworks.length;r>s;s++)t.push(this.linkedNetworks[s].toJSON());return this.$el.html(e({accountUrl:a.get("url")+"users/edit",networks:t,autoSelect:i})).modal(),i&&(this.networkIDs.push(this.linkedNetworks[0].id),this.calculateMaxLength()),this},calculateMaxLength:function(){var e=null,t=n.get("myPlex"),i=t.get("socialNetworks");_.each(this.networkIDs,function(t){var n=i.get(t),a=n.get("maxLength");
(null===e||e>a)&&(e=a)}),this.maxLength=e,this.calculateCharactersRemaining()},calculateCharactersRemaining:function(){var e=this.$("#share-message").val(),t=this.maxLength-e.length,n=this.$(".characters-remaining");return null===this.maxLength?(n.addClass("hide"),void 0):(0>t?(n.addClass("error").removeClass("hide"),this.$(".share-btn").addClass("disabled")):(n.removeClass("error hide"),this.$(".share-btn").removeClass("disabled")),this.$(".characters-remaining").text(this.maxLength-e.length),void 0)
},onNetworkClick:function(e){e.preventDefault();var t=a(e.currentTarget),n=t.data("id");t.hasClass("selected")?this.networkIDs.splice(_.indexOf(this.networkIDs,n),1):this.networkIDs.push(n),t.toggleClass("selected"),this.networkIDs.length?(this.$(".share-btn").removeClass("disabled"),this.$(".input-minimal-container").removeClass("hidden")):(this.$(".share-btn").addClass("disabled"),this.$(".input-minimal-container").addClass("hidden")),this.calculateMaxLength()},onMessageKeyUp:function(){this.calculateCharactersRemaining()
},onShareClick:function(e){e.preventDefault();var n=a(e.currentTarget);if(!n.hasClass("disabled")){n.addClass("disabled");var i=this.$("#share-message").val(),s=_.bind(function(){this.$el.modal("hide")},this),r=_.bind(function(){n.removeClass("disabled")});t.trigger("command:Share",this.model,this.networkIDs,i,s,r)}}});return s}),define("hb!templates/modals/RecommendModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a="";return a+='\n		<ul class="select-friends-list select-list minimal-light-scrollbar">\n			',i=n.each.call(e,e.friends,{hash:{},inverse:f.noop,fn:f.program(2,r,t),data:t}),(i||0===i)&&(a+=i),a+="\n		</ul>\n	"
}function r(e,t){var i,a,s="";return s+='\n				<li>\n					<a class="friend" data-id="',(i=n.recommendationsPlaylistId)?i=i.call(e,{hash:{},data:t}):(i=e.recommendationsPlaylistId,i=typeof i===u?i.apply(e):i),s+=p(i)+'" href="#" tabindex="0">\n						<img class="poster friend-poster" data-original="',(i=n.thumb)?i=i.call(e,{hash:{},data:t}):(i=e.thumb,i=typeof i===u?i.apply(e):i),s+=p(i)+'" src="img/posters/friend.png" width="25" height="25">\n						',a={hash:{},data:t},s+=p((i=n.truncate,i?i.call(e,e.title,20,a):m.call(e,"truncate",e.title,20,a)))+"\n					</a>\n				</li>\n			"
}function l(e,t){var i,a,s="";return s+='\n		<div class="empty-message">',a={hash:{},data:t},s+=p((i=n.t,i?i.call(e,"You need <a class='friends-btn' href='{1}'>friends</a> to recommend media.","#!/friends",a):m.call(e,"t","You need <a class='friends-btn' href='{1}'>friends</a> to recommend media.","#!/friends",a)))+"</div>\n	"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var o,c,d,h="",u="function",p=this.escapeExpression,m=n.helperMissing,f=this;return h+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3><i class="glyphicon share-alt"></i> ',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Select Friends",d):m.call(t,"t","Select Friends",d)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	',c=n["if"].call(t,t.friends,{hash:{},inverse:f.program(4,l,a),fn:f.program(1,s,a),data:a}),(c||0===c)&&(h+=c),h+='\n\n	<div class="input-minimal-container hidden">\n		<textarea id="recommend-message" class="input-dark input-minimal" placeholder="',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Say something about this...",d):m.call(t,"t","Say something about this...",d)))+'"></textarea>\n	</div>\n</div>\n\n<div class="modal-footer pull-center">\n	<button type="button" class="send-btn btn btn-medium btn-primary disabled" tabindex="0">',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Send",d):m.call(t,"t","Send",d)))+"</button>\n</div>\n"
})}),define("plex/view/modals/RecommendModal",["hb!templates/modals/RecommendModal.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/modals/BaseModal","jquery","lazyload"],function(e,t,n,i,a){var s=i.extend({name:"recommendModal",className:"modal modal-small select-modal fade",defaultFocusedItem:".select-list a",playlistIDs:null,events:{hidden:"close","click .friend":"onFriendClick","click .friends-btn":"onFriendsClick","click .send-btn":"onSendClick"},initialize:function(){this.playlistIDs=[]
},render:function(){var t=n.get("myPlex");return this.$el.html(e({friends:t.get("friends").toJSON()})).modal(),this.loadPoster(),this},loadPoster:function(){_.defer(_.bind(function(){this.$(".friend-poster").lazyload({threshold:!1})},this))},onFriendClick:function(e){e.preventDefault();var t=a(e.currentTarget),n=t.data("id");t.hasClass("selected")?this.playlistIDs.splice(_.indexOf(this.playlistIDs,n),1):this.playlistIDs.push(n),t.toggleClass("selected"),this.playlistIDs.length?(this.$(".send-btn").removeClass("disabled"),this.$(".input-minimal-container").removeClass("hidden")):(this.$(".send-btn").addClass("disabled"),this.$(".input-minimal-container").addClass("hidden"))
},onFriendsClick:function(){this.$el.modal("hide")},onSendClick:function(e){e.preventDefault();var n=a(e.currentTarget);if(!n.hasClass("disabled")){n.addClass("disabled");var i=this.$("#recommend-message").val(),s=_.bind(function(){this.$el.modal("hide")},this),r=_.bind(function(){n.removeClass("disabled")});t.trigger("command:Recommend",this.model,this.playlistIDs,i,s,r)}}});return s}),define("plex/view/details/ActionBarView",["hb!templates/details/ActionBarView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/KeyboardNavigationView","plex/view/modals/MediaInfoModal","plex/view/modals/FixMatchModal","plex/view/modals/SyncModal","plex/view/modals/SelectDeviceModal","plex/view/modals/ShareModal","plex/view/modals/RecommendModal","jquery"],function(e,t,n,i,a,s,r,l,o,c,d){var h={movie:{showEdit:!0,showRefresh:!0,showAnalyze:!0,showWatch:!0,showFixMatch:!0,showUnmatch:!0,showSplitApart:!0,showSync:!0,showDownload:!0,showDelete:!0,showInfo:!0},show:{showEdit:!0,showRefresh:!0,showWatch:!0,showFixMatch:!0,showUnmatch:!0,showSplitApart:!0,showSync:!0},season:{showEdit:!0,showWatch:!0,showSync:!0},episode:{showEdit:!0,showRefresh:!0,showAnalyze:!0,showWatch:!0,showSync:!0,showDownload:!0,showDelete:!0,showInfo:!0},artist:{showEdit:!0,showRefresh:!0,showFixMatch:!0,showUnmatch:!0,showSplitApart:!0,showSync:!0},album:{showEdit:!0,showRefresh:!0,showFixMatch:!0,showUnmatch:!0,showSplitApart:!0,showSync:!0},track:{showEdit:!0,showAnalyze:!0,showSync:!0,showDownload:!0,showDelete:!0},photoAlbum:{showEdit:!0,showSync:!0},photo:{showEdit:!0,showAnalyze:!0,showSync:!0,showDelete:!0},clip:{showSync:!0,showShare:!0,showInfo:!0},playlistItem:{showPlaylistDelete:!0}},u=i.extend({className:"actionbar",keyboardActivationDirection:"left",keyboardCancellationDirections:"right",shared:!1,limited:!1,events:{"click .edit-icon-btn":"onEditClick","click .refresh-icon-btn":"onRefreshClick","click .analyze-icon-btn":"onAnalyzeClick","click .watch-icon-btn":"onWatchClick","click .unwatch-icon-btn":"onUnwatchClick","click .fix-match-icon-btn":"onFixMatchClick","click .unmatch-icon-btn":"onUnmatchClick","click .split-apart-icon-btn":"onSplitApartClick","click .sync-icon-btn":"onSyncClick","click .delete-icon-btn":"onDeleteClick","click .delete-playlist-icon-btn":"onDeletePlaylistClick","click .share-icon-btn":"onShareClick","click .recommend-icon-btn":"onRecommendClick","click .info-icon-btn":"onInfoClick"},initialize:function(e){var i=n.get("myPlex"),a=_.clone(h[this.model.get("type")]);
this.typeOptions=_.extend(a,e),this.visibilityOptions=_.extend({},this.typeOptions),this.shared=this.model.server.get("shared"),this.limited=this.model.section&&this.model.section.get("limited"),this.typeOptions.showWatch&&(this.addBinding(this.model,"change:unviewedLeafCount",this.render),this.addBinding(this.model,"change:viewedLeafCount",this.render),this.addBinding(this.model,"change:viewCount",this.render),this.addBinding(this.model,"change:viewOffset",this.render)),this.typeOptions.showUnmatch&&this.addBinding(this.model,"change:guid",this.render),this.typeOptions.showSplitApart&&(this.addBinding(this.model,"change:Media",this.render),this.addBinding(this.model,"change:Location",this.render)),this.typeOptions.showSync&&this.addBinding(i.get("devices"),"reset",this.render),this.addBinding(t,"shortcut:edit",this.edit),this.addBinding(t,"shortcut:refresh",this.refresh),this.addBinding(t,"shortcut:analyze",this.analyze),this.addBinding(t,"shortcut:markWatched",this.markWatched),this.addBinding(t,"shortcut:markUnwatched",this.markUnwatched),this.addBinding(t,"shortcut:sync",this.sync),this.addBinding(t,"shortcut:deleteItem",this.deleteItem),this.addBinding(t,"shortcut:info",this.info)
},render:function(){this.updateVisibilityOptions();var t=_.extend({},this.visibilityOptions);t.downloadUrl=this.model.getDownloadUrl();var n=this.model.getMediaLocation();if(n){var i=/[^\/\\]+$/;t.downloadName=_.first(i.exec(n))}return this.$el.html(e(t)),d(".tooltip").remove(),this.$el.tooltip({selector:".actionbar-icon-btn, .actionbar-glyphicon-btn",placement:"right"}),this},updateVisibilityOptions:function(){this.showWatch(),this.visibilityOptions.showEdit=this.showAction("showEdit"),this.visibilityOptions.showRefresh=this.showAction("showRefresh"),this.visibilityOptions.showAnalyze=this.showAction("showAnalyze"),this.visibilityOptions.showFixMatch=this.showAction("showFixMatch"),this.visibilityOptions.showUnmatch=this.showUnmatch(),this.visibilityOptions.showSplitApart=this.showSplitApart(),this.visibilityOptions.showSync=this.showSync(),this.visibilityOptions.showDownload=this.showAction("showDownload"),this.visibilityOptions.showDelete=this.showDelete(),this.visibilityOptions.showShare=this.showShare()
},showAction:function(e){return this.typeOptions[e]?this.shared||this.limited?!1:!0:!1},showWatch:function(){if(!this.typeOptions.showWatch)return this.visibilityOptions.showWatch=!1,this.visibilityOptions.showUnwatch=!1,void 0;var e=this.model.server.get("multiuser"),t=this.model.get("type");if(this.limited||this.shared&&!e)this.visibilityOptions.showWatch=!1,this.visibilityOptions.showUnwatch=!1;else if("show"===t||"season"===t)this.visibilityOptions.showWatch=this.model.get("unviewedLeafCount")>0,this.visibilityOptions.showUnwatch=this.model.get("viewedLeafCount")>0;
else{var n=!!this.model.get("viewCount"),i=!!this.model.get("viewOffset");this.visibilityOptions.showWatch=!n||i,this.visibilityOptions.showUnwatch=n||i}},showUnmatch:function(){if(!this.typeOptions.showUnmatch)return!1;if(this.shared||this.limited)return!1;var e=this.model.get("guid");return!e||/(local|none)\:\/\//.test(e)?!1:!0},showSplitApart:function(){if(!this.typeOptions.showSplitApart)return!1;if(this.shared||this.limited)return!1;var e,t=this.model.get("type");switch(t){case"movie":case"episode":e=this.model.get("Media");
break;case"show":case"artist":case"album":e=this.model.get("Location");break;default:e=this.model.get("Media")}return!this.model.server.supports("splitApart")||2>e.length?!1:!0},showSync:function(){if(!this.typeOptions.showSync)return!1;if(this.shared||this.limited)return!1;var e=n.get("myPlex"),t=e.get("devices").getSyncDevices();return this.model.server.supports("sync")&&t.length&&e.get("signedIn")&&this.model.get("allowSync")?!0:!1},showDelete:function(){return this.typeOptions.showDelete?this.shared||this.limited?!1:this.model.server.get("allowMediaDeletion")?!0:!1:!1
},showShare:function(){if(!this.typeOptions.showShare)return!1;var e=n.get("myPlex");return e.get("signedIn")?!0:!1},edit:function(){this.visibilityOptions.showEdit&&t.trigger("navigate:edit",this.model.server.id,this.model.section.id,this.model.id)},refresh:function(){this.visibilityOptions.showRefresh&&t.trigger("command:RefreshMetadata",this.model)},analyze:function(){this.visibilityOptions.showAnalyze&&t.trigger("command:AnalyzeMedia",this.model)},markWatched:function(){this.visibilityOptions.showWatch&&t.trigger("command:MarkWatched",this.model)
},markUnwatched:function(){this.visibilityOptions.showUnwatch&&t.trigger("command:MarkUnwatched",this.model)},sync:function(){if(this.visibilityOptions.showSync){var e=n.get("myPlex"),t=e.get("devices"),i=t.getSyncDevices(),a=this.model.get("type"),s=/(album|artist|show|season)/.test(a),o=new r({directory:s,section:!1,model:this.model});if(i.length>1){var c=new l,d=_.bind(function(e){c.off("select:device",d),o.device=t.get(e),n.set("modal",o)},this);c.on("select:device",d),n.set("modal",c)}else 1===i.length&&(o.device=i[0],n.set("modal",o))
}},deleteItem:function(){this.visibilityOptions.showDelete&&t.trigger("command:DeleteMedia",this.model)},info:function(){this.visibilityOptions.showInfo&&n.set("modal",new a({model:this.model}))},onEditClick:function(e){e.preventDefault(),this.edit()},onRefreshClick:function(e){e.preventDefault(),this.refresh()},onAnalyzeClick:function(e){e.preventDefault(),this.analyze()},onWatchClick:function(e){e.preventDefault(),this.markWatched()},onUnwatchClick:function(e){e.preventDefault(),this.markUnwatched()
},onFixMatchClick:function(e){e.preventDefault(),n.set("modal",new s({model:this.model}))},onUnmatchClick:function(e){e.preventDefault(),t.trigger("command:Unmatch",this.model)},onSplitApartClick:function(e){e.preventDefault(),t.trigger("command:SplitApart",this.model)},onSyncClick:function(e){e.preventDefault(),this.sync()},onDeleteClick:function(e){e.preventDefault(),this.deleteItem()},onDeletePlaylistClick:function(e){e.preventDefault(),this.model.destroy()},onShareClick:function(e){e.preventDefault(),n.set("modal",new o({model:this.model}))
},onRecommendClick:function(e){e.preventDefault(),n.set("modal",new c({model:this.model}))},onInfoClick:function(e){e.preventDefault(),this.info()}});return u}),define("hb!templates/details/PlaySplitButton.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,l="";return l+='\n	<div class="btn-group">\n		',i=n["if"].call(e,e.channel,{hash:{},inverse:k.program(8,d,t),fn:k.program(2,r,t),data:t}),(i||0===i)&&(l+=i),l+='\n			<i class="glyphicon play"></i> ',s={hash:{},data:t},l+=w((i=n.t,i?i.call(e,"Play",s):b.call(e,"t","Play",s)))+'\n		</a>\n		<button type="button" class="btn btn-medium btn-primary dropdown-toggle" tabindex="0" data-toggle="dropdown">\n			<i class="glyphicon-caret small"></i>\n		</button>\n		<ul class="dropdown-menu dropdown-menu-large pull-right">\n			',a=n["if"].call(e,e.channel,{hash:{},inverse:k.program(12,u,t),fn:k.program(10,h,t),data:t}),(a||0===a)&&(l+=a),l+="\n\n			",a=n.each.call(e,e.clients,{hash:{},inverse:k.noop,fn:k.program(14,p,t),data:t}),(a||0===a)&&(l+=a),l+="\n		</ul>\n	</div>\n"
}function r(e,t){var i,a,s="";return s+='\n			<a class="play-btn btn btn-medium btn-primary" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===x?i.apply(e):i),s+=w(i)+"/channels/player?",i=n["if"].call(e,e.channelKey,{hash:{},inverse:k.program(5,o,t),fn:k.program(3,l,t),data:t}),(i||0===i)&&(s+=i),s+="path=",a={hash:{},data:t},s+=w((i=n.encodeUrl,i?i.call(e,(i=e.video,null==i||i===!1?i:i.key),a):b.call(e,"encodeUrl",(i=e.video,null==i||i===!1?i:i.key),a)))+'" tabindex="0">\n		'
}function l(e,t){var i,a,s="";return s+="key=",a={hash:{},data:t},s+=w((i=n.encodeUrl,i?i.call(e,e.channelKey,a):b.call(e,"encodeUrl",e.channelKey,a)))+"&"}function o(e,t){var i;return i=n["if"].call(e,e.channelID,{hash:{},inverse:k.noop,fn:k.program(6,c,t),data:t}),i||0===i?i:""}function c(e,t){var i,a="";return a+="identifier=",(i=n.channelID)?i=i.call(e,{hash:{},data:t}):(i=e.channelID,i=typeof i===x?i.apply(e):i),a+=w(i)+"&"}function d(e,t){var i,a,s="";return s+='\n			<a class="play-btn btn btn-medium btn-primary" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===x?i.apply(e):i),s+=w(i)+"/sections/",a={hash:{},data:t},s+=w((i=n.encodeUrl,i?i.call(e,e.sectionID,a):b.call(e,"encodeUrl",e.sectionID,a)))+"/player/"+w((i=e.video,i=null==i||i===!1?i:i.ratingKey,typeof i===x?i.apply(e):i))+'" tabindex="0">\n		'
}function h(e,t){var i,a,s="";return s+='\n				<li><a class="play-btn" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===x?i.apply(e):i),s+=w(i)+"/channels/player?",i=n["if"].call(e,e.channelKey,{hash:{},inverse:k.program(5,o,t),fn:k.program(3,l,t),data:t}),(i||0===i)&&(s+=i),s+="path=",a={hash:{},data:t},s+=w((i=n.encodeUrl,i?i.call(e,(i=e.video,null==i||i===!1?i:i.key),a):b.call(e,"encodeUrl",(i=e.video,null==i||i===!1?i:i.key),a)))+'" tabindex="0">',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"Play here",a):b.call(e,"t","Play here",a)))+"</a></li>\n			"
}function u(e,t){var i,a,s="";return s+='\n				<li><a class="play-btn" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===x?i.apply(e):i),s+=w(i)+"/sections/",a={hash:{},data:t},s+=w((i=n.encodeUrl,i?i.call(e,e.sectionID,a):b.call(e,"encodeUrl",e.sectionID,a)))+"/player/"+w((i=e.video,i=null==i||i===!1?i:i.ratingKey,typeof i===x?i.apply(e):i))+'" tabindex="0">',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"Play here",a):b.call(e,"t","Play here",a)))+"</a></li>\n			"
}function p(e,t){var i,a,s="";return s+='\n				<li><a class="client-btn" data-id="',(i=n.machineIdentifier)?i=i.call(e,{hash:{},data:t}):(i=e.machineIdentifier,i=typeof i===x?i.apply(e):i),s+=w(i)+'" href="#" tabindex="0">',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"Play on",a):b.call(e,"t","Play on",a)))+" ",a={hash:{},data:t},s+=w((i=n.truncate,i?i.call(e,e.name,29,a):b.call(e,"truncate",e.name,29,a)))+"</a></li>\n			"}function m(e,t){var i,a,s="";return s+="\n	",i=n["if"].call(e,e.channel,{hash:{},inverse:k.program(19,v,t),fn:k.program(17,f,t),data:t}),(i||0===i)&&(s+=i),s+='\n		<i class="glyphicon play"></i> ',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"Play",a):b.call(e,"t","Play",a)))+"\n	</a>\n"
}function f(e,t){var i,a,s="";return s+='\n		<a class="play-btn btn btn-medium btn-primary" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===x?i.apply(e):i),s+=w(i)+"/channels/player?",i=n["if"].call(e,e.channelKey,{hash:{},inverse:k.program(5,o,t),fn:k.program(3,l,t),data:t}),(i||0===i)&&(s+=i),s+="path=",a={hash:{},data:t},s+=w((i=n.encodeUrl,i?i.call(e,(i=e.video,null==i||i===!1?i:i.key),a):b.call(e,"encodeUrl",(i=e.video,null==i||i===!1?i:i.key),a)))+'" tabindex="0">\n	'
}function v(e,t){var i,a,s="";return s+='\n		<a class="play-btn btn btn-medium btn-primary" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===x?i.apply(e):i),s+=w(i)+"/sections/",a={hash:{},data:t},s+=w((i=n.encodeUrl,i?i.call(e,e.sectionID,a):b.call(e,"encodeUrl",e.sectionID,a)))+"/player/"+w((i=e.video,i=null==i||i===!1?i:i.ratingKey,typeof i===x?i.apply(e):i))+'" tabindex="0">\n	'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var g,y="",b=n.helperMissing,w=this.escapeExpression,x="function",k=this;
return g=n["if"].call(t,t.showDropdown,{hash:{},inverse:k.program(16,m,a),fn:k.program(1,s,a),data:a}),(g||0===g)&&(y+=g),y+="\n"})}),define("hb!templates/modals/SelectOffsetModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l,o="",c=n.helperMissing,d=this.escapeExpression,h="function";return o+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3>',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Resume",l):c.call(t,"t","Resume",l)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	<ul class="select-list">\n		<li><a class="offset" data-offset="',(r=n.offset)?r=r.call(t,{hash:{},data:a}):(r=t.offset,r=typeof r===h?r.apply(t):r),o+=d(r)+'" href="#" tabindex="0">',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Resume from {1}",t.formattedOffset,l):c.call(t,"t","Resume from {1}",t.formattedOffset,l)))+'</a></li>\n		<li><a class="offset" data-offset="0" href="#" tabindex="0">',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Start from beginning",l):c.call(t,"t","Start from beginning",l)))+"</a></li>\n	</ul>\n</div>\n"
})}),define("plex/view/modals/SelectOffsetModal",["hb!templates/modals/SelectOffsetModal.tpl","plex/view/modals/BaseModal","jquery"],function(e,t,n){var i=t.extend({name:"selectOffsetModal",className:"modal modal-small select-modal fade",defaultFocusedItem:".select-list a",offset:0,events:{hidden:"close","click .offset":"onOffsetClick"},initialize:function(e){this.offset=e.offset},render:function(){return this.$el.html(e({offset:this.offset,formattedOffset:Handlebars.helpers.formatDuration.call(this,this.offset)})).modal(),this
},close:function(){this.trigger("select:offset",null),t.prototype.close.apply(this,arguments)},onOffsetClick:function(e){e.preventDefault(),this.trigger("select:offset",parseInt(n(e.target).data("offset"),10)),this.$el.modal("hide")}});return i}),define("plex/view/details/PlaySplitButton",["hb!templates/details/PlaySplitButton.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/BaseView","plex/view/modals/SelectOffsetModal","jquery"],function(e,t,n,i,a,s,r){var l=a.extend({className:"play-btn-container",channel:!1,events:{"click .play-btn":"onPlayClick","click .client-btn":"onClientClick"},initialize:function(e){this.channel=e.channel,this.collection=i.get("clients"),this.collection.fetch({hideLoadingAlert:!0}).done(_.bind(this.render,this)),this.addBinding(t,"shortcut:play",this.play)
},render:function(){var t=this.collection.length&&!this.model.server.get("shared"),n={serverID:this.model.server.id,video:this.model.toJSON(),channel:this.channel,showDropdown:t,clients:this.collection.toJSON()};return this.channel?this.model.channel&&(n.channelKey=this.model.channel.id,n.channelID=this.model.channel.get("identifier")):n.sectionID=this.model.section.id,this.$el.html(e(n)),this},postrender:function(){this.trigger("refocus")},play:function(){if(this.checkMediaParts()){var e=this.model.get("type");
if("album"===e){var n=this.model.get("tracks");t.trigger("play:music",n,n.first())}else if(this.channel){var i=this.model.channel,a=this.model.server.id,s=this.model.id;i.id?t.trigger("navigate:channelPlayer",a,i.id,s):t.trigger("navigate:channelPlayerByIdentifier",a,i.get("identifier"),s)}else t.trigger("navigate:player",this.model.server.id,this.model.section.id,this.model.id)}},checkMediaParts:function(){var e=this.model.getMissingParts();if(!e.length)return!0;var t=e[0],a=n.t("Please check that the file exists and the necessary drive is mounted.");
return 1==t.exists&&(a=n.t("Please check the permissions for this file.")),i.set("alert",{status:"error",message:a}),!1},selectOffset:function(e){var t=this.model.get("viewOffset")||0;if(t){var n=new s({offset:t}),a=_.bind(function(t){n.off("select:offset",a),null!==t&&this.playRemote(e,t)},this);n.on("select:offset",a),i.set("modal",n)}else this.playRemote(e,t)},playRemote:function(e,n){var i=this.model;"album"===this.model.get("type")&&(i=this.model.get("tracks").first()),t.trigger("command:RemotePlay",{media:i,client:e,offset:n})
},onPlayClick:function(e){e.preventDefault(),this.play()},onClientClick:function(e){if(e.preventDefault(),this.checkMediaParts()){var t=r(e.target).data("id"),n=this.collection.get(t);this.selectOffset(n)}}});return l}),define("hb!templates/details/StreamDropdown.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s,c="";return c+='\n	<a class="stream-name dropdown-toggle" href="#',(i=n.type)?i=i.call(e,{hash:{},data:t}):(i=e.type,i=typeof i===S?i.apply(e):i),c+=C(i)+'-dropdown-list" tabindex="0" data-toggle="dropdown">',a=n["if"].call(e,(i=e.selectedStream,null==i||i===!1?i:i.language),{hash:{},inverse:I.program(4,l,t),fn:I.program(2,r,t),data:t}),(a||0===a)&&(c+=a),s={hash:{},inverse:I.noop,fn:I.program(6,o,t),data:t},i=n.if_eq,a=i?i.call(e,e.type,"subtitles",s):A.call(e,"if_eq",e.type,"subtitles",s),(a||0===a)&&(c+=a),s={hash:{},inverse:I.noop,fn:I.program(10,h,t),data:t},i=n.if_eq,a=i?i.call(e,e.type,"audio",s):A.call(e,"if_eq",e.type,"audio",s),(a||0===a)&&(c+=a),c+=' <i class="glyphicon-caret orange"></i></a>\n\n	<ul class="dropdown-menu dropdown-menu-large">\n		',a=n.each.call(e,e.streams,{hash:{},inverse:I.noop,fn:I.programWithDepth(13,p,t,e),data:t}),(a||0===a)&&(c+=a),c+="\n	</ul>\n"
}function r(e){var t;return C((t=e.selectedStream,t=null==t||t===!1?t:t.language,typeof t===S?t.apply(e):t))}function l(e,t){var i,a;return a={hash:{},data:t},C((i=n.t,i?i.call(e,"Unknown",a):A.call(e,"t","Unknown",a)))}function o(e,t){var i,a;return a=n["if"].call(e,(i=e.selectedStream,null==i||i===!1?i:i.format),{hash:{},inverse:I.noop,fn:I.program(7,c,t),data:t}),a||0===a?a:""}function c(e,t){var i,a,s,r="";return r+=" (",s={hash:{},data:t},r+=C((i=n.upperCase,i?i.call(e,(i=e.selectedStream,null==i||i===!1?i:i.format),s):A.call(e,"upperCase",(i=e.selectedStream,null==i||i===!1?i:i.format),s))),a=n["if"].call(e,(i=e.selectedStream,null==i||i===!1?i:i.forced),{hash:{},inverse:I.noop,fn:I.program(8,d,t),data:t}),(a||0===a)&&(r+=a),r+=")"
}function d(){return" Forced"}function h(e,t){var i,a;return a=n["if"].call(e,(i=e.selectedStream,null==i||i===!1?i:i.codec),{hash:{},inverse:I.noop,fn:I.program(11,u,t),data:t}),a||0===a?a:""}function u(e,t){var i,a,s="";return s+=" (",a={hash:{},data:t},s+=C((i=n.formatAudioCodec,i?i.call(e,(i=e.selectedStream,null==i||i===!1?i:i.codec),a):A.call(e,"formatAudioCodec",(i=e.selectedStream,null==i||i===!1?i:i.codec),a)))+" ",a={hash:{},data:t},s+=C((i=n.formatAudioChannels,i?i.call(e,(i=e.selectedStream,null==i||i===!1?i:i.channels),a):A.call(e,"formatAudioChannels",(i=e.selectedStream,null==i||i===!1?i:i.channels),a)))+")"
}function p(e,t,i){var a,s,r,o="";return o+='\n			<li><a data-id="',(a=n.id)?a=a.call(e,{hash:{},data:t}):(a=e.id,a=typeof a===S?a.apply(e):a),o+=C(a)+'" href="#" tabindex="0">',a=n["if"].call(e,e.language,{hash:{},inverse:I.program(4,l,t),fn:I.program(14,m,t),data:t}),(a||0===a)&&(o+=a),r={hash:{},inverse:I.noop,fn:I.program(16,f,t),data:t},a=n.if_eq,s=a?a.call(e,i.type,"subtitles",r):A.call(e,"if_eq",i.type,"subtitles",r),(s||0===s)&&(o+=s),r={hash:{},inverse:I.noop,fn:I.program(19,g,t),data:t},a=n.if_eq,s=a?a.call(e,i.type,"audio",r):A.call(e,"if_eq",i.type,"audio",r),(s||0===s)&&(o+=s),o+=" ",s=n["if"].call(e,e.selected,{hash:{},inverse:I.noop,fn:I.program(22,b,t),data:t}),(s||0===s)&&(o+=s),o+="</a></li>\n		"
}function m(e,t){var i;return(i=n.language)?i=i.call(e,{hash:{},data:t}):(i=e.language,i=typeof i===S?i.apply(e):i),C(i)}function f(e,t){var i;return i=n["if"].call(e,e.format,{hash:{},inverse:I.noop,fn:I.program(17,v,t),data:t}),i||0===i?i:""}function v(e,t){var i,a,s,r="";return r+=" (",s={hash:{},data:t},r+=C((i=n.upperCase,i?i.call(e,e.format,s):A.call(e,"upperCase",e.format,s))),a=n["if"].call(e,e.forced,{hash:{},inverse:I.noop,fn:I.program(8,d,t),data:t}),(a||0===a)&&(r+=a),r+=")"}function g(e,t){var i;
return i=n["if"].call(e,e.codec,{hash:{},inverse:I.noop,fn:I.program(20,y,t),data:t}),i||0===i?i:""}function y(e,t){var i,a,s="";return s+=" (",a={hash:{},data:t},s+=C((i=n.formatAudioCodec,i?i.call(e,e.codec,a):A.call(e,"formatAudioCodec",e.codec,a)))+" ",a={hash:{},data:t},s+=C((i=n.formatAudioChannels,i?i.call(e,e.channels,a):A.call(e,"formatAudioChannels",e.channels,a)))+")"}function b(){return'<i class="glyphicon ok-2"></i>'}function w(e,t){var i,a,s,c="";return a=n["if"].call(e,(i=e.selectedStream,null==i||i===!1?i:i.language),{hash:{},inverse:I.program(4,l,t),fn:I.program(2,r,t),data:t}),(a||0===a)&&(c+=a),s={hash:{},inverse:I.noop,fn:I.program(6,o,t),data:t},i=n.if_eq,a=i?i.call(e,e.type,"subtitles",s):A.call(e,"if_eq",e.type,"subtitles",s),(a||0===a)&&(c+=a),s={hash:{},inverse:I.noop,fn:I.program(10,h,t),data:t},i=n.if_eq,a=i?i.call(e,e.type,"audio",s):A.call(e,"if_eq",e.type,"audio",s),(a||0===a)&&(c+=a),c
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var x,k="",S="function",C=this.escapeExpression,A=n.helperMissing,I=this;return x=n["if"].call(t,t.showDropdown,{hash:{},inverse:I.program(24,w,a),fn:I.program(1,s,a),data:a}),(x||0===x)&&(k+=x),k+="\n"})}),define("plex/view/details/StreamDropdown",["hb!templates/details/StreamDropdown.tpl","plex/control/Dispatcher","plex/view/BaseView","jquery"],function(e,t,n,i){var a=n.extend({tagName:"span",className:"dropdown",type:null,streams:null,events:{"click a":"onStreamClick"},initialize:function(e){this.type=e.type,this.addBinding(this.model,"change:streams",this.render)
},render:function(){var t,n=this.model.server.get("multiuser"),i=this.model.server.get("shared");if("audio"===this.type?this.streams=this.model.getStreams(2):(this.streams=this.model.getStreams(3),this.streams.unshift({id:"",language:"None"})),_.each(this.streams,function(e){return e.selected?(t=e,!1):void 0}),!t){var a=_.where(this.streams,{id:""});a.length&&(a=a[0],a.selected=!0,t=a)}return this.$el.html(e({type:this.type,streams:this.streams,selectedStream:t,showDropdown:this.streams.length>1&&(!i||n)})),this.$el.attr("id",this.type+"-dropdown-list"),this
},onStreamClick:function(e){e.preventDefault();var n=i(e.target).data("id");n!==void 0&&t.trigger("command:SelectStream",this.type,this.model,n)}});return a}),define("hb!templates/modals/SelectArtworkModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n		<div class="upload-artwork-container">\n			<div class="upload-prompt">\n				',i=n["if"].call(e,e.showFileUpload,{hash:{},inverse:y.noop,fn:y.program(2,r,t),data:t}),(i||0===i)&&(s+=i),s+='<a class="upload-url" href="#">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"enter a url",a):v.call(e,"t","enter a url",a)))+'</a>\n			</div>\n\n			<div class="upload-progress hide">\n				',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Uploading artwork...",a):v.call(e,"t","Uploading artwork...",a)))+'\n			</div>\n\n			<div class="upload-error hide">\n				',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"There was an error uploading this artwork. <a class='upload-back' href='#'>Try again</a>.",a):v.call(e,"t","There was an error uploading this artwork. <a class='upload-back' href='#'>Try again</a>.",a)))+'\n			</div>\n\n			<form class="url-form hide">\n				<input type="text" class="input-dark url-input" placeholder="',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"Enter a url to upload an image from the web",a):v.call(e,"t","Enter a url to upload an image from the web",a)))+'">\n			</form>\n		</div>\n	'
}function r(e,t){var i,a,s="";return s+='<span class="file-chooser-container"><input type="file" class="file-chooser" multiple><a href="#">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"choose an image",a):v.call(e,"t","choose an image",a)))+"</a></span> &middot; ",a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"drag and drop",a):v.call(e,"t","drag and drop",a)))+" &middot; "}function l(){return" hide"}function o(e,t){var i,a="";return a+='\n			<div class="artwork-options-container ',i=n["if"].call(e,e.loading,{hash:{},inverse:y.noop,fn:y.program(4,l,t),data:t}),(i||0===i)&&(a+=i),a+='">\n				',i=n.each.call(e,e.options,{hash:{},inverse:y.noop,fn:y.programWithDepth(7,c,t,e),data:t}),(i||0===i)&&(a+=i),a+="\n			</div>\n		"
}function c(e,t,i){var a,s,r,l="";return l+='\n					<a class="artwork-option" data-rating-key="',(a=n.ratingKey)?a=a.call(e,{hash:{},data:t}):(a=e.ratingKey,a=typeof a===b?a.apply(e):a),l+=g(a)+'" href="#">\n						<img class="'+g((a=i.type,typeof a===b?a.apply(e):a))+'-poster poster" data-original="',r={hash:{},data:t},l+=g((a=n.transcodeImage,a?a.call(e,i.serverObj,e.thumb,i.width,i.height,r):v.call(e,"transcodeImage",i.serverObj,e.thumb,i.width,i.height,r)))+'" src="img/posters/poster',r={hash:{},inverse:y.noop,fn:y.program(8,d,t),data:t},a=n.if_eq,s=a?a.call(e,i.type,"art",r):v.call(e,"if_eq",i.type,"art",r),(s||0===s)&&(l+=s),r={hash:{},inverse:y.noop,fn:y.program(8,d,t),data:t},a=n.if_eq,s=a?a.call(e,i.type,"banner",r):v.call(e,"if_eq",i.type,"banner",r),(s||0===s)&&(l+=s),l+='.png">\n					</a>\n				'
}function d(){return"_wide"}function h(e,t){var i,a,s="";return s+='\n			<h4 class="no-matches">',a={hash:{},data:t},s+=g((i=n.t,i?i.call(e,"No artwork found",a):v.call(e,"t","No artwork found",a)))+"</h4>\n		"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var u,p,m,f="",v=n.helperMissing,g=this.escapeExpression,y=this,b="function";return f+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3>',m={hash:{},data:a},f+=g((u=n.t,u?u.call(t,"Select Artwork",m):v.call(t,"t","Select Artwork",m)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	',p=n["if"].call(t,t.showUpload,{hash:{},inverse:y.noop,fn:y.program(1,s,a),data:a}),(p||0===p)&&(f+=p),f+='\n\n	<div class="select-artwork-options">\n		<h4 class="select-artwork-loading',p=n.unless.call(t,t.loading,{hash:{},inverse:y.noop,fn:y.program(4,l,a),data:a}),(p||0===p)&&(f+=p),f+='">\n			',m={hash:{},data:a},f+=g((u=n.t,u?u.call(t,"Searching for artwork...",m):v.call(t,"t","Searching for artwork...",m)))+"\n		</h4>\n		",p=n["if"].call(t,(u=t.options,null==u||u===!1?u:u.length),{hash:{},inverse:y.program(10,h,a),fn:y.program(6,o,a),data:a}),(p||0===p)&&(f+=p),f+="\n	</div>\n</div>\n"
})}),define("plex/model/media/collections/ArtworkCollection",["plex/model/collections/BaseCollection","plex/model/media/PhotoModel","jquery"],function(e,t){var n=e.extend({model:t,initialize:function(e,t){this.media=t.media,this.server=this.media.server,this.section=this.media.section,this.type=t.type},url:function(){return"/library/metadata/"+this.media.id+"/"+this.type+"s"},parse:function(e){return this.convert(e,"Photo")}});return n}),define("plex/view/modals/SelectArtworkModal",["hb!templates/modals/SelectArtworkModal.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/model/media/MediaModel","plex/view/modals/BaseModal","plex/model/media/collections/ArtworkCollection","jquery","lazyload"],function(e,t,n,i,a,s,r,l){var o=s.extend({name:"selectArtworkModal",className:"modal fade",dragStatus:0,events:{hidden:"close",dragenter:"onDragEnter",dragleave:"onDragLeave",dragover:"onDragOver",drop:"onDrop","change .file-chooser":"onFileChange","click .upload-url":"onUploadUrlClick","submit .url-form":"onUrlSubmit","click .upload-back":"onUploadBackClick","click .artwork-option":"onArtworkOptionClick"},initialize:function(e){this.type=e.type,this.artwork=new r([],{media:this.model,type:this.type}),this.loading=!0,this.addBinding(this.artwork,"reset",function(){this.loading=!1,this.render()
}),this.artwork.populate()},render:function(){var t=window.devicePixelRatio?window.devicePixelRatio:1,n=("banner"===this.type?500:150)*t,i=250*t,a={type:this.type,media:this.model.toJSON(),options:this.artwork.toJSON(),loading:this.loading,serverURL:this.model.server.url(),serverObj:this.model.server,showUpload:this.model.server.supports("artworkUpload"),showFileUpload:this.supportsFileUpload(),width:n,height:i};return this.$el.html(e(a)).modal(),this.loadPoster(),this},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:!1})
},this))},supportsFileUpload:function(){return!!(window.File&&window.FileList&&window.FileReader)},selectArtwork:function(e){var s={url:e},r="/library/metadata/"+this.model.id+"/"+this.type+"?"+l.param(s),o=_.extend({type:"PUT"},this.model.server.getAjaxOptions(r));t.trigger("command:ShowLoading",!0),l.ajax(o).always(function(){t.trigger("command:ShowLoading",!1)}).done(_.bind(function(e){this.$el.modal("hide");var t={server:this.model.server,section:this.model.section,onlyIfCached:!0},n=new a({ratingKey:this.model.id},t);
"poster"===this.type?(this.model.set("thumb",e),_.isEmpty(n)||n.set("thumb",e)):(this.model.set(this.type,e),_.isEmpty(n)||n.set(this.type,e))},this)).fail(function(){i.set("alert",{status:"error",message:n.t("There was a problem changing the artwork for {1}.",this.model.get("title"))})})},uploadFiles:function(e){for(var t=this.artwork.url(),n=[],i=_.bind(function(e){if(/image\//.test(e.type)){var i=_.extend(this.model.server.getAjaxOptions(t),{type:"POST",data:e,processData:!1});n.push(l.ajax(i))
}},this),a=0,s=e.length;s>a;a++)i(e[a]);return n.length?(this.$(".upload-prompt").addClass("hide"),this.$(".upload-progress").removeClass("hide"),this.$(".upload-artwork-container").addClass("upload-active"),l.when.apply(this,n).always(_.bind(function(){this.$(".upload-artwork-container").removeClass("upload-active")},this)).done(_.bind(this.finish,this)).fail(_.bind(function(){this.$(".upload-progress").addClass("hide"),this.$(".upload-error").removeClass("hide")},this)),void 0):(this.$(".upload-prompt").addClass("hide"),this.$(".upload-error").removeClass("hide"),void 0)
},uploadUrl:function(e){var t=this.artwork.url()+"?url="+encodeURIComponent(e);this.$(".url-form").addClass("hide"),this.$(".upload-progress").removeClass("hide"),this.$(".upload-artwork-container").addClass("upload-active");var n=_.extend(this.model.server.getAjaxOptions(t),{type:"POST"});l.ajax(n).always(_.bind(function(){this.$(".upload-artwork-container").removeClass("upload-active")},this)).done(_.bind(this.finish,this)).fail(_.bind(function(){this.$(".upload-progress").addClass("hide"),this.$(".upload-error").removeClass("hide")
},this))},finish:function(){this.model.fetch({hideLoadingAlert:!0}),this.$el.modal("hide")},onDragEnter:function(){this.dragStatus++,this.$(".upload-artwork-container").addClass("drag-hover")},onDragLeave:function(){this.dragStatus--,0===this.dragStatus&&this.$(".upload-artwork-container").removeClass("drag-hover")},onDragOver:function(e){e.preventDefault()},onDrop:function(e){e.stopPropagation(),e.preventDefault(),this.$(".upload-artwork-container").removeClass("drag-hover");var t=e.originalEvent.dataTransfer.files;
this.uploadFiles(t)},onFileChange:function(e){if(e.target.files&&e.target.files.length){var t=e.target.files;this.uploadFiles(t)}},onUploadUrlClick:function(e){e.preventDefault(),this.$(".upload-prompt").addClass("hide"),this.$(".url-form").removeClass("hide"),this.$(".url-input").focus()},onUrlSubmit:function(e){e.preventDefault();var t=this.$(".url-input").val();t?this.uploadUrl(t):(this.$(".url-form").addClass("hide"),this.$(".upload-prompt").removeClass("hide"))},onUploadBackClick:function(e){e.preventDefault(),this.$(".upload-error").addClass("hide"),this.$(".upload-prompt").removeClass("hide")
},onArtworkOptionClick:function(e){e.preventDefault();var t=l(e.currentTarget);this.selectArtwork(t.data("ratingKey"))}});return o}),define("plex/view/details/MovieDetailsView",["hb!templates/details/MovieDetailsView.tpl","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/KeyboardNavigationView","plex/view/details/ActionBarView","plex/view/details/PlaySplitButton","plex/view/details/StreamDropdown","plex/view/modals/MediaInfoModal","plex/view/modals/SelectArtworkModal"],function(e,t,n,i,a,s,r,l,o){var c=i.extend({className:"details movie-details",defaultFocusedItem:".play-btn",keyboardContainer:".details-row",keyboardCancellationDirections:{up:".btn-primary.dropdown-toggle"},actionBar:null,playButton:null,audioDropdown:null,subtitlesDropdown:null,events:{"click .change-poster-btn":"onChangePosterClick","click .unavailable-btn":"onUnavailableClick"},initialize:function(){this.actionBar=this.registerView(new a({model:this.model})),this.playButton=this.registerView(new s({model:this.model})),this.audioDropdown=this.registerView(new r({type:"audio",model:this.model})),this.subtitlesDropdown=this.registerView(new r({type:"subtitles",model:this.model})),this.addBinding(this.playButton,"refocus",this.postrender)
},render:function(){var t=this.model.getStreams(2),n=this.model.getStreams(3),i=this.model.section.get("limited")||this.model.server.get("shared");return this.$el.html(e({limited:i})),this.$el.prepend(this.actionBar.render().el),i?this.$(".poster-container").after(this.playButton.render().el):this.$(".change-poster-btn").after(this.playButton.render().el),t.length&&this.$(".movie-audio").removeClass("hide").append(this.audioDropdown.render().el),n.length&&this.$(".movie-subtitles").removeClass("hide").append(this.subtitlesDropdown.render().el),this.bindView(),this.$el.tooltip({selector:".details-icon-btn",placement:"bottom"}),this
},bindings:{".movie-title":{modelAttr:"title"},".movie-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/poster.png"),t){var n=window.devicePixelRatio?window.devicePixelRatio:1,i=256*n,a=420*n,s=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,i,a);e.data("original",s),this.trigger("change:poster")}}},".media-count":{modelAttr:"Media",hideEmpty:!0,format:function(){var e=0,t=this.model.get("Media");return t.length>1&&(e=t.length),e}},".movie-unavailable":{modelAttr:"Media",hideEmpty:!0,format:function(e){var t=this.model.getMissingParts();
t.length?e.removeClass("hide"):e.addClass("hide")}},".movie-year":{modelAttr:"year",hideEmpty:!0},".movie-content-rating":{modelAttr:"contentRating",hideEmpty:!0,format:function(e,t){if(!t)return e.addClass("hide"),void 0;var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"contentRating",flag:t,width:70,height:25};e.removeClass("hide"),e.find("img").prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".movie-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""
}},".movie-genre":{modelAttr:"Genre",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var n=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:100,maxTags:2}});return'<span class="metadata-label">'+n+"</span>"}},".movie-duration":{modelAttr:"duration",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatMinutes.call(this,t)}},".unwatched-icon":{modelAttr:"viewCount",format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser"),a=this.model.get("viewOffset");
return n&&!i?(e.addClass("hide"),void 0):(t||a?e.addClass("hide"):(e.removeClass("hide"),this.$(".unwatched-partial-icon").addClass("hide")),void 0)}},".unwatched-partial-icon":{modelAttr:"viewOffset",format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser");return n&&!i?(e.addClass("hide"),void 0):(t?(e.removeClass("hide"),this.$(".unwatched-full-icon").addClass("hide")):e.addClass("hide"),void 0)}},".movie-tagline":{modelAttr:"tagline",hideEmpty:!0,format:function(e,t){return t
}},".movie-director":{modelAttr:"Director",hideEmpty:!0,format:function(e,n){if(!n||!n.length)return"";var i=t.t("Director"),a=Handlebars.helpers.truncateTagList.call(this,n,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">'+i+"</span>"+a}},".movie-writer":{modelAttr:"Writer",hideEmpty:!0,format:function(e,n){if(!n||!n.length)return"";var i=t.t("Writer"),a=Handlebars.helpers.truncateTagList.call(this,n,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">'+i+"</span>"+a
}},".movie-cast":{modelAttr:"Role",hideEmpty:!0,format:function(e,n){if(!n||!n.length)return"";var i=t.t("Cast"),a=Handlebars.helpers.truncateTagList.call(this,n,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">'+i+"</span>"+a}},".movie-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}},".movie-video-resolution":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(t=_.first(t),!t||!t.videoResolution)return e.addClass("hide"),void 0;
var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"videoResolution",flag:t.videoResolution,width:100,height:20};e.removeClass("hide"),e.attr("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".movie-audio-codec":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(t=_.first(t),!t||!t.audioCodec)return e.addClass("hide"),void 0;var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"audioCodec",flag:t.audioCodec,width:100,height:20};
e.removeClass("hide"),e.attr("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".movie-audio-channels":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(t=_.first(t),!t||!t.audioChannels)return e.addClass("hide"),void 0;var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"audioChannels",flag:t.audioChannels,width:100,height:20};e.removeClass("hide"),e.attr("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))
}},".movie-studio":{modelAttr:"studio",hideEmpty:!0,format:function(e,t){if(!t)return e.addClass("hide"),void 0;var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"studio",flag:t,width:200,height:40};e.removeClass("hide"),e.attr("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}}},onChangePosterClick:function(e){e.preventDefault();var t=new o({model:this.model,type:"poster"});n.set({modal:t})},onUnavailableClick:function(){n.set("modal",new l({model:this.model}))
}});return c}),define("hb!templates/details/ShowDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return'\n				<div class="poster-container">\n					<img class="show-poster poster large-poster">\n\n					<span class="show-unwatched-count unwatched-count"></span>\n				</div>\n			'}function r(){return'\n				<a class="change-poster-btn" href="#">\n					<div class="poster-container">\n						<div class="poster-card">\n							<div class="poster-face front">\n								<img class="show-poster poster large-poster">\n\n								<span class="show-unwatched-count unwatched-count"></span>\n\n								<div class="hover-overlay card-overlay">\n									<i class="hover-menu-btn glyphicon pencil"></i>\n								</div>\n							</div>\n						</div>\n					</div>\n				</a>\n			'
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o="",c=this;return o+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			',l=n["if"].call(t,t.limited,{hash:{},inverse:c.program(3,r,a),fn:c.program(1,s,a),data:a}),(l||0===l)&&(o+=l),o+='\n		</div>\n\n		<div class="details-metadata">\n			<div class="metadata-right">\n				<h1 class="show-year"></h1>\n\n				<div class="show-content-rating metadata"><img class="media-flag"></div>\n\n				<div class="show-rating metadata"></div>\n			</div>\n\n			<h1 class="show-title"></h1>\n\n			<div class="show-genre metadata metadata-top"></div>\n\n			<div class="show-duration metadata"></div>\n\n			<div class="show-summary summary"></div>\n\n			<div class="media-flags">\n				<img class="show-studio studio">\n			</div>\n		</div>\n	</div>\n\n	<div id="seasons-container" class="well"></div>\n</div>\n'
})}),define("hb!templates/lists/media/items/SeasonTileListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o="function",c=this.escapeExpression,d=n.helperMissing;return l+='<a href="#!/servers/',(s=n.serverID)?s=s.call(t,{hash:{},data:a}):(s=t.serverID,s=typeof s===o?s.apply(t):s),l+=c(s)+"/sections/",r={hash:{},data:a},l+=c((s=n.encodeUrl,s?s.call(t,t.sectionID,r):d.call(t,"encodeUrl",t.sectionID,r)))+"/details/"+c((s=t.season,s=null==s||s===!1?s:s.ratingKey,typeof s===o?s.apply(t):s))+'" tabindex="0">\n	<div class="poster-container">\n		<div class="poster-card">\n			<div class="poster-face front">\n				<img class="season-poster poster">\n\n				<span class="unwatched-count"></span>\n\n				<div class="card-overlay">\n					<span class="card-season-index"></span>\n				</div>\n			</div>\n		</div>\n	</div>\n</a>\n'
})}),define("plex/view/lists/media/items/SeasonTileListItem",["hb!templates/lists/media/items/SeasonTileListItem.tpl","plex/model/AppModel","plex/view/BaseView"],function(e,t,n){var i=n.extend({tagName:"li",className:"season",render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,sectionID:this.model.section.id,season:this.model.toJSON()})),this.bindView(),this},bindings:{".season-poster":{modelAttr:"thumb",format:function(e,t){e.attr("src")||e.attr("src","img/posters/poster.png");
var n=t||this.model.get("parentThumb"),i=window.devicePixelRatio?window.devicePixelRatio:1,a=128*i,s=200*i;if(n){var r=Handlebars.helpers.transcodeImage.call(this,this.model.server,n,a,s);e.data("original",r),this.trigger("change:poster")}}},".unwatched-count":{modelAttr:"unviewedLeafCount",hideEmpty:!0,format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser");return!t||n&&!i?0:t}},".card-season-index":{modelAttr:"index",hideEmpty:!0,format:function(e,t){return"0"===t?this.model.get("title"):Handlebars.helpers.seasonIndex.call(this,t)
}}}});return i}),define("plex/view/lists/media/SeasonTileList",["plex/view/lists/KeyboardNavigationList","plex/view/lists/media/items/SeasonTileListItem","lazyload"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list season-tile-list",loadPosterThrottle:null,initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100),this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){if(t.get("index")!==void 0){var n=e.prototype.addItem.apply(this,arguments);
this.addBinding(n,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()}},getScrollContainer:function(){return this.$scrollContainer||(this.$scrollContainer=this.$el.closest(".details-scroll-container")),this.$scrollContainer.length?this.$scrollContainer:void 0},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200,container:this.getScrollContainer()})},this))}});return n}),define("plex/view/details/ShowDetailsView",["hb!templates/details/ShowDetailsView.tpl","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/BaseView","plex/view/details/ActionBarView","plex/view/lists/media/SeasonTileList","plex/view/modals/SelectArtworkModal"],function(e,t,n,i,a,s,r){var l=i.extend({className:"details",seasonList:null,events:{"click .change-poster-btn":"onChangePosterClick"},initialize:function(){this.seasonList=this.registerView(new s({collection:this.model.get("seasons")})),this.actionBar=this.registerView(new a({model:this.model}))
},render:function(){var t=this.model.section.get("limited")||this.model.server.get("shared");return this.$el.html(e({limited:t})),this.$el.prepend(this.actionBar.render().el),this.$("#seasons-container").append(this.seasonList.render().el),this.bindView(),this},bindings:{".show-title":{modelAttr:"title"},".show-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/poster.png"),t){var n=window.devicePixelRatio?window.devicePixelRatio:1,i=200*n,a=300*n,s=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,i,a);
e.data("original",s),this.trigger("change:poster")}}},".show-unwatched-count":{modelAttr:"unviewedLeafCount",hideEmpty:!0,format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser");return!t||n&&!i?0:t}},".show-year":{modelAttr:"year",hideEmpty:!0},".show-content-rating":{modelAttr:"contentRating",hideEmpty:!0,format:function(e,t){if(!t)return e.addClass("hide"),void 0;var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"contentRating",flag:t,width:30,height:60};
e.removeClass("hide"),e.find("img").prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".show-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""}},".show-genre":{modelAttr:"Genre",hideEmpty:!0,format:function(e,n){if(!n||!n.length)return"";var i=t.t("Genre"),a=Handlebars.helpers.truncateTagList.call(this,n,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">'+i+"</span>"+a
}},".show-duration":{modelAttr:"duration",hideEmpty:!0,format:function(e,n){var i=t.t("Episode Duration"),a=Handlebars.helpers.formatMinutes.call(this,n);return'<span class="metadata-label">'+i+"</span>"+a}},".show-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}},".show-studio":{modelAttr:"studio",hideEmpty:!0,format:function(e,t){if(!t)return e.addClass("hide"),void 0;var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"studio",flag:t,width:200,height:40};
e.removeClass("hide"),e.attr("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}}},onChangePosterClick:function(e){e.preventDefault();var t=new r({model:this.model,type:"poster"});n.set({modal:t})}});return l}),define("hb!templates/details/SeasonDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return'\n				<div class="poster-container">\n					<img class="season-poster poster large-poster">\n\n					<span class="season-unwatched-count unwatched-count"></span>\n				</div>\n			'
}function r(){return'\n				<a class="change-poster-btn" href="#">\n					<div class="poster-container">\n						<div class="poster-card">\n							<div class="poster-face front">\n								<img class="season-poster poster large-poster">\n\n								<span class="season-unwatched-count unwatched-count"></span>\n\n								<div class="hover-overlay card-overlay">\n									<i class="hover-menu-btn glyphicon pencil"></i>\n								</div>\n							</div>\n						</div>\n					</div>\n				</a>\n			'}function l(){return"selected active"
}function o(){return"disabled"}function c(){return'tabindex="0"'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var d,h,u,p="",m=this,f=n.helperMissing,v=this.escapeExpression,g="function";return p+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			',d=n["if"].call(t,t.limited,{hash:{},inverse:m.program(3,r,a),fn:m.program(1,s,a),data:a}),(d||0===d)&&(p+=d),p+='\n		</div>\n\n		<div class="season-metadata details-metadata">\n			<div class="metadata-right">\n				<div class="btn-group episode-list-type-btn-group" data-toggle="buttons-radio">\n					<button type="button" class="episode-tile-list-btn btn btn-icon ',u={hash:{},inverse:m.noop,fn:m.program(5,l,a),data:a},d=n.if_eq,h=d?d.call(t,t.listType,"episode-tile-list",u):f.call(t,"if_eq",t.listType,"episode-tile-list",u),(h||0===h)&&(p+=h),p+='" tabindex="0" rel="tooltip" title="',u={hash:{},data:a},p+=v((d=n.t,d?d.call(t,"Tiles",u):f.call(t,"t","Tiles",u)))+'">\n						<i class="glyphicon show-big-thumbnails"></i>\n					</button>\n\n					<button type="button" class="episode-list-btn btn btn-icon ',u={hash:{},inverse:m.noop,fn:m.program(5,l,a),data:a},d=n.if_eq,h=d?d.call(t,t.listType,"episode-list",u):f.call(t,"if_eq",t.listType,"episode-list",u),(h||0===h)&&(p+=h),p+='" tabindex="0" rel="tooltip" title="',u={hash:{},data:a},p+=v((d=n.t,d?d.call(t,"Details",u):f.call(t,"t","Details",u)))+'">\n						<i class="glyphicon list"></i>\n					</button>\n\n					<button type="button" class="episode-compact-list-btn btn btn-icon ',u={hash:{},inverse:m.noop,fn:m.program(5,l,a),data:a},d=n.if_eq,h=d?d.call(t,t.listType,"episode-compact-list",u):f.call(t,"if_eq",t.listType,"episode-compact-list",u),(h||0===h)&&(p+=h),p+='" tabindex="0" rel="tooltip" title="',u={hash:{},data:a},p+=v((d=n.t,d?d.call(t,"List",u):f.call(t,"t","List",u)))+'">\n						<i class="glyphicon justify"></i>\n					</button>\n				</div>\n\n				<div class="btn-group arrow-btn-group">\n					<button type="button" class="previous-btn btn btn-icon ',h=n.unless.call(t,t.showPrevious,{hash:{},inverse:m.noop,fn:m.program(7,o,a),data:a}),(h||0===h)&&(p+=h),p+='" ',h=n["if"].call(t,t.showPrevious,{hash:{},inverse:m.noop,fn:m.program(9,c,a),data:a}),(h||0===h)&&(p+=h),p+='><i class="glyphicon chevron-left"></i></button>\n					<button type="button" class="next-btn btn btn-icon ',h=n.unless.call(t,t.showNext,{hash:{},inverse:m.noop,fn:m.program(7,o,a),data:a}),(h||0===h)&&(p+=h),p+='" ',h=n["if"].call(t,t.showNext,{hash:{},inverse:m.noop,fn:m.program(9,c,a),data:a}),(h||0===h)&&(p+=h),p+='><i class="glyphicon chevron-right"></i></button>\n				</div>\n			</div>\n\n			<h1>\n				<a class="show-title" href="#!/servers/',(h=n.serverID)?h=h.call(t,{hash:{},data:a}):(h=t.serverID,h=typeof h===g?h.apply(t):h),p+=v(h)+"/sections/",u={hash:{},data:a},p+=v((d=n.encodeUrl,d?d.call(t,t.sectionID,u):f.call(t,"encodeUrl",t.sectionID,u)))+"/details/"+v((d=t.season,d=null==d||d===!1?d:d.parentRatingKey,typeof d===g?d.apply(t):d))+'"></a>\n			</h1>\n\n			<h2 class="season-title"></h2>\n\n			<div class="season-summary summary"></div>\n		</div>\n	</div>\n\n	<div id="episodes-container" class="well"></div>\n</div>\n'
})}),define("hb!templates/lists/media/items/EpisodeTileListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"selected"}function r(){return"player"}function l(){return"details"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var o,c,d,h="",u=this,p="function",m=this.escapeExpression,f=n.helperMissing;return h+='<a class="card-container ',o=n["if"].call(t,t.nowPlaying,{hash:{},inverse:u.noop,fn:u.program(1,s,a),data:a}),(o||0===o)&&(h+=o),h+='" href="#!/servers/',(o=n.serverID)?o=o.call(t,{hash:{},data:a}):(o=t.serverID,o=typeof o===p?o.apply(t):o),h+=m(o)+"/sections/",d={hash:{},data:a},h+=m((o=n.encodeUrl,o?o.call(t,t.sectionID,d):f.call(t,"encodeUrl",t.sectionID,d)))+"/",c=n["if"].call(t,t.player,{hash:{},inverse:u.program(5,l,a),fn:u.program(3,r,a),data:a}),(c||0===c)&&(h+=c),h+="/"+m((o=t.episode,o=null==o||o===!1?o:o.ratingKey,typeof o===p?o.apply(t):o))+'" data-id="'+m((o=t.episode,o=null==o||o===!1?o:o.ratingKey,typeof o===p?o.apply(t):o))+'" tabindex="0">\n	<div class="poster-container">\n		<div class="poster-card">\n			<div class="poster-face front">\n				<img class="episode-poster poster">\n\n				<div class="card-overlay">\n					<span class="card-episode-index"></span>\n\n					<button type="button" class="hover-menu-btn poster-play-btn" tabindex="-1"><i class="glyphicon play"></i></button><button type="button" class="hover-menu-btn poster-edit-btn" tabindex="-1"><i class="glyphicon pencil"></i></button>\n\n					<div class="unwatched-icon unwatched-partial-icon"></div>\n					<div class="unwatched-icon unwatched-full-icon"></div>\n				</div>\n			</div>\n		</div>\n	</div>\n\n	<div class="episode-title poster-title"></div>\n</a>\n'
})}),define("plex/view/lists/media/items/EpisodeTileListItem",["hb!templates/lists/media/items/EpisodeTileListItem.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/view/BaseView","jquery"],function(e,t,n,i,a){var s=i.extend({tagName:"li",className:"episode",player:!1,nowPlaying:!1,events:{"click .poster-play-btn":"onPlayClick","click .poster-edit-btn":"onEditClick","mouseenter .hover-menu-btn":"onMenuMouseEnter","mouseleave .hover-menu-btn":"onMenuMouseLeave"},initialize:function(e){e.list.model&&(this.player=!0,this.nowPlaying=this.model.id===e.list.model.id)
},render:function(){var t=this.model.section&&this.model.section.get("limited"),n=this.model.server.get("shared");return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,sectionID:this.model.section.id,episode:this.model.toJSON(),player:this.player,nowPlaying:this.nowPlaying})),(t||n||this.player)&&this.$el.addClass("hide-hover-overlay"),this.bindView(),this},bindings:{".episode-title":{modelAttr:"title",format:function(e,t){return Handlebars.helpers.truncate.call(this,t,35)
}},".episode-poster":{modelAttr:"thumb",format:function(e,t){e.attr("src")||e.attr("src","img/posters/poster_wide.png");var n=t||this.model.get("grandparentThumb"),i=window.devicePixelRatio?window.devicePixelRatio:1,a=200*i,s=200*i;if(n){var r=Handlebars.helpers.transcodeImage.call(this,this.model.server,n,a,s);e.data("original",r),this.trigger("change:poster")}}},".unwatched-icon":{modelAttr:"viewCount",format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser"),a=this.model.get("viewOffset");
return n&&!i?(e.addClass("hide"),void 0):(t||a?e.addClass("hide"):(e.removeClass("hide"),this.$(".unwatched-partial-icon").addClass("hide")),void 0)}},".unwatched-partial-icon":{modelAttr:"viewOffset",format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser");return n&&!i?(e.addClass("hide"),void 0):(t?(e.removeClass("hide"),this.$(".unwatched-full-icon").addClass("hide")):e.addClass("hide"),void 0)}},".card-episode-index":{modelAttr:"index",hideEmpty:!0,format:function(e,t){var n=this.model.get("type");
if("episode"===n){var i=this.model.get("originallyAvailableAt");return Handlebars.helpers.episodeIndex.call(this,t,i)}}}},onPlayClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),this.model.get("type");var n=this.model.section?this.model.section.id:this.model.get("librarySectionID");t.trigger("navigate:player",this.model.server.id,n,this.model.id)},onEditClick:function(e){e.stopImmediatePropagation(),e.preventDefault();var n=this.model.section?this.model.section.id:this.model.get("librarySectionID");
t.trigger("navigate:edit",this.model.server.id,n,this.model.id)},onMenuMouseEnter:function(e){this.$(".hover-menu-btn").each(function(t,n){n!==e.currentTarget?a(n).addClass("dim"):a(n).removeClass("dim")})},onMenuMouseLeave:function(){this.$(".hover-menu-btn").removeClass("dim")}});return s}),define("plex/view/lists/media/EpisodeTileList",["plex/view/lists/KeyboardNavigationList","plex/view/lists/media/items/EpisodeTileListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"tile-list media-tile-list episode-tile-list",initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100),this.collection.populate()
},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(){var t=e.prototype.addItem.apply(this,arguments);this.addBinding(t,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()},getScrollContainer:function(){return this.$scrollContainer||(this.$scrollContainer=this.$el.closest(".details-scroll-container")),this.$scrollContainer.length?this.$scrollContainer:void 0},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200,container:this.getScrollContainer()})
},this))}});return n}),define("hb!templates/lists/media/items/EpisodeListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o="function",c=this.escapeExpression,d=n.helperMissing;return l+='<a href="#!/servers/',(s=n.serverID)?s=s.call(t,{hash:{},data:a}):(s=t.serverID,s=typeof s===o?s.apply(t):s),l+=c(s)+"/sections/",r={hash:{},data:a},l+=c((s=n.encodeUrl,s?s.call(t,t.sectionID,r):d.call(t,"encodeUrl",t.sectionID,r)))+"/details/"+c((s=t.episode,s=null==s||s===!1?s:s.ratingKey,typeof s===o?s.apply(t):s))+'" tabindex="0">\n	<div class="poster-container">\n		<div class="poster-card">\n			<div class="poster-face front">\n				<img class="episode-poster poster">\n\n				<div class="card-overlay">\n					<span class="card-episode-index"></span>\n\n					<div class="unwatched-icon unwatched-partial-icon"></div>\n					<div class="unwatched-icon unwatched-full-icon"></div>\n				</div>\n			</div>\n		</div>\n	</div>\n\n	<div class="media-details">\n		<div class="media-details-right">\n			<div class="hover-menu">\n				<button type="button" class="hover-menu-btn poster-play-btn" tabindex="-1"><i class="glyphicon play"></i></button><button type="button" class="hover-menu-btn poster-edit-btn" tabindex="-1"><i class="glyphicon pencil"></i></button>\n			</div>\n\n			<div class="episode-rating sorted-by"></div>\n		</div>\n\n		<h3 class="episode-title"></h3>\n\n		<div class="episode-summary summary"></div>\n	</div>\n</a>\n'
})}),define("plex/view/lists/media/items/EpisodeListItem",["hb!templates/lists/media/items/EpisodeListItem.tpl","plex/control/Dispatcher","plex/view/BaseView","jquery"],function(e,t,n,i){var a=n.extend({tagName:"li",className:"episode",events:{"click .poster-play-btn":"onPlayClick","click .poster-edit-btn":"onEditClick","mouseenter .hover-menu-btn":"onMenuMouseEnter","mouseleave .hover-menu-btn":"onMenuMouseLeave"},render:function(){var t=this.model.section&&this.model.section.get("limited"),n=this.model.server.get("shared");
return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,sectionID:this.model.section.id,episode:this.model.toJSON()})),(t||n)&&this.$el.addClass("hide-hover-overlay"),this.bindView(),this},bindings:{".episode-title":{modelAttr:"title",format:function(e,t){return Handlebars.helpers.truncate.call(this,t,80)}},".episode-poster":{modelAttr:"thumb",format:function(e,t){e.attr("src")||e.attr("src","img/posters/poster_wide.png");var n=t||this.model.get("grandparentThumb"),i=window.devicePixelRatio?window.devicePixelRatio:1,a=200*i,s=200*i;
if(n){var r=Handlebars.helpers.transcodeImage.call(this,this.model.server,n,a,s);e.data("original",r),this.trigger("change:poster")}}},".card-episode-index":{modelAttr:"index",hideEmpty:!0,format:function(e,t){var n=this.model.get("originallyAvailableAt");return Handlebars.helpers.episodeIndex.call(this,t,n)}},".unwatched-icon":{modelAttr:"viewCount",format:function(e,t){var n=this.model.server.get("multiuser"),i=this.model.get("viewOffset");return this.model.server.get("shared")&&!n?(e.addClass("hide"),void 0):(t||i?e.addClass("hide"):(e.removeClass("hide"),this.$(".unwatched-partial-icon").addClass("hide")),void 0)
}},".unwatched-partial-icon":{modelAttr:"viewOffset",format:function(e,t){var n=this.model.server.get("multiuser");return this.model.server.get("shared")&&!n?(e.addClass("hide"),void 0):(t?(e.removeClass("hide"),this.$(".unwatched-full-icon").addClass("hide")):e.addClass("hide"),void 0)}},".episode-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""}},".episode-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,250)
}}},onPlayClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),t.trigger("navigate:player",this.model.server.id,this.model.section.id,this.model.id)},onEditClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),t.trigger("navigate:edit",this.model.server.id,this.model.section.id,this.model.id)},onMenuMouseEnter:function(e){this.$(".hover-menu-btn").each(function(t,n){n!==e.currentTarget?i(n).addClass("dim"):i(n).removeClass("dim")})},onMenuMouseLeave:function(){this.$(".hover-menu-btn").removeClass("dim")
}});return a}),define("plex/view/lists/media/EpisodeList",["plex/view/lists/KeyboardNavigationList","plex/view/lists/media/items/EpisodeListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"list media-list episode-list",keyboardCancellationDirections:["left","right"],initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100),this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(){var t=e.prototype.addItem.apply(this,arguments);
this.addBinding(t,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()},getScrollContainer:function(){return this.$scrollContainer||(this.$scrollContainer=this.$el.closest(".details-scroll-container")),this.$scrollContainer.length?this.$scrollContainer:void 0},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200,container:this.getScrollContainer()})},this))}});return n}),define("hb!templates/lists/media/items/EpisodeCompactListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o="function",c=this.escapeExpression,d=n.helperMissing;return l+='<a href="#!/servers/',(s=n.serverID)?s=s.call(t,{hash:{},data:a}):(s=t.serverID,s=typeof s===o?s.apply(t):s),l+=c(s)+"/sections/",r={hash:{},data:a},l+=c((s=n.encodeUrl,s?s.call(t,t.sectionID,r):d.call(t,"encodeUrl",t.sectionID,r)))+"/details/"+c((s=t.episode,s=null==s||s===!1?s:s.ratingKey,typeof s===o?s.apply(t):s))+'" tabindex="0">\n	<span class="episode-rating rating"></span>\n\n	<span class="number episode-number"></span>\n\n	<span class="title episode-title"></span>\n\n	<button class="play-btn hover-btn" tabindex="-1"><i class="glyphicon play"></i></button><button class="edit-btn hover-btn" tabindex="-1"><i class="glyphicon pencil"></i></button>\n</a>\n'
})}),define("plex/view/lists/media/items/EpisodeCompactListItem",["hb!templates/lists/media/items/EpisodeCompactListItem.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","jquery"],function(e,t,n,i){var a=i.extend({tagName:"li",events:{"click .play-btn":"onPlayClick","click .edit-btn":"onEditClick"},render:function(){var t=this.model.section&&this.model.section.get("limited"),n=this.model.server.get("shared");return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,sectionID:this.model.section.id,episode:this.model.toJSON()})),(t||n)&&this.$el.addClass("hide-hover-overlay"),this.bindView(),this
},bindings:{".episode-title":{modelAttr:"title",format:function(e,t){return Handlebars.helpers.truncate.call(this,t,80)}},".episode-number":{modelAttr:"index",hideEmpty:!0,format:function(e,t){var n=this.model.get("originallyAvailableAt");return Handlebars.helpers.episodeIndex.call(this,t,n)}},".episode-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""}}},onPlayClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),t.trigger("navigate:player",this.model.server.id,this.model.section.id,this.model.id)
},onEditClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),t.trigger("navigate:edit",this.model.server.id,this.model.section.id,this.model.id)}});return a}),define("plex/view/lists/media/EpisodeCompactList",["plex/view/lists/KeyboardNavigationList","plex/view/lists/media/items/EpisodeCompactListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"list media-list media-compact-list episode-compact-list rounded-list",keyboardCancellationDirections:["left","right"],initialize:function(){this.setup(t),this.collection.fetch()
},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("plex/view/details/SeasonDetailsView",["hb!templates/details/SeasonDetailsView.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/model/SettingsModel","plex/model/media/ShowModel","plex/view/KeyboardNavigationView","plex/view/details/ActionBarView","plex/view/lists/media/EpisodeTileList","plex/view/lists/media/EpisodeList","plex/view/lists/media/EpisodeCompactList","plex/view/modals/SelectArtworkModal"],function(e,t,n,i,a,s,r,l,o,c,d,h){var u=r.extend({className:"details season-details",keyboardContainer:".details-row",keyboardActivationDirection:"right",listType:null,episodeList:null,events:{"click .change-poster-btn":"onChangePosterClick","click .episode-tile-list-btn":"onEpisodeTileListClick","click .episode-list-btn":"onEpisodeListClick","click .episode-compact-list-btn":"onEpisodeCompactListClick","click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick"},initialize:function(){var e={server:this.model.server,section:this.model.section,onlyIfCached:!0},t=this.model.get("parentRatingKey"),n=new s({ratingKey:t},e);
if(!_.isEmpty(n)){var i=n.get("seasons"),r=i.indexOf(this.model);r>1&&(this.previousSeason=i.at(r-1)),i.length-1>r&&(this.nextSeason=i.at(r+1))}this.listType=a.get("episodeListType");var o=this.getListConstructor(this.listType);this.episodeList=this.registerView(new o({collection:this.model.get("episodes")})),this.actionBar=this.registerView(new l({model:this.model}))},render:function(){var t=this.model.section.get("limited")||this.model.server.get("shared");return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),sectionID:this.model.section.id,season:this.model.toJSON(),limited:t,listType:this.listType,showPrevious:!!this.previousSeason,showNext:!!this.nextSeason})),this.$el.prepend(this.actionBar.render().el),this.$("#episodes-container").append(this.episodeList.render().el),this.bindView(),this
},getListConstructor:function(e){switch(e){case"episode-tile-list":return o;case"episode-list":return c;case"episode-compact-list":return d;default:return this.listType="episode-tile-list",a.save("listType",this.listType),o}},updateList:function(e){var t=this.getListConstructor(e);this.episodeList&&this.removeView(this.episodeList),this.episodeList=this.registerView(new t({collection:this.model.get("episodes")})),this.$("#episodes-container").append(this.episodeList.render().el),a.save("episodeListType",e)
},bindings:{".show-title":{modelAttr:"parentTitle"},".season-title":{modelAttr:"index",format:function(e,t){return n.t("Season")+" "+t}},".season-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/poster.png"),t){var n=window.devicePixelRatio?window.devicePixelRatio:1,i=128*n,a=200*n,s=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,i,a);e.data("original",s),this.trigger("change:poster")}}},".season-unwatched-count":{modelAttr:"unviewedLeafCount",hideEmpty:!0,format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser");
return!t||n&&!i?0:t}},".season-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}}},onChangePosterClick:function(e){e.preventDefault();var t=new h({model:this.model,type:"poster"});i.set({modal:t})},onEpisodeTileListClick:function(e){e.preventDefault(),this.updateList("episode-tile-list")},onEpisodeListClick:function(e){e.preventDefault(),this.updateList("episode-list")},onEpisodeCompactListClick:function(e){e.preventDefault(),this.updateList("episode-compact-list")
},onPreviousClick:function(){this.previousSeason&&t.trigger("navigate:details",this.previousSeason.server.id,this.previousSeason.section.id,this.previousSeason.id)},onNextClick:function(){this.nextSeason&&t.trigger("navigate:details",this.nextSeason.server.id,this.nextSeason.section.id,this.nextSeason.id)}});return u}),define("hb!templates/details/EpisodeDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return'\n				<div class="poster-container">\n					<img class="episode-poster poster large-poster">\n\n					<span class="media-count"></span>\n				</div>\n			'
}function r(){return'\n				<a class="change-poster-btn" href="#">\n					<div class="poster-container">\n						<div class="poster-card">\n							<div class="poster-face front">\n								<img class="episode-poster poster large-poster">\n\n								<span class="media-count"></span>\n\n								<div class="hover-overlay card-overlay">\n									<i class="hover-menu-btn glyphicon pencil"></i>\n								</div>\n							</div>\n						</div>\n					</div>\n				</a>\n			'}function l(){return"disabled"}function o(){return'tabindex="0"'
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d,h,u="",p=this,m="function",f=this.escapeExpression,v=n.helperMissing;return u+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid episode">\n		<div class="details-controls">\n			',c=n["if"].call(t,t.limited,{hash:{},inverse:p.program(3,r,a),fn:p.program(1,s,a),data:a}),(c||0===c)&&(u+=c),u+='\n\n			<div class="media-flags">\n				<img class="episode-studio studio">\n\n				<img class="episode-video-resolution media-flag">\n				<img class="episode-audio-codec media-flag">\n				<img class="episode-audio-channels media-flag">\n			</div>\n		</div>\n\n		<div class="episode-metadata details-metadata">\n			<div class="metadata-right">\n				<div class="btn-group arrow-btn-group">\n					<button type="button" class="previous-btn btn btn-icon ',c=n.unless.call(t,t.showPrevious,{hash:{},inverse:p.noop,fn:p.program(5,l,a),data:a}),(c||0===c)&&(u+=c),u+='" ',c=n["if"].call(t,t.showPrevious,{hash:{},inverse:p.noop,fn:p.program(7,o,a),data:a}),(c||0===c)&&(u+=c),u+='><i class="glyphicon chevron-left"></i></button>\n					<button type="button" class="next-btn btn btn-icon ',c=n.unless.call(t,t.showNext,{hash:{},inverse:p.noop,fn:p.program(5,l,a),data:a}),(c||0===c)&&(u+=c),u+='" ',c=n["if"].call(t,t.showNext,{hash:{},inverse:p.noop,fn:p.program(7,o,a),data:a}),(c||0===c)&&(u+=c),u+='><i class="glyphicon chevron-right"></i></button>\n				</div>\n\n				<h2 class="episode-duration"></h2>\n				<div class="episode-available metadata"></div>\n				<div class="episode-content-rating metadata"><img class="media-flag"></div>\n				<div class="episode-rating metadata"></div>\n			</div>\n\n			<h1>\n				<a class="show-title" href="#!/servers/',(c=n.serverID)?c=c.call(t,{hash:{},data:a}):(c=t.serverID,c=typeof c===m?c.apply(t):c),u+=f(c)+"/sections/",h={hash:{},data:a},u+=f((c=n.encodeUrl,c?c.call(t,t.sectionID,h):v.call(t,"encodeUrl",t.sectionID,h)))+"/details/"+f((c=t.episode,c=null==c||c===!1?c:c.grandparentRatingKey,typeof c===m?c.apply(t):c))+'"></a>\n			</h1>\n\n			<h2>\n				<span class="episode-title"></span><button class="episode-unavailable unavailable-btn btn btn-small btn-danger" tabindex="0">',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"Unavailable",h):v.call(t,"t","Unavailable",h)))+'</button>\n\n				<div class="unwatched-icon unwatched-partial-icon"></div>\n				<div class="unwatched-icon unwatched-full-icon"></div>\n			</h2>\n\n			<div class="metadata">\n				<a class="season-index" href="#!/servers/',(d=n.serverID)?d=d.call(t,{hash:{},data:a}):(d=t.serverID,d=typeof d===m?d.apply(t):d),u+=f(d)+"/sections/",h={hash:{},data:a},u+=f((c=n.encodeUrl,c?c.call(t,t.sectionID,h):v.call(t,"encodeUrl",t.sectionID,h)))+"/details/"+f((c=t.episode,c=null==c||c===!1?c:c.parentRatingKey,typeof c===m?c.apply(t):c))+'"></a><span class="episode-index"></span>\n			</div>\n\n			<div class="episode-director metadata metadata-top"></div>\n			<div class="episode-writer metadata"></div>\n			<div class="episode-cast metadata"></div>\n\n			<div class="episode-audio metadata metadata-top hide"><span class="metadata-label">',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"Audio",h):v.call(t,"t","Audio",h)))+'</span></div>\n			<div class="episode-subtitles metadata hide"><span class="metadata-label">',h={hash:{},data:a},u+=f((c=n.t,c?c.call(t,"Subtitles",h):v.call(t,"t","Subtitles",h)))+'</span></div>\n\n			<h2 class="episode-tagline tagline"></h2>\n\n			<div class="episode-summary summary"></div>\n		</div>\n	</div>\n</div>\n'
})}),define("plex/view/details/EpisodeDetailsView",["hb!templates/details/EpisodeDetailsView.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/model/media/SeasonModel","plex/view/KeyboardNavigationView","plex/view/details/ActionBarView","plex/view/details/PlaySplitButton","plex/view/details/StreamDropdown","plex/view/modals/MediaInfoModal","plex/view/modals/SelectArtworkModal"],function(e,t,n,i,a,s,r,l,o,c,d){var h=s.extend({className:"details",defaultFocusedItem:".play-btn",keyboardContainer:".details-row",keyboardCancellationDirections:{up:".btn-primary.dropdown-toggle, .previous-btn, .next-btn"},actionBar:null,playButton:null,audioDropdown:null,subtitlesDropdown:null,events:{"click .change-poster-btn":"onChangePosterClick","click .unavailable-btn":"onUnavailableClick","click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick"},initialize:function(){var e={server:this.model.server,section:this.model.section,onlyIfCached:!0},t=this.model.get("parentRatingKey"),n=new a({ratingKey:t},e);
if(!_.isEmpty(n)){var i=n.get("episodes"),s=i.indexOf(this.model);s>0&&(this.previousEpisode=i.at(s-1)),i.length-1>s&&(this.nextEpisode=i.at(s+1))}this.actionBar=this.registerView(new r({model:this.model})),this.playButton=this.registerView(new l({model:this.model})),this.audioDropdown=this.registerView(new o({type:"audio",model:this.model})),this.subtitlesDropdown=this.registerView(new o({type:"subtitles",model:this.model})),this.addBinding(this.playButton,"refocus",this.postrender)},render:function(){var t=this.model.getStreams(2),n=this.model.getStreams(3),i=this.model.section.get("limited")||this.model.server.get("shared");
return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),sectionID:this.model.section.id,episode:this.model.toJSON(),limited:i,showPrevious:!!this.previousEpisode,showNext:!!this.nextEpisode})),this.$el.prepend(this.actionBar.render().el),i?this.$(".poster-container").after(this.playButton.render().el):this.$(".change-poster-btn").after(this.playButton.render().el),t.length&&this.$(".episode-audio").removeClass("hide").append(this.audioDropdown.render().el),n.length&&this.$(".episode-subtitles").removeClass("hide").append(this.subtitlesDropdown.render().el),this.bindView(),this.$el.tooltip({selector:".details-icon-btn",placement:"bottom"}),this
},bindings:{".show-title":{modelAttr:"grandparentTitle"},".episode-title":{modelAttr:"title"},".episode-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/poster_wide.png"),t){var n=window.devicePixelRatio?window.devicePixelRatio:1,i=256*n,a=420*n,s=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,i,a);e.data("original",s),this.trigger("change:poster")}}},".season-index":{modelAttr:"parentIndex",format:function(e,t){return n.t("Season")+" "+t
}},".episode-index":{modelAttr:"index",hideEmpty:!0,format:function(e,t){return t>0?", "+n.t("Episode")+" "+t:""}},".media-count":{modelAttr:"Media",hideEmpty:!0,format:function(){var e=0,t=this.model.get("Media");return t.length>1&&(e=t.length),e}},".episode-unavailable":{modelAttr:"Media",hideEmpty:!0,format:function(e){var t=this.model.getMissingParts();t.length?e.removeClass("hide"):e.addClass("hide")}},".episode-content-rating":{modelAttr:"contentRating",hideEmpty:!0,format:function(e,t){if(!t)return e.addClass("hide"),void 0;
var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"contentRating",flag:t,width:30,height:60};e.removeClass("hide"),e.find("img").prop("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".episode-available":{modelAttr:"originallyAvailableAt",hideEmpty:!0,format:function(e,t){return t?Handlebars.helpers.formatDate.call(this,t):""}},".episode-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""
}},".episode-duration":{modelAttr:"duration",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.formatMinutes.call(this,t)}},".unwatched-icon":{modelAttr:"viewCount",format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser"),a=this.model.get("viewOffset");return n&&!i?(e.addClass("hide"),void 0):(t||a?e.addClass("hide"):(e.removeClass("hide"),this.$(".unwatched-partial-icon").addClass("hide")),void 0)}},".unwatched-partial-icon":{modelAttr:"viewOffset",format:function(e,t){var n=this.model.server.get("shared"),i=this.model.server.get("multiuser");
return n&&!i?(e.addClass("hide"),void 0):(t?(e.removeClass("hide"),this.$(".unwatched-full-icon").addClass("hide")):e.addClass("hide"),void 0)}},".episode-tagline":{modelAttr:"tagline",hideEmpty:!0},".episode-director":{modelAttr:"Director",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var i=n.t("Director"),a=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">'+i+"</span>"+a}},".episode-writer":{modelAttr:"Writer",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";
var i=n.t("Writer"),a=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">'+i+"</span>"+a}},".episode-cast":{modelAttr:"Role",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var i=n.t("Cast"),a=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">'+i+"</span>"+a}},".episode-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)
}},".episode-video-resolution":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(t=_.first(t),!t||!t.videoResolution)return e.addClass("hide"),void 0;var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"videoResolution",flag:t.videoResolution,width:100,height:20};e.removeClass("hide"),e.attr("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".episode-audio-codec":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(t=_.first(t),!t||!t.audioCodec)return e.addClass("hide"),void 0;
var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"audioCodec",flag:t.audioCodec,width:100,height:20};e.removeClass("hide"),e.attr("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".episode-audio-channels":{modelAttr:"Media",hideEmpty:!0,format:function(e,t){if(t=_.first(t),!t||!t.audioChannels)return e.addClass("hide"),void 0;var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"audioChannels",flag:t.audioChannels,width:100,height:20};
e.removeClass("hide"),e.attr("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}},".episode-studio":{modelAttr:"studio",hideEmpty:!0,format:function(e,t){if(!t)return e.addClass("hide"),void 0;var n={server:this.model.server,prefix:this.model.get("mediaTagPrefix"),version:this.model.get("mediaTagVersion"),path:"studio",flag:t,width:200,height:40};e.removeClass("hide"),e.attr("src",Handlebars.helpers.transcodeMediaFlag.call(this,{hash:n}))}}},onChangePosterClick:function(e){e.preventDefault();
var t=new d({model:this.model,type:"poster"});i.set({modal:t})},onUnavailableClick:function(){i.set("modal",new c({model:this.model}))},onPreviousClick:function(){this.previousEpisode&&t.trigger("navigate:details",this.previousEpisode.server.id,this.previousEpisode.section.id,this.previousEpisode.id)},onNextClick:function(){this.nextEpisode&&t.trigger("navigate:details",this.nextEpisode.server.id,this.nextEpisode.section.id,this.nextEpisode.id)}});return h}),define("hb!templates/details/ArtistDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return'\n				<div class="poster-container">\n					<img class="artist-poster poster large-poster">\n				</div>\n			'
}function r(){return'\n				<a class="change-poster-btn" href="#">\n					<div class="poster-container">\n						<div class="poster-card">\n							<div class="poster-face front">\n								<img class="artist-poster poster large-poster">\n\n								<div class="hover-overlay card-overlay">\n									<i class="hover-menu-btn glyphicon pencil"></i>\n								</div>\n							</div>\n						</div>\n					</div>\n				</a>\n			'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o="",c=this;return o+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			',l=n["if"].call(t,t.limited,{hash:{},inverse:c.program(3,r,a),fn:c.program(1,s,a),data:a}),(l||0===l)&&(o+=l),o+='\n		</div>\n\n		<div class="details-metadata">\n			<h1 class="artist-title"></h1>\n\n			<div class="artist-genre metadata metadata-top"></div>\n\n			<div class="artist-summary summary"></div>\n		</div>\n	</div>\n\n	<div id="albums-container" class="well"></div>\n</div>\n'
})}),define("hb!templates/lists/media/items/AlbumListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o="function",c=this.escapeExpression,d=n.helperMissing;return l+='<div class="album-art">\n	<a class="album-link" href="#!/servers/',(s=n.serverID)?s=s.call(t,{hash:{},data:a}):(s=t.serverID,s=typeof s===o?s.apply(t):s),l+=c(s)+"/sections/",r={hash:{},data:a},l+=c((s=n.encodeUrl,s?s.call(t,t.sectionID,r):d.call(t,"encodeUrl",t.sectionID,r)))+"/details/"+c((s=t.album,s=null==s||s===!1?s:s.ratingKey,typeof s===o?s.apply(t):s))+'">\n		<img class="album-poster poster">\n	</a>\n\n	<div class="album-title"></div>\n	<div class="album-year"></div>\n</div>\n'
})}),define("hb!templates/lists/media/items/TrackListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n		<span class="track-duration">',a={hash:{},data:t},s+=h((i=n.formatDuration,i?i.call(e,(i=e.track,null==i||i===!1?i:i.duration),a):d.call(e,"formatDuration",(i=e.track,null==i||i===!1?i:i.duration),a)))+"</span>\n	"}function r(){return"hide"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o,c="",d=n.helperMissing,h=this.escapeExpression,u=this,p="function";
return c+='<a href="#" tabindex="0">\n	',o=n["if"].call(t,(l=t.track,null==l||l===!1?l:l.duration),{hash:{},inverse:u.noop,fn:u.program(1,s,a),data:a}),(o||0===o)&&(c+=o),c+='\n\n	<span class="number track-number">'+h((l=t.track,l=null==l||l===!1?l:l.index,typeof l===p?l.apply(t):l))+'</span>\n\n	<span class="title track-title">'+h((l=t.track,l=null==l||l===!1?l:l.title,typeof l===p?l.apply(t):l))+'</span>\n\n	<button class="remote-play-btn hover-btn ',o=n.unless.call(t,t.showRemotePlay,{hash:{},inverse:u.noop,fn:u.program(3,r,a),data:a}),(o||0===o)&&(c+=o),c+='" tabindex="-1"><i class="glyphicon display"></i></button><button class="edit-btn hover-btn ',o=n.unless.call(t,t.showEdit,{hash:{},inverse:u.noop,fn:u.program(3,r,a),data:a}),(o||0===o)&&(c+=o),c+='" tabindex="-1"><i class="glyphicon pencil"></i></button><button class="sync-btn hover-btn ',o=n.unless.call(t,t.showSync,{hash:{},inverse:u.noop,fn:u.program(3,r,a),data:a}),(o||0===o)&&(c+=o),c+='" tabindex="-1"><i class="glyphicon download"></i></button><button class="info-btn hover-btn ',o=n.unless.call(t,t.showInfo,{hash:{},inverse:u.noop,fn:u.program(3,r,a),data:a}),(o||0===o)&&(c+=o),c+='" tabindex="-1"><i class="glyphicon circle-info"></i></button>\n</a>\n'
})}),define("plex/view/lists/media/items/TrackListItem",["hb!templates/lists/media/items/TrackListItem.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/view/modals/MediaInfoModal","plex/view/modals/SyncModal","plex/view/modals/SelectDeviceModal","jquery"],function(e,t,n,i,a,s,r){var l=i.extend({tagName:"li",events:{click:"onClick","click .remote-play-btn":"onRemotePlayClick","click .edit-btn":"onEditClick","click .sync-btn":"onSyncClick","click .info-btn":"onInfoClick"},initialize:function(e){this.list=e.list;
var t=n.get("myPlex"),i=n.get("clients");this.addBinding(i,"reset",this.onClientsReset),this.addBinding(t.get("devices"),"reset",this.onDevicesReset),i.populate({hideLoadingAlert:!0})},render:function(){var t=this.model.server.get("shared"),i=n.get("clients");return this.$el.html(e({track:this.model.toJSON(),showRemotePlay:i.length&&!t,showEdit:!t,showSync:this.canSync(),showInfo:!0})),this},canSync:function(){var e=n.get("myPlex"),t=e.get("devices").getSyncDevices();return!this.model.server.get("shared")&&this.model.server.supports("sync")&&t.length&&e.get("signedIn")&&this.list.collection.allowSync?!0:!1
},onClientsReset:function(e){var t=e.length&&!this.model.server.get("shared");t?this.$(".remote-play-btn").removeClass("hide"):this.$(".remote-play-btn").addClass("hide")},onDevicesReset:function(){this.canSync()?this.$(".sync-btn").removeClass("hide"):this.$(".sync-btn").addClass("hide")},onClick:function(e){e.preventDefault(),t.trigger("play:music",this.model.media.get("tracks"),this.model)},onRemotePlayClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),t.trigger("command:RemotePlay",{media:this.model})
},onEditClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),t.trigger("navigate:edit",this.model.server.id,this.model.section.id,this.model.id)},onSyncClick:function(e){e.stopImmediatePropagation(),e.preventDefault();var t=n.get("myPlex"),i=t.get("devices"),a=i.getSyncDevices(),l=new s({directory:!1,section:!1,model:this.model});if(a.length>1){var o=new r,c=_.bind(function(e){o.off("select:device",c),l.device=i.get(e),n.set("modal",l)},this);o.on("select:device",c),n.set("modal",o)}else 1===a.length&&(l.device=a[0],n.set("modal",l))
},onInfoClick:function(e){e.stopImmediatePropagation(),e.preventDefault(),n.set("modal",new a({model:this.model}))}});return l}),define("plex/view/lists/media/TrackList",["plex/view/lists/BaseList","plex/view/lists/media/items/TrackListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"list media-list media-compact-list track-list rounded-list",initialize:function(){this.setup(t),this.collection.fetch()},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n
}),define("plex/view/lists/media/items/AlbumListItem",["hb!templates/lists/media/items/AlbumListItem.tpl","plex/view/BaseView","plex/view/lists/media/TrackList"],function(e,t,n){var i=t.extend({tagName:"li",trackList:null,initialize:function(){this.trackList=this.registerView(new n({collection:this.model.get("tracks")})),this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,sectionID:this.model.section.id,album:this.model.toJSON()})),this.$el.append(this.trackList.render().el),this.bindView(),this
},bindings:{".album-title":{modelAttr:"title"},".album-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/album.png"),t){var n=window.devicePixelRatio?window.devicePixelRatio:1,i=200*n,a=200*n,s=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,i,a);e.data("original",s),this.trigger("change:poster")}}},".album-year":{modelAttr:"year",hideEmpty:!0}}});return i}),define("plex/view/lists/media/AlbumList",["plex/view/lists/BaseList","plex/view/lists/media/items/AlbumListItem","lazyload"],function(e,t){var n=e.extend({tagName:"ul",className:"album-list",loadPosterThrottle:null,initialize:function(){this.setup(t),this.loadPosterThrottle=_.throttle(this.loadPoster,100),this.collection.fetch()
},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(t){if(t.get("index")!==void 0){var n=e.prototype.addItem.apply(this,arguments);this.addBinding(n,"change:poster",this.loadPosterThrottle),this.loadPosterThrottle()}},getScrollContainer:function(){return this.$scrollContainer||(this.$scrollContainer=this.$el.closest(".details-scroll-container")),this.$scrollContainer.length?this.$scrollContainer:void 0},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200,container:this.getScrollContainer()})
},this))}});return n}),define("plex/view/details/ArtistDetailsView",["hb!templates/details/ArtistDetailsView.tpl","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/KeyboardNavigationView","plex/view/details/ActionBarView","plex/view/lists/media/AlbumList","plex/view/modals/SelectArtworkModal"],function(e,t,n,i,a,s,r){var l=i.extend({className:"details",defaultFocusedItem:".track-list a",keyboardContainer:"#albums-container",keyboardCancellationDirections:"left",albumList:null,events:{"click .change-poster-btn":"onChangePosterClick"},initialize:function(){this.albumList=this.registerView(new s({collection:this.model.get("albums")})),this.actionBar=this.registerView(new a({model:this.model}))
},render:function(){var t=this.model.section.get("limited")||this.model.server.get("shared");return this.$el.html(e({limited:t})),this.$el.prepend(this.actionBar.render().el),this.$("#albums-container").append(this.albumList.render().el),this.bindView(),this},bindings:{".artist-title":{modelAttr:"title"},".artist-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/album.png"),t){var n=window.devicePixelRatio?window.devicePixelRatio:1,i=256*n,a=420*n,s=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,i,a);
e.data("original",s),this.trigger("change:poster")}}},".artist-genre":{modelAttr:"Genre",hideEmpty:!0,format:function(e,n){if(!n||!n.length)return"";var i=t.t("Genre"),a=Handlebars.helpers.truncateTagList.call(this,n,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">'+i+"</span>"+a}},".artist-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}}},onChangePosterClick:function(e){e.preventDefault();var t=new r({model:this.model,type:"poster"});
n.set({modal:t})}});return l}),define("hb!templates/details/AlbumDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return'\n				<div class="poster-container">\n					<img class="album-poster poster large-poster">\n				</div>\n			'}function r(){return'\n				<a class="change-poster-btn" href="#">\n					<div class="poster-container">\n						<div class="poster-card">\n							<div class="poster-face front">\n								<img class="album-poster poster large-poster">\n\n								<div class="hover-overlay card-overlay">\n									<i class="hover-menu-btn glyphicon pencil"></i>\n								</div>\n							</div>\n						</div>\n					</div>\n				</a>\n			'
}function l(){return"disabled"}function o(){return'tabindex="0"'}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var c,d,h="",u=this,p="function",m=this.escapeExpression,f=n.helperMissing;return h+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			',c=n["if"].call(t,t.limited,{hash:{},inverse:u.program(3,r,a),fn:u.program(1,s,a),data:a}),(c||0===c)&&(h+=c),h+='\n		</div>\n\n		<div class="album-metadata details-metadata">\n			<div class="metadata-right">\n				<div class="btn-group arrow-btn-group">\n					<button type="button" class="previous-btn btn btn-icon ',c=n.unless.call(t,t.showPrevious,{hash:{},inverse:u.noop,fn:u.program(5,l,a),data:a}),(c||0===c)&&(h+=c),h+='" ',c=n["if"].call(t,t.showPrevious,{hash:{},inverse:u.noop,fn:u.program(7,o,a),data:a}),(c||0===c)&&(h+=c),h+='><i class="glyphicon chevron-left"></i></button>\n					<button type="button" class="next-btn btn btn-icon ',c=n.unless.call(t,t.showNext,{hash:{},inverse:u.noop,fn:u.program(5,l,a),data:a}),(c||0===c)&&(h+=c),h+='" ',c=n["if"].call(t,t.showNext,{hash:{},inverse:u.noop,fn:u.program(7,o,a),data:a}),(c||0===c)&&(h+=c),h+='><i class="glyphicon chevron-right"></i></button>\n				</div>\n			</div>\n\n			<h1>\n				<a class="artist-title" href="#!/servers/',(c=n.serverID)?c=c.call(t,{hash:{},data:a}):(c=t.serverID,c=typeof c===p?c.apply(t):c),h+=m(c)+"/sections/",d={hash:{},data:a},h+=m((c=n.encodeUrl,c?c.call(t,t.sectionID,d):f.call(t,"encodeUrl",t.sectionID,d)))+"/details/"+m((c=t.album,c=null==c||c===!1?c:c.parentRatingKey,typeof c===p?c.apply(t):c))+'"></a>\n			</h1>\n\n			<h2 class="album-title"></h2>\n\n			<div class="album-genre metadata metadata-top"></div>\n\n			<div class="album-summary summary"></div>\n		</div>\n	</div>\n\n	<div id="tracks-container" class="well"></div>\n</div>\n'
})}),define("plex/view/details/AlbumDetailsView",["hb!templates/details/AlbumDetailsView.tpl","plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/model/media/ArtistModel","plex/view/KeyboardNavigationView","plex/view/details/ActionBarView","plex/view/details/PlaySplitButton","plex/view/lists/media/TrackList","plex/view/modals/SelectArtworkModal"],function(e,t,n,i,a,s,r,l,o,c){var d=s.extend({className:"details",defaultFocusedItem:".play-btn",keyboardContainer:[".details-row","#tracks-container"],keyboardCancellationDirections:{up:".btn-primary.dropdown-toggle",left:".track-list a"},actionBar:null,playButton:null,trackList:null,events:{"click .change-poster-btn":"onChangePosterClick","click .play-btn":"onPlayClick","click .previous-btn":"onPreviousClick","click .next-btn":"onNextClick"},initialize:function(){var e={server:this.model.server,section:this.model.section,onlyIfCached:!0},t=this.model.get("parentRatingKey"),n=new a({ratingKey:t},e);
if(!_.isEmpty(n)){var i=n.get("albums"),s=i.indexOf(this.model);s>1&&(this.previousAlbum=i.at(s-1)),i.length-1>s&&(this.nextAlbum=i.at(s+1))}this.actionBar=this.registerView(new r({model:this.model})),this.playButton=this.registerView(new l({model:this.model})),this.trackList=this.registerView(new o({collection:this.model.get("tracks")})),this.addBinding(this.playButton,"refocus",this.postrender)},render:function(){var t=this.model.section.get("limited")||this.model.server.get("shared");return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),sectionID:this.model.section.id,album:this.model.toJSON(),limited:t,showPrevious:!!this.previousAlbum,showNext:!!this.nextAlbum})),this.$el.prepend(this.actionBar.render().el),this.$(".details-controls").append(this.playButton.render().el),this.$("#tracks-container").append(this.trackList.render().el),this.bindView(),this
},bindings:{".artist-title":{modelAttr:"parentTitle"},".album-title":{modelAttr:"title"},".album-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/album.png"),t){var n=window.devicePixelRatio?window.devicePixelRatio:1,i=256*n,a=420*n,s=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,i,a);e.data("original",s),this.trigger("change:poster")}}},".album-genre":{modelAttr:"Genre",hideEmpty:!0,format:function(e,t){if(!t||!t.length)return"";var i=n.t("Genre"),a=Handlebars.helpers.truncateTagList.call(this,t,{hash:{maxLen:150,maxTags:3}});
return'<span class="metadata-label">'+i+"</span>"+a}},".album-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}}},onChangePosterClick:function(e){e.preventDefault();var t=new c({model:this.model,type:"poster"});i.set({modal:t})},onPlayClick:function(e){e.preventDefault();var n=this.model.get("tracks");t.trigger("play:music",n,n.first())},onPreviousClick:function(){this.previousAlbum&&t.trigger("navigate:details",this.previousAlbum.server.id,this.previousAlbum.section.id,this.previousAlbum.id)
},onNextClick:function(){this.nextAlbum&&t.trigger("navigate:details",this.nextAlbum.server.id,this.nextAlbum.section.id,this.nextAlbum.id)}});return d}),define("hb!templates/details/PhotoAlbumDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return'\n				<div class="poster-container">\n					<img class="show-poster poster large-poster">\n				</div>\n			'}function r(){return'\n				<a class="change-poster-btn" href="#">\n					<div class="poster-container">\n						<div class="poster-card">\n							<div class="poster-face front">\n								<img class="show-poster poster large-poster">\n\n								<div class="hover-overlay card-overlay">\n									<i class="hover-menu-btn glyphicon pencil"></i>\n								</div>\n							</div>\n						</div>\n					</div>\n				</a>\n			'
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o="",c=this;return o+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			',l=n["if"].call(t,t.limited,{hash:{},inverse:c.program(3,r,a),fn:c.program(1,s,a),data:a}),(l||0===l)&&(o+=l),o+='\n		</div>\n\n		<div class="details-metadata">\n			<h1 class="show-title"></h1>\n\n			<div class="show-summary summary"></div>\n		</div>\n	</div>\n\n	<div id="photos-container" class="well"></div>\n</div>\n'
})}),define("plex/view/lists/media/PhotoTileList",["plex/view/lists/media/MediaTileList"],function(e){var t=e.extend({className:"tile-list media-tile-list photo-tile-list"});return t}),define("plex/view/details/PhotoAlbumDetailsView",["hb!templates/details/PhotoAlbumDetailsView.tpl","plex/model/AppModel","plex/view/BaseView","plex/view/details/ActionBarView","plex/view/lists/media/PhotoTileList","plex/view/modals/SelectArtworkModal"],function(e,t,n,i,a,s){var r=n.extend({className:"details",photoList:null,events:{"click .change-poster-btn":"onChangePosterClick"},initialize:function(){var e=this.model.get("photos");
e.fetch(),this.photoList=this.registerView(new a({collection:e})),this.actionBar=this.registerView(new i({model:this.model}))},render:function(){var t=this.model.section.get("limited")||this.model.server.get("shared");return this.$el.html(e({limited:t})),this.$el.prepend(this.actionBar.render().el),this.$("#photos-container").append(this.photoList.render().el),this.bindView(),this},bindings:{".show-title":{modelAttr:"title"},".show-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/photo.png"),t){var n=window.devicePixelRatio?window.devicePixelRatio:1,i=200*n,a=200*n,s=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,i,a);
e.data("original",s),this.trigger("change:poster")}}},".show-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}}},onChangePosterClick:function(e){e.preventDefault();var n=new s({model:this.model,type:"poster"});t.set({modal:n})}});return r}),define("hb!templates/details/ChannelVideoDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n					<a class="show-title" href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===d?i.apply(e):i),s+=h(i)+"/channels?key=",a={hash:{},data:t},s+=h((i=n.encodeUrl,i?i.call(e,(i=e.channel,null==i||i===!1?i:i.key),a):u.call(e,"encodeUrl",(i=e.channel,null==i||i===!1?i:i.key),a)))+'">'+h((i=e.channel,i=null==i||i===!1?i:i.title,typeof i===d?i.apply(e):i))+"</a>\n				"
}function r(e){var t,n="";return n+="\n					"+h((t=e.channelMedia,t=null==t||t===!1?t:t.sourceTitle,typeof t===d?t.apply(e):t))+"\n				"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var l,o,c="",d="function",h=this.escapeExpression,u=n.helperMissing,p=this;return c+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid episode">\n		<div class="details-controls">\n			<div class="poster-container">\n				<img class="video-poster poster large-poster">\n			</div>\n		</div>\n\n		<div class="video-metadata details-metadata">\n			<div class="metadata-right">\n				<h2 class="video-duration"></h2>\n				<div class="video-available metadata"></div>\n				<div class="video-rating metadata"></div>\n			</div>\n\n			<h1>\n				',l=n["if"].call(t,t.channel,{hash:{},inverse:p.program(3,r,a),fn:p.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='\n			</h1>\n\n			<h2>\n				<span class="video-title"></span>\n			</h2>\n\n			<div class="season-title metadata"></div>\n\n			<div class="video-director metadata metadata-top"></div>\n			<div class="video-writer metadata"></div>\n			<div class="video-cast metadata"></div>\n\n			<div class="video-audio metadata metadata-top hide"><span class="metadata-label">',o={hash:{},data:a},c+=h((l=n.t,l?l.call(t,"Audio",o):u.call(t,"t","Audio",o)))+'</span></div>\n			<div class="video-subtitles metadata hide"><span class="metadata-label">',o={hash:{},data:a},c+=h((l=n.t,l?l.call(t,"Subtitles",o):u.call(t,"t","Subtitles",o)))+'</span></div>\n\n			<h2 class="video-tagline tagline"></h2>\n\n			<div class="video-summary summary"></div>\n		</div>\n	</div>\n</div>\n'
})}),define("plex/view/details/ChannelVideoDetailsView",["hb!templates/details/ChannelVideoDetailsView.tpl","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/KeyboardNavigationView","plex/view/details/ActionBarView","plex/view/details/PlaySplitButton","plex/view/details/StreamDropdown"],function(e,t,n,i,a,s,r){var l=i.extend({className:"details",defaultFocusedItem:".play-btn",keyboardContainer:".details-row",keyboardCancellationDirections:{up:".btn-primary.dropdown-toggle"},actionBar:null,playButton:null,audioDropdown:null,subtitlesDropdown:null,initialize:function(){this.actionBar=this.registerView(new a({model:this.model})),this.playButton=this.registerView(new s({model:this.model,channel:!0})),this.audioDropdown=this.registerView(new r({type:"audio",model:this.model})),this.subtitlesDropdown=this.registerView(new r({type:"subtitles",model:this.model})),this.addBinding(this.playButton,"refocus",this.postrender)
},render:function(){var t,n=this.model.getStreams(2),i=this.model.getStreams(3);return this.model.channel&&(t=this.model.channel.toJSON()),this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),channel:t,channelMedia:this.model.toJSON()})),this.$el.prepend(this.actionBar.render().el),this.$(".poster-container").after(this.playButton.render().el),n.length&&this.$(".video-audio").removeClass("hide").append(this.audioDropdown.render().el),i.length&&this.$(".video-subtitles").removeClass("hide").append(this.subtitlesDropdown.render().el),this.bindView(),this.$el.tooltip({selector:".details-icon-btn",placement:"bottom"}),this
},bindings:{".season-title":{modelAttr:"parentIndex",hideEmpty:!0,format:function(e,t){return t?"Season "+t+", Episode "+this.model.get("index"):""}},".video-title":{modelAttr:"title"},".video-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/poster_wide.png"),t){var n=window.devicePixelRatio?window.devicePixelRatio:1,i=256*n,a=420*n,s=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,i,a);e.data("original",s),this.trigger("change:poster")}}},".video-available":{modelAttr:"originallyAvailableAt",hideEmpty:!0,format:function(e,t){return t?Handlebars.helpers.formatDate.call(this,t):""
}},".video-rating":{modelAttr:"rating",hideEmpty:!0,format:function(e,t){return t?'<span class="rating">'+Handlebars.helpers.starRating.call(this,t)+"</span>":""}},".video-duration":{modelAttr:"duration",hideEmpty:!0,format:function(e,t){return t?Handlebars.helpers.formatMinutes.call(this,t):0}},".video-tagline":{modelAttr:"tagline",hideEmpty:!0},".video-director":{modelAttr:"Director",hideEmpty:!0,format:function(e,n){if(!n||!n.length)return"";var i=t.t("Director"),a=Handlebars.helpers.truncateTagList.call(this,n,{hash:{maxLen:150,maxTags:3}});
return'<span class="metadata-label">'+i+"</span>"+a}},".video-writer":{modelAttr:"Writer",hideEmpty:!0,format:function(e,n){if(!n||!n.length)return"";var i=t.t("Writer"),a=Handlebars.helpers.truncateTagList.call(this,n,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">'+i+"</span>"+a}},".video-cast":{modelAttr:"Role",hideEmpty:!0,format:function(e,n){if(!n||!n.length)return"";var i=t.t("Cast"),a=Handlebars.helpers.truncateTagList.call(this,n,{hash:{maxLen:150,maxTags:3}});return'<span class="metadata-label">'+i+"</span>"+a
}},".video-summary":{modelAttr:"summary",hideEmpty:!0,format:function(e,t){return Handlebars.helpers.truncate.call(this,t,700)}}}});return l}),define("hb!templates/details/PlaylistItemDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e){var t,n="";return n+='\n					<div class="metadata metadata-headline">'+k((t=e.media,t=null==t||t===!1?t:t.year,typeof t===x?t.apply(e):t))+"</div>\n				"}function r(e,t){var i,a,s="";return s+='\n					<div class="metadata"><img class="media-flag" src="',a={hash:{},data:t},s+=k((i=n.transcodeMediaFlag,i?i.call(e,e.serverObj,(i=e.media,null==i||i===!1?i:i.mediaTagPrefix),(i=e.media,null==i||i===!1?i:i.mediaTagVersion),"contentRating",(i=e.media,null==i||i===!1?i:i.contentRating),60,30,a):S.call(e,"transcodeMediaFlag",e.serverObj,(i=e.media,null==i||i===!1?i:i.mediaTagPrefix),(i=e.media,null==i||i===!1?i:i.mediaTagVersion),"contentRating",(i=e.media,null==i||i===!1?i:i.contentRating),60,30,a)))+'"></div>\n				'
}function l(e,t){var i,a,s,r="";return r+='\n					<div class="metadata"><span class="rating">',s={hash:{},data:t},i=n.starRating,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.rating),s):S.call(e,"starRating",(i=e.media,null==i||i===!1?i:i.rating),s),(a||0===a)&&(r+=a),r+="</span></div>\n				"}function o(e,t){var i,a,s="";return s+='\n					<span class="metadata-duration">',a={hash:{},data:t},s+=k((i=n.formatMinutes,i?i.call(e,(i=e.media,null==i||i===!1?i:i.duration),a):S.call(e,"formatMinutes",(i=e.media,null==i||i===!1?i:i.duration),a)))+"</span>\n				"
}function c(e,t){var i,a,s="";return s+="\n					",a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.duration),{hash:{},inverse:C.noop,fn:C.program(10,d,t),data:t}),(a||0===a)&&(s+=a),s+="\n					<span>"+k((i=e.media,i=null==i||i===!1?i:i.sourceTitle,typeof i===x?i.apply(e):i))+"</span>\n				"}function d(){return"&middot;"}function h(e,t){var i,a,s="";return s+='\n				<div class="metadata metadata-top">\n					<span class="metadata-label">Genre</span>',a={hash:{},data:t},s+=k((i=n.truncateTagList,i?i.call(e,(i=e.media,null==i||i===!1?i:i.Genre),150,a):S.call(e,"truncateTagList",(i=e.media,null==i||i===!1?i:i.Genre),150,a)))+"\n				</div>\n			"
}function u(e,t){var i,a,s="";return s+='\n				<div class="metadata">\n					<span class="metadata-label">Director</span>',a={hash:{},data:t},s+=k((i=n.truncateTagList,i?i.call(e,(i=e.media,null==i||i===!1?i:i.Director),150,a):S.call(e,"truncateTagList",(i=e.media,null==i||i===!1?i:i.Director),150,a)))+"\n				</div>\n			"}function p(e,t){var i,a,s="";return s+='\n				<div class="metadata">\n					<span class="metadata-label">Writer</span>',a={hash:{},data:t},s+=k((i=n.truncateTagList,i?i.call(e,(i=e.media,null==i||i===!1?i:i.Writer),150,a):S.call(e,"truncateTagList",(i=e.media,null==i||i===!1?i:i.Writer),150,a)))+"\n				</div>\n			"
}function m(e,t){var i,a,s="";return s+='\n				<div class="metadata">\n					<span class="metadata-label">Cast</span>',a={hash:{},data:t},s+=k((i=n.truncateTagList,i?i.call(e,(i=e.media,null==i||i===!1?i:i.Role),150,a):S.call(e,"truncateTagList",(i=e.media,null==i||i===!1?i:i.Role),150,a)))+"\n				</div>\n			"}function f(e){var t,n="";return n+='\n				<h2 class="tagline">\n					'+k((t=e.media,t=null==t||t===!1?t:t.tagline,typeof t===x?t.apply(e):t))+"\n				</h2>\n			"}function v(e,t){var i,a,s="";
return s+='\n				<div class="summary">',a={hash:{},data:t},s+=k((i=n.truncate,i?i.call(e,(i=e.media,null==i||i===!1?i:i.summary),700,a):S.call(e,"truncate",(i=e.media,null==i||i===!1?i:i.summary),700,a)))+"</div>\n			"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var g,y,b,w="",x="function",k=this.escapeExpression,S=n.helperMissing,C=this;return w+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			<img class="poster large-poster" data-original="',b={hash:{},data:a},w+=k((g=n.transcodeImage,g?g.call(t,t.serverObj,(g=t.media,null==g||g===!1?g:g.thumb),256,420,b):S.call(t,"transcodeImage",t.serverObj,(g=t.media,null==g||g===!1?g:g.thumb),256,420,b)))+'" src="img/posters/poster.png">\n\n			<a class="btn btn-primary" href="#!/playlist/',(y=n.playlistName)?y=y.call(t,{hash:{},data:a}):(y=t.playlistName,y=typeof y===x?y.apply(t):y),w+=k(y)+"/player/"+k((g=t.media,g=null==g||g===!1?g:g.id,typeof g===x?g.apply(t):g))+'">\n				<i class="glyphicon play"></i> Play\n			</a>\n		</div>\n\n		<div class="details-metadata">\n			<div class="metadata-right">\n				',y=n["if"].call(t,(g=t.media,null==g||g===!1?g:g.year),{hash:{},inverse:C.noop,fn:C.program(1,s,a),data:a}),(y||0===y)&&(w+=y),w+="\n\n				",y=n["if"].call(t,(g=t.media,null==g||g===!1?g:g.contentRating),{hash:{},inverse:C.noop,fn:C.program(3,r,a),data:a}),(y||0===y)&&(w+=y),w+="\n\n				",y=n["if"].call(t,(g=t.media,null==g||g===!1?g:g.rating),{hash:{},inverse:C.noop,fn:C.program(5,l,a),data:a}),(y||0===y)&&(w+=y),w+="\n			</div>\n\n			<h1>"+k((g=t.media,g=null==g||g===!1?g:g.title,typeof g===x?g.apply(t):g))+'</h1>\n\n			<div class="metadata">\n				',y=n["if"].call(t,(g=t.media,null==g||g===!1?g:g.duration),{hash:{},inverse:C.noop,fn:C.program(7,o,a),data:a}),(y||0===y)&&(w+=y),w+="\n\n				",y=n["if"].call(t,(g=t.media,null==g||g===!1?g:g.sourceTitle),{hash:{},inverse:C.noop,fn:C.program(9,c,a),data:a}),(y||0===y)&&(w+=y),w+="\n			</div>\n\n			",y=n["if"].call(t,(g=t.media,null==g||g===!1?g:g.Genre),{hash:{},inverse:C.noop,fn:C.program(12,h,a),data:a}),(y||0===y)&&(w+=y),w+="\n\n			",y=n["if"].call(t,(g=t.media,null==g||g===!1?g:g.Director),{hash:{},inverse:C.noop,fn:C.program(14,u,a),data:a}),(y||0===y)&&(w+=y),w+="\n\n			",y=n["if"].call(t,(g=t.media,null==g||g===!1?g:g.Writer),{hash:{},inverse:C.noop,fn:C.program(16,p,a),data:a}),(y||0===y)&&(w+=y),w+="\n\n			",y=n["if"].call(t,(g=t.media,null==g||g===!1?g:g.Role),{hash:{},inverse:C.noop,fn:C.program(18,m,a),data:a}),(y||0===y)&&(w+=y),w+="\n\n			",y=n["if"].call(t,(g=t.media,null==g||g===!1?g:g.tagline),{hash:{},inverse:C.noop,fn:C.program(20,f,a),data:a}),(y||0===y)&&(w+=y),w+="\n\n			",y=n["if"].call(t,(g=t.media,null==g||g===!1?g:g.summary),{hash:{},inverse:C.noop,fn:C.program(22,v,a),data:a}),(y||0===y)&&(w+=y),w+="\n\n		</div>\n	</div>\n</div>\n"
})}),define("plex/view/details/PlaylistItemDetailsView",["hb!templates/details/PlaylistItemDetailsView.tpl","plex/model/AppModel","plex/view/BaseView","plex/view/details/ActionBarView"],function(e,t,n,i){var a=n.extend({className:"details",initialize:function(){var e=!!this.model.get("viewCount");this.actionBar=this.registerView(new i({model:this.model,showWatch:!e,showUnwatch:e}))},render:function(){return this.$el.html(e({serverURL:t.get("primaryServer").url(),serverObj:t.get("primaryServer"),media:this.model.toJSON(),playlistName:this.model.get("playlistName")})),this.$el.prepend(this.actionBar.render().el),this
}});return a}),define("hb!templates/details/UnknownDetailsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<i class="plex-icon-sad"></i>\n\n<h2 class="error-message">This media type is not yet supported.</h2>\n'})}),define("plex/view/details/UnknownDetailsView",["hb!templates/details/UnknownDetailsView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({className:"details",render:function(){return this.$el.html(e()),this
}});return n}),define("plex/view/details/DetailsView",["hb!templates/details/DetailsView.tpl","plex/control/Dispatcher","plex/model/SettingsModel","plex/view/BaseView","plex/view/details/MovieDetailsView","plex/view/details/ShowDetailsView","plex/view/details/SeasonDetailsView","plex/view/details/EpisodeDetailsView","plex/view/details/ArtistDetailsView","plex/view/details/AlbumDetailsView","plex/view/details/PhotoAlbumDetailsView","plex/view/details/ChannelVideoDetailsView","plex/view/details/PlaylistItemDetailsView","plex/view/details/UnknownDetailsView","lazyload"],function(e,t,n,i,a,s,r,l,o,c,d,h,u,p){var m=i.extend({className:"container-fluid container-fluid-full",detailsView:null,initialize:function(){var e=this.model.get("type");
this.model.get("media");var i=this.model.get("grandparentTheme")||this.model.get("parentTheme")||this.model.get("theme");switch(i&&n.get("playThemeMusic")&&t.trigger("command:PlaySound",{url:this.model.server.resolveUrl(i,!1,!0),volume:50,autoLoad:!0,autoPlay:!0,passive:!0}),e){case"movie":this.detailsView=this.registerView(new a({model:this.model}));break;case"show":this.detailsView=this.registerView(new s({model:this.model}));break;case"season":this.detailsView=this.registerView(new r({model:this.model}));
break;case"episode":this.detailsView=this.registerView(new l({model:this.model}));break;case"artist":this.detailsView=this.registerView(new o({model:this.model}));break;case"album":this.detailsView=this.registerView(new c({model:this.model}));break;case"photoAlbum":this.detailsView=this.registerView(new d({model:this.model}));break;case"clip":this.detailsView=this.registerView(new h({model:this.model}));break;case"playlistItem":this.detailsView=this.registerView(new u({model:this.model}));break;default:this.$el.addClass("error-container"),this.detailsView=this.registerView(new p({model:this.model}))
}this.addBinding(this.detailsView,"change:poster",this.loadPoster)},render:function(){return this.$el.html(e({serverURL:this.model.server.url(),serverObj:this.model.server,media:this.model.toJSON()})),this.$el.prepend(this.detailsView.render().el),this.bindView(),this.loadPoster(),this},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200})},this))},bindings:{".fanart":{modelAttr:"art",hideEmpty:!0,format:function(e,t){t?(e.removeClass("hide"),e.css("background-image","url("+Handlebars.helpers.transcodeImage.call(this,this.model.server,t,1280,720)+")"),this.$(".fanart-overlay").removeClass("hide")):(e.addClass("hide"),this.$(".fanart-overlay").addClass("hide"))
}}}});return m}),define("hb!templates/edit/EditMovieView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n				<a class="btn btn-danger delete-btn" href="#">\n					<i class="glyphicon ban"></i> ',a={hash:{},data:t},s+=h((i=n.t,i?i.call(e,"Delete",a):d.call(e,"t","Delete",a)))+"\n				</a>\n			"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l,o,c="",d=n.helperMissing,h=this.escapeExpression,u=this;return c+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			<img class="movie-poster poster large-poster">\n\n			<a class="btn change-poster-btn" href="#">\n				<i class="glyphicon pencil"></i> ',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Change Poster",o):d.call(t,"t","Change Poster",o)))+'\n			</a>\n			<a class="btn change-background-btn" href="#">\n				<i class="glyphicon pencil"></i> ',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Change Background",o):d.call(t,"t","Change Background",o)))+"\n			</a>\n			",l=n["if"].call(t,t.showDelete,{hash:{},inverse:u.noop,fn:u.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='\n		</div>\n\n		<form class="edit-metadata-form">\n			<fieldset>\n				<div class="row-fluid">\n					<div class="span5">\n						',o={hash:{name:"title",label:"Title",value:(r=t.media,null==r||r===!1?r:r.title),locked:(r=t.locked,null==r||r===!1?r:r.title)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n					<div class="span5">\n						',o={hash:{name:"titleSort",label:"Sort Title",value:(r=t.media,null==r||r===!1?r:r.titleSort),locked:(r=t.locked,null==r||r===!1?r:r.titleSort)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n					<div class="span2">\n						',o={hash:{name:"year",label:"Year",value:(r=t.media,null==r||r===!1?r:r.year),locked:(r=t.locked,null==r||r===!1?r:r.year)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span5">\n						',o={hash:{name:"originalTitle",label:"Original Title",value:(r=t.media,null==r||r===!1?r:r.originalTitle),locked:(r=t.locked,null==r||r===!1?r:r.originalTitle)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n					<div class="span3">\n						',o={hash:{name:"rating",label:"Rating",value:(r=t.media,null==r||r===!1?r:r.rating),locked:(r=t.locked,null==r||r===!1?r:r.rating)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n					<div class="span4">\n						',o={hash:{name:"contentRating",label:"Content Rating",value:(r=t.media,null==r||r===!1?r:r.contentRating),locked:(r=t.locked,null==r||r===!1?r:r.contentRating)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span7">\n						',o={hash:{name:"studio",label:"Studio",value:(r=t.media,null==r||r===!1?r:r.studio),locked:(r=t.locked,null==r||r===!1?r:r.studio)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n					<div class="span5">\n						',o={hash:{name:"originallyAvailableAt",label:"Originally Available",value:(r=t.media,null==r||r===!1?r:r.originallyAvailableAt),locked:(r=t.locked,null==r||r===!1?r:r.originallyAvailableAt)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',o={hash:{name:"tagline",label:"Tagline",value:(r=t.media,null==r||r===!1?r:r.tagline),locked:(r=t.locked,null==r||r===!1?r:r.tagline)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',o={hash:{name:"summary",label:"Summary",type:"textarea",rows:"6",value:(r=t.media,null==r||r===!1?r:r.summary),locked:(r=t.locked,null==r||r===!1?r:r.summary)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span6">\n						',o={hash:{name:"writer",label:"Writers",value:(r=t.media,null==r||r===!1?r:r.Writer),locked:(r=t.locked,null==r||r===!1?r:r.writer)},data:a},c+=h((r=n.lockableTagInput,r?r.call(t,o):d.call(t,"lockableTagInput",o)))+'\n					</div>\n					<div class="span6">\n						',o={hash:{name:"director",label:"Directors",value:(r=t.media,null==r||r===!1?r:r.Director),locked:(r=t.locked,null==r||r===!1?r:r.director)},data:a},c+=h((r=n.lockableTagInput,r?r.call(t,o):d.call(t,"lockableTagInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',o={hash:{name:"genre",label:"Genres",value:(r=t.media,null==r||r===!1?r:r.Genre),locked:(r=t.locked,null==r||r===!1?r:r.genre)},data:a},c+=h((r=n.lockableTagInput,r?r.call(t,o):d.call(t,"lockableTagInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span6">\n						',o={hash:{name:"country",label:"Country",value:(r=t.media,null==r||r===!1?r:r.Country),locked:(r=t.locked,null==r||r===!1?r:r.country)},data:a},c+=h((r=n.lockableTagInput,r?r.call(t,o):d.call(t,"lockableTagInput",o)))+'\n					</div>\n					<div class="span6">\n						',o={hash:{name:"collection",label:"Collections",value:(r=t.media,null==r||r===!1?r:r.Collection),locked:(r=t.locked,null==r||r===!1?r:r.collection)},data:a},c+=h((r=n.lockableTagInput,r?r.call(t,o):d.call(t,"lockableTagInput",o)))+'\n					</div>\n				</div>\n\n				<div class="form-actions">\n					<button type="submit" class="btn btn-medium btn-primary">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Save",o):d.call(t,"t","Save",o)))+'</button>\n					<button type="button" class="btn btn-medium cancel-btn">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Cancel",o):d.call(t,"t","Cancel",o)))+"</button>\n				</div>\n			</fieldset>\n		</form>\n	</div>\n</div>\n"
})}),function(e){e.fn.each2===void 0&&e.fn.extend({each2:function(t){for(var n=e([0]),i=-1,a=this.length;a>++i&&(n.context=n[0]=this[i])&&t.call(n[0],i,n)!==!1;);return this}})}(jQuery),function(e,t){function n(e,n){var i,a=0,s=n.length;if(e===t)return-1;if(e.constructor===String){for(;s>a;a+=1)if(0===e.localeCompare(n[a]))return a}else for(;s>a;a+=1)if(i=n[a],i.constructor===String){if(0===i.localeCompare(e))return a}else if(i===e)return a;return-1}function i(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?0===e.localeCompare(n):n.constructor===String?0===n.localeCompare(e):!1
}function a(t,n){var i,a,s;if(null===t||1>t.length)return[];for(i=t.split(n),a=0,s=i.length;s>a;a+=1)i[a]=e.trim(i[a]);return i}function s(e){return e.outerWidth(!1)-e.width()}function r(n){var i="keyup-change-value";n.bind("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.bind("keyup",function(){var a=e.data(n,i);a!==t&&n.val()!==a&&(e.removeData(n,i),n.trigger("keyup-change"))})}function l(n){n.bind("mousemove",function(n){var i=T;(i===t||i.x!==n.pageX||i.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)
})}function o(e,n,i){i=i||t;var a;return function(){var t=arguments;window.clearTimeout(a),a=window.setTimeout(function(){n.apply(i,t)},e)}}function c(e){var t,n=!1;return function(){return n===!1&&(t=e(),n=!0),t}}function d(e,t){var i=o(e,function(e){t.trigger("scroll-debounced",e)});t.bind("scroll",function(e){n(e.target,t.get())>=0&&i(e)})}function h(e){e.preventDefault(),e.stopPropagation()}function u(e){e.preventDefault(),e.stopImmediatePropagation()}function p(t){if(!_){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);
_=e("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),e("body").append(_)}return _.text(t.val()),_.width()}function m(e,n,i){var a=e.toUpperCase().indexOf(n.toUpperCase()),s=n.length;return 0>a?(i.push(e),t):(i.push(e.substring(0,a)),i.push("<span class='select2-match'>"),i.push(e.substring(a,a+s)),i.push("</span>"),i.push(e.substring(a+s,e.length)),t)
}function f(t){var n,i=0,a=null,s=t.quietMillis||100;return function(r){window.clearTimeout(n),n=window.setTimeout(function(){i+=1;var n=i,s=t.data,l=t.transport||e.ajax,o=t.traditional||!1,c=t.type||"GET";s=s.call(this,r.term,r.page,r.context),null!==a&&a.abort(),a=l.call(null,{url:t.url,dataType:t.dataType,data:s,type:c,traditional:o,success:function(e){if(!(i>n)){var a=t.results(e,r.page);r.callback(a)}}})},s)}}function v(n){var i,a=n,s=function(e){return""+e.text};return e.isArray(a)||(s=a.text,e.isFunction(s)||(i=a.text,s=function(e){return e[i]
}),a=a.results),function(n){var i,r=n.term,l={results:[]};return""===r?(n.callback({results:a}),t):(i=function(t,a){var l,o;if(t=t[0],t.children){l={};for(o in t)t.hasOwnProperty(o)&&(l[o]=t[o]);l.children=[],e(t.children).each2(function(e,t){i(t,l.children)}),(l.children.length||n.matcher(r,s(l)))&&a.push(l)}else n.matcher(r,s(t))&&a.push(t)},e(a).each2(function(e,t){i(t,l.results)}),n.callback(l),t)}}function g(n){return e.isFunction(n)?n:function(i){var a=i.term,s={results:[]};e(n).each(function(){var e=this.text!==t,n=e?this.text:this;
(""===a||i.matcher(a,n))&&s.results.push(e?this:{id:this,text:this})}),i.callback(s)}}function y(t){if(e.isFunction(t))return!0;if(!t)return!1;throw Error("formatterName must be a function or a falsy value")}function b(t){return e.isFunction(t)?t():t}function w(t){var n=0;return e.each(t,function(e,t){t.children?n+=w(t.children):n++}),n}function x(e,n,a,s){var r,l,o,c,d,h=e,u=!1;if(!s.createSearchChoice||!s.tokenSeparators||1>s.tokenSeparators.length)return t;for(;;){for(l=-1,o=0,c=s.tokenSeparators.length;c>o&&(d=s.tokenSeparators[o],l=e.indexOf(d),!(l>=0));o++);if(0>l)break;
if(r=e.substring(0,l),e=e.substring(l+d.length),r.length>0&&(r=s.createSearchChoice(r,n),r!==t&&null!==r&&s.id(r)!==t&&null!==s.id(r))){for(u=!1,o=0,c=n.length;c>o;o++)if(i(s.id(r),s.id(n[o]))){u=!0;break}u||a(r)}}return 0!=h.localeCompare(e)?e:t}function k(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var S,C,A,I,P,_,T,M;S={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case S.LEFT:case S.RIGHT:case S.UP:case S.DOWN:return!0
}return!1},isControl:function(e){var t=e.which;switch(t){case S.SHIFT:case S.CTRL:case S.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},M=e(document),P=function(){var e=1;return function(){return e++}}(),M.bind("mousemove",function(e){T={x:e.pageX,y:e.pageY}}),M.ready(function(){M.bind("mousedown touchend",function(n){var i,a=e(n.target).closest("div.select2-container").get(0),s=null;a&&(M.find("div.select2-container-active").each(function(){this!==a&&e(this).data("select2").blur()
}),s=e(a).data("select2").dropdown.get(0)),a=s||e(n.target).closest("div.select2-drop").get(0),M.find("div.select2-drop-active").each(function(){this!==a&&e(this).data("select2").blur()}),a=e(n.target),i=a.attr("for"),"LABEL"===n.target.tagName&&i&&i.length>0&&(i=i.replace(/([\[\].])/g,"\\$1"),a=e("#"+i),a=a.data("select2"),a!==t&&(a.focus(),n.preventDefault()))})}),C=k(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,a,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+P()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=c(function(){return n.element.closest("body")
}),n.element.attr("class")!==t&&this.container.addClass(n.element.attr("class").replace(/validate\[[\S ]+] ?/,"")),this.container.css(b(n.containerCss)),this.container.addClass(b(n.containerCssClass)),this.opts.element.data("select2",this).hide().before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(b(n.dropdownCssClass)),this.dropdown.data("select2",this),this.results=i=this.container.find(s),this.search=a=this.container.find("input.select2-input"),a.attr("tabIndex",this.opts.element.attr("tabIndex")),this.resultsPage=0,this.context=null,this.initContainer(),this.initContainerWidth(),l(this.results),this.dropdown.delegate(s,"mousemove-filtered",this.bind(this.highlightUnderEvent)),d(80,this.results),this.dropdown.delegate(s,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),e.fn.mousewheel&&i.mousewheel(function(e,t,n,a){var s=i.scrollTop();
a>0&&0>=s-a?(i.scrollTop(0),h(e)):0>a&&i.get(0).scrollHeight-i.scrollTop()+a<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),h(e))}),r(a),a.bind("keyup-change",this.bind(this.updateResults)),a.bind("focus",function(){a.addClass("select2-focused")," "===a.val()&&a.val("")}),a.bind("blur",function(){a.removeClass("select2-focused")}),this.dropdown.delegate(s,"mouseup",this.bind(function(t){e(t.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0?(this.highlightUnderEvent(t),this.selectHighlighted(t)):this.focusSearch(),h(t)
})),this.dropdown.bind("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(n.element.is(":disabled")||n.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");e!==t&&(e.container.remove(),e.dropdown.remove(),e.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(n){var s,r,l,o;if(s=n.element,"select"===s.get(0).tagName.toLowerCase()&&(this.select=r=n.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")
}),n=e.extend({},{populateResults:function(i,a,s){var r,l=this.opts.id,o=this;r=function(i,a,c){var d,h,u,p,m,f,v,g,y;for(i=n.sortResults(i,a,s),d=0,h=i.length;h>d;d+=1)u=i[d],p=l(u)!==t,m=u.children&&u.children.length>0,f=e("<li></li>"),f.addClass("select2-results-dept-"+c),f.addClass("select2-result"),f.addClass(p?"select2-result-selectable":"select2-result-unselectable"),m&&f.addClass("select2-result-with-children"),f.addClass(o.opts.formatResultCssClass(u)),v=e("<div></div>"),v.addClass("select2-result-label"),y=n.formatResult(u,v,s),y!==t&&v.html(o.opts.escapeMarkup(y)),f.append(v),m&&(g=e("<ul></ul>"),g.addClass("select2-result-sub"),r(u.children,g,c+1),f.append(g)),f.data("select2-data",u),a.append(f)
},r(a,i,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(l=n.id,n.id=function(e){return e[l]}),r?(n.query=this.bind(function(n){var i,a,r,l={results:[],more:!1},o=n.term;r=function(e,t){var i;e.is("option")?n.matcher(o,e.text(),e)&&t.push({id:e.attr("value"),text:e.text(),element:e.get(),css:e.attr("class")}):e.is("optgroup")&&(i={text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")},e.children().each2(function(e,t){r(t,i.children)}),i.children.length>0&&t.push(i))},i=s.children(),this.getPlaceholder()!==t&&i.length>0&&(a=i[0],""===e(a).text()&&(i=i.not(a))),i.each2(function(e,t){r(t,l.results)
}),n.callback(l)}),n.id=function(e){return e.id},n.formatResultCssClass=function(e){return e.css}):"query"in n||("ajax"in n?(o=n.element.data("ajax-url"),o&&o.length>0&&(n.ajax.url=o),n.query=f(n.ajax)):"data"in n?n.query=v(n.data):"tags"in n&&(n.query=g(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(e){return{id:e,text:e}}),n.initSelection=function(s,r){var l=[];e(a(s.val(),n.separator)).each(function(){var a=this,s=this,r=n.tags;e.isFunction(r)&&(r=r()),e(r).each(function(){return i(this.id,a)?(s=this.text,!1):t
}),l.push({id:a,text:s})}),r(l)})),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}))},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()
},enable:function(){this.enabled||(this.enabled=!0,this.container.removeClass("select2-container-disabled"),this.opts.element.removeAttr("disabled"))},disable:function(){this.enabled&&(this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled"),this.opts.element.attr("disabled","disabled"))},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,n,i,a=this.container.offset(),s=this.container.outerHeight(!1),r=this.container.outerWidth(!1),l=this.dropdown.outerHeight(!1),o=e(window).scrollLeft()+document.documentElement.clientWidth,c=e(window).scrollTop()+document.documentElement.clientHeight,d=a.top+s,h=a.left,u=c>=d+l,p=a.top-l>=this.body().scrollTop(),m=this.dropdown.outerWidth(!1),f=o>=h+m,v=this.dropdown.hasClass("select2-drop-above");
"static"!==this.body().css("position")&&(t=this.body().offset(),d-=t.top,h-=t.left),v?(n=!0,!p&&u&&(n=!1)):(n=!1,!u&&p&&(n=!0)),f||(h=a.left+r-m),n?(d=a.top-l,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),i=e.extend({top:d,left:h,width:r},b(this.opts.dropdownCss)),this.dropdown.css(i)},shouldOpen:function(){var t;return this.opened()?!1:(t=e.Event("open"),this.opts.element.trigger(t),!t.isDefaultPrevented())
},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){var t=this.containerId,n=this.containerSelector,i="scroll."+t,a="resize."+t;this.container.parents().each(function(){e(this).bind(i,function(){var t=e(n);0==t.length&&e(this).unbind(i),t.select2("close")})}),window.setTimeout(function(){e(window).bind(a,function(){var t=e(n);
0==t.length&&e(window).unbind(a),t.select2("close")})},10),this.clearDropdownAlignmentPreference()," "===this.search.val()&&this.search.val(""),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.updateResults(!0),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible(),this.focusSearch()},close:function(){if(this.opened()){var t=this;
this.container.parents().each(function(){e(this).unbind("scroll."+t.containerId)}),e(window).unbind("resize."+this.containerId),this.clearDropdownAlignmentPreference(),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.opts.element.trigger(e.Event("close"))}},clearSearch:function(){},ensureHighlightVisible:function(){var n,i,a,s,r,l,o,c=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return c.scrollTop(0),t;
n=c.find(".select2-result-selectable"),a=e(n[i]),s=a.offset().top+a.outerHeight(!0),i===n.length-1&&(o=c.find("li.select2-more-results"),o.length>0&&(s=o.offset().top+o.outerHeight(!0))),r=c.offset().top+c.outerHeight(!0),s>r&&c.scrollTop(c.scrollTop()+(s-r)),l=a.offset().top-c.offset().top,0>l&&"none"!=a.css("display")&&c.scrollTop(c.scrollTop()+l)}},moveHighlight:function(t){for(var n=this.results.find(".select2-result-selectable"),i=this.highlight();i>-1&&n.length>i;){i+=t;var a=e(n[i]);if(a.hasClass("select2-result-selectable")&&!a.hasClass("select2-disabled")){this.highlight(i);
break}}},highlight:function(i){var a=this.results.find(".select2-result-selectable").not(".select2-disabled");return 0===arguments.length?n(a.filter(".select2-highlighted")[0],a.get()):(i>=a.length&&(i=a.length-1),0>i&&(i=0),a.removeClass("select2-highlighted"),e(a[i]).addClass("select2-highlighted"),this.ensureHighlightVisible(),t)},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");
if(n.length>0&&!n.is(".select2-highlighted")){var i=this.results.find(".select2-result-selectable");this.highlight(i.index(n))}else 0==n.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),i=this.resultsPage+1,a=this,s=this.search.val(),r=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),0>=e&&(n.addClass("select2-active"),this.opts.query({term:s,page:i,context:r,matcher:this.opts.matcher,callback:this.bind(function(e){a.opened()&&(a.opts.populateResults.call(this,t,e.results,{term:s,page:i,context:r}),e.more===!0?(n.detach().appendTo(t).text(a.opts.formatLoadMore(i+1)),window.setTimeout(function(){a.loadMoreIfNeeded()
},10)):n.remove(),a.positionDropdown(),a.resultsPage=i)})})))},tokenize:function(){},updateResults:function(n){function a(){c.scrollTop(0),o.removeClass("select2-active"),h.positionDropdown()}function s(e){c.html(h.opts.escapeMarkup(e)),a()}var r,l,o=this.search,c=this.results,d=this.opts,h=this;if(n===!0||this.showSearchInput!==!1&&this.opened()){if(o.addClass("select2-active"),d.maximumSelectionSize>=1&&(r=this.data(),e.isArray(r)&&r.length>=d.maximumSelectionSize&&y(d.formatSelectionTooBig,"formatSelectionTooBig")))return s("<li class='select2-selection-limit'>"+d.formatSelectionTooBig(d.maximumSelectionSize)+"</li>"),t;
if(o.val().length<d.minimumInputLength)return y(d.formatInputTooShort,"formatInputTooShort")?s("<li class='select2-no-results'>"+d.formatInputTooShort(o.val(),d.minimumInputLength)+"</li>"):s(""),t;d.formatSearching()&&s("<li class='select2-searching'>"+d.formatSearching()+"</li>"),l=this.tokenize(),l!=t&&null!=l&&o.val(l),this.resultsPage=1,d.query({term:o.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(r){var l;if(this.opened()){if(this.context=r.context===t?null:r.context,this.opts.createSearchChoice&&""!==o.val()&&(l=this.opts.createSearchChoice.call(null,o.val(),r.results),l!==t&&null!==l&&h.id(l)!==t&&null!==h.id(l)&&0===e(r.results).filter(function(){return i(h.id(this),h.id(l))
}).length&&r.results.unshift(l)),0===r.results.length&&y(d.formatNoMatches,"formatNoMatches"))return s("<li class='select2-no-results'>"+d.formatNoMatches(o.val())+"</li>"),t;c.empty(),h.opts.populateResults.call(this,c,r.results,{term:o.val(),page:this.resultsPage,context:null}),r.more===!0&&y(d.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(d.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(r,n),a()
}})})}},cancel:function(){this.close()},blur:function(){this.close(),this.container.removeClass("select2-container-active"),this.dropdown.removeClass("select2-drop-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.opts.element.triggerHandler("blur")},focusSearch:function(){this.search.show(),this.search.focus(),window.setTimeout(this.bind(function(){this.search.show(),this.search.focus(),this.search.val(this.search.val())
}),10)},selectHighlighted:function(){var e=this.highlight(),t=this.results.find(".select2-highlighted").not(".select2-disabled"),n=t.closest(".select2-result-selectable").data("select2-data");n&&(t.addClass("select2-disabled"),this.highlight(e),this.onSelect(n))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function n(){var n,i,a,s,r;if("off"===this.opts.width)return null;
if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(i=n.split(";"),s=0,r=i.length;r>s;s+=1)if(a=i[s].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/),null!==a&&a.length>=1)return a[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null
}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.attr("style","width: "+i)}}),A=k(C,{createContainer:function(){var t=e("<div></div>",{"class":"select2-container"}).html(["    <a href='javascript:void(0)' onclick='return false;' class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));
return t},opening:function(){this.search.show(),this.parent.opening.apply(this,arguments),this.dropdown.removeClass("select2-offscreen")},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show())},focus:function(){this.close(),this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments),this.selection.focus()
},initContainer:function(){var e,n=this.container,i=this.dropdown,a=!1;this.selection=e=n.find(".select2-choice"),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===S.PAGE_UP||e.which===S.PAGE_DOWN)return h(e),t;if(this.opened())switch(e.which){case S.UP:case S.DOWN:return this.moveHighlight(e.which===S.UP?-1:1),h(e),t;case S.TAB:case S.ENTER:return this.selectHighlighted(),h(e),t;case S.ESC:return this.cancel(e),h(e),t}else{if(e.which===S.TAB||S.isControl(e)||S.isFunctionKey(e)||e.which===S.ESC)return;
if(this.opts.openOnEnter===!1&&e.which===S.ENTER)return;if(this.open(),e.which===S.ENTER)return}}})),this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")})),this.search.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){var e=this.opts.element.attr("tabIndex")||0;e?this.selection.attr("tabIndex",e):this.selection.removeAttr("tabIndex")}),10)})),e.delegate("abbr","mousedown",this.bind(function(e){this.enabled&&(this.clear(),u(e),this.close(),this.triggerChange(),this.selection.focus())
})),e.bind("mousedown",this.bind(function(){a=!0,this.opened()?(this.close(),this.selection.focus()):this.enabled&&this.open(),a=!1})),i.bind("mousedown",this.bind(function(){this.search.focus()})),e.bind("focus",this.bind(function(){this.container.addClass("select2-container-active"),this.search.attr("tabIndex","-1")})),e.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex")||0)
}),10)})),e.bind("keydown",this.bind(function(e){return this.enabled?e.which==S.DOWN||e.which==S.UP||e.which==S.ENTER&&this.opts.openOnEnter?(this.open(),h(e),t):e.which==S.DELETE||e.which==S.BACKSPACE?(this.opts.allowClear&&this.clear(),h(e),t):t:t})),e.bind("keypress",this.bind(function(e){var t=String.fromCharCode(e.which);this.search.val(t),this.open()})),this.setPlaceholder(),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder()
},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text())this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder())})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()&&(t.initSelection=function(t,n){var i=t.find(":selected");e.isFunction(n)&&n({id:i.attr("value"),text:i.text(),element:i})
}),t},setPlaceholder:function(){var e=this.getPlaceholder();if(""===this.opts.element.val()&&e!==t){if(this.select&&""!==this.select.find("option:first").text())return;this.selection.find("span").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(n,a){var s=0,r=this,l=!0;this.results.find(".select2-result-selectable").each2(function(e,n){return i(r.id(n.data("select2-data")),r.opts.element.val())?(s=e,!1):t}),this.highlight(s),a===!0&&(l=this.showSearchInput=w(n.results)>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[l?"removeClass":"addClass"]("select2-search-hidden"),e(this.dropdown,this.container)[l?"addClass":"removeClass"]("select2-with-searchbox"))
},onSelect:function(e){var t=this.opts.element.val();this.opts.element.val(this.id(e)),this.updateSelection(e),this.close(),this.selection.focus(),i(t,this.id(e))||this.triggerChange()},updateSelection:function(e){var n,i=this.selection.find("span");this.selection.data("select2-data",e),i.empty(),n=this.opts.formatSelection(e,i),n!==t&&i.append(this.opts.escapeMarkup(n)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.selection.find("abbr").show()
},val:function(){var e,n=null,i=this;if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],this.select)this.select.val(e).find(":selected").each2(function(e,t){return n={id:t.attr("value"),text:t.text()},!1}),this.updateSelection(n),this.setPlaceholder(),this.triggerChange();else{if(this.opts.initSelection===t)throw Error("cannot call val() if initSelection() is not defined");if(!e)return this.clear(),this.triggerChange(),t;this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),i.triggerChange()
})}},clearSearch:function(){this.search.val("")},data:function(e){var n;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(e&&""!==e?(this.opts.element.val(e?this.id(e):""),this.updateSelection(e)):this.clear(),t)}}),I=k(C,{createContainer:function(){var t=e("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));
return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);return"select"===t.element.get(0).tagName.toLowerCase()&&(t.initSelection=function(t,n){var i=[];t.find(":selected").each2(function(e,t){i.push({id:t.attr("value"),text:t.text(),element:t})}),e.isFunction(n)&&n(i)}),t},initContainer:function(){var n,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=n=this.container.find(i),this.search.bind("keydown",this.bind(function(e){if(this.enabled){if(e.which===S.BACKSPACE&&""===this.search.val()){this.close();
var i,a=n.find(".select2-search-choice-focus");if(a.length>0)return this.unselect(a.first()),this.search.width(10),h(e),t;i=n.find(".select2-search-choice:not(.select2-locked)"),i.length>0&&i.last().addClass("select2-search-choice-focus")}else n.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case S.UP:case S.DOWN:return this.moveHighlight(e.which===S.UP?-1:1),h(e),t;case S.ENTER:case S.TAB:return this.selectHighlighted(),h(e),t;case S.ESC:return this.cancel(e),h(e),t
}e.which===S.TAB||S.isControl(e)||S.isFunctionKey(e)||e.which===S.BACKSPACE||e.which===S.ESC||(this.opts.openOnEnter!==!1||e.which!==S.ENTER)&&(this.open(),(e.which===S.PAGE_UP||e.which===S.PAGE_DOWN)&&h(e))}})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.clearSearch(),e.stopImmediatePropagation()})),this.container.delegate(i,"mousedown",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").length>0||(this.clearPlaceholder(),this.open(),this.focusSearch(),t.preventDefault()))
})),this.container.delegate(i,"focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.clearSearch()},enable:function(){this.enabled||(this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled"))},disable:function(){this.enabled&&(this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0))},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;
this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.resizeSearch()):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):" "===this.search.val()&&this.search.val("")
},opening:function(){this.parent.opening.apply(this,arguments),this.clearPlaceholder(),this.resizeSearch(),this.focusSearch()},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var i=[],a=[],s=this;e(t).each(function(){0>n(s.id(this),i)&&(i.push(s.id(this)),a.push(this))}),t=a,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){s.addSelectedChoice(this)
}),s.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer(e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e){this.addSelectedChoice(e),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.positionDropdown()):this.close(),this.triggerChange({added:e}),this.focusSearch()
},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,a=!n.locked,s=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=a?s:r,o=this.id(n),c=this.getVal();i=this.opts.formatSelection(n,l.find("div")),i!=t&&l.find("div").replaceWith("<div>"+this.opts.escapeMarkup(i)+"</div>"),a&&l.find(".select2-search-choice-close").bind("mousedown",h).bind("click dblclick",this.bind(function(t){this.enabled&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()
})).dequeue(),h(t))})).bind("focus",this.bind(function(){this.enabled&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),c.push(o),this.setVal(c)},unselect:function(e){var t,i,a=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),i=n(this.id(t),a),i>=0&&(a.splice(i,1),this.setVal(a),this.select&&this.postprocessResults()),e.remove(),this.triggerChange({removed:t})
},postprocessResults:function(){var e=this.getVal(),i=this.results.find(".select2-result-selectable"),a=this.results.find(".select2-result-with-children"),s=this;i.each2(function(t,i){var a=s.id(i.data("select2-data"));n(a,e)>=0?i.addClass("select2-disabled").removeClass("select2-result-selectable"):i.removeClass("select2-disabled").addClass("select2-result-selectable")}),a.each2(function(e,t){t.is(".select2-result-selectable")||0!=t.find(".select2-result-selectable").length?t.removeClass("select2-disabled"):t.addClass("select2-disabled")
}),-1==this.highlight()&&i.each2(function(e,n){return!n.hasClass("select2-disabled")&&n.hasClass("select2-result-selectable")?(s.highlight(0),!1):t})},resizeSearch:function(){var e,t,n,i,a,r=s(this.search);e=p(this.search)+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,a=n-(t-i)-r,e>a&&(a=n-r),40>a&&(a=n-r),0>=a&&(a=e),this.search.width(a)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),a(e,this.opts.separator))
},setVal:function(t){var i;this.select?this.select.val(t):(i=[],e(t).each(function(){0>n(this,i)&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},val:function(){var n,i=[],a=this;if(0===arguments.length)return this.getVal();if(n=arguments[0],!n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),this.triggerChange(),t;if(this.setVal(n),this.select)this.select.find(":selected").each(function(){i.push({id:e(this).attr("value"),text:e(this).text()})
}),this.updateSelection(i),this.triggerChange();else{if(this.opts.initSelection===t)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e(t).map(a.id);a.setVal(n),a.updateSelection(t),a.clearSearch(),a.triggerChange()})}this.clearSearch()},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()
},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(n){var i,a=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(n||(n=[]),i=e.map(n,function(e){return a.opts.id(e)
}),this.setVal(i),this.updateSelection(n),this.clearSearch(),t)}}),e.fn.select2=function(){var i,a,s,r,l=Array.prototype.slice.call(arguments,0),o=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:e.extend({},l[0]),i.element=e(this),"select"===i.element.get(0).tagName.toLowerCase()?r=i.element.attr("multiple"):(r=i.multiple||!1,"tags"in i&&(i.multiple=r=!0)),a=r?new I:new A,a.init(i);
else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(0>n(l[0],o))throw"Unknown method: "+l[0];if(s=t,a=e(this).data("select2"),a===t)return;if(s="container"===l[0]?a.container:a[l[0]].apply(a,l.slice(1)),s!==t)return!1}}),s===t?this:s},e.fn.select2.defaults={width:"copy",closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n){var i=[];return m(e.text,n.term,i),i.join("")},formatSelection:function(e){return e?e.text:t
},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(e){return e.id
},matcher:function(e,t){return t.toUpperCase().indexOf(e.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:x,escapeMarkup:function(e){return e&&"string"==typeof e?e.replace(/&/g,"&amp;"):e},blurOnChange:!1},window.Select2={query:{ajax:f,local:v,tags:g},util:{debounce:o,markMatch:m},"class":{"abstract":C,single:A,multi:I}}}}(jQuery),define("select2",function(){}),define("plex/view/edit/BaseEditView",["plex/control/Dispatcher","plex/control/utils/LocalizationUtil","plex/model/AppModel","plex/view/BaseView","plex/view/details/ActionBarView","plex/view/modals/SelectArtworkModal","plex/model/FilterModel","jquery","select2"],function(e,t,n,i,a,s,r,l){var o=i.extend({className:"details",events:{"click .change-poster-btn":"onChangePosterClick","click .change-banner-btn":"onChangeBannerClick","click .change-background-btn":"onChangeBackgroundClick","click .delete-btn":"onDeleteClick","click .lock-btn":"onLockClick","change .lockable-field":"onFieldChange","keypress .lockable-field":"onFieldKeyPress","click button[type=submit]":"onSubmit","click .cancel-btn":"onCancel"},tagNames:[],initialize:function(){this.actionBar=this.registerView(new a({model:this.model})),this.tagValues={},_.each(this.tagNames,function(e){var t=new r({filter:e,filterType:"string"},{server:this.model.server,section:this.model.section});
this.tagValues[e]=t.get("options")},this),this.addBinding(e,"shortcut:save",this.save)},render:function(){var e=this.model.get("Field"),t={};_.isArray(e)?_.reduce(e,function(e,t){return e[t.name]=t.locked,e},t):_.isEmpty(e)||(t[e.name]=e.locked);var n={media:this.model.toJSON(),serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,showDelete:this.model.server.get("allowMediaDeletion"),sectionID:this.model.section.id,locked:t,type:this.model.get("type")||"item",path:this.model.getMediaLocation()};
return this.$el.html(this.tpl(n)),this.$el.prepend(this.actionBar.render().el),this.renderTags(),this.bindView(),this},renderTags:function(){var e=_.bind(function(e){var t=e.parentFilter.get("filter");this.$("input[data-name="+t+"]").select2({tags:e.pluck("title"),tokenSeparators:[","]})},this);_.each(this.tagValues,function(t){t.populate().done(e)})},save:function(){var i=this.$("form.edit-metadata-form"),a=_.reduce(i.serializeArray(),function(e,t){return e[t.name]=t.value,e},{}),s=i.find(".lock-btn.selected").map(function(e,t){return{name:l(t).data("field"),locked:"1"}
}).get();a.Field=s;var r=this.model.changedAttributes(a)||{};if("Field"in r){var o=_.reduce(this.model.get("Field"),function(e,t){return i.find(".lock-btn[data-field="+t.name+"]").length&&(e[t.name]="0"),e},{});_.reduce(s,function(e,t){return t.name in e?delete e[t.name]:e[t.name]="1",e},o),r.Field=_.map(o,function(e,t){return{name:t,locked:e}})}var c=_.reduce(i.find("input.input-select2"),function(e,t){var n=l(t),i=n.data("name");i=i.charAt(0).toUpperCase()+i.slice(1);var a=n.val();return e[i]=a?_.map(n.val().split(","),function(e){return{tag:e}
}):[],e},{});_.each(c,function(e,t){var n=_.pluck(this.model.get(t),"tag"),i=_.pluck(e,"tag");_.isEqual(n,i)||(r[t]=e)},this),_.isEmpty(r)?e.trigger("navigate:back"):this.model.save(r,{success:_.bind(function(){e.trigger("navigate:back")},this),error:function(){n.set("alert",{status:"error",message:t.t("There was a problem saving your changes.")})}})},onChangePosterClick:function(e){e.preventDefault();var t=new s({model:this.model,type:"poster"});n.set({modal:t})},onChangeBannerClick:function(e){e.preventDefault();
var t=new s({model:this.model,type:"banner"});n.set({modal:t})},onChangeBackgroundClick:function(e){e.preventDefault();var t=new s({model:this.model,type:"art"});n.set({modal:t})},onDeleteClick:function(t){t.preventDefault(),e.trigger("command:DeleteMedia",this.model)},onLockClick:function(e){e.preventDefault(),l(e.currentTarget).toggleClass("selected")},onFieldChange:function(e){l(e.currentTarget).parent().siblings(".lock-btn").addClass("selected")},onFieldKeyPress:function(e){l(e.currentTarget).parent().siblings(".lock-btn").addClass("selected")
},onSubmit:function(e){e.preventDefault(),this.save()},onCancel:function(t){t.preventDefault(),e.trigger("navigate:back")}});return o}),define("plex/view/edit/EditMovieView",["hb!templates/edit/EditMovieView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,tagNames:["director","writer","genre","collection","country"],bindings:{".movie-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/poster.png"),t){var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,256,420);
e.data("original",n),this.trigger("change:poster")}}}}});return n}),define("hb!templates/edit/EditShowView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			<img class="show-poster poster large-poster">\n\n			<a class="btn change-poster-btn" href="#">\n				<i class="glyphicon pencil"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Change Poster",r):o.call(t,"t","Change Poster",r)))+'\n			</a>\n			<a class="btn change-banner-btn" href="#">\n				<i class="glyphicon pencil"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Change Banner",r):o.call(t,"t","Change Banner",r)))+'\n			</a>\n			<a class="btn change-background-btn" href="#">\n				<i class="glyphicon pencil"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Change Background",r):o.call(t,"t","Change Background",r)))+'\n			</a>\n		</div>\n\n		<form class="edit-metadata-form">\n			<fieldset>\n				<div class="row-fluid">\n					<div class="span5">\n						',r={hash:{name:"title",label:"Title",value:(s=t.media,null==s||s===!1?s:s.title),locked:(s=t.locked,null==s||s===!1?s:s.title)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span5">\n						',r={hash:{name:"titleSort",label:"Sort Title",value:(s=t.media,null==s||s===!1?s:s.titleSort),locked:(s=t.locked,null==s||s===!1?s:s.titleSort)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span2">\n						',r={hash:{name:"year",label:"Year",value:(s=t.media,null==s||s===!1?s:s.year),locked:(s=t.locked,null==s||s===!1?s:s.year)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span5">\n						',r={hash:{name:"originalTitle",label:"Original Title",value:(s=t.media,null==s||s===!1?s:s.originalTitle),locked:(s=t.locked,null==s||s===!1?s:s.originalTitle)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span3">\n						',r={hash:{name:"rating",label:"Rating",value:(s=t.media,null==s||s===!1?s:s.rating),locked:(s=t.locked,null==s||s===!1?s:s.rating)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span4">\n						',r={hash:{name:"contentRating",label:"Content Rating",value:(s=t.media,null==s||s===!1?s:s.contentRating),locked:(s=t.locked,null==s||s===!1?s:s.contentRating)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span7">\n						',r={hash:{name:"studio",label:"Studio",value:(s=t.media,null==s||s===!1?s:s.studio),locked:(s=t.locked,null==s||s===!1?s:s.studio)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span5">\n						',r={hash:{name:"originallyAvailableAt",label:"Originally Available",value:(s=t.media,null==s||s===!1?s:s.originallyAvailableAt),locked:(s=t.locked,null==s||s===!1?s:s.originallyAvailableAt)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',r={hash:{name:"tagline",label:"Tagline",value:(s=t.media,null==s||s===!1?s:s.tagline),locked:(s=t.locked,null==s||s===!1?s:s.tagline)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',r={hash:{name:"summary",label:"Summary",type:"textarea",rows:"6",value:(s=t.media,null==s||s===!1?s:s.summary),locked:(s=t.locked,null==s||s===!1?s:s.summary)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span6">\n						',r={hash:{name:"genre",label:"Genres",value:(s=t.media,null==s||s===!1?s:s.Genre),locked:(s=t.locked,null==s||s===!1?s:s.genre)},data:a},l+=c((s=n.lockableTagInput,s?s.call(t,r):o.call(t,"lockableTagInput",r)))+'\n					</div>\n					<div class="span6">\n						',r={hash:{name:"collection",label:"Collections",value:(s=t.media,null==s||s===!1?s:s.Collection),locked:(s=t.locked,null==s||s===!1?s:s.collection)},data:a},l+=c((s=n.lockableTagInput,s?s.call(t,r):o.call(t,"lockableTagInput",r)))+'\n					</div>\n				</div>\n\n				<div class="form-actions">\n					<button type="submit" class="btn btn-medium btn-primary">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Save",r):o.call(t,"t","Save",r)))+'</button>\n					<button type="button" class="btn btn-medium cancel-btn">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Cancel",r):o.call(t,"t","Cancel",r)))+"</button>\n				</div>\n			</fieldset>\n		</form>\n	</div>\n</div>\n"
})}),define("plex/view/edit/EditShowView",["hb!templates/edit/EditShowView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,tagNames:["genre","collection"],bindings:{".show-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/poster.png"),t){var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,256,420);e.data("original",n),this.trigger("change:poster")}}}}});return n}),define("hb!templates/edit/EditSeasonView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			<img class="show-poster poster large-poster">\n\n			<a class="btn change-poster-btn" href="#">\n				<i class="glyphicon pencil"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Change Poster",r):o.call(t,"t","Change Poster",r)))+'\n			</a>\n			<a class="btn change-background-btn" href="#">\n				<i class="glyphicon pencil"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Change Background",r):o.call(t,"t","Change Background",r)))+'\n			</a>\n		</div>\n\n		<form class="edit-metadata-form">\n			<fieldset>\n				<div class="row-fluid">\n					<div class="span12">\n						',r={hash:{name:"summary",label:"Summary",type:"textarea",rows:"6",value:(s=t.media,null==s||s===!1?s:s.summary),locked:(s=t.locked,null==s||s===!1?s:s.summary)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="form-actions">\n					<button type="submit" class="btn btn-medium btn-primary">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Save",r):o.call(t,"t","Save",r)))+'</button>\n					<button type="button" class="btn btn-medium cancel-btn">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Cancel",r):o.call(t,"t","Cancel",r)))+"</button>\n				</div>\n			</fieldset>\n		</form>\n	</div>\n</div>\n"
})}),define("plex/view/edit/EditSeasonView",["hb!templates/edit/EditSeasonView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,bindings:{".show-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/poster.png"),t){var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,256,420);e.data("original",n),this.trigger("change:poster")}}}}});return n}),define("hb!templates/edit/EditEpisodeView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";
return s+='\n				<a class="btn btn-danger delete-btn" href="#">\n					<i class="glyphicon ban"></i> ',a={hash:{},data:t},s+=h((i=n.t,i?i.call(e,"Delete",a):d.call(e,"t","Delete",a)))+"\n				</a>\n			"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l,o,c="",d=n.helperMissing,h=this.escapeExpression,u=this;return c+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			<img class="episode-poster poster large-poster">\n\n			<a class="btn change-poster-btn" href="#">\n				<i class="glyphicon pencil"></i> ',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Change Poster",o):d.call(t,"t","Change Poster",o)))+'\n			</a>\n			<a class="btn change-background-btn" href="#">\n				<i class="glyphicon pencil"></i> ',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Change Background",o):d.call(t,"t","Change Background",o)))+"\n			</a>\n			",l=n["if"].call(t,t.showDelete,{hash:{},inverse:u.noop,fn:u.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='\n		</div>\n\n		<form class="edit-metadata-form">\n			<fieldset>\n				<div class="row-fluid">\n					<div class="span6">\n						',o={hash:{name:"title",label:"Title",value:(r=t.media,null==r||r===!1?r:r.title),locked:(r=t.locked,null==r||r===!1?r:r.title)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n					<div class="span6">\n						',o={hash:{name:"titleSort",label:"Sort Title",value:(r=t.media,null==r||r===!1?r:r.titleSort),locked:(r=t.locked,null==r||r===!1?r:r.titleSort)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span4">\n						',o={hash:{name:"contentRating",label:"Content Rating",value:(r=t.media,null==r||r===!1?r:r.contentRating),locked:(r=t.locked,null==r||r===!1?r:r.contentRating)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n					<div class="span3">\n						',o={hash:{name:"rating",label:"Rating",value:(r=t.media,null==r||r===!1?r:r.rating),locked:(r=t.locked,null==r||r===!1?r:r.rating)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n					<div class="span5">\n						',o={hash:{name:"originallyAvailableAt",label:"Originally Available",value:(r=t.media,null==r||r===!1?r:r.originallyAvailableAt),locked:(r=t.locked,null==r||r===!1?r:r.originallyAvailableAt)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',o={hash:{name:"summary",label:"Summary",type:"textarea",rows:"8",value:(r=t.media,null==r||r===!1?r:r.summary),locked:(r=t.locked,null==r||r===!1?r:r.summary)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span6">\n						',o={hash:{name:"writer",label:"Writers",value:(r=t.media,null==r||r===!1?r:r.Writer),locked:(r=t.locked,null==r||r===!1?r:r.writer)},data:a},c+=h((r=n.lockableTagInput,r?r.call(t,o):d.call(t,"lockableTagInput",o)))+'\n					</div>\n					<div class="span6">\n						',o={hash:{name:"director",label:"Directors",value:(r=t.media,null==r||r===!1?r:r.Director),locked:(r=t.locked,null==r||r===!1?r:r.director)},data:a},c+=h((r=n.lockableTagInput,r?r.call(t,o):d.call(t,"lockableTagInput",o)))+'\n					</div>\n				</div>\n\n				<div class="form-actions">\n					<button type="submit" class="btn btn-medium btn-primary">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Save",o):d.call(t,"t","Save",o)))+'</button>\n					<button type="button" class="btn btn-medium cancel-btn">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Cancel",o):d.call(t,"t","Cancel",o)))+"</button>\n				</div>\n			</fieldset>\n		</form>\n	</div>\n</div>\n"
})}),define("plex/view/edit/EditEpisodeView",["hb!templates/edit/EditEpisodeView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,tagNames:["director","writer"],bindings:{".episode-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/poster_wide.png"),t){var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,256,420);e.data("original",n),this.trigger("change:poster")}}}}});return n}),define("hb!templates/edit/EditAlbumView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			<img class="album-poster poster large-poster">\n\n			<a class="btn change-poster-btn" href="#">\n				<i class="glyphicon pencil"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Change Poster",r):o.call(t,"t","Change Poster",r)))+'\n			</a>\n			<a class="btn change-background-btn" href="#">\n				<i class="glyphicon pencil"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Change Background",r):o.call(t,"t","Change Background",r)))+'\n			</a>\n		</div>\n\n		<form class="edit-metadata-form">\n			<fieldset>\n				<div class="row-fluid">\n					<div class="span5">\n						',r={hash:{name:"title",label:"Album",value:(s=t.media,null==s||s===!1?s:s.title),locked:(s=t.locked,null==s||s===!1?s:s.title)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span5">\n						',r={hash:{name:"titleSort",label:"Sort Album",value:(s=t.media,null==s||s===!1?s:s.titleSort),locked:(s=t.locked,null==s||s===!1?s:s.titleSort)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span2">\n						',r={hash:{name:"year",label:"Year",value:(s=t.media,null==s||s===!1?s:s.year),locked:(s=t.locked,null==s||s===!1?s:s.year)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span4">\n						',r={hash:{name:"originallyAvailableAt",label:"Release Date",value:(s=t.media,null==s||s===!1?s:s.originallyAvailableAt),locked:(s=t.locked,null==s||s===!1?s:s.originallyAvailableAt)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span3">\n						',r={hash:{name:"rating",label:"Rating",value:(s=t.media,null==s||s===!1?s:s.rating),locked:(s=t.locked,null==s||s===!1?s:s.rating)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span5">\n						',r={hash:{name:"studio",label:"Record Label",value:(s=t.media,null==s||s===!1?s:s.studio),locked:(s=t.locked,null==s||s===!1?s:s.studio)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',r={hash:{name:"genre",label:"Genres",value:(s=t.media,null==s||s===!1?s:s.Genre),locked:(s=t.locked,null==s||s===!1?s:s.genre)},data:a},l+=c((s=n.lockableTagInput,s?s.call(t,r):o.call(t,"lockableTagInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',r={hash:{name:"summary",label:"Review",type:"textarea",rows:"6",value:(s=t.media,null==s||s===!1?s:s.summary),locked:(s=t.locked,null==s||s===!1?s:s.summary)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="form-actions">\n					<button type="submit" class="btn btn-medium btn-primary">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Save",r):o.call(t,"t","Save",r)))+'</button>\n					<button type="button" class="btn btn-medium cancel-btn">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Cancel",r):o.call(t,"t","Cancel",r)))+"</button>\n				</div>\n			</fieldset>\n		</form>\n	</div>\n</div>\n"
})}),define("plex/view/edit/EditAlbumView",["hb!templates/edit/EditAlbumView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,tagNames:["genre"],bindings:{".album-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/album.png"),t){var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,256,420);e.data("original",n),this.trigger("change:poster")}}}}});return n}),define("hb!templates/edit/EditArtistView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			<img class="artist-poster poster large-poster">\n\n			<a class="btn change-poster-btn" href="#">\n				<i class="glyphicon pencil"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Change Poster",r):o.call(t,"t","Change Poster",r)))+'\n			</a>\n			<a class="btn change-background-btn" href="#">\n				<i class="glyphicon pencil"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Change Background",r):o.call(t,"t","Change Background",r)))+'\n			</a>\n		</div>\n\n		<form class="edit-metadata-form">\n			<fieldset>\n				<div class="row-fluid">\n					<div class="span6">\n						',r={hash:{name:"title",label:"Artist",value:(s=t.media,null==s||s===!1?s:s.title),locked:(s=t.locked,null==s||s===!1?s:s.title)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span6">\n						',r={hash:{name:"titleSort",label:"Sort Artist",value:(s=t.media,null==s||s===!1?s:s.titleSort),locked:(s=t.locked,null==s||s===!1?s:s.titleSort)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span9">\n						',r={hash:{name:"tagline",label:"Tagline",value:(s=t.media,null==s||s===!1?s:s.tagline),locked:(s=t.locked,null==s||s===!1?s:s.tagline)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span3">\n						',r={hash:{name:"rating",label:"Rating",value:(s=t.media,null==s||s===!1?s:s.rating),locked:(s=t.locked,null==s||s===!1?s:s.rating)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',r={hash:{name:"summary",label:"Biography",type:"textarea",rows:"8",value:(s=t.media,null==s||s===!1?s:s.summary),locked:(s=t.locked,null==s||s===!1?s:s.summary)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',r={hash:{name:"genre",label:"Genres",value:(s=t.media,null==s||s===!1?s:s.Genre),locked:(s=t.locked,null==s||s===!1?s:s.genre)},data:a},l+=c((s=n.lockableTagInput,s?s.call(t,r):o.call(t,"lockableTagInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',r={hash:{name:"collection",label:"Collections",value:(s=t.media,null==s||s===!1?s:s.Collection),locked:(s=t.locked,null==s||s===!1?s:s.collection)},data:a},l+=c((s=n.lockableTagInput,s?s.call(t,r):o.call(t,"lockableTagInput",r)))+'\n					</div>\n				</div>\n\n				<div class="form-actions">\n					<button type="submit" class="btn btn-medium btn-primary">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Save",r):o.call(t,"t","Save",r)))+'</button>\n					<button type="button" class="btn btn-medium cancel-btn">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Cancel",r):o.call(t,"t","Cancel",r)))+"</button>\n				</div>\n			</fieldset>\n		</form>\n	</div>\n</div>\n"
})}),define("plex/view/edit/EditArtistView",["hb!templates/edit/EditArtistView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,tagNames:["genre","collection"],bindings:{".artist-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/album.png"),t){var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,256,420);e.data("original",n),this.trigger("change:poster")}}}}});return n}),define("hb!templates/edit/EditTrackView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";
return s+='\n				<a class="btn btn-danger delete-btn" href="#">\n					<i class="glyphicon ban"></i> ',a={hash:{},data:t},s+=h((i=n.t,i?i.call(e,"Delete",a):d.call(e,"t","Delete",a)))+"\n				</a>\n			"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l,o,c="",d=n.helperMissing,h=this.escapeExpression,u=this;return c+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			<img class="track-poster poster large-poster">\n\n			<a class="btn change-poster-btn" href="#">\n				<i class="glyphicon pencil"></i> ',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Change Poster",o):d.call(t,"t","Change Poster",o)))+'\n			</a>\n			<a class="btn change-background-btn" href="#">\n				<i class="glyphicon pencil"></i> ',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Change Background",o):d.call(t,"t","Change Background",o)))+"\n			</a>\n			",l=n["if"].call(t,t.showDelete,{hash:{},inverse:u.noop,fn:u.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+='\n		</div>\n\n		<form class="edit-metadata-form">\n			<fieldset>\n				<div class="row-fluid">\n					<div class="span12">\n						',o={hash:{name:"title",label:"Title",value:(r=t.media,null==r||r===!1?r:r.title),locked:(r=t.locked,null==r||r===!1?r:r.title)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span9">\n						',o={hash:{name:"originalTitle",label:"Artist",value:(r=t.media,null==r||r===!1?r:r.originalTitle),locked:(r=t.locked,null==r||r===!1?r:r.originalTitle)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n					<div class="span3">\n						',o={hash:{name:"rating",label:"Rating",value:(r=t.media,null==r||r===!1?r:r.rating),locked:(r=t.locked,null==r||r===!1?r:r.rating)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',o={hash:{name:"summary",label:"Lyrics",type:"textarea",rows:"6",value:(r=t.media,null==r||r===!1?r:r.summary),locked:(r=t.locked,null==r||r===!1?r:r.summary)},data:a},c+=h((r=n.lockableTextInput,r?r.call(t,o):d.call(t,"lockableTextInput",o)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span6">\n						',o={hash:{name:"writer",label:"Writers",value:(r=t.media,null==r||r===!1?r:r.Writer),locked:(r=t.locked,null==r||r===!1?r:r.writer)},data:a},c+=h((r=n.lockableTagInput,r?r.call(t,o):d.call(t,"lockableTagInput",o)))+'\n					</div>\n					<div class="span6">\n						',o={hash:{name:"director",label:"Producers",value:(r=t.media,null==r||r===!1?r:r.Director),locked:(r=t.locked,null==r||r===!1?r:r.director)},data:a},c+=h((r=n.lockableTagInput,r?r.call(t,o):d.call(t,"lockableTagInput",o)))+'\n					</div>\n				</div>\n\n				<div class="form-actions">\n					<button type="submit" class="btn btn-medium btn-primary">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Save",o):d.call(t,"t","Save",o)))+'</button>\n					<button type="button" class="btn btn-medium cancel-btn">',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Cancel",o):d.call(t,"t","Cancel",o)))+"</button>\n				</div>\n			</fieldset>\n		</form>\n	</div>\n</div>\n"
})}),define("plex/view/edit/EditTrackView",["hb!templates/edit/EditTrackView.tpl","plex/control/Dispatcher","plex/view/edit/BaseEditView"],function(e,t,n){var i=n.extend({tpl:e,tagNames:["writer","director"],navigateToDetails:function(){t.trigger("navigate:details",this.model.server.id,this.model.section.id,this.model.get("parentRatingKey"))},bindings:{".track-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/album.png"),t){var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,256,420);
e.data("original",n),this.trigger("change:poster")}}}}});return i}),define("hb!templates/edit/EditPhotoAlbumView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			<img class="photo-poster poster large-poster">\n\n			<a class="btn change-poster-btn" href="#">\n				<i class="glyphicon pencil"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Change Poster",r):o.call(t,"t","Change Poster",r)))+'\n			</a>\n			<a class="btn change-background-btn" href="#">\n				<i class="glyphicon pencil"></i> ',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Change Background",r):o.call(t,"t","Change Background",r)))+'\n			</a>\n		</div>\n\n		<form class="edit-metadata-form">\n			<fieldset>\n				<div class="row-fluid">\n					<div class="span6">\n						',r={hash:{name:"title",label:"Title",value:(s=t.media,null==s||s===!1?s:s.title),locked:(s=t.locked,null==s||s===!1?s:s.title)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span6">\n						',r={hash:{name:"titleSort",label:"Sort Title",value:(s=t.media,null==s||s===!1?s:s.titleSort),locked:(s=t.locked,null==s||s===!1?s:s.titleSort)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',r={hash:{name:"summary",label:"Summary",type:"textarea",rows:"8",value:(s=t.media,null==s||s===!1?s:s.summary),locked:(s=t.locked,null==s||s===!1?s:s.summary)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="form-actions">\n					<button type="submit" class="btn btn-medium btn-primary">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Save",r):o.call(t,"t","Save",r)))+'</button>\n					<button type="button" class="btn btn-medium cancel-btn">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Cancel",r):o.call(t,"t","Cancel",r)))+"</button>\n				</div>\n			</fieldset>\n		</form>\n	</div>\n</div>\n"
})}),define("plex/view/edit/EditPhotoAlbumView",["hb!templates/edit/EditPhotoAlbumView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,bindings:{".photo-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/poster.png"),t){var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,256,420);e.data("original",n),this.trigger("change:poster")}}}}});return n}),define("hb!templates/edit/EditPhotoView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<div class="details-scroll-container minimal-light-scrollbar">\n	<div class="details-row row-fluid">\n		<div class="details-controls">\n			<img class="photo-poster poster large-poster">\n		</div>\n\n		<form class="edit-metadata-form">\n			<fieldset>\n				<div class="row-fluid">\n					<div class="span5">\n						',r={hash:{name:"title",label:"Title",value:(s=t.media,null==s||s===!1?s:s.title),locked:(s=t.locked,null==s||s===!1?s:s.title)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span5">\n						',r={hash:{name:"titleSort",label:"Sort Title",value:(s=t.media,null==s||s===!1?s:s.titleSort),locked:(s=t.locked,null==s||s===!1?s:s.titleSort)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n					<div class="span2">\n						',r={hash:{name:"year",label:"Year",value:(s=t.media,null==s||s===!1?s:s.year),locked:(s=t.locked,null==s||s===!1?s:s.year)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="row-fluid">\n					<div class="span12">\n						',r={hash:{name:"summary",label:"Summary",type:"textarea",rows:"8",value:(s=t.media,null==s||s===!1?s:s.summary),locked:(s=t.locked,null==s||s===!1?s:s.summary)},data:a},l+=c((s=n.lockableTextInput,s?s.call(t,r):o.call(t,"lockableTextInput",r)))+'\n					</div>\n				</div>\n\n				<div class="form-actions">\n					<button type="submit" class="btn btn-medium btn-primary">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Save",r):o.call(t,"t","Save",r)))+'</button>\n					<button type="button" class="btn btn-medium cancel-btn">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,"Cancel",r):o.call(t,"t","Cancel",r)))+"</button>\n				</div>\n			</fieldset>\n		</form>\n	</div>\n</div>\n"
})}),define("plex/view/edit/EditPhotoView",["hb!templates/edit/EditPhotoView.tpl","plex/view/edit/BaseEditView"],function(e,t){var n=t.extend({tpl:e,bindings:{".photo-poster":{modelAttr:"thumb",format:function(e,t){if(e.attr("src")||e.attr("src","img/posters/photo.png"),t){var n=Handlebars.helpers.transcodeImage.call(this,this.model.server,t,256,420);e.data("original",n),this.trigger("change:poster")}}}}});return n}),define("plex/view/edit/EditView",["hb!templates/details/DetailsView.tpl","plex/control/Dispatcher","plex/view/BaseView","plex/view/edit/EditMovieView","plex/view/edit/EditShowView","plex/view/edit/EditSeasonView","plex/view/edit/EditEpisodeView","plex/view/edit/EditAlbumView","plex/view/edit/EditArtistView","plex/view/edit/EditTrackView","plex/view/edit/EditPhotoAlbumView","plex/view/edit/EditPhotoView","plex/view/details/UnknownDetailsView","lazyload"],function(e,t,n,i,a,s,r,l,o,c,d,h,u){var p=n.extend({className:"container-fluid container-fluid-full",editView:null,initialize:function(){var e=this.model.get("type");
switch(e){case"movie":this.editView=this.registerView(new i({model:this.model}));break;case"show":this.editView=this.registerView(new a({model:this.model}));break;case"season":this.editView=this.registerView(new s({model:this.model}));break;case"episode":this.editView=this.registerView(new r({model:this.model}));break;case"album":this.editView=this.registerView(new l({model:this.model}));break;case"artist":this.editView=this.registerView(new o({model:this.model}));break;case"track":this.editView=this.registerView(new c({model:this.model}));
break;case"photoAlbum":this.editView=this.registerView(new d({model:this.model}));break;case"photo":this.editView=this.registerView(new h({model:this.model}));break;default:this.$el.addClass("error-container"),this.editView=this.registerView(new u({model:this.model}))}this.addBinding(this.editView,"change:poster",this.loadPoster)},render:function(){return this.$el.html(e({serverURL:this.model.server.url(),serverObj:this.model.server,media:this.model.toJSON()})),this.$el.prepend(this.editView.render().el),this.bindView(),this
},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:!1})},this))},bindings:{".fanart":{modelAttr:"art",hideEmpty:!0,format:function(e,t){t?(e.removeClass("hide"),e.css("background-image","url("+Handlebars.helpers.transcodeImage.call(this,this.model.server,t,1280,720)+")"),this.$(".fanart-overlay").removeClass("hide")):(e.addClass("hide"),this.$(".fanart-overlay").addClass("hide"))}}}});return p}),define("hb!templates/players/VideoPlayerView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a="";
return a+='\n	<video id="video-player" src="',(i=n.url)?i=i.call(e,{hash:{},data:t}):(i=e.url,i=typeof i===M?i.apply(e):i),a+=D(i)+'" width="940" height="530" autoplay controls></video>\n'}function r(e,t){var i,a="";return a+="\n	",i=n["if"].call(e,e.showFlash,{hash:{},inverse:L.noop,fn:L.program(4,l,t),data:t}),(i||0===i)&&(a+=i),a+="\n"}function l(){return'\n		<div id="video-player"></div>\n	'}function o(e,t){var i,a="";return a+="\n		",i=n["if"].call(e,e.showRecommend,{hash:{},inverse:L.noop,fn:L.program(7,c,t),data:t}),(i||0===i)&&(a+=i),a+="\n\n		",i=n["if"].call(e,e.showShare,{hash:{},inverse:L.noop,fn:L.program(9,d,t),data:t}),(i||0===i)&&(a+=i),a+="\n	"
}function c(e,t){var i,a,s="";return s+='\n			<a class="recommend-btn player-action-btn" href="#"><i class="glyphicon share-alt"></i> ',a={hash:{},data:t},s+=D((i=n.t,i?i.call(e,"Recommend",a):E.call(e,"t","Recommend",a)))+"</a>\n		"}function d(e,t){var i,a,s="";return s+='\n			<a class="share-btn player-action-btn" href="#"><i class="glyphicon share"></i> ',a={hash:{},data:t},s+=D((i=n.t,i?i.call(e,"Share",a):E.call(e,"t","Share",a)))+"</a>\n		"}function h(e,t){var i,a,s="";return s+="\n			",a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.grandparentTitle),{hash:{},inverse:L.program(14,p,t),fn:L.program(12,u,t),data:t}),(a||0===a)&&(s+=a),s+="\n		"
}function u(e,t){var i,a,s,r="";return r+='\n				<a href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===M?i.apply(e):i),r+=D(i)+"/sections/",s={hash:{},data:t},r+=D((i=n.encodeUrl,i?i.call(e,e.sectionID,s):E.call(e,"encodeUrl",e.sectionID,s)))+"/details/"+D((i=e.media,i=null==i||i===!1?i:i.grandparentRatingKey,typeof i===M?i.apply(e):i))+'">'+D((i=e.media,i=null==i||i===!1?i:i.grandparentTitle,typeof i===M?i.apply(e):i))+'</a> <a class="secondary" href="#!/servers/',(a=n.serverID)?a=a.call(e,{hash:{},data:t}):(a=e.serverID,a=typeof a===M?a.apply(e):a),r+=D(a)+"/sections/",s={hash:{},data:t},r+=D((i=n.encodeUrl,i?i.call(e,e.sectionID,s):E.call(e,"encodeUrl",e.sectionID,s)))+"/details/"+D((i=e.media,i=null==i||i===!1?i:i.ratingKey,typeof i===M?i.apply(e):i))+'">'+D((i=e.media,i=null==i||i===!1?i:i.title,typeof i===M?i.apply(e):i))+"</a>\n			"
}function p(e,t){var i,a,s="";return s+='\n				<a href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===M?i.apply(e):i),s+=D(i)+"/sections/",a={hash:{},data:t},s+=D((i=n.encodeUrl,i?i.call(e,e.sectionID,a):E.call(e,"encodeUrl",e.sectionID,a)))+"/details/"+D((i=e.media,i=null==i||i===!1?i:i.ratingKey,typeof i===M?i.apply(e):i))+'">'+D((i=e.media,i=null==i||i===!1?i:i.title,typeof i===M?i.apply(e):i))+"</a>\n			"}function m(e,t){var i,a,s="";return s+='\n			<span class="primary">',a={hash:{},data:t},s+=D((i=n.truncate,i?i.call(e,(i=e.media,null==i||i===!1?i:i.title),40,a):E.call(e,"truncate",(i=e.media,null==i||i===!1?i:i.title),40,a)))+"</span>\n		"
}function f(e,t){var i,a,s="";return s+='\n			<img class="player-poster poster" data-original="img/posters/poster.png" src="',a={hash:{},data:t},s+=D((i=n.transcodeImage,i?i.call(e,e.serverObj,(i=e.media,null==i||i===!1?i:i.grandparentThumb),128,200,a):E.call(e,"transcodeImage",e.serverObj,(i=e.media,null==i||i===!1?i:i.grandparentThumb),128,200,a)))+'">\n		'}function v(e,t){var i,a;return a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.thumb),{hash:{},inverse:L.noop,fn:L.program(21,g,t),data:t}),a||0===a?a:""
}function g(e,t){var i,a,s="";return s+='\n			<img class="player-poster poster" data-original="img/posters/poster.png" src="',a={hash:{},data:t},s+=D((i=n.transcodeImage,i?i.call(e,e.serverObj,(i=e.media,null==i||i===!1?i:i.thumb),128,200,a):E.call(e,"transcodeImage",e.serverObj,(i=e.media,null==i||i===!1?i:i.thumb),128,200,a)))+'">\n		'}function y(e,t){var i,a,s,r="";return r+="\n				",s={hash:{},data:t},r+=D((i=n.t,i?i.call(e,"Season",s):E.call(e,"t","Season",s)))+" "+D((i=e.media,i=null==i||i===!1?i:i.parentIndex,typeof i===M?i.apply(e):i)),a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.index),{hash:{},inverse:L.noop,fn:L.program(24,b,t),data:t}),(a||0===a)&&(r+=a),r+=" &nbsp;&middot;&nbsp;\n			"
}function b(e,t){var i,a,s="";return s+=", ",a={hash:{},data:t},s+=D((i=n.t,i?i.call(e,"Episode",a):E.call(e,"t","Episode",a)))+" "+D((i=e.media,i=null==i||i===!1?i:i.index,typeof i===M?i.apply(e):i))}function w(e,t){var i,a,s="";return s+="\n				",a={hash:{},data:t},s+=D((i=n.formatDate,i?i.call(e,(i=e.media,null==i||i===!1?i:i.originallyAvailableAt),a):E.call(e,"formatDate",(i=e.media,null==i||i===!1?i:i.originallyAvailableAt),a)))+"\n			"}function x(e,t){var i,a,s="";return s+="\n				",a=n["if"].call(e,(i=e.media,null==i||i===!1?i:i.year),{hash:{},inverse:L.noop,fn:L.program(29,k,t),data:t}),(a||0===a)&&(s+=a),s+="\n			"
}function k(e){var t,n="";return n+="\n					"+D((t=e.media,t=null==t||t===!1?t:t.year,typeof t===M?t.apply(e):t))+"\n				"}function S(e,t){var i,a,s="";return s+="\n				&nbsp;&middot;&nbsp; ",a={hash:{},data:t},s+=D((i=n.formatMinutes,i?i.call(e,(i=e.media,null==i||i===!1?i:i.duration),a):E.call(e,"formatMinutes",(i=e.media,null==i||i===!1?i:i.duration),a)))+"\n			"}function C(e,t){var i,a,s,r="";return r+='\n				<span class="rating">',s={hash:{},data:t},i=n.starRating,a=i?i.call(e,(i=e.media,null==i||i===!1?i:i.rating),s):E.call(e,"starRating",(i=e.media,null==i||i===!1?i:i.rating),s),(a||0===a)&&(r+=a),r+="</span>\n			"
}function A(e,t){var i,a,s="";return s+="\n			<h2>",a={hash:{},data:t},s+=D((i=n.t,i?i.call(e,"Season",a):E.call(e,"t","Season",a)))+" "+D((i=e.media,i=null==i||i===!1?i:i.parentIndex,typeof i===M?i.apply(e):i))+"</h2>\n		"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var I,P,_,T="",M="function",D=this.escapeExpression,L=this,E=n.helperMissing;return I=n["if"].call(t,t.showHTML5,{hash:{},inverse:L.program(3,r,a),fn:L.program(1,s,a),data:a}),(I||0===I)&&(T+=I),T+='\n\n<div class="video-details">\n	<a class="details-btn player-action-btn" href="#"><i class="glyphicon circle-info"></i> ',_={hash:{},data:a},T+=D((I=n.t,I?I.call(t,"Details",_):E.call(t,"t","Details",_)))+"</a>\n\n	",P=n.unless.call(t,t.sectionID,{hash:{},inverse:L.noop,fn:L.program(6,o,a),data:a}),(P||0===P)&&(T+=P),T+="\n\n	<h2>\n		",P=n["if"].call(t,t.sectionID,{hash:{},inverse:L.program(16,m,a),fn:L.program(11,h,a),data:a}),(P||0===P)&&(T+=P),T+='\n	</h2>\n\n	<div class="video-more-details">\n		',P=n["if"].call(t,(I=t.media,null==I||I===!1?I:I.grandparentThumb),{hash:{},inverse:L.program(20,v,a),fn:L.program(18,f,a),data:a}),(P||0===P)&&(T+=P),T+='\n\n		<div class="metadata">\n			',_={hash:{},inverse:L.noop,fn:L.program(23,y,a),data:a},I=n.if_eq,P=I?I.call(t,(I=t.media,null==I||I===!1?I:I.type),"episode",_):E.call(t,"if_eq",(I=t.media,null==I||I===!1?I:I.type),"episode",_),(P||0===P)&&(T+=P),T+="\n\n			",P=n["if"].call(t,(I=t.media,null==I||I===!1?I:I.originallyAvailableAt),{hash:{},inverse:L.program(28,x,a),fn:L.program(26,w,a),data:a}),(P||0===P)&&(T+=P),T+="\n\n			",P=n["if"].call(t,(I=t.media,null==I||I===!1?I:I.duration),{hash:{},inverse:L.noop,fn:L.program(31,S,a),data:a}),(P||0===P)&&(T+=P),T+="\n\n			",P=n["if"].call(t,(I=t.media,null==I||I===!1?I:I.rating),{hash:{},inverse:L.noop,fn:L.program(33,C,a),data:a}),(P||0===P)&&(T+=P),T+='\n		</div>\n\n		<p class="summary">',_={hash:{},data:a},T+=D((I=n.truncate,I?I.call(t,(I=t.media,null==I||I===!1?I:I.summary),700,_):E.call(t,"truncate",(I=t.media,null==I||I===!1?I:I.summary),700,_)))+"</p>\n\n		",_={hash:{},inverse:L.noop,fn:L.program(35,A,a),data:a},I=n.if_eq,P=I?I.call(t,(I=t.media,null==I||I===!1?I:I.type),"episode",_):E.call(t,"if_eq",(I=t.media,null==I||I===!1?I:I.type),"episode",_),(P||0===P)&&(T+=P),T+="\n	</div>\n</div>\n"
})}),define("hb!templates/modals/SelectMediaModal.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t,i){var a,s,c,d="";return d+='\n			<li>\n				<a class="media" data-index="'+m((a=t.index,typeof a===f?a.apply(e):a))+'" href="#" tabindex="0">\n					',c={hash:{},inverse:v.program(4,l,t),fn:v.program(2,r,t),data:t},a=n.if_eq,s=a?a.call(e,i.type,"videoResolution",c):p.call(e,"if_eq",i.type,"videoResolution",c),(s||0===s)&&(d+=s),d+="\n\n					",s=n["if"].call(e,e.videoCodec,{hash:{},inverse:v.noop,fn:v.program(6,o,t),data:t}),(s||0===s)&&(d+=s),d+="\n				</a>\n			</li>\n		"
}function r(e,t){var i,a,s="";return s+="\n						",a={hash:{},data:t},s+=m((i=n.formatResolution,i?i.call(e,e.videoResolution,a):p.call(e,"formatResolution",e.videoResolution,a)))+"\n					"}function l(e,t){var i,a,s="";return s+="\n						",a={hash:{},data:t},s+=m((i=n.formatBitrate,i?i.call(e,e.bitrate,0,a):p.call(e,"formatBitrate",e.bitrate,0,a)))+"\n					"}function o(e){var t,n="";return n+="\n						("+m((t=e.videoCodec,typeof t===f?t.apply(e):t))+")\n					"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var c,d,h,u="",p=n.helperMissing,m=this.escapeExpression,f="function",v=this;return u+='<div class="modal-header">\n	<button type="button" class="close" data-dismiss="modal"><i class="glyphicon remove-2"></i></button>\n	<h3>',h={hash:{},data:a},u+=m((c=n.t,c?c.call(t,"Select a Quality",h):p.call(t,"t","Select a Quality",h)))+'</h3>\n</div>\n\n<div class="modal-body minimal-light-scrollbar">\n	<ul class="select-list">\n		',d=n.each.call(t,t.media,{hash:{},inverse:v.noop,fn:v.programWithDepth(1,s,a,t),data:a}),(d||0===d)&&(u+=d),u+="\n	</ul>\n</div>\n"
})}),define("plex/view/modals/SelectMediaModal",["hb!templates/modals/SelectMediaModal.tpl","plex/view/modals/BaseModal","jquery"],function(e,t,n){var i=t.extend({name:"selectMediaModal",className:"modal modal-small select-modal fade",defaultFocusedItem:".select-list a",media:null,events:{hidden:"close","click .media":"onMediaClick"},initialize:function(e){this.media=e.media},render:function(){var t="videoResolution",n=_.uniq(_.pluck(this.media,t));return 2>n.length&&(t="bitrate"),this.$el.html(e({media:this.media,type:t})).modal(),this
},close:function(){this.trigger("select:media",null),t.prototype.close.apply(this,arguments)},onMediaClick:function(e){e.preventDefault();var t=n(e.target).data("index");this.trigger("select:media",this.media[t]),this.$el.modal("hide")}});return i}),"undefined"==typeof jwplayer&&(jwplayer=function(e){return jwplayer.api?jwplayer.api.selectPlayer(e):void 0},jwplayer.version="6.3.3242",jwplayer.vid=document.createElement("video"),jwplayer.audio=document.createElement("audio"),jwplayer.source=document.createElement("source"),function(e){function t(e){return function(){return r(e)
}}var n=document,i=window,a=navigator,s=e.utils=function(){};s.exists=function(e){switch(typeof e){case"string":return e.length>0;case"object":return null!==e;case"undefined":return!1}return!0},s.styleDimension=function(e){return e+((""+e).indexOf("%")>0?"":"px")},s.getAbsolutePath=function(e,t){if(s.exists(t)||(t=n.location.href),s.exists(e)){var i;if(s.exists(e)){i=e.indexOf("://");var a=e.indexOf("?");i=i>0&&(0>a||a>i)}else i=void 0;if(i)return e;i=t.substring(0,t.indexOf("://")+3);var r,a=t.substring(i.length,t.indexOf("/",i.length+1));
0===e.indexOf("/")?r=e.split("/"):(r=t.split("?")[0],r=r.substring(i.length+a.length+1,r.lastIndexOf("/")),r=r.split("/").concat(e.split("/")));for(var l=[],o=0;r.length>o;o++)r[o]&&s.exists(r[o])&&"."!=r[o]&&(".."==r[o]?l.pop():l.push(r[o]));return i+a+"/"+l.join("/")}},s.extend=function(){var e=s.extend.arguments;if(e.length>1){for(var t=1;e.length>t;t++)for(var n in e[t])try{s.exists(e[t][n])&&(e[0][n]=e[t][n])}catch(i){}return e[0]}return null},s.log=function(e,t){"undefined"!=typeof console&&console.log!==void 0&&(t?console.log(e,t):console.log(e))
};var r=s.userAgentMatch=function(e){return null!==a.userAgent.toLowerCase().match(e)};s.isIE=t(/msie/i),s.isFF=t(/firefox/i),s.isChrome=t(/chrome/i),s.isIOS=t(/iP(hone|ad|od)/i),s.isIPod=t(/iP(hone|od)/i),s.isIPad=t(/iPad/i),s.isSafari602=t(/Macintosh.*Mac OS X 10_8.*6\.0\.\d* Safari/i),s.isAndroid=function(e){return e?r(RegExp("android.*"+e,"i")):r(/android/i)},s.isMobile=function(){return s.isIOS()||s.isAndroid()},s.saveCookie=function(e,t){n.cookie="jwplayer."+e+"="+t+"; path=/"},s.getCookies=function(){for(var e={},t=n.cookie.split("; "),i=0;t.length>i;i++){var a=t[i].split("=");
0==a[0].indexOf("jwplayer.")&&(e[a[0].substring(9,a[0].length)]=a[1])}return e},s.typeOf=function(e){var t=typeof e;return"object"===t?e?e instanceof Array?"array":t:"null":t},s.translateEventResponse=function(t,n){var i=s.extend({},n);t!=e.events.JWPLAYER_FULLSCREEN||i.fullscreen?"object"==typeof i.data?(i=s.extend(i,i.data),delete i.data):"object"==typeof i.metadata&&s.deepReplaceKeyName(i.metadata,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]):(i.fullscreen="true"==i.message?!0:!1,delete i.message);
var a,r=["position","duration","offset"];for(a in r)i[r[a]]&&(i[r[a]]=Math.round(1e3*i[r[a]])/1e3);return i},s.flashVersion=function(){if(s.isAndroid())return 0;var e,t=a.plugins;try{if("undefined"!==t&&(e=t["Shockwave Flash"]))return parseInt(e.description.replace(/\D+(\d+)\..*/,"$1"))}catch(n){}if(i.ActiveXObject!==void 0)try{if(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseInt(e.GetVariable("$version").split(" ")[1].split(",")[0])}catch(r){}return 0},s.getScriptPath=function(e){for(var t=n.getElementsByTagName("script"),i=0;t.length>i;i++){var a=t[i].src;
if(a&&a.indexOf(e)>=0)return a.substr(0,a.indexOf(e))}return""},s.deepReplaceKeyName=function(t,n,i){switch(e.utils.typeOf(t)){case"array":for(var a=0;t.length>a;a++)t[a]=e.utils.deepReplaceKeyName(t[a],n,i);break;case"object":for(var s in t){var r;if(n instanceof Array&&i instanceof Array){if(n.length!=i.length)continue;r=n}else r=[n];for(var l=s,a=0;r.length>a;a++)l=l.replace(RegExp(n[a],"g"),i[a]);t[l]=e.utils.deepReplaceKeyName(t[s],n,i),s!=l&&delete t[s]}}return t};var l=s.pluginPathType={ABSOLUTE:0,RELATIVE:1,CDN:2};
s.getPluginPathType=function(e){if("string"==typeof e){e=e.split("?")[0];var t=e.indexOf("://");if(t>0)return l.ABSOLUTE;var n=e.indexOf("/");return e=s.extension(e),!(0>t&&0>n)||e&&isNaN(e)?l.RELATIVE:l.CDN}},s.getPluginName=function(e){return e.replace(/^(.*\/)?([^-]*)-?.*\.(swf|js)$/,"$2")},s.getPluginVersion=function(e){return e.replace(/[^-]*-?([^\.]*).*$/,"$1")},s.isYouTube=function(e){return e.indexOf("youtube.com")>-1||e.indexOf("youtu.be")>-1},s.isRtmp=function(e,t){return 0==e.indexOf("rtmp")||"rtmp"==t
},s.foreach=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n)},s.isHTTPS=function(){return 0==i.location.href.indexOf("https")},s.repo=function(){var t="http://p.jwpcdn.com/"+e.version.split(/\W/).splice(0,2).join("/")+"/";try{s.isHTTPS()&&(t=t.replace("http://","https://ssl."))}catch(n){}return t}}(jwplayer),function(e){var t,n="video/",i={mp4:n+"mp4",vorbis:"audio/ogg",ogg:n+"ogg",webm:n+"webm",aac:"audio/mp4",mp3:"audio/mpeg",hls:"application/vnd.apple.mpegurl"},a={mp4:i.mp4,f4v:i.mp4,m4v:i.mp4,mov:i.mp4,m4a:i.aac,f4a:i.aac,aac:i.aac,mp3:i.mp3,ogv:i.ogg,ogg:i.vorbis,oga:i.vorbis,webm:i.webm,m3u8:i.hls,hls:i.hls},n="video",n={flv:n,f4v:n,mov:n,m4a:n,m4v:n,mp4:n,aac:n,f4a:n,mp3:"sound",smil:"rtmp",m3u8:"hls",hls:"hls"},s=e.extensionmap={};
for(t in a)s[t]={html5:a[t]};for(t in n)s[t]||(s[t]={}),s[t].flash=n[t];s.types=i,s.mimeType=function(e){for(var t in i)if(i[t]==e)return t},s.extType=function(e){return s.mimeType(a[e])}}(jwplayer.utils),function(e){var t=e.loaderstatus={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},n=document;e.scriptloader=function(i){function a(){r=t.ERROR,o.sendEvent(l.ERROR)}function s(){r=t.COMPLETE,o.sendEvent(l.COMPLETE)}var r=t.NEW,l=jwplayer.events,o=new l.eventdispatcher;e.extend(this,o),this.load=function(){var o=e.scriptloader.loaders[i];
if(!o||o.getStatus()!=t.NEW&&o.getStatus()!=t.LOADING){if(e.scriptloader.loaders[i]=this,r==t.NEW){r=t.LOADING;var c=n.createElement("script");c.addEventListener?(c.onload=s,c.onerror=a):c.readyState&&(c.onreadystatechange=function(){("loaded"==c.readyState||"complete"==c.readyState)&&s()}),n.getElementsByTagName("head")[0].appendChild(c),c.src=i}}else o.addEventListener(l.ERROR,a),o.addEventListener(l.COMPLETE,s)},this.getStatus=function(){return r}},e.scriptloader.loaders={}}(jwplayer.utils),function(e){e.trim=function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")
},e.pad=function(e,t,n){for(n||(n="0");t>e.length;)e=n+e;return e},e.xmlAttribute=function(e,t){for(var n=0;e.attributes.length>n;n++)if(e.attributes[n].name&&e.attributes[n].name.toLowerCase()==t.toLowerCase())return""+e.attributes[n].value;return""},e.extension=function(e){return e&&"rtmp"!=e.substr(0,4)?(e=e.substring(e.lastIndexOf("/")+1,e.length).split("?")[0].split("#")[0],e.lastIndexOf(".")>-1?e.substr(e.lastIndexOf(".")+1,e.length).toLowerCase():void 0):""},e.stringToColor=function(e){return e=e.replace(/(#|0x)?([0-9A-F]{3,6})$/gi,"$2"),3==e.length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)
}}(jwplayer.utils),function(e){e.key=function(t){var n,i,a;this.edition=function(){return a&&a.getTime()<(new Date).getTime()?"invalid":n},this.token=function(){return i},e.exists(t)||(t="");try{t=e.tea.decrypt(t,"36QXq4W@GSBV^teR");var s=t.split("/");(n=s[0])||(n="free"),i=s[1],s[2]&&parseInt(s[2])>0&&(a=new Date,a.setTime(s[2]+""))}catch(r){n="invalid"}}}(jwplayer.utils),function(e){var t=e.tea={};t.encrypt=function(e,a){if(0==e.length)return"";var s=t.strToLongs(i.encode(e));1>=s.length&&(s[1]=0);
for(var r,l=t.strToLongs(i.encode(a).slice(0,16)),o=s.length,c=s[o-1],d=s[0],h=Math.floor(6+52/o),u=0;h-->0;){u+=2654435769,r=3&u>>>2;for(var p=0;o>p;p++)d=s[(p+1)%o],c=(c>>>5^d<<2)+(d>>>3^c<<4)^(u^d)+(l[3&p^r]^c),c=s[p]+=c}return s=t.longsToStr(s),n.encode(s)},t.decrypt=function(e,a){if(0==e.length)return"";for(var s,r=t.strToLongs(n.decode(e)),l=t.strToLongs(i.encode(a).slice(0,16)),o=r.length,c=r[o-1],d=r[0],h=2654435769*Math.floor(6+52/o);0!=h;){s=3&h>>>2;for(var u=o-1;u>=0;u--)c=r[u>0?u-1:o-1],c=(c>>>5^d<<2)+(d>>>3^c<<4)^(h^d)+(l[3&u^s]^c),d=r[u]-=c;
h-=2654435769}return r=t.longsToStr(r),r=r.replace(/\0+$/,""),i.decode(r)},t.strToLongs=function(e){for(var t=Array(Math.ceil(e.length/4)),n=0;t.length>n;n++)t[n]=e.charCodeAt(4*n)+(e.charCodeAt(4*n+1)<<8)+(e.charCodeAt(4*n+2)<<16)+(e.charCodeAt(4*n+3)<<24);return t},t.longsToStr=function(e){for(var t=Array(e.length),n=0;e.length>n;n++)t[n]=String.fromCharCode(255&e[n],255&e[n]>>>8,255&e[n]>>>16,255&e[n]>>>24);return t.join("")};var n={code:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e,t){var a,s,r,l,o,c,d=[],h="",u=n.code;
if(c=(t===void 0?0:t)?i.encode(e):e,o=c.length%3,o>0)for(;3>o++;)h+="=",c+="\0";for(o=0;c.length>o;o+=3)a=c.charCodeAt(o),s=c.charCodeAt(o+1),r=c.charCodeAt(o+2),l=a<<16|s<<8|r,a=63&l>>18,s=63&l>>12,r=63&l>>6,l&=63,d[o/3]=u.charAt(a)+u.charAt(s)+u.charAt(r)+u.charAt(l);return d=d.join(""),d=d.slice(0,d.length-h.length)+h},decode:function(e,t){t=t===void 0?!1:t;var a,s,r,l,o,c,d=[],h=n.code;c=t?i.decode(e):e;for(var u=0;c.length>u;u+=4)a=h.indexOf(c.charAt(u)),s=h.indexOf(c.charAt(u+1)),l=h.indexOf(c.charAt(u+2)),o=h.indexOf(c.charAt(u+3)),r=a<<18|s<<12|l<<6|o,a=255&r>>>16,s=255&r>>>8,r&=255,d[u/4]=String.fromCharCode(a,s,r),64==o&&(d[u/4]=String.fromCharCode(a,s)),64==l&&(d[u/4]=String.fromCharCode(a));
return l=d.join(""),t?i.decode(l):l}},i={encode:function(e){return e=e.replace(/[\u0080-\u07ff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(192|e>>6,128|63&e)}),e=e.replace(/[\u0800-\uffff]/g,function(e){return e=e.charCodeAt(0),String.fromCharCode(224|e>>12,128|63&e>>6,128|63&e)})},decode:function(e){return e=e.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){return e=(15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2),String.fromCharCode(e)}),e=e.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){return e=(31&e.charCodeAt(0))<<6|63&e.charCodeAt(1),String.fromCharCode(e)
})}}}(jwplayer.utils),function(e){e.events={COMPLETE:"COMPLETE",ERROR:"ERROR",API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_MEDIA_BEFOREPLAY:"jwplayerMediaBeforePlay",JWPLAYER_MEDIA_BEFORECOMPLETE:"jwplayerMediaBeforeComplete",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_MEDIA_LEVELS:"jwplayerMediaLevels",JWPLAYER_MEDIA_LEVEL_CHANGED:"jwplayerMediaLevelChanged",JWPLAYER_CAPTIONS_CHANGED:"jwplayerCaptionsChanged",JWPLAYER_CAPTIONS_LIST:"jwplayerCaptionsList",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",state:{BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",PLAYING:"PLAYING"},JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem",JWPLAYER_PLAYLIST_COMPLETE:"jwplayerPlaylistComplete",JWPLAYER_DISPLAY_CLICK:"jwplayerViewClick",JWPLAYER_CONTROLS:"jwplayerViewControls",JWPLAYER_INSTREAM_CLICK:"jwplayerInstreamClicked",JWPLAYER_INSTREAM_DESTROYED:"jwplayerInstreamDestroyed"}
}(jwplayer),function(e){var t=jwplayer.utils;e.eventdispatcher=function(e,n){var i,a;this.resetEventListeners=function(){i={},a=[]},this.resetEventListeners(),this.addEventListener=function(e,n,a){try{t.exists(i[e])||(i[e]=[]),"string"==t.typeOf(n)&&(n=Function("return "+n)()),i[e].push({listener:n,count:a})}catch(s){t.log("error",s)}return!1},this.removeEventListener=function(e,n){if(i[e]){try{for(var a=0;i[e].length>a;a++)if(""+i[e][a].listener==""+n){i[e].splice(a,1);break}}catch(s){t.log("error",s)
}return!1}},this.addGlobalListener=function(e,n){try{"string"==t.typeOf(e)&&(e=Function("return "+e)()),a.push({listener:e,count:n})}catch(i){t.log("error",i)}return!1},this.removeGlobalListener=function(e){if(e){try{for(var n=0;a.length>n;n++)if(""+a[n].listener==""+e){a.splice(n,1);break}}catch(i){t.log("error",i)}return!1}},this.sendEvent=function(s,r){if(t.exists(r)||(r={}),t.extend(r,{id:e,version:jwplayer.version,type:s}),n&&t.log(s,r),"undefined"!=t.typeOf(i[s]))for(var l=0;i[s].length>l;l++){try{i[s][l].listener(r)
}catch(o){t.log("There was an error while handling a listener: "+(""+o),i[s][l].listener)}i[s][l]&&(1===i[s][l].count?delete i[s][l]:i[s][l].count>0&&(i[s][l].count-=1))}for(l=0;a.length>l;l++){try{a[l].listener(r)}catch(c){t.log("There was an error while handling a listener: "+(""+c),a[l].listener)}a[l]&&(1===a[l].count?delete a[l]:a[l].count>0&&(a[l].count-=1))}}}}(jwplayer.events),function(e){var t={},n={};e.plugins=function(){},e.plugins.loadPlugins=function(i,a){return n[i]=new e.plugins.pluginloader(new e.plugins.model(t),a),n[i]
},e.plugins.registerPlugin=function(n,i,a,s){var r=e.utils.getPluginName(n);t[r]||(t[r]=new e.plugins.plugin(n)),t[r].registerPlugin(n,i,a,s)}}(jwplayer),function(e){e.plugins.model=function(t){this.addPlugin=function(n){var i=e.utils.getPluginName(n);return t[i]||(t[i]=new e.plugins.plugin(n)),t[i]},this.getPlugins=function(){return t}}}(jwplayer),function(e){var t=jwplayer.utils,n=jwplayer.events;e.pluginmodes={FLASH:0,JAVASCRIPT:1,HYBRID:2},e.plugin=function(i){function a(){switch(t.getPluginPathType(i)){case t.pluginPathType.ABSOLUTE:return i;
case t.pluginPathType.RELATIVE:return t.getAbsolutePath(i,window.location.href)}}function s(){d=setTimeout(function(){h=t.loaderstatus.COMPLETE,u.sendEvent(n.COMPLETE)},1e3)}function r(){h=t.loaderstatus.ERROR,u.sendEvent(n.ERROR)}var l,o,c,d,h=t.loaderstatus.NEW,u=new n.eventdispatcher;t.extend(this,u),this.load=function(){if(h==t.loaderstatus.NEW)if(i.lastIndexOf(".swf")>0)l=i,h=t.loaderstatus.COMPLETE,u.sendEvent(n.COMPLETE);else if(t.getPluginPathType(i)==t.pluginPathType.CDN)h=t.loaderstatus.COMPLETE,u.sendEvent(n.COMPLETE);
else{h=t.loaderstatus.LOADING;var e=new t.scriptloader(a());e.addEventListener(n.COMPLETE,s),e.addEventListener(n.ERROR,r),e.load()}},this.registerPlugin=function(e,i,a,s){d&&(clearTimeout(d),d=void 0),c=i,a&&s?(l=s,o=a):"string"==typeof a?l=a:"function"==typeof a?o=a:!a&&!s&&(l=e),h=t.loaderstatus.COMPLETE,u.sendEvent(n.COMPLETE)},this.getStatus=function(){return h},this.getPluginName=function(){return t.getPluginName(i)},this.getFlashPath=function(){if(l)switch(t.getPluginPathType(l)){case t.pluginPathType.ABSOLUTE:return l;
case t.pluginPathType.RELATIVE:return i.lastIndexOf(".swf")>0?t.getAbsolutePath(l,window.location.href):t.getAbsolutePath(l,a())}return null},this.getJS=function(){return o},this.getTarget=function(){return c},this.getPluginmode=function(){return l!==void 0&&o!==void 0?e.pluginmodes.HYBRID:l!==void 0?e.pluginmodes.FLASH:o!==void 0?e.pluginmodes.JAVASCRIPT:void 0},this.getNewInstance=function(e,t,n){return new o(e,t,n)},this.getURL=function(){return i}}}(jwplayer.plugins),function(e){var t=e.utils,n=e.events;
e.plugins.pluginloader=function(i,a){function s(){d?u.sendEvent(n.ERROR,{message:l}):c||(c=!0,o=t.loaderstatus.COMPLETE,u.sendEvent(n.COMPLETE))}function r(){if(h||s(),!c&&!d){var n,a=0,r=i.getPlugins();for(n in h){var o=t.getPluginName(n),u=r[o],o=u.getJS(),p=u.getTarget(),u=u.getStatus();u==t.loaderstatus.LOADING||u==t.loaderstatus.NEW?a++:o&&(!p||parseFloat(p)>parseFloat(e.version))&&(d=!0,l="Incompatible player version",s())}0==a&&s()}}var l,o=t.loaderstatus.NEW,c=!1,d=!1,h=a,u=new n.eventdispatcher;
t.extend(this,u),this.setupPlugins=function(e,n,a){var s,r={length:0,plugins:{}},l=0,o={},c=i.getPlugins();for(s in n.plugins){var d=t.getPluginName(s),h=c[d],u=h.getFlashPath(),p=h.getJS(),m=h.getURL();u&&(r.plugins[u]=t.extend({},n.plugins[s]),r.plugins[u].pluginmode=h.getPluginmode(),r.length++);try{if(p&&n.plugins&&n.plugins[m]){var f=document.createElement("div");f.id=e.id+"_"+d,f.style.position="absolute",f.style.top=0,f.style.zIndex=l+10,o[d]=h.getNewInstance(e,t.extend({},n.plugins[m]),f),l++,e.onReady(a(o[d],f,!0)),e.onResize(a(o[d],f))
}}catch(v){t.log("ERROR: Failed to load "+d+".")}}return e.plugins=o,r},this.load=function(){if(!t.exists(a)||"object"==t.typeOf(a)){o=t.loaderstatus.LOADING;for(var e in a)if(t.exists(e)){var s=i.addPlugin(e);s.addEventListener(n.COMPLETE,r),s.addEventListener(n.ERROR,p)}s=i.getPlugins();for(e in s)s[e].load()}r()};var p=this.pluginFailed=function(){d||(d=!0,l="File not found",s())};this.getStatus=function(){return o}}}(jwplayer),function(e){e.playlist=function(t){var n=[];if("array"==e.utils.typeOf(t))for(var i=0;t.length>i;i++)n.push(new e.playlist.item(t[i]));
else n.push(new e.playlist.item(t));return n}}(jwplayer),function(e){var t=e.item=function(n){var i=jwplayer.utils,a=i.extend({},t.defaults,n);a.tracks=i.exists(n.tracks)?n.tracks:[],0==a.sources.length&&(a.sources=[new e.source(a)]);for(var s=0;a.sources.length>s;s++){var r=a.sources[s]["default"];a.sources[s]["default"]=r?"true"==""+r:!1,a.sources[s]=new e.source(a.sources[s])}if(a.captions&&!i.exists(n.tracks)){for(n=0;a.captions.length>n;n++)a.tracks.push(a.captions[n]);delete a.captions}for(s=0;a.tracks.length>s;s++)a.tracks[s]=new e.track(a.tracks[s]);
return a};t.defaults={description:"",image:"",mediaid:"",title:"",sources:[],tracks:[]}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,type:void 0,"default":void 0};e.source=function(e){var i,a=t.extend({},n);for(i in n)t.exists(e[i])&&(a[i]=e[i],delete e[i]);return a.type&&a.type.indexOf("/")>0&&(a.type=t.extensionmap.mimeType(a.type)),"m3u8"==a.type&&(a.type="hls"),"smil"==a.type&&(a.type="rtmp"),a}}(jwplayer.playlist),function(e){var t=jwplayer.utils,n={file:void 0,label:void 0,kind:"captions","default":!1};
e.track=function(e){var i=t.extend({},n);e||(e={});for(var a in n)t.exists(e[a])&&(i[a]=e[a],delete e[a]);return i}}(jwplayer.playlist),function(e){var t=e.utils,n=e.events,i=document,a=e.embed=function(s){function r(e){o(c,f+e.message)}function l(){o(c,f+"No playable sources found")}function o(e,n){if(u.fallback){var i=e.style;i.backgroundColor="#000",i.color="#FFF",i.width=t.styleDimension(u.width),i.height=t.styleDimension(u.height),i.display="table",i.opacity=1;var i=document.createElement("p"),a=i.style;
a.verticalAlign="middle",a.textAlign="center",a.display="table-cell",a.font="15px/20px Arial, Helvetica, sans-serif",i.innerHTML=n.replace(":",":<br>"),e.innerHTML="",e.appendChild(i)}}var c,d,h,u=new a.config(s.config),p=u.width,m=u.height,f="Error loading player: ",v=e.plugins.loadPlugins(s.id,u.plugins);return u.fallbackDiv&&(h=u.fallbackDiv,delete u.fallbackDiv),u.id=s.id,d=i.getElementById(s.id),c=i.createElement("div"),c.id=d.id,c.style.width=(""+p).indexOf("%")>0?p:p+"px",c.style.height=(""+m).indexOf("%")>0?m:m+"px",d.parentNode.replaceChild(c,d),e.embed.errorScreen=o,v.addEventListener(n.COMPLETE,function(){if("array"==t.typeOf(u.playlist)&&2>u.playlist.length&&(0==u.playlist.length||!u.playlist[0].sources||0==u.playlist[0].sources.length))l();
else if(v.getStatus()==t.loaderstatus.COMPLETE){for(var e=0;u.modes.length>e;e++)if(u.modes[e].type&&a[u.modes[e].type]){var i=t.extend({},u),o=new a[u.modes[e].type](c,u.modes[e],i,v,s);if(o.supportsConfig()){o.addEventListener(n.ERROR,r),o.embed(),e=s,i=i.events,o=void 0;for(o in i)"function"==typeof e[o]&&e[o].call(e,i[o]);return s}}u.fallback?(t.log("No suitable players found and fallback enabled"),new a.download(c,u,l)):(t.log("No suitable players found and fallback disabled"),c.parentNode.replaceChild(h,c))
}}),v.addEventListener(n.ERROR,function(e){o(c,"Could not load plugins: "+e.message)}),v.load(),s}}(jwplayer),function(e){function t(e){if(e.playlist)for(var t=0;e.playlist.length>t;t++)e.playlist[t]=new a(e.playlist[t]);else{var i,t={};for(i in a.defaults)n(e,t,i);t.sources||(e.levels?(t.sources=e.levels,delete e.levels):(i={},n(e,i,"file"),n(e,i,"type"),t.sources=i.file?[i]:[])),e.playlist=[new a(t)]}}function n(e,t,n){i.exists(e[n])&&(t[n]=e[n],delete e[n])}var i=e.utils,a=e.playlist.item;(e.embed.config=function(n){var a={fallback:!0,height:270,primary:"html5",width:480,base:n.base?n.base:i.getScriptPath("jwplayer.js")};
n=i.extend(a,e.defaults,n);var a={type:"html5",src:n.base+"jwplayer.html5.js"},s={type:"flash",src:n.base+"jwplayer.flash.swf"};return n.modes="flash"==n.primary?[s,a]:[a,s],n.listbar&&(n.playlistsize=n.listbar.size,n.playlistposition=n.listbar.position),n.flashplayer&&(s.src=n.flashplayer),n.html5player&&(a.src=n.html5player),t(n),n}).addConfig=function(e,n){return t(n),i.extend(e,n)}}(jwplayer),function(e){var t=e.utils,n=document;e.embed.download=function(e,i,a){function s(e,t){for(var i=n.querySelectorAll(e),a=0;i.length>a;a++)for(var s in t)i[a].style[s]=t[s]
}function r(e,t,i){return e=n.createElement(e),t&&(e.className="jwdownload"+t),i&&i.appendChild(e),e}var l,o,c=t.extend({},i),d=c.width?c.width:480,h=c.height?c.height:320;i=i.logo?i.logo:{prefix:t.repo(),file:"logo.png",margin:10};var u,p;p=c.playlist;var m,f,c=["mp4","aac","mp3"];if(p&&p.length){for(m=p[0],f=m.sources,p=0;f.length>p;p++){var v=f[p],g=v.type?v.type:t.extensionmap.extType(t.extension(v.file));if(v.file)for(p in c)g==c[p]?(l=v.file,o=m.image):t.isYouTube(v.file)&&(u=v.file)}l?(a=l,e&&(l=r("a","display",e),r("div","icon",l),r("div","logo",l),a&&l.setAttribute("href",t.getAbsolutePath(a))),a="#"+e.id+" .jwdownload",e.style.width="",e.style.height="",s(a+"display",{width:t.styleDimension(Math.max(320,d)),height:t.styleDimension(Math.max(180,h)),background:"black center no-repeat "+(o?"url("+o+")":""),backgroundSize:"contain",position:"relative",border:"none",display:"block"}),s(a+"display div",{position:"absolute",width:"100%",height:"100%"}),s(a+"logo",{top:i.margin+"px",right:i.margin+"px",background:"top right no-repeat url("+i.prefix+i.file+")"}),s(a+"icon",{background:"center no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAgNJREFUeNrs28lqwkAYB/CZqNVDDj2r6FN41QeIy8Fe+gj6BL275Q08u9FbT8ZdwVfotSBYEPUkxFOoks4EKiJdaDuTjMn3wWBO0V/+sySR8SNSqVRKIR8qaXHkzlqS9jCfzzWcTCYp9hF5o+59sVjsiRzcegSckFzcjT+ruN80TeSlAjCAAXzdJSGPFXRpAAMYwACGZQkSdhG4WCzehMNhqV6vG6vVSrirKVEw66YoSqDb7cqlUilE8JjHd/y1MQefVzqdDmiaJpfLZWHgXMHn8F6vJ1cqlVAkEsGuAn83J4gAd2RZymQygX6/L1erVQt+9ZPWb+CDwcCC2zXGJaewl/DhcHhK3DVj+KfKZrMWvFarcYNLomAv4aPRSFZVlTlcSPA5fDweW/BoNIqFnKV53JvncjkLns/n/cLdS+92O7RYLLgsKfv9/t8XlDn4eDyiw+HA9Jyz2eyt0+kY2+3WFC5hluej0Ha7zQQq9PPwdDq1Et1sNsx/nFBgCqWJ8oAK1aUptNVqcYWewE4nahfU0YQnk4ntUEfGMIU2m01HoLaCKbTRaDgKtaVLk9tBYaBcE/6Artdr4RZ5TB6/dC+9iIe/WgAMYADDpAUJAxjAAAYwgGFZgoS/AtNNTF7Z2bL0BYPBV3Jw5xFwwWcYxgtBP5OkE8i9G7aWGOOCruvauwADALMLMEbKf4SdAAAAAElFTkSuQmCC)"})):u?(i=u,e=r("embed","",e),e.src="http://www.youtube.com/v/"+/v[=\/](\w*)|\/(\w+)$|^(\w+)$/i.exec(i).slice(1).join(""),e.type="application/x-shockwave-flash",e.width=d,e.height=h):a()
}}}(jwplayer),function(e){var t=e.utils,n=e.events,i={};(e.embed.flash=function(a,s,r,l,o){function c(e,t,n){var i=document.createElement("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function d(e,t,n){return function(){try{n&&document.getElementById(o.id+"_wrapper").appendChild(t);var i=document.getElementById(o.id).getPluginConfig("display");"function"==typeof e.resize&&e.resize(i.width,i.height),t.style.left=i.x,t.style.top=i.h}catch(a){}}}function h(e){if(!e)return{};
var n,i={},a=[];for(n in e){var s=t.getPluginName(n),r=e[n];a.push(n);for(var l in r)i[s+"."+l]=r[l]}return i.plugins=a.join(","),i}var u=new e.events.eventdispatcher,p=t.flashVersion();t.extend(this,u),this.embed=function(){if(r.id=o.id,10>p)return u.sendEvent(n.ERROR,{message:"Flash version must be 10.0 or greater"}),!1;var e,m=t.extend({},r);a.id+"_wrapper"==a.parentNode.id?document.getElementById(a.id+"_wrapper"):(e=document.createElement("div"),e.id=a.id+"_wrapper",e.style.position="relative",e.style.width=t.styleDimension(m.width),e.style.height=t.styleDimension(m.height),a.parentNode.replaceChild(e,a),e.appendChild(a)),e=l.setupPlugins(o,m,d),e.length>0?t.extend(m,h(e.plugins)):delete m.plugins,m["dock.position"]!==void 0&&"false"==(""+m["dock.position"]).toLowerCase()&&(m.dock=m["dock.position"],delete m["dock.position"]),e=m.wmode?m.wmode:m.height&&40>=m.height?"transparent":"opaque";
for(var f="height width modes events primary base fallback volume".split(" "),v=0;f.length>v;v++)delete m[f[v]];var g,f=t.getCookies();for(g in f)m[g]===void 0&&(m[g]=f[g]);g=window.location.pathname.split("/"),g.splice(g.length-1,1),g=g.join("/"),m.base=g+"/",i[a.id]=m,t.isIE()?(m='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" " width="100%" height="100%" id="'+a.id+'" name="'+a.id+'" tabindex=0"">',m+='<param name="movie" value="'+s.src+'">',m+='<param name="allowfullscreen" value="true"><param name="allowscriptaccess" value="always">',m+='<param name="seamlesstabbing" value="true">',m+='<param name="wmode" value="'+e+'">',m+='<param name="bgcolor" value="#000000">',m+="</object>",a.outerHTML=m,m=document.getElementById(a.id)):(m=document.createElement("object"),m.setAttribute("type","application/x-shockwave-flash"),m.setAttribute("data",s.src),m.setAttribute("width","100%"),m.setAttribute("height","100%"),m.setAttribute("bgcolor","#000000"),m.setAttribute("id",a.id),m.setAttribute("name",a.id),m.setAttribute("tabindex",0),c(m,"allowfullscreen","true"),c(m,"allowscriptaccess","always"),c(m,"seamlesstabbing","true"),c(m,"wmode",e),a.parentNode.replaceChild(m,a)),o.container=m,o.setPlayer(m,"flash")
},this.supportsConfig=function(){if(p){if(!r)return!0;if("string"==t.typeOf(r.playlist))return!0;try{var e=r.playlist[0].sources;if(e===void 0)return!0;for(var n=0;e.length>n;n++){var i;if(i=e[n].file){var a=e[n].file,s=e[n].type;if(t.isYouTube(a)||t.isRtmp(a,s)||"hls"==s)i=!0;else{var l=t.extensionmap[s?s:t.extension(a)];i=l?!!l.flash:!1}}if(i)return!0}}catch(o){}}return!1}}).getVars=function(e){return i[e]}}(jwplayer),function(e){var t=e.utils,n=t.extensionmap,i=e.events;e.embed.html5=function(a,s,r,l,o){function c(e,t,n){return function(){try{var i=document.querySelector("#"+a.id+" .jwmain");
n&&i.appendChild(t),"function"==typeof e.resize&&(e.resize(i.clientWidth,i.clientHeight),setTimeout(function(){e.resize(i.clientWidth,i.clientHeight)},400)),t.left=i.style.left,t.top=i.style.top}catch(s){}}}function d(e){h.sendEvent(e.type,{message:"HTML5 player not found"})}var h=this,u=new i.eventdispatcher;t.extend(h,u),h.embed=function(){if(e.html5){l.setupPlugins(o,r,c),a.innerHTML="";var n=e.utils.extend({},r);delete n.volume,n=new e.html5.player(n),o.container=document.getElementById(o.id),o.setPlayer(n,"html5")
}else n=new t.scriptloader(s.src),n.addEventListener(i.ERROR,d),n.addEventListener(i.COMPLETE,h.embed),n.load()},h.supportsConfig=function(){if(e.vid.canPlayType)try{if("string"==t.typeOf(r.playlist))return!0;for(var i=r.playlist[0].sources,a=0;i.length>a;a++){var s,l=i[a].file,o=i[a].type;if(null!==navigator.userAgent.match(/BlackBerry/i)||t.isAndroid()&&("m3u"==t.extension(l)||"m3u8"==t.extension(l))||t.isRtmp(l,o))s=!1;else{var c,d=n[o?o:t.extension(l)];if(!d||d.flash&&!d.html5)c=!1;else{var h=d.html5,u=e.vid;
if(h)try{c=u.canPlayType(h)?!0:!1}catch(p){c=!1}else c=!0}s=c}if(s)return!0}}catch(m){}return!1}}}(jwplayer),function(e){var t=e.embed,n=e.utils,i=n.extend(function(i){var a=n.repo(),s=i.config,r=s.plugins,l=s.analytics,o=a+"jwpsrv.js",c=a+"sharing.js",d=a+"related.js",h=a+"gapro.js",u=new e.utils.key(e.key).edition(),r=r?r:{};return"ads"==u&&s.advertising&&(s.advertising.client.match(".js$|.swf$")?r[s.advertising.client]=s.advertising:r[a+s.advertising.client+("flash"==s.primary?".swf":".js")]=s.advertising),delete s.advertising,s.key=e.key,s.analytics&&s.analytics.client&&s.analytics.client.match(".js$|.swf$")&&(o=s.analytics.client),delete s.analytics,"free"!=u&&l&&!1===l.enabled||(r[o]=l?l:{}),delete r.sharing,delete r.related,("premium"==u||"ads"==u)&&(s.sharing&&(s.sharing.client&&s.sharing.client.match(".js$|.swf$")&&(c=s.sharing.client),r[c]=s.sharing),s.related&&(s.related.client&&s.related.client.match(".js$|.swf$")&&(d=s.related.client),r[d]=s.related),s.ga&&(s.ga.client&&s.ga.client.match(".js$|.swf$")&&(h=s.ga.client),r[h]=s.ga),s.skin&&(s.skin=s.skin.replace(/^(beelden|bekle|five|glow|modieus|roundster|stormtrooper|vapor)$/i,n.repo()+"skins/$1.xml").toLowerCase())),s.plugins=r,new t(i)
},t);e.embed=i}(jwplayer),function(e){var t=[],n=e.utils,i=e.events,a=i.state,s=document,r=e.api=function(t){function l(e,t){return function(n){return t(e,n)}}function o(e,t){return m[e]||(m[e]=[],d(i.JWPLAYER_PLAYER_STATE,function(t){var n=t.newstate;if(t=t.oldstate,n==e){var i=m[n];if(i)for(var a=0;i.length>a;a++)"function"==typeof i[a]&&i[a].call(this,{oldstate:t,newstate:n})}})),m[e].push(t),u}function c(e,t){try{e.jwAddEventListener(t,'function(dat) { jwplayer("'+u.id+'").dispatchEvent("'+t+'", dat); }')
}catch(i){n.log("Could not add internal listener")}}function d(e,t){return p[e]||(p[e]=[],f&&v&&c(f,e)),p[e].push(t),u}function h(){if(v){for(var e=arguments[0],t=[],n=1;arguments.length>n;n++)t.push(arguments[n]);if(f!==void 0&&"function"==typeof f[e])switch(t.length){case 4:return f[e](t[0],t[1],t[2],t[3]);case 3:return f[e](t[0],t[1],t[2]);case 2:return f[e](t[0],t[1]);case 1:return f[e](t[0]);default:return f[e]()}return null}g.push(arguments)}var u=this,p={},m={},f=void 0,v=!1,g=[],y=void 0,b={},w={};
u.container=t,u.id=t.id,u.getBuffer=function(){return h("jwGetBuffer")},u.getContainer=function(){return u.container},u.addButton=function(e,t,i,a){try{w[a]=i,h("jwDockAddButton",e,t,"jwplayer('"+u.id+"').callback('"+a+"')",a)}catch(s){n.log("Could not add dock button"+s.message)}},u.removeButton=function(e){h("jwDockRemoveButton",e)},u.callback=function(e){w[e]&&w[e]()},u.forceState=function(e){return h("jwForceState",e),u},u.releaseState=function(){return h("jwReleaseState")},u.getDuration=function(){return h("jwGetDuration")
},u.getFullscreen=function(){return h("jwGetFullscreen")},u.getStretching=function(){return h("jwGetStretching")},u.getHeight=function(){return h("jwGetHeight")},u.getLockState=function(){return h("jwGetLockState")},u.getMeta=function(){return u.getItemMeta()},u.getMute=function(){return h("jwGetMute")},u.getPlaylist=function(){var e=h("jwGetPlaylist");return"flash"==u.renderingMode&&n.deepReplaceKeyName(e,["__dot__","__spc__","__dsh__","__default__"],["."," ","-","default"]),e},u.getPlaylistItem=function(e){return n.exists(e)||(e=u.getCurrentItem()),u.getPlaylist()[e]
},u.getPosition=function(){return h("jwGetPosition")},u.getRenderingMode=function(){return u.renderingMode},u.getState=function(){return h("jwGetState")},u.getVolume=function(){return h("jwGetVolume")},u.getWidth=function(){return h("jwGetWidth")},u.setFullscreen=function(e){return n.exists(e)?h("jwSetFullscreen",e):h("jwSetFullscreen",!h("jwGetFullscreen")),u},u.setStretching=function(e){return h("jwSetStretching",e),u},u.setMute=function(e){return n.exists(e)?h("jwSetMute",e):h("jwSetMute",!h("jwGetMute")),u
},u.lock=function(){return u},u.unlock=function(){return u},u.load=function(e){return h("jwLoad",e),u},u.playlistItem=function(e){return h("jwPlaylistItem",parseInt(e)),u},u.playlistPrev=function(){return h("jwPlaylistPrev"),u},u.playlistNext=function(){return h("jwPlaylistNext"),u},u.resize=function(e,t){if("flash"!=u.renderingMode)h("jwResize",e,t);else{var i=s.getElementById(u.id+"_wrapper");i&&(i.style.width=n.styleDimension(e),i.style.height=n.styleDimension(t))}return u},u.play=function(e){return e===void 0?(e=u.getState(),e==a.PLAYING||e==a.BUFFERING?h("jwPause"):h("jwPlay")):h("jwPlay",e),u
},u.pause=function(e){return e===void 0?(e=u.getState(),e==a.PLAYING||e==a.BUFFERING?h("jwPause"):h("jwPlay")):h("jwPause",e),u},u.stop=function(){return h("jwStop"),u},u.seek=function(e){return h("jwSeek",e),u},u.setVolume=function(e){return h("jwSetVolume",e),u},u.loadInstream=function(e,t){return y=new r.instream(this,f,e,t)},u.getQualityLevels=function(){return h("jwGetQualityLevels")},u.getCurrentQuality=function(){return h("jwGetCurrentQuality")},u.setCurrentQuality=function(e){h("jwSetCurrentQuality",e)
},u.getCaptionsList=function(){return h("jwGetCaptionsList")},u.getCurrentCaptions=function(){return h("jwGetCurrentCaptions")},u.setCurrentCaptions=function(e){h("jwSetCurrentCaptions",e)},u.getControls=function(){return h("jwGetControls")},u.getSafeRegion=function(){return h("jwGetSafeRegion")},u.setControls=function(e){h("jwSetControls",e)},u.destroyPlayer=function(){h("jwPlayerDestroy")};var x={onBufferChange:i.JWPLAYER_MEDIA_BUFFER,onBufferFull:i.JWPLAYER_MEDIA_BUFFER_FULL,onError:i.JWPLAYER_ERROR,onFullscreen:i.JWPLAYER_FULLSCREEN,onMeta:i.JWPLAYER_MEDIA_META,onMute:i.JWPLAYER_MEDIA_MUTE,onPlaylist:i.JWPLAYER_PLAYLIST_LOADED,onPlaylistItem:i.JWPLAYER_PLAYLIST_ITEM,onPlaylistComplete:i.JWPLAYER_PLAYLIST_COMPLETE,onReady:i.API_READY,onResize:i.JWPLAYER_RESIZE,onComplete:i.JWPLAYER_MEDIA_COMPLETE,onSeek:i.JWPLAYER_MEDIA_SEEK,onTime:i.JWPLAYER_MEDIA_TIME,onVolume:i.JWPLAYER_MEDIA_VOLUME,onBeforePlay:i.JWPLAYER_MEDIA_BEFOREPLAY,onBeforeComplete:i.JWPLAYER_MEDIA_BEFORECOMPLETE,onDisplayClick:i.JWPLAYER_DISPLAY_CLICK,onControls:i.JWPLAYER_CONTROLS,onQualityLevels:i.JWPLAYER_MEDIA_LEVELS,onQualityChange:i.JWPLAYER_MEDIA_LEVEL_CHANGED,onCaptionsList:i.JWPLAYER_CAPTIONS_LIST,onCaptionsChange:i.JWPLAYER_CAPTIONS_CHANGED};
n.foreach(x,function(e){u[e]=l(x[e],d)});var k={onBuffer:a.BUFFERING,onPause:a.PAUSED,onPlay:a.PLAYING,onIdle:a.IDLE};return n.foreach(k,function(e){u[e]=l(k[e],o)}),u.remove=function(){if(!v)throw"Cannot call remove() before player is ready";g=[],r.destroyPlayer(this.id)},u.setup=function(t){if(e.embed){var n=s.getElementById(u.id);return n&&(t.fallbackDiv=n),n=u,g=[],r.destroyPlayer(n.id),n=e(u.id),n.config=t,new e.embed(n)}return u},u.registerPlugin=function(t,n,i,a){e.plugins.registerPlugin(t,n,i,a)
},u.setPlayer=function(e,t){f=e,u.renderingMode=t},u.detachMedia=function(){return"html5"==u.renderingMode?h("jwDetachMedia"):void 0},u.attachMedia=function(e){return"html5"==u.renderingMode?h("jwAttachMedia",e):void 0},u.dispatchEvent=function(e,t){if(p[e])for(var i=n.translateEventResponse(e,t),a=0;p[e].length>a;a++)if("function"==typeof p[e][a])try{p[e][a].call(this,i)}catch(s){n.log("There was an error calling back an event handler")}},u.dispatchInstreamEvent=function(e){y&&y.dispatchEvent(e,arguments)
},u.callInternal=h,u.playerReady=function(e){for(v=!0,f||u.setPlayer(s.getElementById(e.id)),u.container=s.getElementById(u.id),n.foreach(p,function(e){c(f,e)}),d(i.JWPLAYER_PLAYLIST_ITEM,function(){b={}}),d(i.JWPLAYER_MEDIA_META,function(e){n.extend(b,e.metadata)}),u.dispatchEvent(i.API_READY);g.length>0;)h.apply(this,g.shift())},u.getItemMeta=function(){return b},u.getCurrentItem=function(){return h("jwGetPlaylistIndex")},u};r.selectPlayer=function(e){var i;return n.exists(e)||(e=0),e.nodeType?i=e:"string"==typeof e&&(i=s.getElementById(e)),i?(e=r.playerById(i.id))?e:r.addPlayer(new r(i)):"number"==typeof e?t[e]:null
},r.playerById=function(e){for(var n=0;t.length>n;n++)if(t[n].id==e)return t[n];return null},r.addPlayer=function(e){for(var n=0;t.length>n;n++)if(t[n]==e)return e;return t.push(e),e},r.destroyPlayer=function(e){for(var i,a=-1,r=0;t.length>r;r++)t[r].id==e&&(a=r,i=t[r]);return a>=0&&(e=i.id,r=s.getElementById(e+("flash"==i.renderingMode?"_wrapper":"")),n.clearCss&&n.clearCss("#"+e),r&&("html5"==i.renderingMode&&i.destroyPlayer(),i=s.createElement("div"),i.id=e,r.parentNode.replaceChild(i,r)),t.splice(a,1)),null
},e.playerReady=function(t){var n=e.api.playerById(t.id);n?n.playerReady(t):e.api.selectPlayer(t.id).playerReady(t)}}(jwplayer),function(e){e.api.instream=function(e,t,n,i){this.play=function(e){t.jwInstreamPlay(e)},this.pause=function(e){t.jwInstreamPause(e)},this.destroy=function(){t.jwInstreamDestroy()},e.callInternal("jwLoadInstream",n,i?i:{})}}(jwplayer),function(e){var t=e.api,n=t.selectPlayer;t.selectPlayer=function(t){return(t=n(t))?t:{registerPlugin:function(t,n,i){e.plugins.registerPlugin(t,n,i)
}}}}(jwplayer)),define("jwplayer",function(){});var swfobject=function(){function e(){if(!U){try{var e=R.getElementsByTagName("body")[0].appendChild(v("span"));e.parentNode.removeChild(e)}catch(t){return}U=!0;for(var n=j.length,i=0;n>i;i++)j[i]()}}function t(e){U?e():j[j.length]=e}function n(e){if(typeof O.addEventListener!=_)O.addEventListener("load",e,!1);else if(typeof R.addEventListener!=_)R.addEventListener("load",e,!1);else if(typeof O.attachEvent!=_)g(O,"onload",e);else if("function"==typeof O.onload){var t=O.onload;
O.onload=function(){t(),e()}}else O.onload=e}function i(){B?a():s()}function a(){var e=R.getElementsByTagName("body")[0],t=v(T);t.setAttribute("type",L);var n=e.appendChild(t);if(n){var i=0;(function(){if(typeof n.GetVariable!=_){var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),W.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(10>i)return i++,setTimeout(arguments.callee,10),void 0;e.removeChild(t),n=null,s()})()}else s()}function s(){var e=V.length;if(e>0)for(var t=0;e>t;t++){var n=V[t].id,i=V[t].callbackFn,a={success:!1,id:n};
if(W.pv[0]>0){var s=f(n);if(s)if(!y(V[t].swfVersion)||W.wk&&312>W.wk)if(V[t].expressInstall&&l()){var d={};d.data=V[t].expressInstall,d.width=s.getAttribute("width")||"0",d.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(d.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(d.align=s.getAttribute("align"));for(var h={},u=s.getElementsByTagName("param"),p=u.length,m=0;p>m;m++)"movie"!=u[m].getAttribute("name").toLowerCase()&&(h[u[m].getAttribute("name")]=u[m].getAttribute("value"));
o(d,h,n,i)}else c(s),i&&i(a);else w(n,!0),i&&(a.success=!0,a.ref=r(n),i(a))}else if(w(n,!0),i){var v=r(n);v&&typeof v.SetVariable!=_&&(a.success=!0,a.ref=v),i(a)}}}function r(e){var t=null,n=f(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=_)t=n;else{var i=n.getElementsByTagName(T)[0];i&&(t=i)}return t}function l(){return!H&&y("6.0.65")&&(W.win||W.mac)&&!(W.wk&&312>W.wk)}function o(e,t,n,i){H=!0,C=i||null,A={success:!1,id:n};var a=f(n);if(a){"OBJECT"==a.nodeName?(k=d(a),S=null):(k=a,S=n),e.id=E,(typeof e.width==_||!/%$/.test(e.width)&&310>parseInt(e.width,10))&&(e.width="310"),(typeof e.height==_||!/%$/.test(e.height)&&137>parseInt(e.height,10))&&(e.height="137"),R.title=R.title.slice(0,47)+" - Flash Player Installation";
var s=W.ie&&W.win?"ActiveX":"PlugIn",r="MMredirectURL="+(""+O.location).replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+R.title;if(typeof t.flashvars!=_?t.flashvars+="&"+r:t.flashvars=r,W.ie&&W.win&&4!=a.readyState){var l=v("div");n+="SWFObjectNew",l.setAttribute("id",n),a.parentNode.insertBefore(l,a),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}h(e,t,n)}}function c(e){if(W.ie&&W.win&&4!=e.readyState){var t=v("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(d(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)
}()}else e.parentNode.replaceChild(d(e),e)}function d(e){var t=v("div");if(W.win&&W.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(T)[0];if(n){var i=n.childNodes;if(i)for(var a=i.length,s=0;a>s;s++)1==i[s].nodeType&&"PARAM"==i[s].nodeName||8==i[s].nodeType||t.appendChild(i[s].cloneNode(!0))}}return t}function h(e,t,n){var i,a=f(n);if(W.wk&&312>W.wk)return i;if(a)if(typeof e.id==_&&(e.id=n),W.ie&&W.win){var s="";for(var r in e)e[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?t.movie=e[r]:"styleclass"==r.toLowerCase()?s+=' class="'+e[r]+'"':"classid"!=r.toLowerCase()&&(s+=" "+r+'="'+e[r]+'"'));
var l="";for(var o in t)t[o]!=Object.prototype[o]&&(l+='<param name="'+o+'" value="'+t[o]+'" />');a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+l+"</object>",q[q.length]=e.id,i=f(e.id)}else{var c=v(T);c.setAttribute("type",L);for(var d in e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?c.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&c.setAttribute(d,e[d]));for(var h in t)t[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&u(c,h,t[h]);a.parentNode.replaceChild(c,a),i=c
}return i}function u(e,t,n){var i=v("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function p(e){var t=f(e);t&&"OBJECT"==t.nodeName&&(W.ie&&W.win?(t.style.display="none",function(){4==t.readyState?m(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function m(e){var t=f(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function f(e){var t=null;try{t=R.getElementById(e)}catch(n){}return t}function v(e){return R.createElement(e)
}function g(e,t,n){e.attachEvent(t,n),F[F.length]=[e,t,n]}function y(e){var t=W.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function b(e,t,n,i){if(!W.ie||!W.mac){var a=R.getElementsByTagName("head")[0];if(a){var s=n&&"string"==typeof n?n:"screen";if(i&&(I=null,P=null),!I||P!=s){var r=v("style");r.setAttribute("type","text/css"),r.setAttribute("media",s),I=a.appendChild(r),W.ie&&W.win&&typeof R.styleSheets!=_&&R.styleSheets.length>0&&(I=R.styleSheets[R.styleSheets.length-1]),P=s
}W.ie&&W.win?I&&typeof I.addRule==T&&I.addRule(e,t):I&&typeof R.createTextNode!=_&&I.appendChild(R.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if(z){var n=t?"visible":"hidden";U&&f(e)?f(e).style.visibility=n:b("#"+e,"visibility:"+n)}}function x(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=_?encodeURIComponent(e):e}var k,S,C,A,I,P,_="undefined",T="object",M="Shockwave Flash",D="ShockwaveFlash.ShockwaveFlash",L="application/x-shockwave-flash",E="SWFObjectExprInst",N="onreadystatechange",O=window,R=document,$=navigator,B=!1,j=[i],V=[],q=[],F=[],U=!1,H=!1,z=!0,W=function(){var e=typeof R.getElementById!=_&&typeof R.getElementsByTagName!=_&&typeof R.createElement!=_,t=$.userAgent.toLowerCase(),n=$.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),a=n?/mac/.test(n):/mac/.test(t),s=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,r=!1,l=[0,0,0],o=null;
if(typeof $.plugins!=_&&typeof $.plugins[M]==T)o=$.plugins[M].description,!o||typeof $.mimeTypes!=_&&$.mimeTypes[L]&&!$.mimeTypes[L].enabledPlugin||(B=!0,r=!1,o=o.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),l[0]=parseInt(o.replace(/^(.*)\..*$/,"$1"),10),l[1]=parseInt(o.replace(/^.*\.(.*)\s.*$/,"$1"),10),l[2]=/[a-zA-Z]/.test(o)?parseInt(o.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof O.ActiveXObject!=_)try{var c=new ActiveXObject(D);c&&(o=c.GetVariable("$version"),o&&(r=!0,o=o.split(" ")[1].split(","),l=[parseInt(o[0],10),parseInt(o[1],10),parseInt(o[2],10)]))
}catch(d){}return{w3:e,pv:l,wk:s,ie:r,win:i,mac:a}}();return function(){W.w3&&((typeof R.readyState!=_&&"complete"==R.readyState||typeof R.readyState==_&&(R.getElementsByTagName("body")[0]||R.body))&&e(),U||(typeof R.addEventListener!=_&&R.addEventListener("DOMContentLoaded",e,!1),W.ie&&W.win&&(R.attachEvent(N,function(){"complete"==R.readyState&&(R.detachEvent(N,arguments.callee),e())}),O==top&&function(){if(!U){try{R.documentElement.doScroll("left")}catch(t){return setTimeout(arguments.callee,0),void 0
}e()}}()),W.wk&&function(){return U?void 0:/loaded|complete/.test(R.readyState)?(e(),void 0):(setTimeout(arguments.callee,0),void 0)}(),n(e)))}(),function(){W.ie&&W.win&&window.attachEvent("onunload",function(){for(var e=F.length,t=0;e>t;t++)F[t][0].detachEvent(F[t][1],F[t][2]);for(var n=q.length,i=0;n>i;i++)p(q[i]);for(var a in W)W[a]=null;W=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}(),{registerObject:function(e,t,n,i){if(W.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=n,a.callbackFn=i,V[V.length]=a,w(e,!1)
}else i&&i({success:!1,id:e})},getObjectById:function(e){return W.w3?r(e):void 0},embedSWF:function(e,n,i,a,s,r,c,d,u,p){var m={success:!1,id:n};W.w3&&!(W.wk&&312>W.wk)&&e&&n&&i&&a&&s?(w(n,!1),t(function(){i+="",a+="";var t={};if(u&&typeof u===T)for(var f in u)t[f]=u[f];t.data=e,t.width=i,t.height=a;var v={};if(d&&typeof d===T)for(var g in d)v[g]=d[g];if(c&&typeof c===T)for(var b in c)typeof v.flashvars!=_?v.flashvars+="&"+b+"="+c[b]:v.flashvars=b+"="+c[b];if(y(s)){var x=h(t,v,n);t.id==n&&w(n,!0),m.success=!0,m.ref=x
}else{if(r&&l())return t.data=r,o(t,v,n,p),void 0;w(n,!0)}p&&p(m)})):p&&p(m)},switchOffAutoHideShow:function(){z=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:y,createSWF:function(e,t,n){return W.w3?h(e,t,n):void 0},showExpressInstall:function(e,t,n,i){W.w3&&l()&&o(e,t,n,i)},removeSWF:function(e){W.w3&&p(e)},createCSS:function(e,t,n,i){W.w3&&b(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=R.location.search||R.location.hash;
if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return x(t);for(var n=t.split("&"),i=0;n.length>i;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return x(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(H){var e=f(E);e&&k&&(e.parentNode.replaceChild(k,e),S&&(w(S,!0),W.ie&&W.win&&(k.style.display="block")),C&&C(A)),H=!1}}}}();define("swfobject",function(){}),define("plex/view/players/VideoPlayerView",["hb!templates/players/VideoPlayerView.tpl","plex/control/Dispatcher","plex/control/utils/TranscodeUtil","plex/control/utils/MediaUtil","plex/control/utils/BrowserDetect","plex/control/utils/LogUtil","plex/model/AppModel","plex/model/SettingsModel","plex/view/BaseView","plex/view/modals/SelectMediaModal","plex/view/modals/SelectOffsetModal","plex/view/modals/ShareModal","plex/view/modals/RecommendModal","plex/view/lists/media/EpisodeTileList","jquery","jwplayer","swfobject"],function(e,t,n,i,a,s,r,l,o,c,d,h,u,p,m){jwplayer.key="fv2ELs9q2gEZxE9uuiAGfhbE9Qhc4DyhZjt1j0GaxUI=";
var f={mp4:'video/mp4; codecs="avc1.42E01E"',webm:"video/webm",mkv:"video/webm",ogg:"video/ogg",hls:"application/x-mpegURL"},v=o.extend({className:"container container-full",transcodeServer:null,media:null,part:null,offset:0,volume:100,player:null,url:null,session:null,episodeList:null,html5:!1,jwplayerReady:!1,timelineInterval:null,pingInterval:null,events:{"click .share-btn":"onShareClick","click .recommend-btn":"onRecommendClick","click .details-btn":"onDetailsClick","click .episode a":"onEpisodeClick"},initialize:function(e){_.bindAll(this,"timeline","ping","onTranscodeSuccess","onTranscodeError","onReady","onPlay","onTime","onPause","onIdle","onFullscreen","onVolume","onEnded"),this.offset=e.offset,this.transcodeServer="myPlex"===this.model.server.id?r.get("primaryServer"):this.model.server,e.collection&&(this.episodeList=this.registerView(new p({model:this.model,collection:this.collection}))),this.volume=l.get("videoVolume"),this.addBinding(t,"shortcut:playPause",this.playPause),this.addBinding(t,"shortcut:decreaseVolume",this.onDecreaseVolume),this.addBinding(t,"shortcut:increaseVolume",this.onIncreaseVolume),this.addBinding(t,"shortcut:seekBackward",this.onSeekBackward),this.addBinding(t,"shortcut:seekForward",this.onSeekForward),this.addBinding(t,"shortcut:stepBackward",this.onStepBackward),this.addBinding(t,"shortcut:stepForward",this.onStepForward),this.selectMedia()
},render:function(t,n){if(!t&&!n)return this;var i=r.get("myPlex");return this.$el.html(e({serverID:this.transcodeServer.id,serverObj:this.transcodeServer,sectionID:this.model.section?this.model.section.id:0,media:this.model.toJSON(),showHTML5:t,showFlash:n,showShare:i.get("signedIn"),showRecommend:i.get("signedIn"),url:this.url})),this.episodeList&&this.$(".video-more-details").append(this.episodeList.render().el),this},destroy:function(){if(this.timelineInterval&&(clearInterval(this.timelineInterval),this.timelineInterval=null,this.timeline("stopped")),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.html5){var e=this.$("#video-player");
e.off("play",this.onPlay),e.off("timeupdate",this.onTime),e.off("pause",this.onPause),e.off("ended",this.onEnded)}else this.jwplayerReady&&jwplayer("video-player").remove();if(this.session){var t;t=this.transcodeServer.supports("universalTranscoder")?"/video/:/transcode/universal/stop?session="+this.session:"/video/:/transcode/segmented/stop?session="+this.session,m.ajax(this.transcodeServer.getAjaxOptions(t))}o.prototype.destroy.call(this)},selectMedia:function(){var e=this.model.get("Media");if(e.length>1)if(l.get("highestResolution"))s.log("automatically selecting highest resolution"),this.media=_.first(e),this.selectOffset();
else{s.log("waiting for resolution selection");var n=new c({media:e}),i=_.bind(function(e){return n.off("select:media",i),null===e?(t.trigger("navigate:back"),void 0):(this.media=e,this.selectOffset(),void 0)},this);n.on("select:media",i),r.set("modal",n)}else this.media=_.first(e),this.selectOffset()},selectOffset:function(){if(this.part||(this.part=_.first(this.media.Part)),!this.media||!this.part)return _.defer(function(){t.trigger("navigate:error","Playback of this video is not supported.")}),void 0;
if(this.offset)return this.offset=i.getRelativeOffset(this.media,this.part,this.offset)/1e3,this.resolveIndirect(),void 0;var e=this.model.get("viewOffset")||0;if(e){var n=new d({offset:e}),a=_.bind(function(e){return n.off("select:offset",a),null===e?(t.trigger("navigate:back"),void 0):(this.part=i.getPartByAbsoluteOffset(this.media,e),this.offset=i.getRelativeOffset(this.media,this.part,e)/1e3,this.resolveIndirect(),void 0)},this);n.on("select:offset",a),r.set("modal",n)}else this.offset=0,this.resolveIndirect()
},resolveIndirect:function(){t.trigger("command:ShowLoading",!0),this.model.resolveIndirect(this.media,this.part).always(function(){t.trigger("command:ShowLoading",!1)}).done(_.bind(this.selectPlayMethod,this)).fail(_.bind(function(){t.trigger("navigate:redirect",this.model.get("url"))},this))},selectPlayMethod:function(){var e=this.canDirectPlay(),i=this.transcodeServer.get("transcoderVideo");if(s.log("playing "+this.part.key),s.log("direct play: "+e),"webkit"===this.media.protocol)return this.redirect(),void 0;
if(e){var a=this.model.server.resolveUrl(this.part.key,!1,!0);/youtube.com/.test(this.part.key)&&"flv"===this.part.container&&(a=this.part.postURL),this.play(a)}else i?n.video(this.transcodeServer,this.model,this.media,this.part,this.onTranscodeSuccess,this.onTranscodeError):_.defer(function(){t.trigger("navigate:error","This media server does not support transcoding.")})},redirect:function(){var e=this.model.get("url");if(!e){var n=this.part.key.match(/\/webkit\?url=([^&]+)/);n&&n.length>1&&(e=decodeURIComponent(n[1]))
}t.trigger("navigate:redirect",e)},getPlayer:function(){var e;if(this.html5){var t=this.$("#video-player");if(!t.length)return;e=t[0]}else if(e=jwplayer(),!e.id)return;return e},play:function(e){var n=this.canPlayFlash();s.log("html5: "+this.html5),s.log("flash: "+n),this.render(this.html5,n),_.defer(_.bind(function(){if(this.html5){var i=this.$("#video-player");i.on("play",this.onPlay),i.on("timeupdate",this.onTime),i.on("pause",this.onPause),i.on("volumechange",this.onVolume),i.on("ended",this.onEnded),i[0].src=e,i[0].volume=this.volume
}else n?jwplayer("video-player").setup({file:e,skin:"swf/jwplayer/plex.xml",width:940,height:this.calculateHeight(940),stretching:"exactfit",volume:100,mute:!1,autostart:!0,events:{onReady:this.onReady,onPlay:this.onPlay,onTime:this.onTime,onPause:this.onPause,onIdle:this.onIdle,onFullscreen:this.onFullscreen,onVolume:this.onVolume,onComplete:this.onEnded}}):t.trigger("navigate:error","The Flash Player or a browser that supports HLS is required to play videos.")},this))},playPause:function(){var e=this.getPlayer();
e&&(this.html5?e.paused?e.play():e.pause():e.play())},seek:function(e){var t=this.getPlayer();t&&(this.html5?(e=Math.min(Math.max(e,0),t.duration),t.currentTime=e):(e=Math.min(Math.max(e,0),t.getDuration()),t.seek(e)))},calculateHeight:function(e){var t=this.model.get("Media")[0];return t.aspectRatio?Math.round(e/t.aspectRatio):Math.round(e/(16/9))},timeline:function(e){var t=this.model.server.get("shared"),n=this.model.server.get("multiuser"),a=this.model.get("viewOffset"),r=this.media.duration;
if((!t||n)&&this.model.get("ratingKey")){var l=this.getPlayer();if(l){if(this.html5){var o=Math.round(1e3*l.currentTime);a=i.getAbsoluteOffset(this.media,this.part,o),r||(r=Math.round(1e3*l.duration)),e||(e=l.ended?"stopped":l.paused?"paused":"playing")}else{var c=Math.round(1e3*l.getPosition());if(a=i.getAbsoluteOffset(this.media,this.part,c),r||(r=Math.round(1e3*l.getDuration())),!e)switch(e=l.getState()){case"BUFFERING":e="buffering";break;case"PLAYING":e="playing";break;case"PAUSED":e="paused";
break;case"IDLE":e="stopped"}}a>r&&(a=r),this.model.set("viewOffset",a);var d={time:a,duration:r,state:e,key:this.model.get("key"),ratingKey:this.model.get("ratingKey")};s.log("timeline: "+a+"/"+r);var h="/:/timeline?"+m.param(d);m.ajax(this.transcodeServer.getAjaxOptions(h))}}},ping:function(){if(this.session){s.log("ping");var e;e=this.transcodeServer.supports("universalTranscoder")?"/video/:/transcode/universal/ping?session="+this.session:"/video/:/transcode/segmented/ping?session="+this.session,m.ajax(this.transcodeServer.getAjaxOptions(e))
}},canDirectPlay:function(){var e=this.canPlayType(f.hls)||"Android"===a.OS,t=f[this.media.container],n=this.transcodeServer.get("remote")?l.get("remoteQuality"):l.get("quality");if(this.html5=e,(0>n||n>=i.bitrates.length)&&(this.transcodeServer.get("remote")?(n=l.defaults.remoteQuality,l.save("remoteQuality",n)):(n=l.defaults.quality,l.save("quality",n))),!l.get("directPlay"))return s.log("direct play is disabled"),!1;if(this.hasSubtitles())return s.log("subtitles are selected"),!1;if(this.media.bitrate>i.bitrates[n])return s.log("video bitrate ("+this.media.bitrate+") exceeds quality ("+n+")"),!1;
if("mkv"===this.media.container&&("vp8"!==this.media.videoCodec||"vorbis"!==this.media.audioCodec))return s.log("codec unsupported by direct play"),s.log("container: "+this.media.container),s.log("video codec: "+this.media.videoCodec),s.log("audio codec: "+this.media.audioCodec),!1;var r=/^aac$/;return l.get("directPlayAC3")&&(r=/^(aac|ac3)$/),"mp4"!==this.media.container||this.media.optimizedForStreaming&&"h264"===this.media.videoCodec&&r.test(this.media.audioCodec)?"hls"===this.media.protocol?!0:"flv"===this.media.container?(this.html5=!1,!0):t&&this.canPlayType(t)?(this.html5=!0,!0):!1:(s.log("codec unsupported by direct play"),s.log("container: "+this.media.container),s.log("video codec: "+this.media.videoCodec),s.log("audio codec: "+this.media.audioCodec),s.log("web optimized: "+this.media.optimizedForStreaming),!1)
},canPlayType:function(e){var t=document.createElement("video");return!(!t.canPlayType||!t.canPlayType(e).replace(/^no$/,""))},canPlayFlash:function(){return swfobject.hasFlashPlayerVersion("10")},hasSubtitles:function(){var e=this.model.getStreams(3),t=!1;return _.each(e,function(e){return e.selected?(t=!0,!1):void 0}),t},onDecreaseVolume:function(){var e,t=this.getPlayer();t&&(this.html5?(e=t.volume,e=Math.round(10*(e-.1))/10,e=Math.max(e,0),t.volume=e):(e=t.getVolume(),e=Math.max(e-10,0),t.setVolume(e)))
},onIncreaseVolume:function(){var e,t=this.getPlayer();t&&(this.html5?(e=t.volume,e=Math.round(10*(e+.1))/10,e=Math.min(e,1),t.volume=e):(e=t.getVolume(),e=Math.min(e+10,100),t.setVolume(e)))},onSeekBackward:function(){var e=this.getPlayer();e&&(this.html5?this.seek(e.currentTime-10):this.seek(e.getPosition()-10))},onSeekForward:function(){var e=this.getPlayer();e&&(this.html5?this.seek(e.currentTime+10):this.seek(e.getPosition()+10))},onStepBackward:function(){var e=this.getPlayer();e&&(this.html5?this.seek(e.currentTime-.1*e.duration):this.seek(e.getPosition()-.1*e.getDuration()))
},onStepForward:function(){var e=this.getPlayer();e&&(this.html5?this.seek(e.currentTime+.1*e.duration):this.seek(e.getPosition()+.1*e.getDuration()))},onTranscodeSuccess:function(e){this.url=e,this.session=r.get("clientID"),this.play(e)},onTranscodeError:function(){t.trigger("navigate:error","There was an error attempting to play this video.")},onReady:function(){this.jwplayerReady=!0,jwplayer().setVolume(100*this.volume)},onPlay:function(){this.timelineInterval||(this.timelineInterval=setInterval(this.timeline,1e4)),this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null),this.timeline()
},onTime:function(e){if(this.offset){s.log("resuming at "+this.offset);var t=this.offset;this.offset=null,this.html5&&e.target.pause();var n=0,i=30,a=10,r=_.bind(function(){var l;if(!(++n>i)){if(this.html5)l=e.target.currentTime;else{if(!jwplayer().id)return;l=jwplayer().getPosition()}a>l&&t>2*a?(s.log("delayed resume "+n+" at "+t),this.seek(t),_.delay(r,500)):2*a>=t?(s.log("delayed resume at "+t),this.seek(t),this.html5&&e.target.play()):this.html5&&e.target.play()}},this);r()}},onPause:function(){this.timeline(),this.pingInterval=setInterval(this.ping,3e4)
},onIdle:function(){this.timelineInterval&&(clearInterval(this.timelineInterval),this.timelineInterval=null),this.pingInterval=setInterval(this.ping,3e4)},onFullscreen:function(e){e.fullscreen?jwplayer().setStretching("uniform"):jwplayer().setStretching("exactfit")},onVolume:function(e){if(this.html5){var t=this.$("#video-player")[0];this.volume=t.volume}else this.volume=e.volume/100;l.save("videoVolume",this.volume)},onEnded:function(){s.log("ended"),this.timeline(),this.timelineInterval&&(clearInterval(this.timelineInterval),this.timelineInterval=null);
var e=this.media.Part;if(e.length>1){var t=_.indexOf(e,this.part);if(e.length>t+1)return s.log("continuing to part "+(t+2)),this.part=e[t+1],this.resolveIndirect(),void 0}this.model.set("viewOffset",0),this.model.set("viewCount",1)},onShareClick:function(e){e.preventDefault(),r.set("modal",new h({model:this.model}))},onRecommendClick:function(e){e.preventDefault(),r.set("modal",new u({model:this.model}))},onDetailsClick:function(e){e.preventDefault(),m(e.target).toggleClass("selected"),this.$(".video-more-details").toggleClass("open")
},onEpisodeClick:function(){this.session=null}});return v}),define("hb!templates/channels/MyChannelsView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l,o,c="",d=this,h=n.helperMissing,u=this.escapeExpression,p="function";return c+='<div id="channels-container" class="well">\n	<div class="well-header">\n		<ul class="subnav-list well-header-list">\n			<li><a class="all-filter channel-filter ',o={hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a},r=n.if_eq,l=r?r.call(t,t.view,"all",o):h.call(t,"if_eq",t.view,"all",o),(l||0===l)&&(c+=l),c+='" href="#">',o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"All",o):h.call(t,"t","All",o)))+'</a></li>\n			<li><a class="video-filter channel-filter ',o={hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a},r=n.if_eq,l=r?r.call(t,t.view,"unwatched",o):h.call(t,"if_eq",t.view,"unwatched",o),(l||0===l)&&(c+=l),c+='" href="#"><span class="count">',(l=n.video)?l=l.call(t,{hash:{},data:a}):(l=t.video,l=typeof l===p?l.apply(t):l),c+=u(l)+"</span> ",o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Video",o):h.call(t,"t","Video",o)))+'</a></li>\n			<li><a class="music-filter channel-filter ',o={hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a},r=n.if_eq,l=r?r.call(t,t.view,"watched",o):h.call(t,"if_eq",t.view,"watched",o),(l||0===l)&&(c+=l),c+='" href="#"><span class="count">',(l=n.music)?l=l.call(t,{hash:{},data:a}):(l=t.music,l=typeof l===p?l.apply(t):l),c+=u(l)+"</span> ",o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Music",o):h.call(t,"t","Music",o)))+'</a></li>\n			<li><a class="photo-filter channel-filter ',o={hash:{},inverse:d.noop,fn:d.program(1,s,a),data:a},r=n.if_eq,l=r?r.call(t,t.view,"watched",o):h.call(t,"if_eq",t.view,"watched",o),(l||0===l)&&(c+=l),c+='" href="#"><span class="count">',(l=n.photo)?l=l.call(t,{hash:{},data:a}):(l=t.photo,l=typeof l===p?l.apply(t):l),c+=u(l)+"</span> ",o={hash:{},data:a},c+=u((r=n.t,r?r.call(t,"Photo",o):h.call(t,"t","Photo",o)))+"</a></li>\n		</ul>\n	</div>\n</div>\n"
})}),define("hb!templates/channels/ChannelNavView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+="\n				",a={hash:{},data:t},s+=p((i=n.t,i?i.call(e,(i=e.server,null==i||i===!1?i:i.friendlyName),20,a):u.call(e,"t",(i=e.server,null==i||i===!1?i:i.friendlyName),20,a)))+"\n			"}function r(e,t){var i,a,s="";return s+="\n				",a={hash:{},data:t},s+=p((i=n.t,i?i.call(e,(i=e.server,null==i||i===!1?i:i.name),20,a):u.call(e,"t",(i=e.server,null==i||i===!1?i:i.name),20,a)))+"\n			"
}function l(){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var o,c,d,h="",u=n.helperMissing,p=this.escapeExpression,m=this;return h+='<ul class="subnav-actions">\n	<li>\n		<span class="subnav-action-label source-title">\n			',c=n["if"].call(t,(o=t.server,null==o||o===!1?o:o.friendlyName),{hash:{},inverse:m.program(3,r,a),fn:m.program(1,s,a),data:a}),(c||0===c)&&(h+=c),h+='\n		</span>\n	</li>\n	<li>\n		<button type="button" class="update-btn btn btn-inverse btn-icon"><i class="glyphicon circle-arrow-top"></i> <span class="btn-icon-label">',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Check for Updates",d):u.call(t,"t","Check for Updates",d)))+'</span></button>\n	</li>\n</ul>\n\n<ul class="subnav-list">\n	<li><i class="subnav-icon glyphicon imac"></i></li>\n	<li><a class="gray ',d={hash:{},inverse:m.noop,fn:m.program(5,l,a),data:a},o=n.if_eq,c=o?o.call(t,t.active,"myChannels",d):u.call(t,"if_eq",t.active,"myChannels",d),(c||0===c)&&(h+=c),h+='" href="#!/channels">',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"My Channels",d):u.call(t,"t","My Channels",d)))+'</a></li>\n	<li><a class="gray ',d={hash:{},inverse:m.noop,fn:m.program(5,l,a),data:a},o=n.if_eq,c=o?o.call(t,t.active,"directory",d):u.call(t,"if_eq",t.active,"directory",d),(c||0===c)&&(h+=c),h+='" href="#!/directory">',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Directory",d):u.call(t,"t","Directory",d)))+"</a></li>\n</ul>\n"
})}),define("plex/view/channels/ChannelNavView",["hb!templates/channels/ChannelNavView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","jquery"],function(e,t,n,i,a){var s=i.extend({className:"subnav-container",active:null,events:{"click .update-btn":"onCheckUpdatesClick"},initialize:function(e){this.active=e.active,this.addBinding(n,"change:primaryServer",this.onPrimaryServerChange)},render:function(){return this.$el.html(e({active:this.active,server:this.model.toJSON()})),this
},onPrimaryServerChange:function(e,n){t.trigger("navigate:"+this.active,n.id)},onCheckUpdatesClick:function(e){e.preventDefault();var n=a(e.currentTarget);if(!n.hasClass("active")){n.addClass("active");var i={server:this.model};t.trigger("command:UpdateChannel",i,function(){n.removeClass("active")})}}});return s}),define("hb!templates/lists/channels/items/ChannelListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";return s+='\n			<button type="button" class="settings-btn btn btn-primary btn-icon" rel="tooltip" title="',a={hash:{},data:t},s+=p((i=n.t,i?i.call(e,"Settings",a):u.call(e,"t","Settings",a)))+'"><i class="glyphicon cogwheel"></i></button>\n		'
}function r(e){var t,n="";return n+="\n		<h3>"+p((t=e.channel,t=null==t||t===!1?t:t.title,typeof t===m?t.apply(e):t))+"</h3>\n	"}function l(e){var t,n="";return n+="\n		<h3>"+p((t=e.channel,t=null==t||t===!1?t:t.name,typeof t===m?t.apply(e):t))+"</h3>\n	"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var o,c,d,h="",u=n.helperMissing,p=this.escapeExpression,m="function",f=this;return h+='<a href="#!/servers/',(o=n.serverID)?o=o.call(t,{hash:{},data:a}):(o=t.serverID,o=typeof o===m?o.apply(t):o),h+=p(o)+"/channels?key=",d={hash:{},data:a},h+=p((o=n.encodeUrl,o?o.call(t,(o=t.channel,null==o||o===!1?o:o.key),d):u.call(t,"encodeUrl",(o=t.channel,null==o||o===!1?o:o.key),d)))+'" class="well">\n	<div class="actions">\n		',c=n["if"].call(t,(o=t.channel,null==o||o===!1?o:o.hasPrefs),{hash:{},inverse:f.noop,fn:f.program(1,s,a),data:a}),(c||0===c)&&(h+=c),h+='\n		<button type="button" class="update-btn btn btn-icon" rel="tooltip" title="',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Update",d):u.call(t,"t","Update",d)))+'"><i class="glyphicon circle-arrow-top"></i></button>\n		<button type="button" class="uninstall-btn btn btn-danger btn-icon" rel="tooltip" title="',d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,"Uninstall",d):u.call(t,"t","Uninstall",d)))+'"><i class="glyphicon ban"></i></button>\n	</div>\n\n	<img class="poster channel-poster" data-original="',d={hash:{},data:a},h+=p((o=n.transcodeImage,o?o.call(t,t.serverObj,(o=t.channel,null==o||o===!1?o:o.thumb),t.thumbSize,t.thumbSize,d):u.call(t,"transcodeImage",t.serverObj,(o=t.channel,null==o||o===!1?o:o.thumb),t.thumbSize,t.thumbSize,d)))+'" src="img/posters/poster_square.png">\n\n	',c=n["if"].call(t,(o=t.channel,null==o||o===!1?o:o.title),{hash:{},inverse:f.program(5,l,a),fn:f.program(3,r,a),data:a}),(c||0===c)&&(h+=c),h+="\n\n	<h4>",d={hash:{},data:a},h+=p((o=n.t,o?o.call(t,(o=t.channel,null==o||o===!1?o:o.type),d):u.call(t,"t",(o=t.channel,null==o||o===!1?o:o.type),d)))+"</h4>\n</a>\n"
})}),define("plex/view/lists/channels/items/ChannelListItem",["hb!templates/lists/channels/items/ChannelListItem.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/model/ChannelModel","plex/model/collections/PreferenceCollection","plex/view/BaseView","plex/view/modals/ChannelSettingsModal","jquery"],function(e,t,n,i,a,s,r,l){var o=s.extend({tagName:"li",events:{"click .settings-btn":"onSettingsClick","click .update-btn":"onUpdateClick","click .uninstall-btn":"onUninstallClick"},render:function(){var t=window.devicePixelRatio?window.devicePixelRatio:1;
return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,channel:this.model.toJSON(),thumbSize:40*t})),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this},onSettingsClick:function(e){e.preventDefault();var t,s=new i({key:this.model.id},{server:this.model.server}),o=_.bind(function(){l(".tooltip").remove();var e=new r({model:s,collection:t});n.set("modal",e)},this),c=_.bind(function(){t=new a([],{server:s.server,url:s.get("settings")}),t.fetch().done(o)
},this);s.fetch().done(c)},onUpdateClick:function(e){e.preventDefault();var n={server:this.model.server,channel:this.model};t.trigger("command:UpdateChannel",n)},onUninstallClick:function(e){e.preventDefault();var n=function(){this.model.trigger("destroy",this.model,this.model.collection)};t.trigger("command:UninstallChannel",this.model,_.bind(n,this))}});return o}),define("plex/view/lists/channels/ChannelList",["plex/view/lists/BaseList","plex/view/lists/channels/items/ChannelListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"well-list channel-list",initialize:function(){this.setup(t),this.collection.url&&this.collection.fetch(),this.loadPosterThrottle=_.throttle(this.loadPoster,100)
},render:function(){return this.$el.empty(),this.populate(this.collection),this},addItem:function(){e.prototype.addItem.apply(this,arguments),this.loadPosterThrottle()},loadPoster:function(){_.defer(_.bind(function(){this.$(".channel-poster").lazyload({threshold:200})},this))}});return n}),define("plex/view/channels/MyChannelsView",["hb!templates/channels/MyChannelsView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/BaseView","plex/view/channels/ChannelNavView","plex/view/lists/channels/ChannelList","jquery"],function(e,t,n,i,a,s){var r=i.extend({className:"container container-full",view:"all",subnav:null,events:{"click .all-filter":"onAllClick","click .video-filter":"onVideoClick","click .music-filter":"onMusicClick","click .photo-filter":"onPhotoClick"},initialize:function(){this.listCollection=new Backbone.Collection(this.collection.all()),this.subnav=this.registerView(new a({model:this.collection.server,active:"myChannels"})),this.list=this.registerView(new s({collection:this.listCollection})),this.addBinding(this.collection,"reset",this.onReset),this.addBinding(this.collection,"destroy",this.onDestroy),this.collection.fetch()
},render:function(){var t=this.collection.videos().length,n=this.collection.music().length,i=this.collection.photos().length;return this.$el.html(e({serverID:this.collection.server.id,view:this.view,video:t,music:n,photo:i})),this.$el.prepend(this.subnav.render().el),this.$("#channels-container").append(this.list.render().el),this},updateCounts:function(){var e=this.collection.videos().length,t=this.collection.music().length,n=this.collection.photos().length;this.$(".video-filter > .count").text(e),this.$(".music-filter > .count").text(t),this.$(".photo-filter > .count").text(n)
},onReset:function(){this.listCollection.reset(this.collection.all()),this.updateCounts()},onDestroy:function(){this.updateCounts()},onAllClick:function(e){e.preventDefault(),this.view="all",this.$(".channel-filter").removeClass("active"),this.$(".all-filter").addClass("active"),this.listCollection.reset(this.collection.all())},onVideoClick:function(e){e.preventDefault(),this.view="video",this.$(".channel-filter").removeClass("active"),this.$(".video-filter").addClass("active"),this.listCollection.reset(this.collection.videos())
},onMusicClick:function(e){e.preventDefault(),this.view="music",this.$(".channel-filter").removeClass("active"),this.$(".music-filter").addClass("active"),this.listCollection.reset(this.collection.music())},onPhotoClick:function(e){e.preventDefault(),this.view="photo",this.$(".channel-filter").removeClass("active"),this.$(".photo-filter").addClass("active"),this.listCollection.reset(this.collection.photos())}});return r}),define("hb!templates/channels/ChannelDirectoryView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t,i){var a,s,l,o="";
return o+='\n				<li>\n					<a class="',l={hash:{},inverse:c.noop,fn:c.program(2,r,t),data:t},a=n.if_eq,s=a?a.call(e,i.activeFilter,e.key,l):d.call(e,"if_eq",i.activeFilter,e.key,l),(s||0===s)&&(o+=s),o+='" href="#!/directory?filter=',l={hash:{},data:t},o+=h((a=n.encodeUrl,a?a.call(e,e.key,l):d.call(e,"encodeUrl",e.key,l)))+'">\n						',l={hash:{},data:t},o+=h((a=n.t,a?a.call(e,e.title,l):d.call(e,"t",e.title,l)))+"\n					</a>\n				</li>\n			"}function r(){return"active"}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var l,o="",c=this,d=n.helperMissing,h=this.escapeExpression;return o+='<div id="directory-container" class="well">\n	<div class="well-header directory-header">\n		<ul class="subnav-list well-header-list directory-header-list">\n			',l=n.each.call(t,t.filters,{hash:{},inverse:c.noop,fn:c.programWithDepth(1,s,a,t),data:a}),(l||0===l)&&(o+=l),o+="\n		</ul>\n	</div>\n</div>\n"})}),define("hb!templates/lists/channels/items/ChannelDirectoryListItem.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};
var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<a href="#!/directory?filter=',r={hash:{},data:a},l+=c((s=n.encodeUrl,s?s.call(t,t.activeFilter,r):o.call(t,"encodeUrl",t.activeFilter,r)))+"&key=",r={hash:{},data:a},l+=c((s=n.encodeUrl,s?s.call(t,(s=t.directory,null==s||s===!1?s:s.key),r):o.call(t,"encodeUrl",(s=t.directory,null==s||s===!1?s:s.key),r)))+'">\n	',r={hash:{},data:a},l+=c((s=n.truncate,s?s.call(t,(s=t.directory,null==s||s===!1?s:s.title),40,r):o.call(t,"truncate",(s=t.directory,null==s||s===!1?s:s.title),40,r)))+"\n</a>\n"
})}),define("plex/view/lists/channels/items/ChannelDirectoryListItem",["hb!templates/lists/channels/items/ChannelDirectoryListItem.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/model/collections/PreferenceCollection","plex/view/BaseView","plex/view/modals/ChannelSettingsModal"],function(e,t,n,i,a,s){var r=a.extend({tagName:"li",events:{"click a":"onClick"},initialize:function(e){this.list=e.list,this.addBinding(this.model,"change",this.render)},render:function(){return this.$el.html(e({serverID:this.model.server.id,activeFilter:this.list.activeFilter,directory:this.model.toJSON()})),this
},onClick:function(e){if(/\/updates$/.test(this.model.id))e.preventDefault(),t.trigger("command:UpdateChannel",{server:this.model.server});else if(/\/prefs$/.test(this.model.id)){e.preventDefault();var a=new i([],{server:this.model.server,url:this.model.id});a.fetch().done(_.bind(function(){n.set("modal",new s({model:this.model,collection:a}))},this))}}});return r}),define("plex/view/lists/channels/ChannelDirectoryList",["plex/view/lists/BaseList","plex/view/lists/channels/items/ChannelDirectoryListItem"],function(e,t){var n=e.extend({tagName:"ul",className:"list media-list media-compact-list channel-directory-list",initialize:function(e){this.activeFilter=e.activeFilter,this.setup(t)
},render:function(){return this.$el.empty(),this.populate(this.collection),this}});return n}),define("plex/view/channels/ChannelDirectoryView",["hb!templates/channels/ChannelDirectoryView.tpl","plex/control/Dispatcher","plex/model/collections/ChannelCollection","plex/view/BaseView","plex/view/channels/ChannelNavView","plex/view/lists/channels/ChannelDirectoryList","plex/view/lists/channels/ChannelTileList","jquery"],function(e,t,n,i,a,s,r){var l=i.extend({className:"container container-full",subnav:null,channels:null,channelList:null,initialize:function(e){this.activeFilter=e.activeFilter||"/system/appstore/featured",this.activeKey=e.activeKey||this.activeFilter,this.subnav=this.registerView(new a({model:this.collection.server,active:"directory"})),this.channels=new n([],{server:this.collection.server,url:this.activeKey}),this.channels.fetch().done(_.bind(function(){this.channelList="Store:Info"===this.channels.viewGroup?this.registerView(new r({collection:this.channels})):this.registerView(new s({collection:this.channels,activeFilter:this.activeFilter})),this.$("#directory-container").append(this.channelList.render().el)
},this)).fail(function(){t.trigger("navigate:error","The channel directory is currently unavailable.")})},render:function(){return this.$el.html(e({activeFilter:this.activeFilter,filters:this.collection.toJSON()})),this.$el.prepend(this.subnav.render().el),this.channelList&&this.$("#directory-container").append(this.channelList.render().el),this}});return l}),define("hb!templates/channels/ChannelView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a,s="";
return s+='\n					<li>\n						<span class="search-container">\n							<form class="search-form">\n								<input type="text" class="input-dark input-search" placeholder="',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"Search",a):b.call(e,"t","Search",a)))+" ",a={hash:{},data:t},s+=w((i=n.truncate,i?i.call(e,(i=e.channel,null==i||i===!1?i:i.title),10,a):b.call(e,"truncate",(i=e.channel,null==i||i===!1?i:i.title),10,a)))+'" autocomplete="off" spellcheck="false">\n								<i class="glyphicon search"></i>\n							</form>\n						</span>\n					</li>\n				'
}function r(e,t){var i,a,s="";return s+='\n					<li>\n						<button type="button" class="settings-btn btn btn-primary btn-icon" rel="tooltip" title="',a={hash:{},data:t},s+=w((i=n.t,i?i.call(e,"Settings",a):b.call(e,"t","Settings",a)))+'"><i class="glyphicon cogwheel"></i></button>\n					</li>\n				'}function l(e,t){var i,a,s="";return s+="\n					",a={hash:{},data:t},s+=w((i=n.truncate,i?i.call(e,(i=e.channel,null==i||i===!1?i:i.title),40,a):b.call(e,"truncate",(i=e.channel,null==i||i===!1?i:i.title),40,a)))+"\n				"
}function o(e,t){var i,a,s,r="";return r+='\n					<a href="#!/servers/',(i=n.serverID)?i=i.call(e,{hash:{},data:t}):(i=e.serverID,i=typeof i===x?i.apply(e):i),r+=w(i)+"/channels?",a=n["if"].call(e,(i=e.channel,null==i||i===!1?i:i.key),{hash:{},inverse:k.program(10,d,t),fn:k.program(8,c,t),data:t}),(a||0===a)&&(r+=a),r+='">',s={hash:{},data:t},r+=w((i=n.truncate,i?i.call(e,(i=e.channel,null==i||i===!1?i:i.title),30,s):b.call(e,"truncate",(i=e.channel,null==i||i===!1?i:i.title),30,s)))+'</a>\n					<span class="secondary">',s={hash:{},data:t},r+=w((i=n.truncate,i?i.call(e,(i=e.channelMedia,null==i||i===!1?i:i.title),40,s):b.call(e,"truncate",(i=e.channelMedia,null==i||i===!1?i:i.title),40,s)))+"</span>\n				"
}function c(e,t){var i,a,s="";return s+="key=",a={hash:{},data:t},s+=w((i=n.encodeUrl,i?i.call(e,(i=e.channel,null==i||i===!1?i:i.key),a):b.call(e,"encodeUrl",(i=e.channel,null==i||i===!1?i:i.key),a)))}function d(e){var t,n="";return n+="identifier="+w((t=e.channel,t=null==t||t===!1?t:t.identifier,typeof t===x?t.apply(e):t))}function h(e,t,i){var a,s,r="";return r+="\n				",s={hash:{channelKey:(a=i.channel,null==a||a===!1?a:a.key),channelID:(a=i.channel,null==a||a===!1?a:a.identifier),itemType:"video",listType:i.listType,serverID:i.serverID,serverObj:i.serverObj},data:t},r+=w((a=n.partial,a?a.call(e,"adaptiveChannelListItem",s):b.call(e,"partial","adaptiveChannelListItem",s)))+"\n			"
}function u(e,t,i){var a,s,r="";return r+="\n				",s={hash:{channelKey:(a=i.channel,null==a||a===!1?a:a.key),channelID:(a=i.channel,null==a||a===!1?a:a.identifier),itemType:"track",listType:i.listType,serverID:i.serverID,serverObj:i.serverObj},data:t},r+=w((a=n.partial,a?a.call(e,"adaptiveChannelListItem",s):b.call(e,"partial","adaptiveChannelListItem",s)))+"\n			"}function p(e,t,i){var a,s,r="";return r+="\n				",s={hash:{channelKey:(a=i.channel,null==a||a===!1?a:a.key),channelID:(a=i.channel,null==a||a===!1?a:a.identifier),itemType:"photo",listType:i.listType,serverID:i.serverID,serverObj:i.serverObj},data:t},r+=w((a=n.partial,a?a.call(e,"adaptiveChannelListItem",s):b.call(e,"partial","adaptiveChannelListItem",s)))+"\n			"
}function m(e,t,i){var a,s,r="";return r+="\n				",s={hash:{channelKey:(a=i.channel,null==a||a===!1?a:a.key),channelID:(a=i.channel,null==a||a===!1?a:a.identifier),itemType:"directory",listType:i.listType,serverID:i.serverID,serverObj:i.serverObj},data:t},r+=w((a=n.partial,a?a.call(e,"adaptiveChannelListItem",s):b.call(e,"partial","adaptiveChannelListItem",s)))+"\n			"}function f(e,t){var i,a,s="";return s+='\n	<div class="fanart" style="background-image: url(',a={hash:{},data:t},s+=w((i=n.transcodeImage,i?i.call(e,e.serverObj,(i=e.channel,null==i||i===!1?i:i.art),1280,720,a):b.call(e,"transcodeImage",e.serverObj,(i=e.channel,null==i||i===!1?i:i.art),1280,720,a)))+');"></div>\n	<div class="fanart-overlay"></div>\n'
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var v,g,y="",b=n.helperMissing,w=this.escapeExpression,x="function",k=this;return y+='<div class="channel-details details">\n	<div class="well">\n		<div class="well-header">\n			<ul class="well-header-actions">\n				',g=n["if"].call(t,(v=t.channel,null==v||v===!1?v:v.search),{hash:{},inverse:k.noop,fn:k.program(1,s,a),data:a}),(g||0===g)&&(y+=g),y+="\n\n				",g=n["if"].call(t,(v=t.channel,null==v||v===!1?v:v.settings),{hash:{},inverse:k.noop,fn:k.program(3,r,a),data:a}),(g||0===g)&&(y+=g),y+="\n			</ul>\n\n			<h2>\n				",g=n["if"].call(t,t.isRoot,{hash:{},inverse:k.program(7,o,a),fn:k.program(5,l,a),data:a}),(g||0===g)&&(y+=g),y+='\n			</h2>\n		</div>\n\n		<ul class="',(g=n.listType)?g=g.call(t,{hash:{},data:a}):(g=t.listType,g=typeof g===x?g.apply(t):g),y+=w(g)+'">\n			',g=n.each.call(t,t.clips,{hash:{},inverse:k.noop,fn:k.programWithDepth(12,h,a,t),data:a}),(g||0===g)&&(y+=g),y+="\n\n			",g=n.each.call(t,t.tracks,{hash:{},inverse:k.noop,fn:k.programWithDepth(14,u,a,t),data:a}),(g||0===g)&&(y+=g),y+="\n\n			",g=n.each.call(t,t.photos,{hash:{},inverse:k.noop,fn:k.programWithDepth(16,p,a,t),data:a}),(g||0===g)&&(y+=g),y+="\n\n			",g=n.each.call(t,(v=t.channelMedia,null==v||v===!1?v:v.Directory),{hash:{},inverse:k.noop,fn:k.programWithDepth(18,m,a,t),data:a}),(g||0===g)&&(y+=g),y+="\n		</ul>\n	</div>\n</div>\n\n",g=n["if"].call(t,(v=t.channel,null==v||v===!1?v:v.art),{hash:{},inverse:k.noop,fn:k.program(20,f,a),data:a}),(g||0===g)&&(y+=g),y+="\n"
})}),define("plex/view/channels/ChannelView",["hb!templates/channels/ChannelView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/model/collections/PreferenceCollection","plex/view/KeyboardNavigationView","plex/view/modals/ChannelSettingsModal","jquery"],function(e,t,n,i,a,s,r){var l=a.extend({className:"container container-full",channel:null,listType:null,events:{"submit .search-form":"onSearchSubmit","click .settings-btn":"onSettingsClick","click .track a":"onTrackClick","click .photo a":"onPhotoClick"},initialize:function(e){this.channel=e.channel;
var i=this.model.get("message");i&&n.set("alert",{message:i}),this.listType=this.adaptList(),this.listType||t.trigger("navigate:back")},render:function(){return this.$el.html(e({serverID:this.model.server.id,serverURL:this.model.server.url(),serverObj:this.model.server,channel:this.channel.toJSON(),channelMedia:this.model.toJSON(),isRoot:this.channel.id===this.model.id,clips:this.model.get("clips").toJSON(),tracks:this.model.get("tracks").toJSON(),photos:this.model.get("photos").toJSON(),listType:this.listType})),this.$el.tooltip({selector:".btn-icon",placement:"bottom"}),this.loadPoster(),this
},adaptList:function(){var e="list media-list",t="tile-list media-tile-list",n="list media-list media-compact-list",i=this.model.get("viewGroup"),a=this.model.get("Directory"),s=this.model.get("clips").toJSON(),r=this.model.get("tracks").toJSON(),l=this.model.get("photos").toJSON(),o=_.compact([].concat(a,s,r,l));if(!o||!o.length)return null;if("Pictures"===i)return t;if("List"===i)return n;if(l&&l.length)return t;var c,d=0,h=0,u=!0;return o.length>100?n:(_.each(o,function(e){e.settings||e.search||(e.title&&(h+=e.title.length),c&&e.thumb!==c&&(u=!1),e.summary||d++,c=e.thumb)
}),u?n:d>o.length/2&&20>h/o.length?t:e)},loadPoster:function(){_.defer(_.bind(function(){this.$(".poster").lazyload({threshold:200})},this))},onSearchSubmit:function(e){e.preventDefault();var n=this.$(".input-search").val();n&&(this.channel.id?t.trigger("navigate:channelSearch",this.model.server.id,this.channel.id,this.channel.get("search"),n):t.trigger("navigate:channelSearchByIdentifier",this.model.server.id,this.channel.get("identifier"),this.channel.get("search"),n))},onSettingsClick:function(e){e.preventDefault();
var a=new i([],{server:this.model.server,url:this.channel.get("settings")}),r=new s({model:this.channel,collection:a}),o=_.bind(function(e){r.off("close",o),e&&this.model.fetch().done(_.bind(function(){n.set("view",new l({channel:this.channel,model:this.model}))},this)).fail(function(e,n){t.trigger("navigate:error","This channel is currently unavailable.",n)})},this),c=_.bind(function(){r.on("close",o),n.set("modal",r)});a.fetch().done(c)},onTrackClick:function(e){e.preventDefault();var n=this.model.get("tracks"),i=r(e.currentTarget).data("id");
t.trigger("play:music",n,n.get(i))},onPhotoClick:function(e){e.preventDefault();var n=this.model.get("photos"),i=r(e.currentTarget).data("id");t.trigger("show:photo",n,n.get(i))}});return l}),define("hb!templates/ErrorView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l="",o=n.helperMissing,c=this.escapeExpression;return l+='<i class="plex-icon-sad"></i>\n\n<h2 class="error-message">',r={hash:{},data:a},l+=c((s=n.t,s?s.call(t,t.message,r):o.call(t,"t",t.message,r)))+"</h2>\n"
})}),define("plex/view/ErrorView",["hb!templates/ErrorView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({className:"error-container container",error:null,initialize:function(e){if(this.message=e.message,this.error=e.error,this.error){switch(this.error.status){case 401:case 403:return this.message="You do not have permission to access this page.",void 0;case 500:return this.message="The media server responded with an error.",void 0}"abort"===e.error.statusText&&(this.message="The media server is not responding.")
}},render:function(){return this.$el.html(e({message:this.message})),this}});return n}),define("hb!templates/LoginView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a="";return a+='\n	<div class="error-container">\n		',i=n["if"].call(e,e.isUnavailable,{hash:{},inverse:p.noop,fn:p.program(2,r,t),data:t}),(i||0===i)&&(a+=i),a+="\n	</div>\n"}function r(e,t){var i,a,s="";return s+='\n			<i class="plex-icon-sad"></i>\n			<h2 class="error-message">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"This media server is unavailable to you.",a):h.call(e,"t","This media server is unavailable to you.",a)))+"<br>",a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Please check that you have permission to access this media server.",a):h.call(e,"t","Please check that you have permission to access this media server.",a)))+"</h2>\n		"
}function l(e,t){var i,a,s="";return s+='\n	<div class="well">\n		<form class="row-fluid login-form">\n			<div class="span3"></div>\n			<div class="span6 login-body">\n				<i class="plex-icon-myplex"></i>\n\n				<h3>',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Sign in to your",a):h.call(e,"t","Sign in to your",a)))+' <a href="'+u((i=e.myPlex,i=null==i||i===!1?i:i.url,typeof i===m?i.apply(e):i))+'">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"myPlex",a):h.call(e,"t","myPlex",a)))+"</a> ",a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"account",a):h.call(e,"t","account",a)))+'</h3>\n\n				<div class="control-group">\n					<input type="text" class="input-focusable span12" name="username" placeholder="',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"username or email",a):h.call(e,"t","username or email",a)))+'" tabindex="0">\n				</div>\n\n				<div class="control-group">\n					<input type="password" class="input-focusable span12" name="password" placeholder="',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"password",a):h.call(e,"t","password",a)))+'" tabindex="0">\n				</div>\n\n				<div class="control-group">\n					<button type="submit" class="btn btn-medium btn-primary pull-right" tabindex="0">',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Sign In",a):h.call(e,"t","Sign In",a)))+'</button>\n					<label>\n						<input type="checkbox" name="rememberMe" value="1" checked>\n						',a={hash:{},data:t},s+=u((i=n.t,i?i.call(e,"Remember Me",a):h.call(e,"t","Remember Me",a)))+"\n					</label>\n				</div>\n			</div>\n		</form>\n	</div>\n"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var o,c,d="",h=n.helperMissing,u=this.escapeExpression,p=this,m="function";return c=n["if"].call(t,(o=t.myPlex,null==o||o===!1?o:o.signedIn),{hash:{},inverse:p.program(4,l,a),fn:p.program(1,s,a),data:a}),(c||0===c)&&(d+=c),d+="\n"})}),define("plex/view/LoginView",["hb!templates/LoginView.tpl","plex/control/Dispatcher","plex/model/AppModel","plex/view/KeyboardNavigationView"],function(e,t,n,i){var a=i.extend({className:"login-container container",events:{"submit .login-form":"onSubmit"},initialize:function(){var e=n.get("myPlex");
e.get("signedIn")&&!n.get("isUnavailable")&&_.delay(function(){t.trigger("navigate:dashboard")},55)},render:function(){var t=n.get("myPlex");return this.$el.html(e({myPlex:t.toJSON(),isUnavailable:n.get("isUnavailable"),plexpassUrl:t.resolveUrl("/subscription/about"),signUpUrl:t.resolveUrl("/users/sign_up")})),this},postrender:function(){this.$("input[name=username]").focus()},onSubmit:function(e){e.preventDefault();var n=e.currentTarget,i=this.$("[type=submit]");if(!i.hasClass("active")){i.spinContents("small");
var a={username:n.username.value,password:n.password.value,rememberMe:n.rememberMe.value,silent:!0};a.success=_.bind(function(){i.spinContents(!1)},this),a.error=a.success,t.trigger("command:SignIn",a)}}});return a}),define("hb!templates/UnsupportedBrowserView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){return this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{},'<i class="plex-icon-sad"></i>\n\n<h2 class="error-message">\n	Sorry, this browser doesn\'t appear to be supported.<br>\n	See <a href="http://wiki.plexapp.com/index.php/UnsupportedBrowsers">the wiki</a> for more info.\n</h2>\n'
})}),define("plex/view/UnsupportedBrowserView",["hb!templates/UnsupportedBrowserView.tpl","plex/view/BaseView"],function(e,t){var n=t.extend({className:"error-container container",render:function(){return this.$el.html(e({})),this}});return n}),define("hb!templates/InfoView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){function s(e,t){var i,a="";return a+="\n		<p>\n			<strong>",(i=n.label)?i=i.call(e,{hash:{},data:t}):(i=e.label,i=typeof i===d?i.apply(e):i),a+=h(i)+":</strong> ",(i=n.value)?i=i.call(e,{hash:{},data:t}):(i=e.value,i=typeof i===d?i.apply(e):i),a+=h(i)+"\n		</p>\n	"
}this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var r,l,o,c="",d="function",h=this.escapeExpression,u=n.helperMissing,p=this;return c+='<div class="well">\n	<div class="well-header">\n		<h3>',o={hash:{},data:a},c+=h((r=n.t,r?r.call(t,"Info",o):u.call(t,"t","Info",o)))+"</h3>\n	</div>\n\n	",l=n.each.call(t,t.items,{hash:{},inverse:p.noop,fn:p.program(1,s,a),data:a}),(l||0===l)&&(c+=l),c+="\n</div>\n"})}),define("plex/view/InfoView",["hb!templates/InfoView.tpl","plex/model/DebugInfoModel","plex/view/BaseView"],function(e,t,n){var i={host:"Host",userAgent:"User Agent",browser:"Browser Info",clientVersion:"Bundle Version",isAuthorized:"Is Authorized",isAvailable:"Is Available",primaryServerUrl:"Server URL",primaryServerAuthToken:"Server Auth Token",primaryServerVersion:"Server Version",myPlexUrl:"myPlex URL",myPlexFeatures:"myPlex Subscriptions",myPlexUsername:"myPlex Username",myPlexAuthToken:"myPlex Auth Token"},a=n.extend({className:"container container-full",render:function(){var n=t.toJSON(),a=_.map(_.keys(n),function(e){return{label:i[e]||e,value:t.get(e)}
});return this.$el.html(e({items:a})),this}});return a}),define("hb!templates/LogView.tpl",["handlebars"],function(e){return e.template(function(e,t,n,i,a){this.compilerInfo=[3,">= 1.0.0-rc.4"],n=n||e.helpers,a=a||{};var s,r,l,o="",c=n.helperMissing,d=this.escapeExpression,h="function";return o+='<div class="well">\n	<!--\n		TODO(schuyler): On browsers with a filesystem API, we can probably offer this content as a download...\n	-->\n	<div class="well-header">\n		<h3>',l={hash:{},data:a},o+=d((s=n.t,s?s.call(t,"Logs",l):c.call(t,"t","Logs",l)))+'</h3>\n	</div>\n\n	<textarea class="input-logs">',(r=n.blob)?r=r.call(t,{hash:{},data:a}):(r=t.blob,r=typeof r===h?r.apply(t):r),o+=d(r)+"</textarea>\n</div>\n"
})}),define("plex/view/LogView",["hb!templates/LogView.tpl","plex/view/BaseView","plex/control/utils/LogUtil"],function(e,t,n){var i=t.extend({className:"container container-full",render:function(){var t=n.getLogsAsJSON(!0);return this.$el.html(e({blob:t})),this}});return i}),define("plex/control/Router",["plex/control/Dispatcher","plex/model/AppModel","plex/model/SettingsModel","plex/model/HeaderModel","plex/model/media/DetailsModel","plex/model/media/PlaylistItemModel","plex/model/ChannelModel","plex/model/media/ClipModel","plex/model/collections/SearchProviderCollection","plex/model/collections/ChannelCollection","plex/model/media/collections/MediaCollection","plex/model/media/collections/EpisodeCollection","plex/view/AppView","plex/view/DashboardView","plex/view/setup/SetupView","plex/view/myplex/FriendsView","plex/view/myplex/PlaylistView","plex/view/SearchView","plex/view/server/settings/SettingsView","plex/view/server/NotificationsView","plex/view/server/SyncStatusView","plex/view/server/NowPlayingView","plex/view/section/SectionView","plex/view/section/SectionFolderView","plex/view/details/DetailsView","plex/view/edit/EditView","plex/view/players/VideoPlayerView","plex/view/channels/MyChannelsView","plex/view/channels/ChannelDirectoryView","plex/view/channels/ChannelView","plex/view/ErrorView","plex/view/LoginView","plex/view/UnsupportedBrowserView","plex/view/InfoView","plex/view/LogView","jquery","backbone"],function(e,t,n,i,a,s,r,l,o,c,d,h,u,p,m,f,v,g,y,b,w,x,k,S,C,A,I,P,T,M,D,L,E,N,O,R){var $=t.get("servers"),B=function(t){return t.get("shared")?(e.trigger("navigate:error","This page is only available for your media servers."),!1):!0
},j=function(){"undefined"!=typeof _gaq&&(_gaq.push(["_setCustomVar",1,"Version",t.get("version"),2]),_gaq.push(["_setCustomVar",2,"PMS Version",t.get("primaryServer").get("version"),2]),_gaq.push(["_setCustomVar",3,"Shared",t.get("primaryServer").get("shared"),2]))},V=Backbone.Router.extend({history:0,currentFragment:null,previousFragment:null,routes:{"":"empty","!/dashboard":"dashboard","!/setup":"setup","!/friends":"friends","!/playlist/:playlistName":"playlist","!/playlist/:playlistName/details/:itemID":"playlistItem","!/playlist/:playlistName/player/:itemID":"playlistPlayer","!/search/:query":"search","!/settings/:serverID":"settings","!/settings":"settings","!/notifications/:serverID":"notifications","!/notifications":"notifications","!/sync/:serverID":"sync","!/sync":"sync","!/nowplaying/:serverID":"nowplaying","!/nowplaying":"nowplaying","!/servers/:serverID/sections/add":"addSection","!/servers/:serverID/sections/:sectionID/details/:mediaID":"details","!/servers/:serverID/sections/:sectionID/edit/:mediaID":"edit","!/servers/:serverID/sections/:sectionID/player/:mediaID?offset=:offset":"player","!/servers/:serverID/sections/:sectionID/player/:mediaID":"player","!/servers/:serverID/sections/:sectionID/folder?key=:folderID":"sectionFolder","!/servers/:serverID/sections/:sectionID/folder":"sectionFolder","!/servers/:serverID/sections/:sectionID/:subset":"sectionSubset","!/servers/:serverID/sections/:sectionID":"section","!/channels/:serverID":"myChannels","!/channels":"myChannels","!/directory?filter=:filter&key=:key":"directory","!/directory?filter=:filter":"directory","!/directory/:serverID":"directoryByServer","!/directory":"directory","!/servers/:serverID/channels?key=:key&path=:path":"channel","!/servers/:serverID/channels?key=:key":"channel","!/servers/:serverID/channels?identifier=:identifier&path=:path":"channelByIdentifier","!/servers/:serverID/channels?identifier=:identifier":"channelByIdentifier","!/servers/:serverID/channels/details?key=:key&path=:path":"channelDetails","!/servers/:serverID/channels/details?identifier=:identifier&path=:path":"channelDetailsByIdentifier","!/servers/:serverID/channels/details?path=:path":"channelStandaloneDetails","!/servers/:serverID/channels/player?key=:key&path=:path":"channelPlayer","!/servers/:serverID/channels/player?identifier=:identifier&path=:path":"channelPlayerByIdentifier","!/servers/:serverID/channels/player?path=:path&offset=:offset":"channelStandalonePlayer","!/servers/:serverID/channels/player?path=:path":"channelStandalonePlayer","!/login":"login","!/unsupported":"unsupported","!/info":"info","!/logs":"logs","*404":"error"},authExemptRoutes:["empty","login","unsupported","info","logs","error"],historyExemptRoutes:["empty","login","unsupported"],trackingExemptRoutes:["empty"],initialize:function(){var n;
t.on("change:modal",function(e,t){t.name&&this.track(t.name)},this),n=this.trackingExemptRoutes.slice(0),n.unshift(_.uniq(_.values(this.routes)));var i=_.without.apply(_,n);_.each(i,function(e){this[e]=_.wrap(this[e],function(t){this.track("route:"+e),t.apply(this,_.toArray(arguments).slice(1))})},this),n=this.authExemptRoutes.slice(0),n.unshift(_.uniq(_.values(this.routes)));var a=_.without.apply(_,n);_.each(a,function(e){this[e]=_.wrap(this[e],function(e){this.checkAuthorization()&&e.apply(this,_.toArray(arguments).slice(1))
})},this),this._bindRoutes(),this.on("all",_.bind(function(){this.previousFragment=this.currentFragment,this.currentFragment=Backbone.history.fragment},this)),e.on("navigate:back",this.onNavigateBack,this),e.on("navigate:redirect",this.onNavigateRedirect,this),e.on("navigate:dashboard",this.onNavigateDashboard,this),e.on("navigate:setup",this.onNavigateSetup,this),e.on("navigate:friends",this.onNavigateFriends,this),e.on("navigate:playlist",this.onNavigatePlaylist,this),e.on("navigate:playlistItem",this.onNavigatePlaylistItem,this),e.on("navigate:playlistPlayer",this.onNavigatePlaylistPlayer,this),e.on("navigate:search",this.onNavigateSearch,this),e.on("navigate:settings",this.onNavigateSettings,this),e.on("navigate:notifications",this.onNavigateNotifications,this),e.on("navigate:sync",this.onNavigateSync,this),e.on("navigate:nowplaying",this.onNavigateNowPlaying,this),e.on("navigate:section",this.onNavigateSection,this),e.on("navigate:sectionSubset",this.onNavigateSectionSubset,this),e.on("navigate:sectionFolder",this.onNavigateSectionFolder,this),e.on("navigate:details",this.onNavigateDetails,this),e.on("navigate:edit",this.onNavigateEdit,this),e.on("navigate:player",this.onNavigatePlayer,this),e.on("navigate:myChannels",this.onNavigateMyChannels,this),e.on("navigate:directory",this.onNavigateChannelDirectory,this),e.on("navigate:channel",this.onNavigateChannel,this),e.on("navigate:channelByIdentifier",this.onNavigateChannelByIdentifier,this),e.on("navigate:channelSearch",this.onNavigateChannelSearch,this),e.on("navigate:channelSearchByIdentifier",this.onNavigateChannelSearchByIdentifier,this),e.on("navigate:channelDetails",this.onNavigateChannelDetails,this),e.on("navigate:channelDetailsByIdentifier",this.onNavigateChannelDetailsByIdentifier,this),e.on("navigate:channelStandaloneDetails",this.onNavigateChannelStandaloneDetails,this),e.on("navigate:channelPlayer",this.onNavigateChannelPlayer,this),e.on("navigate:channelPlayerByIdentifier",this.onNavigateChannelPlayerByIdentifier,this),e.on("navigate:channelStandalonePlayer",this.onNavigateChannelStandalonePlayer,this),e.on("navigate:login",this.onNavigateLogin,this),e.on("navigate:unsupported",this.onNavigateUnsupported,this),e.on("navigate:error",this.onNavigateError,this),e.on("navigate:info",this.onNavigateInfo,this),e.on("navigate:logs",this.onNavigateLogs,this),(new u).render(),e.trigger("command:ShowLoading",!0);
var s=_.once(function(){j(),e.trigger("command:ShowLoading",!1),Backbone.history.start()});t.get("initialized")===!0?s():t.on("change:initialized",s)},track:function(e){return/^route:/.test(e)&&(e=e.replace("route:",""),-1===_.indexOf(this.historyExemptRoutes,e)&&(this.history++,i.set("showBack",this.history>1))),_.isString(e)&&"undefined"!=typeof _gaq?_gaq.push(["_trackPageview","/"+e]):void 0},checkAuthorization:function(){var n=t.get("myPlex");return t.get("isAuthorized")?!0:n.get("isUnavailable")?(e.trigger("navigate:error","myPlex is down for maintenance."),!1):t.get("isUnsupported")?(e.trigger("navigate:unsupported"),!1):(e.trigger("navigate:login"),!1)
},empty:function(){e.trigger("navigate:dashboard")},dashboard:function(){i.reset("dashboard"),t.set("view",new p({collection:$}))},setup:function(){i.reset(),t.set("view",new m({model:t.get("primaryServer")}))},friends:function(){i.reset();var n=t.get("myPlex"),a=n.get("friends"),s=n.get("friendRequests");return n.get("signedIn")?(a.fetch().done(function(){t.set("view",new f({collection:a,requests:s}))}).fail(function(t,n){e.trigger("navigate:error","Please sign in to myPlex to access your friends.",n)
}),void 0):(e.trigger("navigate:login"),void 0)},playlist:function(n){i.reset();var a=t.get("myPlex"),s=a.get("playlists")[n];return a.get("signedIn")?(s.fetch().done(function(){t.set("view",new v({collection:s}))}).fail(function(t,n){e.trigger("navigate:error","Please sign in to myPlex to access your playlists.",n)}),void 0):(e.trigger("navigate:login"),void 0)},playlistItem:function(n,a){i.reset();var r=t.get("myPlex"),l=new s({id:a},{server:t.get("myPlex"),playlistName:n});return r.get("signedIn")?(l.fetch().done(function(){t.set("view",new C({model:l}))
}).fail(function(t,n){e.trigger("navigate:error","Please sign in to myPlex to access your playlists.",n)}),void 0):(e.trigger("navigate:login"),void 0)},playlistPlayer:function(n,a){i.reset();var r=t.get("myPlex"),l=new s({id:a},{server:t.get("myPlex"),playlistName:n});return r.get("signedIn")?(l.fetch().done(function(){t.set("view",new I({model:l}))}).fail(function(t,n){e.trigger("navigate:error","Please sign in to myPlex to access your playlists.",n)}),void 0):(e.trigger("navigate:login"),void 0)
},search:function(a){var s=t.get("primaryServer"),r=[],l=[],c=[],h=!1,u=!1;i.set({activeSearch:decodeURIComponent(a),activeServer:null,activeSection:null,activeMedia:null,activeChannel:null,activeChannelMedia:null}),$.each(function(e){return e.get("remote")&&!n.get("remoteSearch")?(h=!0,void 0):(c.push(e.populate().done(function(){if(!e.supports("search"))return u=!0,void 0;var t=new d([],{server:e,url:"/search?local=1&query="+a});if(l.push(t),e.id===s.id&&n.get("channelSearch")){c.push(t.fetch());
var i=new o([],{server:e});r.push(i)}var h=new d([],{server:e,url:"/search?type=10&query="+a});l.push(h)})),void 0)}),R.when.apply(R,c).always(function(){l.length?t.set("view",new g({query:decodeURIComponent(a),providers:r,collections:l})):u?e.trigger("navigate:error","Search requires Plex Media Server 0.9.7.0 or later."):h?e.trigger("navigate:error","Search remote libraries is disabled."):e.trigger("navigate:error","This media server is currently unavailable.")})},settings:function(n){i.reset("settings"),n?this.populateActiveObjects(n).done(function(e){t.set("view",new y({model:e.activeServer}))
}).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)}):t.set("view",new y({model:t.get("primaryServer")}))},notifications:function(n){if(i.reset("activity"),n)this.populateActiveObjects(n).done(function(e){B(e.activeServer)&&t.set("view",new b({model:e.activeServer}))}).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)});else{var a=t.get("primaryServer");B(a)&&t.set("view",new b({model:a}))}},sync:function(n){if(i.reset("activity"),n)this.populateActiveObjects(n).done(function(e){B(e.activeServer)&&t.set("view",new w({model:e.activeServer}))
}).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)});else{var a=t.get("primaryServer");B(a)&&t.set("view",new w({model:a}))}},nowplaying:function(n){if(i.reset("activity"),n)this.populateActiveObjects(n).done(function(e){B(e.activeServer)&&t.set("view",new x({model:e.activeServer,collection:e.activeServer.get("sessions")}))}).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)});else{var a=t.get("primaryServer");
B(a)&&t.set("view",new x({model:a,collection:a.get("sessions")}))}},section:function(n,a){this.populateActiveObjects(n,decodeURIComponent(a)).done(function(e){i.set(e),t.set("view",new k({model:e.activeSection}))}).fail(function(t,n){e.trigger("navigate:error","This section is currently unavailable.",n)})},sectionSubset:function(n,a,s){this.populateActiveObjects(n,decodeURIComponent(a)).done(function(e){i.set(e),t.set("view",new k({model:e.activeSection,subset:s}))}).fail(function(t,n){e.trigger("navigate:error","This channel is currently unavailable.",n)
})},sectionFolder:function(n,a,s){this.populateActiveObjects(n,decodeURIComponent(a)).done(function(e){i.set(e),t.set("view",new S({model:e.activeSection,folderID:s}))}).fail(function(t,n){e.trigger("navigate:error","This channel is currently unavailable.",n)})},details:function(n,a,s){this.populateActiveObjects(n,decodeURIComponent(a),s).done(function(e){i.set(e),t.set("view",new C({model:e.activeMedia.get("media")}))}).fail(function(t,n){e.trigger("navigate:error","This media is currently unavailable.",n)
})},edit:function(n,a,s){this.populateActiveObjects(n,decodeURIComponent(a),s).done(function(e){i.set(e),B(e.activeServer)&&t.set("view",new A({model:e.activeMedia.get("media")}))}).fail(function(t,n){e.trigger("navigate:error","This media is currently unavailable.",n)})},player:function(n,a,s,r){this.populateActiveObjects(n,decodeURIComponent(a),s).done(function(e){function n(){var e={model:s,offset:parseInt(r,10)};a&&a.length&&(e.collection=a),t.set("view",new I(e))}i.set(e);var a,s=e.activeMedia.get("media"),l=s.get("parentKey");
l?(a=new h([],{server:e.activeServer,section:e.activeSection,url:l+"/children"}),a.fetch().done(n)):n()}).fail(function(t,n){e.trigger("navigate:error","This media is currently unavailable.",n)})},myChannels:function(n){if(i.reset(),n)this.populateActiveObjects(n).done(function(e){B(e.activeServer)&&t.set("view",new P({collection:e.activeServer.get("channels")}))}).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)});else{var a=t.get("primaryServer");B(a)&&t.set("view",new P({collection:a.get("channels")}))
}},directory:function(n,a){i.reset();var s=t.get("primaryServer");if(n&&(n=decodeURIComponent(n)),a&&(a=decodeURIComponent(a)),B(s)){var r=new c([],{server:s,url:"system/appstore"});r.fetch().done(function(){t.set("view",new T({collection:r,activeFilter:n,activeKey:a}))}).fail(function(t,n){e.trigger("navigate:error","The channel directory is currently unavailable.",n)})}},directoryByServer:function(n){i.reset();var a=function(n){if(B(n)){var i=new c([],{server:n,url:"system/appstore"});i.fetch().done(function(){t.set("view",new T({collection:i}))
}).fail(function(t,n){e.trigger("navigate:error","The channel directory is currently unavailable.",n)})}};n?this.populateActiveObjects(n).done(function(e){a(e.activeServer)}).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)}):a(t.get("primaryServer"))},channel:function(n,a,s){this.populateActiveObjects(n).done(_.bind(function(e){this.populateChannelObjects({server:e.activeServer,key:a,path:s}).done(function(n){e.activeChannel=n.channel,e.activeChannelMedia=n.channelMedia,i.set(e),t.set("view",new M({channel:n.channel,model:n.channelMedia?n.channelMedia:n.channel}))
})},this)).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)})},channelByIdentifier:function(n,a,s){this.populateActiveObjects(n).done(_.bind(function(e){this.populateChannelObjects({server:e.activeServer,identifier:a,path:s}).done(function(n){e.activeChannel=n.channel,e.activeChannelMedia=n.channelMedia,i.set(e),t.set("view",new M({channel:n.channel,model:n.channelMedia?n.channelMedia:n.channel}))})},this)).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)
})},channelDetails:function(n,a,s){this.populateActiveObjects(n).done(_.bind(function(e){this.populateChannelObjects({server:e.activeServer,key:a,path:s,ChannelConstructor:l}).done(function(n){e.activeChannel=n.channel,e.activeChannelMedia=n.channelMedia,i.set(e),t.set("view",new C({model:n.channelMedia}))})},this)).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)})},channelDetailsByIdentifier:function(n,a,s){this.populateActiveObjects(n).done(_.bind(function(e){this.populateChannelObjects({server:e.activeServer,identifier:a,path:s,ChannelConstructor:l}).done(function(n){e.activeChannel=n.channel,e.activeChannelMedia=n.channelMedia,i.set(e),t.set("view",new C({model:n.channelMedia}))
})},this)).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)})},channelStandaloneDetails:function(n,a){this.populateActiveObjects(n).done(_.bind(function(e){this.populateChannelObjects({server:e.activeServer,path:a,ChannelConstructor:l}).done(function(n){e.activeChannelMedia=n.channelMedia,i.set(e),t.set("view",new C({model:n.channelMedia}))})},this)).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)})},channelPlayer:function(n,a,s){this.populateActiveObjects(n).done(_.bind(function(e){this.populateChannelObjects({server:e.activeServer,key:a,path:s,ChannelConstructor:l}).done(function(n){e.activeChannel=n.channel,e.activeChannelMedia=n.channelMedia,i.set(e),t.set("view",new I({model:n.channelMedia}))
})},this)).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)})},channelPlayerByIdentifier:function(n,a,s){this.populateActiveObjects(n).done(_.bind(function(e){this.populateChannelObjects({server:e.activeServer,identifier:a,path:s,ChannelConstructor:l}).done(function(n){e.activeChannel=n.channel,e.activeChannelMedia=n.channelMedia,i.set(e),t.set("view",new I({model:n.channelMedia}))})},this)).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)
})},channelStandalonePlayer:function(n,a,s){this.populateActiveObjects(n).done(_.bind(function(e){this.populateChannelObjects({server:e.activeServer,path:a,ChannelConstructor:l}).done(function(n){e.activeChannelMedia=n.channelMedia,i.set(e),t.set("view",new I({model:n.channelMedia,offset:s}))})},this)).fail(function(t,n){e.trigger("navigate:error","This media server is currently unavailable.",n)})},login:function(){i.reset(),t.set("view",new L)},unsupported:function(){i.reset(),t.set("view",new E)
},error:function(e,n,a){i.reset(),n=n||"This page doesn't exist... yet.",t.set("view",new D({message:n,error:a}))},info:function(){i.reset(),t.set("view",new N)},logs:function(){i.reset(),t.set("view",new O)},onNavigateBack:function(){this.history>1?(this.history-=2,window.history.back()):(this.history=0,e.trigger("navigate:dashboard"))},onNavigateRedirect:function(e){this.previousFragment&&window.history.replaceState&&window.history.replaceState(null,document.title,"#"+this.previousFragment),window.location=e
},onNavigateDashboard:function(){this.navigate("!/dashboard",{trigger:!0})},onNavigateSetup:function(){this.navigate("!/setup",{trigger:!0})},onNavigateFriends:function(){this.navigate("!/friends",{trigger:!0})},onNavigatePlaylist:function(e){this.navigate("!/playlist/"+e,{trigger:!0})},onNavigatePlaylistItem:function(e,t){this.navigate("!/playlist/"+e+"/details/"+t,{trigger:!0})},onNavigatePlaylistPlayer:function(e,t){this.navigate("!/playlist/"+e+"/player/"+t,{trigger:!0})},onNavigateSearch:function(e){this.navigate("!/search/"+encodeURIComponent(e),{trigger:!0})
},onNavigateSettings:function(e){var t="!/settings";e&&(t+="/"+e),this.navigate(t,{trigger:!0})},onNavigateNotifications:function(e){var t="!/notifications";e&&(t+="/"+e),this.navigate(t,{trigger:!0})},onNavigateSync:function(e){var t="!/sync";e&&(t+="/"+e),this.navigate(t,{trigger:!0})},onNavigateNowPlaying:function(e){var t="!/nowplaying";e&&(t+="/"+e),this.navigate(t,{trigger:!0})},onNavigateSection:function(e,t){this.navigate("!/servers/"+e+"/sections/"+t,{trigger:!0})},onNavigateSectionSubset:function(e,t,n){this.navigate("!/servers/"+e+"/sections/"+t+"/"+n,{trigger:!0})
},onNavigateSectionFolder:function(e,t){this.navigate("!/servers/"+e+"/sections/"+t+"/folder",{trigger:!0})},onNavigateDetails:function(e,t,n){this.navigate("!/servers/"+e+"/sections/"+t+"/details/"+n,{trigger:!0})},onNavigateEdit:function(e,t,n){this.navigate("!/servers/"+e+"/sections/"+t+"/edit/"+n,{trigger:!0})},onNavigatePlayer:function(e,t,n,i){var a="!/servers/"+e+"/sections/"+t+"/player/"+n;i&&(a+="?offset="+i),this.navigate(a,{trigger:!0})},onNavigateMyChannels:function(e){var t="!/channels";
e&&(t+="/"+e),this.navigate(t,{trigger:!0})},onNavigateChannelDirectory:function(e){var t="!/directory";e&&(t+="/"+e),this.navigate(t,{trigger:!0})},onNavigateChannel:function(e,t,n){var i="!/servers/"+e+"/channels?key="+encodeURIComponent(t);n&&(i+="&path="+encodeURIComponent(n)),this.navigate(i,{trigger:!0})},onNavigateChannelByIdentifier:function(e,t,n){var i="!/servers/"+e+"/channels?identifier="+t;n&&(i+="&path="+encodeURIComponent(n)),this.navigate(i,{trigger:!0})},onNavigateChannelSearch:function(e,t,n,i){n+=n.indexOf("?")>0?"&":"?",n+="query="+i,this.navigate("!/servers/"+e+"/channels?key="+encodeURIComponent(t)+"&path="+encodeURIComponent(n),{trigger:!0})
},onNavigateChannelSearchByIdentifier:function(e,t,n,i){n+=n.indexOf("?")>0?"&":"?",n+="query="+i,this.navigate("!/servers/"+e+"/channels?identifier="+encodeURIComponent(t)+"&path="+encodeURIComponent(n),{trigger:!0})},onNavigateChannelDetails:function(e,t,n){this.navigate("!/servers/"+e+"/channels/details?key="+encodeURIComponent(t)+"&path="+encodeURIComponent(n),{trigger:!0})},onNavigateChannelDetailsByIdentifier:function(e,t,n){this.navigate("!/servers/"+e+"/channels/details?identifier="+t+"&path="+encodeURIComponent(n),{trigger:!0})
},onNavigateChannelStandaloneDetails:function(e,t){this.navigate("!/servers/"+e+"/channels/details?path="+encodeURIComponent(t),{trigger:!0})},onNavigateChannelPlayer:function(e,t,n){this.navigate("!/servers/"+e+"/channels/player?key="+encodeURIComponent(t)+"&path="+encodeURIComponent(n),{trigger:!0})},onNavigateChannelPlayerByIdentifier:function(e,t,n){this.navigate("!/servers/"+e+"/channels/player?identifier="+t+"&path="+encodeURIComponent(n),{trigger:!0})},onNavigateChannelStandalonePlayer:function(e,t,n){var i="!/servers/"+e+"/channels/player?path="+encodeURIComponent(t);
n&&(i+="&offset="+n),this.navigate(i,{trigger:!0})},onNavigateLogin:function(){this.navigate("!/login",{trigger:!0})},onNavigateUnsupported:function(){this.navigate("!/unsupported",{trigger:!0})},onNavigateError:function(e,t){this.error("",e,t)},onNavigateInfo:function(){this.navigate("!/info",{trigger:!0})},onNavigateLogs:function(){this.navigate("!/logs",{trigger:!0})},populateActiveObjects:function(e,t,n){var i={activeView:"",activeSearch:"",activeServer:null,activeSection:null,activeMedia:null,activeChannel:null,activeChannelMedia:null},s=$.populate().pipe(function(n){return i.activeServer=n.get(e),i.activeServer?t?i.activeServer.get("sections").populate():i:R.Deferred().reject(i)
});return t&&(s=s.pipe(function(e){if(i.activeSection=e.get(t),!i.activeSection)return R.Deferred().reject(i);if(!n)return i;var s=new a({ratingKey:n},{server:i.activeServer,section:i.activeSection});return s.fetch({timeout:4e4})})),n&&(s=s.pipe(function(e){return i.activeMedia=e,i.activeMedia?i:R.Deferred().reject(i)})),s.promise()},populateChannelObjects:function(t){var n,i,a=R.Deferred(),s=[],l={};if((t.key||t.identifier)&&(t.key?l.key=decodeURIComponent(t.key):t.identifier&&(l.identifier=t.identifier),n=new r(l,{server:t.server}),n.get("noCache")?s.push(n.fetch()):s.push(n.populate())),t.path){var o=t.ChannelConstructor||r;
i=new o({key:decodeURIComponent(t.path)},{server:t.server,channel:n}),i.get("noCache")?s.push(i.fetch({timeout:4e4})):s.push(i.populate({timeout:4e4}))}return R.when.apply(R,s).done(function(){a.resolve({channel:n,channelMedia:i})}).fail(function(t,n){e.trigger("navigate:error","This channel is currently unavailable.",n),a.reject()}),a}});return V}),FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"label":case"video":return!0;
default:return/\bneedsclick\b/.test(e.className)}},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":case"select":return!0;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!0;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent("click",!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)
},FastClick.prototype.onTouchStart=function(e){var t=e.targetTouches[0];return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=e.target,this.touchStartX=t.pageX,this.touchStartY=t.pageY,200>e.timeStamp-this.lastClickTime&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var t=e.targetTouches[0];return Math.abs(t.pageX-this.touchStartX)>10||Math.abs(t.pageY-this.touchStartY)>10?!0:!1},FastClick.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==e.target||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0
},FastClick.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var t,n,i=this.targetElement,a=e.changedTouches[0];if(!this.trackingClick)return!0;if(this.deviceIsIOS){if(a.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=a.identifier}if(200>e.timeStamp-this.lastClickTime)return this.cancelNextClick=!0,!0;
if(this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,"label"===i.nodeName.toLowerCase()){if(t=this.findControl(i))return i.focus(),this.deviceIsAndroid?!1:(this.needsClick(t)||(e.preventDefault(),this.sendClick(t,e)),!1)}else if(this.needsFocus(i))return e.timeStamp-n>100?(this.targetElement=null,!0):(i.focus(),this.deviceIsIOS4&&"select"===i.tagName.toLowerCase()||(this.targetElement=null,e.preventDefault()),!1);return this.needsClick(i)||(e.preventDefault(),this.sendClick(i,e)),!1
},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onClick=function(e){var t;return this.targetElement?e.forwardedTouchEvent?!0:(t=this.targetElement,this.targetElement=null,this.trackingClick?(this.trackingClick=!1,!0):e.cancelable?"submit"===e.target.type&&0===e.detail?!0:!this.needsClick(t)||this.cancelNextClick?(this.cancelNextClick=!1,e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0):!0
},FastClick.prototype.destroy=function(){var e=this.layer;e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},define!==void 0&&define.amd&&define("fastclick",[],function(){return FastClick}),"undefined"!=typeof module&&module.exports&&(module.exports=function(e){return new FastClick(e)
},module.exports.FastClick=FastClick),define("plex/app",["plex/control/utils/LocalizationUtil","plex/control/init/GlobalInit","plex/control/Router","fastclick"],function(e,t,n,i){return{init:function(){new i(document.body),e.load().always(function(){new n})}}}),require.config({baseUrl:"js",templatePathPrefix:"app/",paths:{text:"libs/require/text-2.0.5",hb:"libs/require/hb-precompile",templates:"../templates",jquery:"libs/jquery/jquery-1.8.0",xml2json:"libs/jquery/jquery.xml2json",lazyload:"libs/jquery/jquery.lazyload",sortable:"libs/jquery/jquery.sortable",select2:"libs/select2-3.2",underscore:"libs/underscore-1.4.2",backbone:"libs/backbone-0.9.2",handlebars:"libs/handlebars-1.0.0-rc.3",modernizr:"libs/modernizr-2.6.2-css3dtransform",moment:"libs/moment-1.7.0",base64:"libs/base64",sha256:"libs/jssha256-0.1",soundmanagerdefer:"libs/soundmanager/soundmanager2-defer",soundmanager:"libs/soundmanager/soundmanager2-nodebug",jwplayer:"libs/jwplayer-6.3",swfobject:"libs/swfobject-2.2",spincore:"libs/spin-1.2.5",spin:"libs/jquery/jquery.spin",fastclick:"libs/fastclick-0.4.6",mousetrap:"libs/mousetrap-1.3.2",transition:"libs/bootstrap/bootstrap-transition",button:"libs/bootstrap/bootstrap-button",tooltip:"libs/bootstrap/bootstrap-tooltip",dropdown:"libs/bootstrap/bootstrap-dropdown",modal:"libs/bootstrap/bootstrap-modal"},shim:{underscore:[],backbone:["jquery","underscore"],handlebars:{exports:"Handlebars"},hb:["handlebars"],xml2json:["jquery"],lazyload:["jquery"],sortable:["jquery"],select2:["jquery"],modernizr:[],moment:[],base64:[],sha256:[],soundmanagerdefer:[],soundmanager:["soundmanagerdefer"],jwplayer:[],swfobject:[],spincore:[],spin:["jquery","spincore"],transition:["jquery"],button:["jquery"],dropdown:["jquery"],modal:["jquery"],tooltip:["jquery"]}}),require(["plex/app"],function(e){e.init()
}),define("main",function(){});